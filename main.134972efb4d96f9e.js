"use strict";(self.webpackChunkoffice_buddy=self.webpackChunkoffice_buddy||[]).push([[179],{2011:(pt,Re,N)=>{N.d(Re,{Dh:()=>me,GT:()=>ve,Ot:()=>re,cc:()=>Ae,hO:()=>Ne,on:()=>K,pX:()=>ge,xv:()=>ye});var l=N(4650),$=N(127),F=N(880);pt=N.hmd(pt);const se=["ngOnDestroy"],ge=(de,ct,Qe,Fe={})=>new Proxy(de,{get:(Pe,Ie)=>Qe.runOutsideAngular(()=>{var Ze;if(de[Ie])return!(null===(Ze=Fe?.spy)||void 0===Ze)&&Ze.get&&Fe.spy.get(Ie,de[Ie]),de[Ie];if(se.indexOf(Ie)>-1)return()=>{};const ne=ct.toPromise().then(ce=>{const Ee=ce&&ce[Ie];return"function"==typeof Ee?Ee.bind(ce):Ee&&Ee.then?Ee.then(J=>Qe.run(()=>J)):Qe.run(()=>Ee)});return new Proxy(()=>{},{get:(ce,Ee)=>ne[Ee],apply:(ce,Ee,J)=>ne.then(ee=>{var he;const le=ee&&ee(...J);return!(null===(he=Fe?.spy)||void 0===he)&&he.apply&&Fe.spy.apply(Ie,J,le),le})})})}),ve=(de,ct)=>{ct.forEach(Qe=>{Object.getOwnPropertyNames(Qe.prototype||Qe).forEach(Fe=>{Object.defineProperty(de.prototype,Fe,Object.getOwnPropertyDescriptor(Qe.prototype||Qe,Fe))})})};class re{constructor(ct){return ct}}const me=new l.OlP("angularfire2.app.options"),ye=new l.OlP("angularfire2.app.name");function K(de,ct,Qe){const Pe="object"==typeof Qe&&Qe||{};Pe.name=Pe.name||"string"==typeof Qe&&Qe||"[DEFAULT]";const Ze=$.Z.apps.filter(ne=>ne&&ne.name===Pe.name)[0]||ct.runOutsideAngular(()=>$.Z.initializeApp(de,Pe));try{JSON.stringify(de)!==JSON.stringify(Ze.options)&&q("error",`${Ze.name} Firebase App already initialized with different options${pt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new re(Ze)}const q=(de,...ct)=>{(0,l.X6Q)()&&typeof console<"u"&&console[de](...ct)},X={provide:re,useFactory:K,deps:[me,l.R0b,[new l.FiY,ye]]};let Ne=(()=>{class de{constructor(Qe){$.Z.registerVersion("angularfire",F.q4.full,"core"),$.Z.registerVersion("angularfire",F.q4.full,"app-compat"),$.Z.registerVersion("angular",l.q4F.full,Qe.toString())}static initializeApp(Qe,Fe){return{ngModule:de,providers:[{provide:me,useValue:Qe},{provide:ye,useValue:Fe}]}}}return de.\u0275fac=function(Qe){return new(Qe||de)(l.LFG(l.Lbi))},de.\u0275mod=l.oAB({type:de}),de.\u0275inj=l.cJS({providers:[X]}),de})();function Ae(de,ct,Qe,Fe,Pe){const[,Ie,Ze]=globalThis.\u0275AngularfireInstanceCache.find(ne=>ne[0]===de)||[];if(Ie)return function Te(de,ct){try{return de.toString()===ct.toString()}catch{return de===ct}}(Pe,Ze)||(Ce("error",`${ct} was already initialized on the ${Qe} Firebase App with different settings.${et?" You may need to reload as Firebase is not HMR aware.":""}`),Ce("warn",{is:Pe,was:Ze})),Ie;{const ne=Fe();return globalThis.\u0275AngularfireInstanceCache.push([de,ne,Pe]),ne}}const et=!!pt.hot,Ce=(de,...ct)=>{(0,l.X6Q)()&&typeof console<"u"&&console[de](...ct)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},880:(pt,Re,N)=>{N.d(Re,{q4:()=>Vo,iC:()=>Gr,HU:()=>Ca,vb:()=>xh,JM:()=>Du,nk:()=>si,u3:()=>$t});var l=N(4650),$=N(5867),F=N(5861),se=N(9681),ge=N(2090),ve=N(4859),re=N(1877);N(2833);const ye="@firebase/remote-config",K="0.3.13",Ae=new ge.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class yt{constructor(B,Q,pe,Ue){this.client=B,this.storage=Q,this.storageCache=pe,this.logger=Ue}isCachedDataFresh(B,Q){if(!Q)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const pe=Date.now()-Q,Ue=pe<=B;return this.logger.debug(`Config fetch cache check. Cache age millis: ${pe}. Cache max age millis (minimumFetchIntervalMillis setting): ${B}. Is cache hit: ${Ue}.`),Ue}fetch(B){var Q=this;return(0,F.Z)(function*(){const[pe,Ue]=yield Promise.all([Q.storage.getLastSuccessfulFetchTimestampMillis(),Q.storage.getLastSuccessfulFetchResponse()]);if(Ue&&Q.isCachedDataFresh(B.cacheMaxAgeMillis,pe))return Ue;B.eTag=Ue&&Ue.eTag;const Xe=yield Q.client.fetch(B),Dt=[Q.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Xe.status&&Dt.push(Q.storage.setLastSuccessfulFetchResponse(Xe)),yield Promise.all(Dt),Xe})()}}function ln(H=navigator){return H.languages&&H.languages[0]||H.language}class Nt{constructor(B,Q,pe,Ue,Xe,Dt){this.firebaseInstallations=B,this.sdkVersion=Q,this.namespace=pe,this.projectId=Ue,this.apiKey=Xe,this.appId=Dt}fetch(B){var Q=this;return(0,F.Z)(function*(){var pe,Ue,Xe;const[Dt,en]=yield Promise.all([Q.firebaseInstallations.getId(),Q.firebaseInstallations.getToken()]),Ft=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${Q.projectId}/namespaces/${Q.namespace}:fetch?key=${Q.apiKey}`,oi={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":B.eTag||"*"},jt={sdk_version:Q.sdkVersion,app_instance_id:Dt,app_instance_id_token:en,app_id:Q.appId,language_code:ln()},Yn={method:"POST",headers:oi,body:JSON.stringify(jt)},po=fetch(Ft,Yn),mo=new Promise((Bo,Wr)=>{B.signal.addEventListener(()=>{const Ci=new Error("The operation was aborted.");Ci.name="AbortError",Wr(Ci)})});let Ki;try{yield Promise.race([po,mo]),Ki=yield po}catch(Bo){let Wr="fetch-client-network";throw"AbortError"===(null===(pe=Bo)||void 0===pe?void 0:pe.name)&&(Wr="fetch-timeout"),Ae.create(Wr,{originalErrorMessage:null===(Ue=Bo)||void 0===Ue?void 0:Ue.message})}let js=Ki.status;const al=Ki.headers.get("ETag")||void 0;let ac,go;if(200===Ki.status){let Bo;try{Bo=yield Ki.json()}catch(Wr){throw Ae.create("fetch-client-parse",{originalErrorMessage:null===(Xe=Wr)||void 0===Xe?void 0:Xe.message})}ac=Bo.entries,go=Bo.state}if("INSTANCE_STATE_UNSPECIFIED"===go?js=500:"NO_CHANGE"===go?js=304:("NO_TEMPLATE"===go||"EMPTY_CONFIG"===go)&&(ac={}),304!==js&&200!==js)throw Ae.create("fetch-status",{httpStatus:js});return{status:js,eTag:al,config:ac}})()}}class Zn{constructor(B,Q){this.client=B,this.storage=Q}fetch(B){var Q=this;return(0,F.Z)(function*(){const pe=(yield Q.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return Q.attemptFetch(B,pe)})()}attemptFetch(B,{throttleEndTimeMillis:Q,backoffCount:pe}){var Ue=this;return(0,F.Z)(function*(){yield function Ke(H,B){return new Promise((Q,pe)=>{const Ue=Math.max(B-Date.now(),0),Xe=setTimeout(Q,Ue);H.addEventListener(()=>{clearTimeout(Xe),pe(Ae.create("fetch-throttle",{throttleEndTimeMillis:B}))})})}(B.signal,Q);try{const Xe=yield Ue.client.fetch(B);return yield Ue.storage.deleteThrottleMetadata(),Xe}catch(Xe){if(!function vn(H){if(!(H instanceof ge.ZR&&H.customData))return!1;const B=Number(H.customData.httpStatus);return 429===B||500===B||503===B||504===B}(Xe))throw Xe;const Dt={throttleEndTimeMillis:Date.now()+(0,ge.$s)(pe),backoffCount:pe+1};return yield Ue.storage.setThrottleMetadata(Dt),Ue.attemptFetch(B,Dt)}})()}}class Gt{constructor(B,Q,pe,Ue,Xe){this.app=B,this._client=Q,this._storageCache=pe,this._storage=Ue,this._logger=Xe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function St(H,B){var Q;const pe=H.target.error||void 0;return Ae.create(B,{originalErrorMessage:pe&&(null===(Q=pe)||void 0===Q?void 0:Q.message)})}const xn="app_namespace_store";class fi{constructor(B,Q,pe,Ue=function qn(){return new Promise((H,B)=>{var Q;try{const pe=indexedDB.open("firebase_remote_config",1);pe.onerror=Ue=>{B(St(Ue,"storage-open"))},pe.onsuccess=Ue=>{H(Ue.target.result)},pe.onupgradeneeded=Ue=>{0===Ue.oldVersion&&Ue.target.result.createObjectStore(xn,{keyPath:"compositeKey"})}}catch(pe){B(Ae.create("storage-open",{originalErrorMessage:null===(Q=pe)||void 0===Q?void 0:Q.message}))}})}()){this.appId=B,this.appName=Q,this.namespace=pe,this.openDbPromise=Ue}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(B){return this.set("last_fetch_status",B)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(B){return this.set("last_successful_fetch_timestamp_millis",B)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(B){return this.set("last_successful_fetch_response",B)}getActiveConfig(){return this.get("active_config")}setActiveConfig(B){return this.set("active_config",B)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(B){return this.set("active_config_etag",B)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(B){return this.set("throttle_metadata",B)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(B){var Q=this;return(0,F.Z)(function*(){const pe=yield Q.openDbPromise;return new Promise((Ue,Xe)=>{var Dt;const Se=pe.transaction([xn],"readonly").objectStore(xn),Ft=Q.createCompositeKey(B);try{const oi=Se.get(Ft);oi.onerror=jt=>{Xe(St(jt,"storage-get"))},oi.onsuccess=jt=>{const Yn=jt.target.result;Ue(Yn?Yn.value:void 0)}}catch(oi){Xe(Ae.create("storage-get",{originalErrorMessage:null===(Dt=oi)||void 0===Dt?void 0:Dt.message}))}})})()}set(B,Q){var pe=this;return(0,F.Z)(function*(){const Ue=yield pe.openDbPromise;return new Promise((Xe,Dt)=>{var en;const Ft=Ue.transaction([xn],"readwrite").objectStore(xn),oi=pe.createCompositeKey(B);try{const jt=Ft.put({compositeKey:oi,value:Q});jt.onerror=Yn=>{Dt(St(Yn,"storage-set"))},jt.onsuccess=()=>{Xe()}}catch(jt){Dt(Ae.create("storage-set",{originalErrorMessage:null===(en=jt)||void 0===en?void 0:en.message}))}})})()}delete(B){var Q=this;return(0,F.Z)(function*(){const pe=yield Q.openDbPromise;return new Promise((Ue,Xe)=>{var Dt;const Se=pe.transaction([xn],"readwrite").objectStore(xn),Ft=Q.createCompositeKey(B);try{const oi=Se.delete(Ft);oi.onerror=jt=>{Xe(St(jt,"storage-delete"))},oi.onsuccess=()=>{Ue()}}catch(oi){Xe(Ae.create("storage-delete",{originalErrorMessage:null===(Dt=oi)||void 0===Dt?void 0:Dt.message}))}})})()}createCompositeKey(B){return[this.appId,this.appName,this.namespace,B].join()}}class qi{constructor(B){this.storage=B}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var B=this;return(0,F.Z)(function*(){const Q=B.storage.getLastFetchStatus(),pe=B.storage.getLastSuccessfulFetchTimestampMillis(),Ue=B.storage.getActiveConfig(),Xe=yield Q;Xe&&(B.lastFetchStatus=Xe);const Dt=yield pe;Dt&&(B.lastSuccessfulFetchTimestampMillis=Dt);const en=yield Ue;en&&(B.activeConfig=en)})()}setLastFetchStatus(B){return this.lastFetchStatus=B,this.storage.setLastFetchStatus(B)}setLastSuccessfulFetchTimestampMillis(B){return this.lastSuccessfulFetchTimestampMillis=B,this.storage.setLastSuccessfulFetchTimestampMillis(B)}setActiveConfig(B){return this.activeConfig=B,this.storage.setActiveConfig(B)}}function ir(){return rt.apply(this,arguments)}function rt(){return(rt=(0,F.Z)(function*(){if(!(0,ge.hl)())return!1;try{return yield(0,ge.eu)()}catch{return!1}})).apply(this,arguments)}!function ni(){(0,se._registerComponent)(new ve.wA("remote-config",function H(B,{instanceIdentifier:Q}){const pe=B.getProvider("app").getImmediate(),Ue=B.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Ae.create("registration-window");if(!(0,ge.hl)())throw Ae.create("indexed-db-unavailable");const{projectId:Xe,apiKey:Dt,appId:en}=pe.options;if(!Xe)throw Ae.create("registration-project-id");if(!Dt)throw Ae.create("registration-api-key");if(!en)throw Ae.create("registration-app-id");const Se=new fi(en,pe.name,Q=Q||"firebase"),Ft=new qi(Se),oi=new re.Yd(ye);oi.logLevel=re.in.ERROR;const jt=new Nt(Ue,se.SDK_VERSION,Q,Xe,Dt,en),Yn=new Zn(jt,Se),po=new yt(Yn,Se,Ft,oi),mo=new Gt(pe,po,Ft,Se,oi);return function Ze(H){const B=(0,ge.m9)(H);B._initializePromise||(B._initializePromise=B._storageCache.loadFromStorage().then(()=>{B._isInitializationComplete=!0}))}(mo),mo},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(ye,K),(0,se.registerVersion)(ye,K,"esm2017")}();var En=N(8766);const Qn="/firebase-messaging-sw.js",wn="/firebase-cloud-messaging-push-scope",bi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Dn="google.c.a.c_id",kn="google.c.a.c_l",dn="google.c.a.ts",mt="google.c.a.e";var gt=(()=>{return(H=gt||(gt={})).PUSH_RECEIVED="push-received",H.NOTIFICATION_CLICKED="notification-clicked",gt;var H})();function An(H){const B=new Uint8Array(H);return btoa(String.fromCharCode(...B)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ii(H){const Q=(H+"=".repeat((4-H.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),pe=atob(Q),Ue=new Uint8Array(pe.length);for(let Xe=0;Xe<pe.length;++Xe)Ue[Xe]=pe.charCodeAt(Xe);return Ue}const wi="fcm_token_details_db",Ai="fcm_token_object_Store";function Rt(H){return Ti.apply(this,arguments)}function Ti(){return Ti=(0,F.Z)(function*(H){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Xe=>Xe.name).includes(wi))return null;let B=null;return(yield(0,En.X3)(wi,5,{upgrade:(pe=(0,F.Z)(function*(Ue,Xe,Dt,en){var Se;if(Xe<2||!Ue.objectStoreNames.contains(Ai))return;const Ft=en.objectStore(Ai),oi=yield Ft.index("fcmSenderId").get(H);if(yield Ft.clear(),oi)if(2===Xe){const jt=oi;if(!jt.auth||!jt.p256dh||!jt.endpoint)return;B={token:jt.fcmToken,createTime:null!==(Se=jt.createTime)&&void 0!==Se?Se:Date.now(),subscriptionOptions:{auth:jt.auth,p256dh:jt.p256dh,endpoint:jt.endpoint,swScope:jt.swScope,vapidKey:"string"==typeof jt.vapidKey?jt.vapidKey:An(jt.vapidKey)}}}else if(3===Xe){const jt=oi;B={token:jt.fcmToken,createTime:jt.createTime,subscriptionOptions:{auth:An(jt.auth),p256dh:An(jt.p256dh),endpoint:jt.endpoint,swScope:jt.swScope,vapidKey:An(jt.vapidKey)}}}else if(4===Xe){const jt=oi;B={token:jt.fcmToken,createTime:jt.createTime,subscriptionOptions:{auth:An(jt.auth),p256dh:An(jt.p256dh),endpoint:jt.endpoint,swScope:jt.swScope,vapidKey:An(jt.vapidKey)}}}}),function(Xe,Dt,en,Se){return pe.apply(this,arguments)})})).close(),yield(0,En.Lj)(wi),yield(0,En.Lj)("fcm_vapid_details_db"),yield(0,En.Lj)("undefined"),Zt(B)?B:null;var pe}),Ti.apply(this,arguments)}function Zt(H){if(!H||!H.subscriptionOptions)return!1;const{subscriptionOptions:B}=H;return"number"==typeof H.createTime&&H.createTime>0&&"string"==typeof H.token&&H.token.length>0&&"string"==typeof B.auth&&B.auth.length>0&&"string"==typeof B.p256dh&&B.p256dh.length>0&&"string"==typeof B.endpoint&&B.endpoint.length>0&&"string"==typeof B.swScope&&B.swScope.length>0&&"string"==typeof B.vapidKey&&B.vapidKey.length>0}const tt="firebase-messaging-store";let Me=null;function st(){return Me||(Me=(0,En.X3)("firebase-messaging-database",1,{upgrade:(H,B)=>{0===B&&H.createObjectStore(tt)}})),Me}function wt(H){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,F.Z)(function*(H){const B=k(H),pe=yield(yield st()).transaction(tt).objectStore(tt).get(B);if(pe)return pe;{const Ue=yield Rt(H.appConfig.senderId);if(Ue)return yield Qt(H,Ue),Ue}})).apply(this,arguments)}function Qt(H,B){return Y.apply(this,arguments)}function Y(){return(Y=(0,F.Z)(function*(H,B){const Q=k(H),Ue=(yield st()).transaction(tt,"readwrite");return yield Ue.objectStore(tt).put(B,Q),yield Ue.done,B})).apply(this,arguments)}function z(H){return P.apply(this,arguments)}function P(){return(P=(0,F.Z)(function*(H){const B=k(H),pe=(yield st()).transaction(tt,"readwrite");yield pe.objectStore(tt).delete(B),yield pe.done})).apply(this,arguments)}function k({appConfig:H}){return H.appId}const R=new ge.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function G(H,B){return ue.apply(this,arguments)}function ue(){return(ue=(0,F.Z)(function*(H,B){var Q;const pe=yield Jt(H),Ue=Yt(B),Xe={method:"POST",headers:pe,body:JSON.stringify(Ue)};let Dt;try{Dt=yield(yield fetch(dt(H.appConfig),Xe)).json()}catch(en){throw R.create("token-subscribe-failed",{errorInfo:null===(Q=en)||void 0===Q?void 0:Q.toString()})}if(Dt.error)throw R.create("token-subscribe-failed",{errorInfo:Dt.error.message});if(!Dt.token)throw R.create("token-subscribe-no-token");return Dt.token})).apply(this,arguments)}function Le(H,B){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,F.Z)(function*(H,B){var Q;const pe=yield Jt(H),Ue=Yt(B.subscriptionOptions),Xe={method:"PATCH",headers:pe,body:JSON.stringify(Ue)};let Dt;try{Dt=yield(yield fetch(`${dt(H.appConfig)}/${B.token}`,Xe)).json()}catch(en){throw R.create("token-update-failed",{errorInfo:null===(Q=en)||void 0===Q?void 0:Q.toString()})}if(Dt.error)throw R.create("token-update-failed",{errorInfo:Dt.error.message});if(!Dt.token)throw R.create("token-update-no-token");return Dt.token})).apply(this,arguments)}function _e(H,B){return ke.apply(this,arguments)}function ke(){return(ke=(0,F.Z)(function*(H,B){var Q;const Ue={method:"DELETE",headers:yield Jt(H)};try{const Dt=yield(yield fetch(`${dt(H.appConfig)}/${B}`,Ue)).json();if(Dt.error)throw R.create("token-unsubscribe-failed",{errorInfo:Dt.error.message})}catch(Xe){throw R.create("token-unsubscribe-failed",{errorInfo:null===(Q=Xe)||void 0===Q?void 0:Q.toString()})}})).apply(this,arguments)}function dt({projectId:H}){return`https://fcmregistrations.googleapis.com/v1/projects/${H}/registrations`}function Jt(H){return xt.apply(this,arguments)}function xt(){return(xt=(0,F.Z)(function*({appConfig:H,installations:B}){const Q=yield B.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":H.apiKey,"x-goog-firebase-installations-auth":`FIS ${Q}`})})).apply(this,arguments)}function Yt({p256dh:H,auth:B,endpoint:Q,vapidKey:pe}){const Ue={web:{endpoint:Q,auth:B,p256dh:H}};return pe!==bi&&(Ue.web.applicationPubKey=pe),Ue}const Dr=6048e5;function Vn(H){return gs.apply(this,arguments)}function gs(){return(gs=(0,F.Z)(function*(H){const B=yield Xt(H.swRegistration,H.vapidKey),Q={vapidKey:H.vapidKey,swScope:H.swRegistration.scope,endpoint:B.endpoint,auth:An(B.getKey("auth")),p256dh:An(B.getKey("p256dh"))},pe=yield wt(H.firebaseDependencies);if(pe){if(zn(pe.subscriptionOptions,Q))return Date.now()>=pe.createTime+Dr?te(H,{token:pe.token,createTime:Date.now(),subscriptionOptions:Q}):pe.token;try{yield _e(H.firebaseDependencies,pe.token)}catch(Ue){console.warn(Ue)}return $e(H.firebaseDependencies,Q)}return $e(H.firebaseDependencies,Q)})).apply(this,arguments)}function Vs(H){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,F.Z)(function*(H){const B=yield wt(H.firebaseDependencies);B&&(yield _e(H.firebaseDependencies,B.token),yield z(H.firebaseDependencies));const Q=yield H.swRegistration.pushManager.getSubscription();return!Q||Q.unsubscribe()})).apply(this,arguments)}function te(H,B){return De.apply(this,arguments)}function De(){return(De=(0,F.Z)(function*(H,B){try{const Q=yield Le(H.firebaseDependencies,B),pe=Object.assign(Object.assign({},B),{token:Q,createTime:Date.now()});return yield Qt(H.firebaseDependencies,pe),Q}catch(Q){throw yield Vs(H),Q}})).apply(this,arguments)}function $e(H,B){return _t.apply(this,arguments)}function _t(){return(_t=(0,F.Z)(function*(H,B){const pe={token:yield G(H,B),createTime:Date.now(),subscriptionOptions:B};return yield Qt(H,pe),pe.token})).apply(this,arguments)}function Xt(H,B){return gn.apply(this,arguments)}function gn(){return(gn=(0,F.Z)(function*(H,B){return(yield H.pushManager.getSubscription())||H.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ii(B)})})).apply(this,arguments)}function zn(H,B){return B.vapidKey===H.vapidKey&&B.endpoint===H.endpoint&&B.auth===H.auth&&B.p256dh===H.p256dh}function Bn(H){const B={from:H.from,collapseKey:H.collapse_key,messageId:H.fcmMessageId};return function rr(H,B){if(!B.notification)return;H.notification={};const Q=B.notification.title;Q&&(H.notification.title=Q);const pe=B.notification.body;pe&&(H.notification.body=pe);const Ue=B.notification.image;Ue&&(H.notification.image=Ue)}(B,H),function sr(H,B){!B.data||(H.data=B.data)}(B,H),function Cn(H,B){var Q,pe,Ue,Xe,Dt;if(!(B.fcmOptions||null!==(Q=B.notification)&&void 0!==Q&&Q.click_action))return;H.fcmOptions={};const en=null!==(Ue=null===(pe=B.fcmOptions)||void 0===pe?void 0:pe.link)&&void 0!==Ue?Ue:null===(Xe=B.notification)||void 0===Xe?void 0:Xe.click_action;en&&(H.fcmOptions.link=en);const Se=null===(Dt=B.fcmOptions)||void 0===Dt?void 0:Dt.analytics_label;Se&&(H.fcmOptions.analyticsLabel=Se)}(B,H),B}function Ah(H){return"object"==typeof H&&!!H&&Dn in H}function pa(H,B){const Q=[];for(let pe=0;pe<H.length;pe++)Q.push(H.charAt(pe)),pe<B.length&&Q.push(B.charAt(pe));return Q.join("")}function ao(H){return R.create("missing-app-config-values",{valueName:H})}pa("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),pa("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ss{constructor(B,Q,pe){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Ue=function ma(H){if(!H||!H.options)throw ao("App Configuration Object");if(!H.name)throw ao("App Name");const B=["projectId","apiKey","appId","messagingSenderId"],{options:Q}=H;for(const pe of B)if(!Q[pe])throw ao(pe);return{appName:H.name,projectId:Q.projectId,apiKey:Q.apiKey,appId:Q.appId,senderId:Q.messagingSenderId}}(B);this.firebaseDependencies={app:B,appConfig:Ue,installations:Q,analyticsProvider:pe}}_delete(){return Promise.resolve()}}function Bs(H){return _s.apply(this,arguments)}function _s(){return(_s=(0,F.Z)(function*(H){var B;try{H.swRegistration=yield navigator.serviceWorker.register(Qn,{scope:wn}),H.swRegistration.update().catch(()=>{})}catch(Q){throw R.create("failed-service-worker-registration",{browserErrorMessage:null===(B=Q)||void 0===B?void 0:B.message})}})).apply(this,arguments)}function Rn(H,B){return tc.apply(this,arguments)}function tc(){return(tc=(0,F.Z)(function*(H,B){if(!B&&!H.swRegistration&&(yield Bs(H)),B||!H.swRegistration){if(!(B instanceof ServiceWorkerRegistration))throw R.create("invalid-sw-registration");H.swRegistration=B}})).apply(this,arguments)}function ji(H,B){return or.apply(this,arguments)}function or(){return(or=(0,F.Z)(function*(H,B){B?H.vapidKey=B:H.vapidKey||(H.vapidKey=bi)})).apply(this,arguments)}function ys(){return(ys=(0,F.Z)(function*(H,B){if(!navigator)throw R.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw R.create("permission-blocked");return yield ji(H,B?.vapidKey),yield Rn(H,B?.serviceWorkerRegistration),Vn(H)})).apply(this,arguments)}function lo(H,B,Q){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,F.Z)(function*(H,B,Q){const pe=il(B);(yield H.firebaseDependencies.analyticsProvider.get()).logEvent(pe,{message_id:Q[Dn],message_name:Q[kn],message_time:Q[dn],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function il(H){switch(H){case gt.NOTIFICATION_CLICKED:return"notification_open";case gt.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ga(){return(ga=(0,F.Z)(function*(H,B){const Q=B.data;if(!Q.isFirebaseMessaging)return;H.onMessageHandler&&Q.messageType===gt.PUSH_RECEIVED&&("function"==typeof H.onMessageHandler?H.onMessageHandler(Bn(Q)):H.onMessageHandler.next(Bn(Q)));const pe=Q.data;Ah(pe)&&"1"===pe[mt]&&(yield lo(H,Q.messageType,pe))})).apply(this,arguments)}const Lo="@firebase/messaging",Or=H=>{const B=new ss(H.getProvider("app").getImmediate(),H.getProvider("installations-internal").getImmediate(),H.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",Q=>function um(H,B){return ga.apply(this,arguments)}(B,Q)),B},dm=H=>{const B=H.getProvider("messaging").getImmediate();return{getToken:pe=>function zr(H,B){return ys.apply(this,arguments)}(B,pe)}};function Th(){return rl.apply(this,arguments)}function rl(){return(rl=(0,F.Z)(function*(){try{yield(0,ge.eu)()}catch{return!1}return typeof window<"u"&&(0,ge.hl)()&&(0,ge.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function vs(){(0,se._registerComponent)(new ve.wA("messaging",Or,"PUBLIC")),(0,se._registerComponent)(new ve.wA("messaging-internal",dm,"PRIVATE")),(0,se.registerVersion)(Lo,"0.9.18"),(0,se.registerVersion)(Lo,"0.9.18","esm2017")}();var Cu=N(7982),nc=N(4408),_y=N(7565);const Yi=new class Eu extends _y.v{}(class ba extends nc.o{constructor(B,Q){super(B,Q),this.scheduler=B,this.work=Q}schedule(B,Q=0){return Q>0?super.schedule(B,Q):(this.delay=Q,this.state=B,this.scheduler.flush(this),this)}execute(B,Q){return Q>0||this.closed?super.execute(B,Q):this._execute(B,Q)}requestAsyncId(B,Q,pe=0){return null!=pe&&pe>0||null==pe&&this.delay>0?super.requestAsyncId(B,Q,pe):(B.flush(this),0)}});var co=N(4986),ic=N(9751),rc=N(8505),ol=N(9468),sc=N(5363);const Vo=new l.GfV("7.4.1"),mr="__angularfire_symbol__analyticsIsSupportedValue",bs="__angularfire_symbol__analyticsIsSupported",oc="__angularfire_symbol__remoteConfigIsSupportedValue",ar="__angularfire_symbol__remoteConfigIsSupported",uo="__angularfire_symbol__messagingIsSupportedValue",$i="__angularfire_symbol__messagingIsSupported";globalThis[bs]||(globalThis[bs]=(0,Cu.Gb)().then(H=>globalThis[mr]=H).catch(()=>globalThis[mr]=!1)),globalThis[$i]||(globalThis[$i]=Th().then(H=>globalThis[uo]=H).catch(()=>globalThis[uo]=!1)),globalThis[ar]||(globalThis[ar]=ir().then(H=>globalThis[oc]=H).catch(()=>globalThis[oc]=!1));const si={async:()=>globalThis[bs],sync:()=>{const H=globalThis[mr];if(void 0===H)throw new Error((H=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${H} in the constructor, first ensure that ${H} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${H})\`.`)("Analytics"));return H}};function Du(H,B,Q){if(B){if(1===B.length)return B[0];const Xe=B.filter(Dt=>Dt.app===Q);if(1===Xe.length)return Xe[0]}return Q.container.getProvider(H).getImmediate({optional:!0})}const xh=(H,B)=>{const Q=B?[B]:(0,$.C6)(),pe=[];return Q.forEach(Ue=>{Ue.container.getProvider(H).instances.forEach(Dt=>{pe.includes(Dt)||pe.push(Dt)})}),pe};function os(){}class lr{constructor(B,Q=Yi){this.zone=B,this.delegate=Q}now(){return this.delegate.now()}schedule(B,Q,pe){const Ue=this.zone;return this.delegate.schedule(function(Dt){Ue.runGuarded(()=>{B.apply(this,[Dt])})},Q,pe)}}class Iu{constructor(B){this.zone=B,this.task=null}call(B,Q){const pe=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",os,{},os,os)),Q.pipe((0,rc.b)({next:pe,complete:pe,error:pe})).subscribe(B).add(pe)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ca=(()=>{class H{constructor(Q){this.ngZone=Q,this.outsideAngular=Q.runOutsideAngular(()=>new lr(Zone.current)),this.insideAngular=Q.run(()=>new lr(Zone.current,co.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return H.\u0275fac=function(Q){return new(Q||H)(l.LFG(l.R0b))},H.\u0275prov=l.Yz7({token:H,factory:H.\u0275fac,providedIn:"root"}),H})();function gr(){const H=globalThis.\u0275AngularFireScheduler;if(!H)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return H}function In(H){return gr().ngZone.runOutsideAngular(()=>H())}function ho(H){return gr().ngZone.run(()=>H())}function Gr(H){return gr(),function Ea(H){return function(Q){return(Q=Q.lift(new Iu(H.ngZone))).pipe((0,ol.R)(H.outsideAngular),(0,sc.Q)(H.insideAngular))}}(gr())(H)}const Da=(H,B)=>function(){const pe=arguments;return B&&setTimeout(()=>{"scheduled"===B.state&&B.invoke()},10),ho(()=>H.apply(void 0,pe))},$t=(H,B)=>function(){let Q;const pe=arguments;for(let Xe=0;Xe<arguments.length;Xe++)"function"==typeof pe[Xe]&&(B&&(Q||(Q=ho(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",os,{},os,os)))),pe[Xe]=Da(pe[Xe],Q));const Ue=In(()=>H.apply(this,pe));if(!B){if(Ue instanceof ic.y){const Xe=gr();return Ue.pipe((0,ol.R)(Xe.outsideAngular),(0,sc.Q)(Xe.insideAngular))}return ho(()=>Ue)}return Ue instanceof ic.y?Ue.pipe(Gr):Ue instanceof Promise?ho(()=>new Promise((Xe,Dt)=>Ue.then(en=>ho(()=>Xe(en)),en=>ho(()=>Dt(en))))):"function"==typeof Ue&&Q?function(){return setTimeout(()=>{Q&&"scheduled"===Q.state&&Q.invoke()},10),Ue.apply(this,arguments)}:ho(()=>Ue)}},9934:(pt,Re,N)=>{N.d(Re,{$:()=>Xe,A:()=>q,B:()=>Ae,G:()=>De,H:()=>zn,J:()=>vs,L:()=>Y,M:()=>Eu,N:()=>ic,P:()=>ka,Q:()=>rc,R:()=>Fy,T:()=>ol,U:()=>co,V:()=>bs,W:()=>oc,X:()=>yy,Y:()=>Ea,Z:()=>$t,_:()=>B,a:()=>Ho,a0:()=>oi,a1:()=>Yn,a2:()=>mo,a3:()=>js,a4:()=>ac,a5:()=>Bo,a6:()=>Ci,a7:()=>$s,a8:()=>cc,a9:()=>Uo,aA:()=>ju,aB:()=>Jh,aC:()=>Lt,aD:()=>Kh,aE:()=>Ct,aI:()=>cl,aL:()=>Vo,aa:()=>TC,ab:()=>kh,ac:()=>Oh,af:()=>wy,ag:()=>Cy,ah:()=>_m,ak:()=>os,al:()=>Sy,an:()=>Ay,ao:()=>Hh,ap:()=>dt,aq:()=>Ee,ar:()=>ke,as:()=>Le,at:()=>Qe,au:()=>Gu,av:()=>Fa,aw:()=>Fe,ax:()=>ne,ay:()=>ee,az:()=>z,b:()=>Aa,c:()=>Ly,d:()=>Bu,e:()=>qh,f:()=>Pa,g:()=>Vy,h:()=>Mm,i:()=>Fu,j:()=>Xh,k:()=>Wu,l:()=>Es,m:()=>Gs,o:()=>me,r:()=>vt,s:()=>V,u:()=>Kn,v:()=>dc});var l=N(5861),$=N(2090),F=N(9681),se=N(1877),ge=N(655),ve=N(4859);const me={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},q={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ae=function X(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Te=function Ne(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},et=new $.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),de=new se.Yd("@firebase/auth");function ct(b,...g){de.logLevel<=se.in.ERROR&&de.error(`Auth (${F.SDK_VERSION}): ${b}`,...g)}function Qe(b,...g){throw Ze(b,...g)}function Fe(b,...g){return Ze(b,...g)}function Pe(b,g,y){const E=Object.assign(Object.assign({},Te()),{[g]:y});return new $.LL("auth","Firebase",E).create(g,{appName:b.name})}function Ie(b,g,y){if(!(g instanceof y))throw y.name!==g.constructor.name&&Qe(b,"argument-error"),Pe(b,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ze(b,...g){if("string"!=typeof b){const y=g[0],E=[...g.slice(1)];return E[0]&&(E[0].appName=b.name),b._errorFactory.create(y,...E)}return et.create(b,...g)}function ne(b,g,...y){if(!b)throw Ze(g,...y)}function ce(b){const g="INTERNAL ASSERTION FAILED: "+b;throw ct(g),new Error(g)}function Ee(b,g){b||ce(g)}const J=new Map;function ee(b){Ee(b instanceof Function,"Expected a class definition");let g=J.get(b);return g?(Ee(g instanceof b,"Instance stored in cache mismatched with class"),g):(g=new b,J.set(b,g),g)}function je(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function Be(){return"http:"===yt()||"https:"===yt()}function yt(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}class Ke{constructor(g,y){this.shortDelay=g,this.longDelay=y,Ee(y>g,"Short delay should be less than long delay!"),this.isMobile=(0,$.uI)()||(0,$.b$)()}get(){return function ln(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Be()||(0,$.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function vn(b,g){Ee(b.emulator,"Emulator should always be set here");const{url:y}=b.emulator;return g?`${y}${g.startsWith("/")?g.slice(1):g}`:y}class Zn{static initialize(g,y,E){this.fetchImpl=g,y&&(this.headersImpl=y),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ce("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ce("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ce("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const mn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},cn=new Ke(3e4,6e4);function Gt(b,g){return b.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:b.tenantId}):g}function St(b,g,y,E){return xn.apply(this,arguments)}function xn(){return(xn=(0,l.Z)(function*(b,g,y,E,M={}){return nr(b,M,(0,l.Z)(function*(){let L={},oe={};E&&("GET"===g?oe=E:L={body:JSON.stringify(E)});const Oe=(0,$.xO)(Object.assign({key:b.config.apiKey},oe)).slice(1),lt=yield b._getAdditionalHeaders();return lt["Content-Type"]="application/json",b.languageCode&&(lt["X-Firebase-Locale"]=b.languageCode),Zn.fetch()(qi(b,b.config.apiHost,y,Oe),Object.assign({method:g,headers:lt,referrerPolicy:"no-referrer"},L))}))})).apply(this,arguments)}function nr(b,g,y){return pr.apply(this,arguments)}function pr(){return(pr=(0,l.Z)(function*(b,g,y){b._canInitEmulator=!1;const E=Object.assign(Object.assign({},mn),g);try{const M=new ni(b),L=yield Promise.race([y(),M.promise]);M.clearNetworkTimeout();const oe=yield L.json();if("needConfirmation"in oe)throw ti(b,"account-exists-with-different-credential",oe);if(L.ok&&!("errorMessage"in oe))return oe;{const Oe=L.ok?oe.errorMessage:oe.error.message,[lt,It]=Oe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===lt)throw ti(b,"credential-already-in-use",oe);if("EMAIL_EXISTS"===lt)throw ti(b,"email-already-in-use",oe);if("USER_DISABLED"===lt)throw ti(b,"user-disabled",oe);const on=E[lt]||lt.toLowerCase().replace(/[_\s]+/g,"-");if(It)throw Pe(b,on,It);Qe(b,on)}}catch(M){if(M instanceof $.ZR)throw M;Qe(b,"network-request-failed")}})).apply(this,arguments)}function qn(b,g,y,E){return fi.apply(this,arguments)}function fi(){return(fi=(0,l.Z)(function*(b,g,y,E,M={}){const L=yield St(b,g,y,E,M);return"mfaPendingCredential"in L&&Qe(b,"multi-factor-auth-required",{_serverResponse:L}),L})).apply(this,arguments)}function qi(b,g,y,E){const M=`${g}${y}?${E}`;return b.config.emulator?vn(b.config,M):`${b.config.apiScheme}://${M}`}class ni{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((y,E)=>{this.timer=setTimeout(()=>E(Fe(this.auth,"network-request-failed")),cn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ti(b,g,y){const E={appName:b.name};y.email&&(E.email=y.email),y.phoneNumber&&(E.phoneNumber=y.phoneNumber);const M=Fe(b,g,E);return M.customData._tokenResponse=y,M}function ir(){return(ir=(0,l.Z)(function*(b,g){return St(b,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function rt(b,g){return En.apply(this,arguments)}function En(){return(En=(0,l.Z)(function*(b,g){return St(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Qn(b,g){return wn.apply(this,arguments)}function wn(){return(wn=(0,l.Z)(function*(b,g){return St(b,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function bi(b){if(b)try{const g=new Date(Number(b));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function kn(){return(kn=(0,l.Z)(function*(b,g=!1){const y=(0,$.m9)(b),E=yield y.getIdToken(g),M=mt(E);ne(M&&M.exp&&M.auth_time&&M.iat,y.auth,"internal-error");const L="object"==typeof M.firebase?M.firebase:void 0,oe=L?.sign_in_provider;return{claims:M,token:E,authTime:bi(dn(M.auth_time)),issuedAtTime:bi(dn(M.iat)),expirationTime:bi(dn(M.exp)),signInProvider:oe||null,signInSecondFactor:L?.sign_in_second_factor||null}})).apply(this,arguments)}function dn(b){return 1e3*Number(b)}function mt(b){var g;const[y,E,M]=b.split(".");if(void 0===y||void 0===E||void 0===M)return ct("JWT malformed, contained fewer than 3 sections"),null;try{const L=(0,$.tV)(E);return L?JSON.parse(L):(ct("Failed to decode base64 JWT payload"),null)}catch(L){return ct("Caught error parsing JWT payload as JSON",null===(g=L)||void 0===g?void 0:g.toString()),null}}function gt(b,g){return An.apply(this,arguments)}function An(){return(An=(0,l.Z)(function*(b,g,y=!1){if(y)return g;try{return yield g}catch(E){throw E instanceof $.ZR&&ii(E)&&b.auth.currentUser===b&&(yield b.auth.signOut()),E}})).apply(this,arguments)}function ii({code:b}){return"auth/user-disabled"===b||"auth/user-token-expired"===b}class wi{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var y;if(g){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const M=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(g=!1){var y=this;if(!this.isRunning)return;const E=this.getInterval(g);this.timerId=setTimeout((0,l.Z)(function*(){yield y.iteration()}),E)}iteration(){var g=this;return(0,l.Z)(function*(){var y;try{yield g.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===(null===(y=E)||void 0===y?void 0:y.code)&&g.schedule(!0))}g.schedule()})()}}class Mt{constructor(g,y){this.createdAt=g,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=bi(this.lastLoginAt),this.creationTime=bi(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ai(b){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,l.Z)(function*(b){var g;const y=b.auth,E=yield b.getIdToken(),M=yield gt(b,Qn(y,{idToken:E}));ne(M?.users.length,y,"internal-error");const L=M.users[0];b._notifyReloadListener(L);const oe=null!==(g=L.providerUserInfo)&&void 0!==g&&g.length?Ln(L.providerUserInfo):[],Oe=ri(b.providerData,oe),on=!!b.isAnonymous&&!(b.email&&L.passwordHash||Oe?.length),Jn={uid:L.localId,displayName:L.displayName||null,photoURL:L.photoUrl||null,email:L.email||null,emailVerified:L.emailVerified||!1,phoneNumber:L.phoneNumber||null,tenantId:L.tenantId||null,providerData:Oe,metadata:new Mt(L.createdAt,L.lastLoginAt),isAnonymous:on};Object.assign(b,Jn)})).apply(this,arguments)}function Zt(){return(Zt=(0,l.Z)(function*(b){const g=(0,$.m9)(b);yield Ai(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function ri(b,g){return[...b.filter(E=>!g.some(M=>M.providerId===E.providerId)),...g]}function Ln(b){return b.map(g=>{var{providerId:y}=g,E=(0,ge._T)(g,["providerId"]);return{providerId:y,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function Me(){return(Me=(0,l.Z)(function*(b,g){const y=yield nr(b,{},(0,l.Z)(function*(){const E=(0,$.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:M,apiKey:L}=b.config,oe=qi(b,M,"/v1/token",`key=${L}`),Oe=yield b._getAdditionalHeaders();return Oe["Content-Type"]="application/x-www-form-urlencoded",Zn.fetch()(oe,{method:"POST",headers:Oe,body:E})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class st{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){ne(g.idToken,"internal-error"),ne(typeof g.idToken<"u","internal-error"),ne(typeof g.refreshToken<"u","internal-error");const y="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function ht(b){const g=mt(b);return ne(g,"internal-error"),ne(typeof g.exp<"u","internal-error"),ne(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,y)}getToken(g,y=!1){var E=this;return(0,l.Z)(function*(){return ne(!E.accessToken||E.refreshToken,g,"user-token-expired"),y||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(g,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,y){var E=this;return(0,l.Z)(function*(){const{accessToken:M,refreshToken:L,expiresIn:oe}=yield function tt(b,g){return Me.apply(this,arguments)}(g,y);E.updateTokensAndExpiration(M,L,Number(oe))})()}updateTokensAndExpiration(g,y,E){this.refreshToken=y||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(g,y){const{refreshToken:E,accessToken:M,expirationTime:L}=y,oe=new st;return E&&(ne("string"==typeof E,"internal-error",{appName:g}),oe.refreshToken=E),M&&(ne("string"==typeof M,"internal-error",{appName:g}),oe.accessToken=M),L&&(ne("number"==typeof L,"internal-error",{appName:g}),oe.expirationTime=L),oe}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new st,this.toJSON())}_performRefresh(){return ce("not implemented")}}function wt(b,g){ne("string"==typeof b||typeof b>"u","internal-error",{appName:g})}class Tt{constructor(g){var{uid:y,auth:E,stsTokenManager:M}=g,L=(0,ge._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new wi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=E,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=L.displayName||null,this.email=L.email||null,this.emailVerified=L.emailVerified||!1,this.phoneNumber=L.phoneNumber||null,this.photoURL=L.photoURL||null,this.isAnonymous=L.isAnonymous||!1,this.tenantId=L.tenantId||null,this.providerData=L.providerData?[...L.providerData]:[],this.metadata=new Mt(L.createdAt||void 0,L.lastLoginAt||void 0)}getIdToken(g){var y=this;return(0,l.Z)(function*(){const E=yield gt(y,y.stsTokenManager.getToken(y.auth,g));return ne(E,y.auth,"internal-error"),y.accessToken!==E&&(y.accessToken=E,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),E})()}getIdTokenResult(g){return function Dn(b){return kn.apply(this,arguments)}(this,g)}reload(){return function Ti(b){return Zt.apply(this,arguments)}(this)}_assign(g){this!==g&&(ne(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(y=>Object.assign({},y)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new Tt(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,y=!1){var E=this;return(0,l.Z)(function*(){let M=!1;g.idToken&&g.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(g),M=!0),y&&(yield Ai(E)),yield E.auth._persistUserIfCurrent(E),M&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var g=this;return(0,l.Z)(function*(){const y=yield g.getIdToken();return yield gt(g,function Oi(b,g){return ir.apply(this,arguments)}(g.auth,{idToken:y})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,y){var E,M,L,oe,Oe,lt,It,on;const Jn=null!==(E=y.displayName)&&void 0!==E?E:void 0,cs=null!==(M=y.email)&&void 0!==M?M:void 0,Ba=null!==(L=y.phoneNumber)&&void 0!==L?L:void 0,_f=null!==(oe=y.photoURL)&&void 0!==oe?oe:void 0,yf=null!==(Oe=y.tenantId)&&void 0!==Oe?Oe:void 0,vf=null!==(lt=y._redirectEventId)&&void 0!==lt?lt:void 0,Vm=null!==(It=y.createdAt)&&void 0!==It?It:void 0,Bm=null!==(on=y.lastLoginAt)&&void 0!==on?on:void 0,{uid:bf,emailVerified:yl,isAnonymous:vl,providerData:Tc,stsTokenManager:bl}=y;ne(bf&&bl,g,"internal-error");const qy=st.fromJSON(this.name,bl);ne("string"==typeof bf,g,"internal-error"),wt(Jn,g.name),wt(cs,g.name),ne("boolean"==typeof yl,g,"internal-error"),ne("boolean"==typeof vl,g,"internal-error"),wt(Ba,g.name),wt(_f,g.name),wt(yf,g.name),wt(vf,g.name),wt(Vm,g.name),wt(Bm,g.name);const _i=new Tt({uid:bf,auth:g,email:cs,emailVerified:yl,displayName:Jn,isAnonymous:vl,photoURL:_f,phoneNumber:Ba,tenantId:yf,stsTokenManager:qy,createdAt:Vm,lastLoginAt:Bm});return Tc&&Array.isArray(Tc)&&(_i.providerData=Tc.map(Um=>Object.assign({},Um))),vf&&(_i._redirectEventId=vf),_i}static _fromIdTokenResponse(g,y,E=!1){return(0,l.Z)(function*(){const M=new st;M.updateFromServerResponse(y);const L=new Tt({uid:y.localId,auth:g,stsTokenManager:M,isAnonymous:E});return yield Ai(L),L})()}}const Y=(()=>{class b{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,l.Z)(function*(){return!0})()}_set(y,E){var M=this;return(0,l.Z)(function*(){M.storage[y]=E})()}_get(y){var E=this;return(0,l.Z)(function*(){const M=E.storage[y];return void 0===M?null:M})()}_remove(y){var E=this;return(0,l.Z)(function*(){delete E.storage[y]})()}_addListener(y,E){}_removeListener(y,E){}}return b.type="NONE",b})();function z(b,g,y){return`firebase:${b}:${g}:${y}`}class P{constructor(g,y,E){this.persistence=g,this.auth=y,this.userKey=E;const{config:M,name:L}=this.auth;this.fullUserKey=z(this.userKey,M.apiKey,L),this.fullPersistenceKey=z("persistence",M.apiKey,L),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,l.Z)(function*(){const y=yield g.persistence._get(g.fullUserKey);return y?Tt._fromJSON(g.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var y=this;return(0,l.Z)(function*(){if(y.persistence===g)return;const E=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=g,E?y.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,y,E="authUser"){return(0,l.Z)(function*(){if(!y.length)return new P(ee(Y),g,E);const M=(yield Promise.all(y.map(function(){var It=(0,l.Z)(function*(on){if(yield on._isAvailable())return on});return function(on){return It.apply(this,arguments)}}()))).filter(It=>It);let L=M[0]||ee(Y);const oe=z(E,g.config.apiKey,g.name);let Oe=null;for(const It of y)try{const on=yield It._get(oe);if(on){const Jn=Tt._fromJSON(g,on);It!==L&&(Oe=Jn),L=It;break}}catch{}const lt=M.filter(It=>It._shouldAllowMigration);return L._shouldAllowMigration&&lt.length?(L=lt[0],Oe&&(yield L._set(oe,Oe.toJSON())),yield Promise.all(y.map(function(){var It=(0,l.Z)(function*(on){if(on!==L)try{yield on._remove(oe)}catch{}});return function(on){return It.apply(this,arguments)}}())),new P(L,g,E)):new P(L,g,E)})()}}function k(b){const g=b.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(ue(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(A(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(Ge(g))return"Blackberry";if(_e(g))return"Webos";if(R(g))return"Safari";if((g.includes("chrome/")||G(g))&&!g.includes("edge/"))return"Chrome";if(Le(g))return"Android";{const E=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function A(b=(0,$.z$)()){return/firefox\//i.test(b)}function R(b=(0,$.z$)()){const g=b.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function G(b=(0,$.z$)()){return/crios\//i.test(b)}function ue(b=(0,$.z$)()){return/iemobile/i.test(b)}function Le(b=(0,$.z$)()){return/android/i.test(b)}function Ge(b=(0,$.z$)()){return/blackberry/i.test(b)}function _e(b=(0,$.z$)()){return/webos/i.test(b)}function ke(b=(0,$.z$)()){return/iphone|ipad|ipod/i.test(b)||/macintosh/i.test(b)&&/mobile/i.test(b)}function dt(b=(0,$.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}function Yt(b=(0,$.z$)()){return ke(b)||Le(b)||_e(b)||Ge(b)||/windows phone/i.test(b)||ue(b)}function Vn(b,g=[]){let y;switch(b){case"Browser":y=k((0,$.z$)());break;case"Worker":y=`${k((0,$.z$)())}-${b}`;break;default:y=b}const E=g.length?g.join(","):"FirebaseCore-web";return`${y}/JsCore/${F.SDK_VERSION}/${E}`}class gs{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,y){const E=L=>new Promise((oe,Oe)=>{try{oe(g(L))}catch(lt){Oe(lt)}});E.onAbort=y,this.queue.push(E);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(g){var y=this;return(0,l.Z)(function*(){var E;if(y.auth.currentUser===g)return;const M=[];try{for(const L of y.queue)yield L(g),L.onAbort&&M.push(L.onAbort)}catch(L){M.reverse();for(const oe of M)try{oe()}catch{}throw y.auth._errorFactory.create("login-blocked",{originalMessage:null===(E=L)||void 0===E?void 0:E.message})}})()}}class Vs{constructor(g,y,E){this.app=g,this.heartbeatServiceProvider=y,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new te(this),this.idTokenSubscription=new te(this),this.beforeStateQueue=new gs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=et,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(g,y){var E=this;return y&&(this._popupRedirectResolver=ee(y)),this._initializationPromise=this.queue((0,l.Z)(function*(){var M,L;if(!E._deleted&&(E.persistenceManager=yield P.create(E,g),!E._deleted)){if(null!==(M=E._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(y),E.lastNotifiedUid=(null===(L=E.currentUser)||void 0===L?void 0:L.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,l.Z)(function*(){if(g._deleted)return;const y=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||y){if(g.currentUser&&y&&g.currentUser.uid===y.uid)return g._currentUser._assign(y),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(y,!0)}})()}initializeCurrentUser(g){var y=this;return(0,l.Z)(function*(){var E;const M=yield y.assertedPersistence.getCurrentUser();let L=M,oe=!1;if(g&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const Oe=null===(E=y.redirectUser)||void 0===E?void 0:E._redirectEventId,lt=L?._redirectEventId,It=yield y.tryRedirectSignIn(g);(!Oe||Oe===lt)&&It?.user&&(L=It.user,oe=!0)}if(!L)return y.directlySetCurrentUser(null);if(!L._redirectEventId){if(oe)try{yield y.beforeStateQueue.runMiddleware(L)}catch(Oe){L=M,y._popupRedirectResolver._overrideRedirectResult(y,()=>Promise.reject(Oe))}return L?y.reloadAndSetCurrentUserOrClear(L):y.directlySetCurrentUser(null)}return ne(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===L._redirectEventId?y.directlySetCurrentUser(L):y.reloadAndSetCurrentUserOrClear(L)})()}tryRedirectSignIn(g){var y=this;return(0,l.Z)(function*(){let E=null;try{E=yield y._popupRedirectResolver._completeRedirectFn(y,g,!0)}catch{yield y._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(g){var y=this;return(0,l.Z)(function*(){var E;try{yield Ai(g)}catch(M){if("auth/network-request-failed"!==(null===(E=M)||void 0===E?void 0:E.code))return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function Nt(){if(typeof navigator>"u")return null;const b=navigator;return b.languages&&b.languages[0]||b.language||null}()}_delete(){var g=this;return(0,l.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var y=this;return(0,l.Z)(function*(){const E=g?(0,$.m9)(g):null;return E&&ne(E.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(E&&E._clone(y))})()}_updateCurrentUser(g,y=!1){var E=this;return(0,l.Z)(function*(){if(!E._deleted)return g&&ne(E.tenantId===g.tenantId,E,"tenant-id-mismatch"),y||(yield E.beforeStateQueue.runMiddleware(g)),E.queue((0,l.Z)(function*(){yield E.directlySetCurrentUser(g),E.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,l.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var y=this;return this.queue((0,l.Z)(function*(){yield y.assertedPersistence.setPersistence(ee(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new $.LL("auth","Firebase",g())}onAuthStateChanged(g,y,E){return this.registerStateListener(this.authStateSubscription,g,y,E)}beforeAuthStateChanged(g,y){return this.beforeStateQueue.pushCallback(g,y)}onIdTokenChanged(g,y,E){return this.registerStateListener(this.idTokenSubscription,g,y,E)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,y){var E=this;return(0,l.Z)(function*(){const M=yield E.getOrInitRedirectPersistenceManager(y);return null===g?M.removeCurrentUser():M.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var y=this;return(0,l.Z)(function*(){if(!y.redirectPersistenceManager){const E=g&&ee(g)||y._popupRedirectResolver;ne(E,y,"argument-error"),y.redirectPersistenceManager=yield P.create(y,[ee(E._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(g){var y=this;return(0,l.Z)(function*(){var E,M;return y._isInitialized&&(yield y.queue((0,l.Z)(function*(){}))),(null===(E=y._currentUser)||void 0===E?void 0:E._redirectEventId)===g?y._currentUser:(null===(M=y.redirectUser)||void 0===M?void 0:M._redirectEventId)===g?y.redirectUser:null})()}_persistUserIfCurrent(g){var y=this;return(0,l.Z)(function*(){if(g===y.currentUser)return y.queue((0,l.Z)(function*(){return y.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(y=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,y,E,M){if(this._deleted)return()=>{};const L="function"==typeof y?y:y.next.bind(y),oe=this._isInitialized?Promise.resolve():this._initializationPromise;return ne(oe,this,"internal-error"),oe.then(()=>L(this.currentUser)),"function"==typeof y?g.addObserver(y,E,M):g.addObserver(y)}directlySetCurrentUser(g){var y=this;return(0,l.Z)(function*(){y.currentUser&&y.currentUser!==g&&y._currentUser._stopProactiveRefresh(),g&&y.isProactiveRefreshEnabled&&g._startProactiveRefresh(),y.currentUser=g,g?yield y.assertedPersistence.setCurrentUser(g):yield y.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Vn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,l.Z)(function*(){var y;const E={"X-Client-Version":g.clientVersion};g.app.options.appId&&(E["X-Firebase-gmpid"]=g.app.options.appId);const M=yield null===(y=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();return M&&(E["X-Firebase-Client"]=M),E})()}}function Ct(b){return(0,$.m9)(b)}class te{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,$.ne)(y=>this.observer=y)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function De(b,g,y){const E=Ct(b);ne(E._canInitEmulator,E,"emulator-config-failed"),ne(/^https?:\/\//.test(g),E,"invalid-emulator-scheme");const M=!!y?.disableWarnings,L=$e(g),{host:oe,port:Oe}=function _t(b){const g=$e(b),y=/(\/\/)?([^?#/]+)/.exec(b.substr(g.length));if(!y)return{host:"",port:null};const E=y[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(E);if(M){const L=M[1];return{host:L,port:Xt(E.substr(L.length+1))}}{const[L,oe]=E.split(":");return{host:L,port:Xt(oe)}}}(g);E.config.emulator={url:`${L}//${oe}${null===Oe?"":`:${Oe}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:oe,port:Oe,protocol:L.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function gn(){function b(){const g=document.createElement("p"),y=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",b):b())}()}function $e(b){const g=b.indexOf(":");return g<0?"":b.substr(0,g+1)}function Xt(b){if(!b)return null;const g=Number(b);return isNaN(g)?null:g}class zn{constructor(g,y){this.providerId=g,this.signInMethod=y}toJSON(){return ce("not implemented")}_getIdTokenResponse(g){return ce("not implemented")}_linkToIdToken(g,y){return ce("not implemented")}_getReauthenticationResolver(g){return ce("not implemented")}}function Bn(b,g){return rr.apply(this,arguments)}function rr(){return(rr=(0,l.Z)(function*(b,g){return St(b,"POST","/v1/accounts:resetPassword",Gt(b,g))})).apply(this,arguments)}function sr(b,g){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,l.Z)(function*(b,g){return St(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Ah(b,g){return pa.apply(this,arguments)}function pa(){return(pa=(0,l.Z)(function*(b,g){return St(b,"POST","/v1/accounts:update",Gt(b,g))})).apply(this,arguments)}function ao(){return(ao=(0,l.Z)(function*(b,g){return qn(b,"POST","/v1/accounts:signInWithPassword",Gt(b,g))})).apply(this,arguments)}function ss(b,g){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,l.Z)(function*(b,g){return St(b,"POST","/v1/accounts:sendOobCode",Gt(b,g))})).apply(this,arguments)}function _s(b,g){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,l.Z)(function*(b,g){return ss(b,g)})).apply(this,arguments)}function tc(b,g){return ji.apply(this,arguments)}function ji(){return(ji=(0,l.Z)(function*(b,g){return ss(b,g)})).apply(this,arguments)}function or(b,g){return zr.apply(this,arguments)}function zr(){return(zr=(0,l.Z)(function*(b,g){return ss(b,g)})).apply(this,arguments)}function ys(b,g){return lo.apply(this,arguments)}function lo(){return(lo=(0,l.Z)(function*(b,g){return ss(b,g)})).apply(this,arguments)}function il(){return(il=(0,l.Z)(function*(b,g){return qn(b,"POST","/v1/accounts:signInWithEmailLink",Gt(b,g))})).apply(this,arguments)}function ga(){return(ga=(0,l.Z)(function*(b,g){return qn(b,"POST","/v1/accounts:signInWithEmailLink",Gt(b,g))})).apply(this,arguments)}class Lo extends zn{constructor(g,y,E,M=null){super("password",E),this._email=g,this._password=y,this._tenantId=M}static _fromEmailAndPassword(g,y){return new Lo(g,y,"password")}static _fromEmailAndCode(g,y,E=null){return new Lo(g,y,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g;if(y?.email&&y?.password){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(g){var y=this;return(0,l.Z)(function*(){switch(y.signInMethod){case"password":return function ma(b,g){return ao.apply(this,arguments)}(g,{returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function Rr(b,g){return il.apply(this,arguments)}(g,{email:y._email,oobCode:y._password});default:Qe(g,"internal-error")}})()}_linkToIdToken(g,y){var E=this;return(0,l.Z)(function*(){switch(E.signInMethod){case"password":return sr(g,{idToken:y,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function um(b,g){return ga.apply(this,arguments)}(g,{idToken:y,email:E._email,oobCode:E._password});default:Qe(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Us(b,g){return Or.apply(this,arguments)}function Or(){return(Or=(0,l.Z)(function*(b,g){return qn(b,"POST","/v1/accounts:signInWithIdp",Gt(b,g))})).apply(this,arguments)}class vs extends zn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const y=new vs(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(y.idToken=g.idToken),g.accessToken&&(y.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(y.nonce=g.nonce),g.pendingToken&&(y.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(y.accessToken=g.oauthToken,y.secret=g.oauthTokenSecret):Qe("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:M}=y,L=(0,ge._T)(y,["providerId","signInMethod"]);if(!E||!M)return null;const oe=new vs(E,M);return oe.idToken=L.idToken||void 0,oe.accessToken=L.accessToken||void 0,oe.secret=L.secret,oe.nonce=L.nonce,oe.pendingToken=L.pendingToken||null,oe}_getIdTokenResponse(g){return Us(g,this.buildRequest())}_linkToIdToken(g,y){const E=this.buildRequest();return E.idToken=y,Us(g,E)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,Us(g,y)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),g.postBody=(0,$.xO)(y)}return g}}function Th(b,g){return rl.apply(this,arguments)}function rl(){return(rl=(0,l.Z)(function*(b,g){return St(b,"POST","/v1/accounts:sendVerificationCode",Gt(b,g))})).apply(this,arguments)}function sl(){return(sl=(0,l.Z)(function*(b,g){return qn(b,"POST","/v1/accounts:signInWithPhoneNumber",Gt(b,g))})).apply(this,arguments)}function Mh(){return(Mh=(0,l.Z)(function*(b,g){const y=yield qn(b,"POST","/v1/accounts:signInWithPhoneNumber",Gt(b,g));if(y.temporaryProof)throw ti(b,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const gy={USER_NOT_FOUND:"user-not-found"};function ya(){return(ya=(0,l.Z)(function*(b,g){return qn(b,"POST","/v1/accounts:signInWithPhoneNumber",Gt(b,Object.assign(Object.assign({},g),{operation:"REAUTH"})),gy)})).apply(this,arguments)}class va extends zn{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,y){return new va({verificationId:g,verificationCode:y})}static _fromTokenResponse(g,y){return new va({phoneNumber:g,temporaryProof:y})}_getIdTokenResponse(g){return function _a(b,g){return sl.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,y){return function hm(b,g){return Mh.apply(this,arguments)}(g,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function wu(b,g){return ya.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:y,verificationId:E,verificationCode:M}=this.params;return g&&y?{temporaryProof:g,phoneNumber:y}:{sessionInfo:E,code:M}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:y,verificationCode:E,phoneNumber:M,temporaryProof:L}=g;return E||y||M||L?new va({verificationId:y,verificationCode:E,phoneNumber:M,temporaryProof:L}):null}}class ba{constructor(g){var y,E,M,L,oe,Oe;const lt=(0,$.zd)((0,$.pd)(g)),It=null!==(y=lt.apiKey)&&void 0!==y?y:null,on=null!==(E=lt.oobCode)&&void 0!==E?E:null,Jn=function Cu(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=lt.mode)&&void 0!==M?M:null);ne(It&&on&&Jn,"argument-error"),this.apiKey=It,this.operation=Jn,this.code=on,this.continueUrl=null!==(L=lt.continueUrl)&&void 0!==L?L:null,this.languageCode=null!==(oe=lt.languageCode)&&void 0!==oe?oe:null,this.tenantId=null!==(Oe=lt.tenantId)&&void 0!==Oe?Oe:null}static parseLink(g){const y=function nc(b){const g=(0,$.zd)((0,$.pd)(b)).link,y=g?(0,$.zd)((0,$.pd)(g)).deep_link_id:null,E=(0,$.zd)((0,$.pd)(b)).deep_link_id;return(E?(0,$.zd)((0,$.pd)(E)).link:null)||E||y||g||b}(g);try{return new ba(y)}catch{return null}}}let Eu=(()=>{class b{constructor(){this.providerId=b.PROVIDER_ID}static credential(y,E){return Lo._fromEmailAndPassword(y,E)}static credentialWithLink(y,E){const M=ba.parseLink(E);return ne(M,"argument-error"),Lo._fromEmailAndCode(y,M.code,M.tenantId)}}return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b})();class Yi{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class wa extends Yi{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class co extends wa{static credentialFromJSON(g){const y="string"==typeof g?JSON.parse(g):g;return ne("providerId"in y&&"signInMethod"in y,"argument-error"),vs._fromParams(y)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return ne(g.idToken||g.accessToken,"argument-error"),vs._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return co.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return co.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:y,oauthAccessToken:E,oauthTokenSecret:M,pendingToken:L,nonce:oe,providerId:Oe}=g;if(!E&&!M&&!y&&!L||!Oe)return null;try{return new co(Oe)._credential({idToken:y,accessToken:E,nonce:oe,pendingToken:L})}catch{return null}}}let ic=(()=>{class b extends wa{constructor(){super("facebook.com")}static credential(y){return vs._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return b.credential(y.oauthAccessToken)}catch{return null}}}return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b})(),rc=(()=>{class b extends wa{constructor(){super("google.com"),this.addScope("profile")}static credential(y,E){return vs._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:E})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:E,oauthAccessToken:M}=y;if(!E&&!M)return null;try{return b.credential(E,M)}catch{return null}}}return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b})(),ol=(()=>{class b extends wa{constructor(){super("github.com")}static credential(y){return vs._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return b.credential(y.oauthAccessToken)}catch{return null}}}return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b})();class Vo extends zn{constructor(g,y){super(g,g),this.pendingToken=y}_getIdTokenResponse(g){return Us(g,this.buildRequest())}_linkToIdToken(g,y){const E=this.buildRequest();return E.idToken=y,Us(g,E)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,Us(g,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:M,pendingToken:L}=y;return E&&M&&L&&E===M?new Vo(E,L):null}static _create(g,y){return new Vo(g,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class bs extends Yi{constructor(g){ne(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return bs.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return bs.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const y=Vo.fromJSON(g);return ne(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:y,providerId:E}=g;if(!y||!E)return null;try{return Vo._create(E,y)}catch{return null}}}let oc=(()=>{class b extends wa{constructor(){super("twitter.com")}static credential(y,E){return vs._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:E})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:E,oauthTokenSecret:M}=y;if(!E||!M)return null;try{return b.credential(E,M)}catch{return null}}}return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b})();function ar(b,g){return uo.apply(this,arguments)}function uo(){return(uo=(0,l.Z)(function*(b,g){return qn(b,"POST","/v1/accounts:signUp",Gt(b,g))})).apply(this,arguments)}class $i{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,y,E,M=!1){return(0,l.Z)(function*(){const L=yield Tt._fromIdTokenResponse(g,E,M),oe=Hs(E);return new $i({user:L,providerId:oe,_tokenResponse:E,operationType:y})})()}static _forOperation(g,y,E){return(0,l.Z)(function*(){yield g._updateTokensIfNecessary(E,!0);const M=Hs(E);return new $i({user:g,providerId:M,_tokenResponse:E,operationType:y})})()}}function Hs(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function yy(b){return fm.apply(this,arguments)}function fm(){return(fm=(0,l.Z)(function*(b){var g;const y=Ct(b);if(yield y._initializationPromise,null!==(g=y.currentUser)&&void 0!==g&&g.isAnonymous)return new $i({user:y.currentUser,providerId:null,operationType:"signIn"});const E=yield ar(y,{returnSecureToken:!0}),M=yield $i._fromIdTokenResponse(y,"signIn",E,!0);return yield y._updateCurrentUser(M.user),M})).apply(this,arguments)}class si extends $.ZR{constructor(g,y,E,M){var L;super(y.code,y.message),this.operationType=E,this.user=M,Object.setPrototypeOf(this,si.prototype),this.customData={appName:g.name,tenantId:null!==(L=g.tenantId)&&void 0!==L?L:void 0,_serverResponse:y.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(g,y,E,M){return new si(g,y,E,M)}}function Du(b,g,y,E){return("reauthenticate"===g?y._getReauthenticationResolver(b):y._getIdTokenResponse(b)).catch(L=>{throw"auth/multi-factor-auth-required"===L.code?si._fromErrorAndOperation(b,L,g,E):L})}function xh(b){return new Set(b.map(({providerId:g})=>g).filter(g=>!!g))}function os(b,g){return lr.apply(this,arguments)}function lr(){return(lr=(0,l.Z)(function*(b,g){const y=(0,$.m9)(b);yield gr(!0,y,g);const{providerUserInfo:E}=yield rt(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[g]}),M=xh(E||[]);return y.providerData=y.providerData.filter(L=>M.has(L.providerId)),M.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y})).apply(this,arguments)}function Iu(b,g){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,l.Z)(function*(b,g,y=!1){const E=yield gt(b,g._linkToIdToken(b.auth,yield b.getIdToken()),y);return $i._forOperation(b,"link",E)})).apply(this,arguments)}function gr(b,g,y){return In.apply(this,arguments)}function In(){return(In=(0,l.Z)(function*(b,g,y){yield Ai(g);const M=!1===b?"provider-already-linked":"no-such-provider";ne(xh(g.providerData).has(y)===b,g.auth,M)})).apply(this,arguments)}function ho(b,g){return fo.apply(this,arguments)}function fo(){return(fo=(0,l.Z)(function*(b,g,y=!1){var E;const{auth:M}=b,L="reauthenticate";try{const oe=yield gt(b,Du(M,L,g,b),y);ne(oe.idToken,M,"internal-error");const Oe=mt(oe.idToken);ne(Oe,M,"internal-error");const{sub:lt}=Oe;return ne(b.uid===lt,M,"user-mismatch"),$i._forOperation(b,L,oe)}catch(oe){throw"auth/user-not-found"===(null===(E=oe)||void 0===E?void 0:E.code)&&Qe(M,"user-mismatch"),oe}})).apply(this,arguments)}function pm(b,g){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,l.Z)(function*(b,g,y=!1){const E="signIn",M=yield Du(b,E,g),L=yield $i._fromIdTokenResponse(b,E,M);return y||(yield b._updateCurrentUser(L.user)),L})).apply(this,arguments)}function Ea(b,g){return Da.apply(this,arguments)}function Da(){return(Da=(0,l.Z)(function*(b,g){return pm(Ct(b),g)})).apply(this,arguments)}function $t(b,g){return H.apply(this,arguments)}function H(){return(H=(0,l.Z)(function*(b,g){const y=(0,$.m9)(b);return yield gr(!1,y,g.providerId),Iu(y,g)})).apply(this,arguments)}function B(b,g){return Q.apply(this,arguments)}function Q(){return(Q=(0,l.Z)(function*(b,g){return ho((0,$.m9)(b),g)})).apply(this,arguments)}function pe(b,g){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,l.Z)(function*(b,g){return qn(b,"POST","/v1/accounts:signInWithCustomToken",Gt(b,g))})).apply(this,arguments)}function Xe(b,g){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,l.Z)(function*(b,g){const y=Ct(b),E=yield pe(y,{token:g,returnSecureToken:!0}),M=yield $i._fromIdTokenResponse(y,"signIn",E);return yield y._updateCurrentUser(M.user),M})).apply(this,arguments)}class en{constructor(g,y){this.factorId=g,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(g,y){return"phoneInfo"in y?Se._fromServerResponse(g,y):Qe(g,"internal-error")}}class Se extends en{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,y){return new Se(y)}}function Ft(b,g,y){var E;ne((null===(E=y.url)||void 0===E?void 0:E.length)>0,b,"invalid-continue-uri"),ne(typeof y.dynamicLinkDomain>"u"||y.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),g.continueUrl=y.url,g.dynamicLinkDomain=y.dynamicLinkDomain,g.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(ne(y.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),g.iOSBundleId=y.iOS.bundleId),y.android&&(ne(y.android.packageName.length>0,b,"missing-android-pkg-name"),g.androidInstallApp=y.android.installApp,g.androidMinimumVersionCode=y.android.minimumVersion,g.androidPackageName=y.android.packageName)}function oi(b,g,y){return jt.apply(this,arguments)}function jt(){return(jt=(0,l.Z)(function*(b,g,y){const E=(0,$.m9)(b),M={requestType:"PASSWORD_RESET",email:g};y&&Ft(E,M,y),yield tc(E,M)})).apply(this,arguments)}function Yn(b,g,y){return po.apply(this,arguments)}function po(){return(po=(0,l.Z)(function*(b,g,y){yield Bn((0,$.m9)(b),{oobCode:g,newPassword:y})})).apply(this,arguments)}function mo(b,g){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,l.Z)(function*(b,g){yield Ah((0,$.m9)(b),{oobCode:g})})).apply(this,arguments)}function js(b,g){return al.apply(this,arguments)}function al(){return(al=(0,l.Z)(function*(b,g){const y=(0,$.m9)(b),E=yield Bn(y,{oobCode:g}),M=E.requestType;switch(ne(M,y,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ne(E.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ne(E.mfaInfo,y,"internal-error");default:ne(E.email,y,"internal-error")}let L=null;return E.mfaInfo&&(L=en._fromServerResponse(Ct(y),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:L},operation:M}})).apply(this,arguments)}function ac(b,g){return go.apply(this,arguments)}function go(){return(go=(0,l.Z)(function*(b,g){const{data:y}=yield js((0,$.m9)(b),g);return y.email})).apply(this,arguments)}function Bo(b,g,y){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,l.Z)(function*(b,g,y){const E=Ct(b),M=yield ar(E,{returnSecureToken:!0,email:g,password:y}),L=yield $i._fromIdTokenResponse(E,"signIn",M);return yield E._updateCurrentUser(L.user),L})).apply(this,arguments)}function Ci(b,g,y){return Ea((0,$.m9)(b),Eu.credential(g,y))}function $s(b,g,y){return lc.apply(this,arguments)}function lc(){return(lc=(0,l.Z)(function*(b,g,y){const E=(0,$.m9)(b),M={requestType:"EMAIL_SIGNIN",email:g};ne(y.handleCodeInApp,E,"argument-error"),y&&Ft(E,M,y),yield or(E,M)})).apply(this,arguments)}function cc(b,g){return"EMAIL_SIGNIN"===ba.parseLink(g)?.operation}function Uo(b,g,y){return mm.apply(this,arguments)}function mm(){return(mm=(0,l.Z)(function*(b,g,y){const E=(0,$.m9)(b),M=Eu.credentialWithLink(g,y||je());return ne(M._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Ea(E,M)})).apply(this,arguments)}function vy(b,g){return gm.apply(this,arguments)}function gm(){return(gm=(0,l.Z)(function*(b,g){return St(b,"POST","/v1/accounts:createAuthUri",Gt(b,g))})).apply(this,arguments)}function TC(b,g){return Su.apply(this,arguments)}function Su(){return(Su=(0,l.Z)(function*(b,g){const E={identifier:g,continueUri:Be()?je():"http://localhost"},{signinMethods:M}=yield vy((0,$.m9)(b),E);return M||[]})).apply(this,arguments)}function kh(b,g){return Rh.apply(this,arguments)}function Rh(){return(Rh=(0,l.Z)(function*(b,g){const y=(0,$.m9)(b),M={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};g&&Ft(y.auth,M,g);const{email:L}=yield _s(y.auth,M);L!==b.email&&(yield b.reload())})).apply(this,arguments)}function Oh(b,g,y){return Ph.apply(this,arguments)}function Ph(){return(Ph=(0,l.Z)(function*(b,g,y){const E=(0,$.m9)(b),L={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:g};y&&Ft(E.auth,L,y);const{email:oe}=yield ys(E.auth,L);oe!==b.email&&(yield b.reload())})).apply(this,arguments)}function by(b,g){return Au.apply(this,arguments)}function Au(){return(Au=(0,l.Z)(function*(b,g){return St(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function wy(b,g){return Nh.apply(this,arguments)}function Nh(){return(Nh=(0,l.Z)(function*(b,{displayName:g,photoURL:y}){if(void 0===g&&void 0===y)return;const E=(0,$.m9)(b),L={idToken:yield E.getIdToken(),displayName:g,photoUrl:y,returnSecureToken:!0},oe=yield gt(E,by(E.auth,L));E.displayName=oe.displayName||null,E.photoURL=oe.photoUrl||null;const Oe=E.providerData.find(({providerId:lt})=>"password"===lt);Oe&&(Oe.displayName=E.displayName,Oe.photoURL=E.photoURL),yield E._updateTokensIfNecessary(oe)})).apply(this,arguments)}function Cy(b,g){return ll((0,$.m9)(b),g,null)}function _m(b,g){return ll((0,$.m9)(b),null,g)}function ll(b,g,y){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,l.Z)(function*(b,g,y){const{auth:E}=b,L={idToken:yield b.getIdToken(),returnSecureToken:!0};g&&(L.email=g),y&&(L.password=y);const oe=yield gt(b,sr(E,L));yield b._updateTokensIfNecessary(oe,!0)})).apply(this,arguments)}class pi{constructor(g,y,E={}){this.isNewUser=g,this.providerId=y,this.profile=E}}class _o extends pi{constructor(g,y,E,M){super(g,y,E),this.username=M}}class mi extends pi{constructor(g,y){super(g,"facebook.com",y)}}class ym extends _o{constructor(g,y){super(g,"github.com",y,"string"==typeof y?.login?y?.login:null)}}class Dy extends pi{constructor(g,y){super(g,"google.com",y)}}class Iy extends _o{constructor(g,y,E){super(g,"twitter.com",y,E)}}function Sy(b){const{user:g,_tokenResponse:y}=b;return g.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function Ey(b){var g,y;if(!b)return null;const{providerId:E}=b,M=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},L=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!E&&b?.idToken){const oe=null===(y=null===(g=mt(b.idToken))||void 0===g?void 0:g.firebase)||void 0===y?void 0:y.sign_in_provider;if(oe)return new pi(L,"anonymous"!==oe&&"custom"!==oe?oe:null)}if(!E)return null;switch(E){case"facebook.com":return new mi(L,M);case"github.com":return new ym(L,M);case"google.com":return new Dy(L,M);case"twitter.com":return new Iy(L,M,b.screenName||null);case"custom":case"anonymous":return new pi(L,null);default:return new pi(L,E,M)}}(y)}function dc(b,g,y,E){return(0,$.m9)(b).onAuthStateChanged(g,y,E)}class as{constructor(g,y,E){this.type=g,this.credential=y,this.auth=E}static _fromIdtoken(g,y){return new as("enroll",g,y)}static _fromMfaPendingCredential(g){return new as("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var y,E;if(g?.multiFactorSession){if(null!==(y=g.multiFactorSession)&&void 0!==y&&y.pendingCredential)return as._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(E=g.multiFactorSession)&&void 0!==E&&E.idToken)return as._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Bh{constructor(g,y,E){this.session=g,this.hints=y,this.signInResolver=E}static _fromError(g,y){const E=Ct(g),M=y.customData._serverResponse,L=(M.mfaInfo||[]).map(Oe=>en._fromServerResponse(E,Oe));ne(M.mfaPendingCredential,E,"internal-error");const oe=as._fromMfaPendingCredential(M.mfaPendingCredential);return new Bh(oe,L,function(){var Oe=(0,l.Z)(function*(lt){const It=yield lt._process(E,oe);delete M.mfaInfo,delete M.mfaPendingCredential;const on=Object.assign(Object.assign({},M),{idToken:It.idToken,refreshToken:It.refreshToken});switch(y.operationType){case"signIn":const Jn=yield $i._fromIdTokenResponse(E,y.operationType,on);return yield E._updateCurrentUser(Jn.user),Jn;case"reauthenticate":return ne(y.user,E,"internal-error"),$i._forOperation(y.user,y.operationType,on);default:Qe(E,"internal-error")}});return function(lt){return Oe.apply(this,arguments)}}())}resolveSignIn(g){var y=this;return(0,l.Z)(function*(){return y.signInResolver(g)})()}}function Ay(b,g){var y;const E=(0,$.m9)(b),M=g;return ne(g.customData.operationType,E,"argument-error"),ne(null===(y=M.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,E,"argument-error"),Bh._fromError(E,M)}function hc(b,g){return St(b,"POST","/v2/accounts/mfaEnrollment:start",Gt(b,g))}class xu{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(E=>en._fromServerResponse(g.auth,E)))})}static _fromUser(g){return new xu(g)}getSession(){var g=this;return(0,l.Z)(function*(){return as._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,y){var E=this;return(0,l.Z)(function*(){const M=g,L=yield E.getSession(),oe=yield gt(E.user,M._process(E.user.auth,L,y));return yield E.user._updateTokensIfNecessary(oe),E.user.reload()})()}unenroll(g){var y=this;return(0,l.Z)(function*(){var E;const M="string"==typeof g?g:g.uid,L=yield y.user.getIdToken(),oe=yield gt(y.user,function Mu(b,g){return St(b,"POST","/v2/accounts/mfaEnrollment:withdraw",Gt(b,g))}(y.user.auth,{idToken:L,mfaEnrollmentId:M}));y.enrolledFactors=y.enrolledFactors.filter(({uid:Oe})=>Oe!==M),yield y.user._updateTokensIfNecessary(oe);try{yield y.user.reload()}catch(Oe){if("auth/user-token-expired"!==(null===(E=Oe)||void 0===E?void 0:E.code))throw Oe}})()}}const Ty=new WeakMap;function Hh(b){const g=(0,$.m9)(b);return Ty.has(g)||Ty.set(g,xu._fromUser(g)),Ty.get(g)}const yo="__sak";class jh{constructor(g,y){this.storageRetriever=g,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(yo,"1"),this.storage.removeItem(yo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,y){return this.storage.setItem(g,JSON.stringify(y)),Promise.resolve()}_get(g){const y=this.storage.getItem(g);return Promise.resolve(y?JSON.parse(y):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Aa=(()=>{class b extends jh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,E)=>this.onStorageEvent(y,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function $h(){const b=(0,$.z$)();return R(b)||ke(b)}()&&function Dr(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Yt(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const E of Object.keys(this.listeners)){const M=this.storage.getItem(E),L=this.localCache[E];M!==L&&y(E,L,M)}}onStorageEvent(y,E=!1){if(!y.key)return void this.forAllChangedKeys((Oe,lt,It)=>{this.notifyListeners(Oe,It)});const M=y.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Oe=this.storage.getItem(M);if(y.newValue!==Oe)null!==y.newValue?this.storage.setItem(M,y.newValue):this.storage.removeItem(M);else if(this.localCache[M]===y.newValue&&!E)return}const L=()=>{const Oe=this.storage.getItem(M);!E&&this.localCache[M]===Oe||this.notifyListeners(M,Oe)},oe=this.storage.getItem(M);!function xt(){return(0,$.w1)()&&10===document.documentMode}()||oe===y.newValue||y.newValue===y.oldValue?L():setTimeout(L,10)}notifyListeners(y,E){this.localCache[y]=E;const M=this.listeners[y];if(M)for(const L of Array.from(M))L(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,E,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:E,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(E)}_removeListener(y,E){this.listeners[y]&&(this.listeners[y].delete(E),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,E){var M=()=>super._set,L=this;return(0,l.Z)(function*(){yield M().call(L,y,E),L.localCache[y]=JSON.stringify(E)})()}_get(y){var E=()=>super._get,M=this;return(0,l.Z)(function*(){const L=yield E().call(M,y);return M.localCache[y]=JSON.stringify(L),L})()}_remove(y){var E=()=>super._remove,M=this;return(0,l.Z)(function*(){yield E().call(M,y),delete M.localCache[y]})()}}return b.type="LOCAL",b})(),Ho=(()=>{class b extends jh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,E){}_removeListener(y,E){}}return b.type="SESSION",b})();let ku=(()=>{class b{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const E=this.receivers.find(L=>L.isListeningto(y));if(E)return E;const M=new b(y);return this.receivers.push(M),M}isListeningto(y){return this.eventTarget===y}handleEvent(y){var E=this;return(0,l.Z)(function*(){const M=y,{eventId:L,eventType:oe,data:Oe}=M.data,lt=E.handlersMap[oe];if(!lt?.size)return;M.ports[0].postMessage({status:"ack",eventId:L,eventType:oe});const It=Array.from(lt).map(function(){var Jn=(0,l.Z)(function*(cs){return cs(M.origin,Oe)});return function(cs){return Jn.apply(this,arguments)}}()),on=yield function zh(b){return Promise.all(b.map(function(){var g=(0,l.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(E){return{fulfilled:!1,reason:E}}});return function(y){return g.apply(this,arguments)}}()))}(It);M.ports[0].postMessage({status:"done",eventId:L,eventType:oe,response:on})})()}_subscribe(y,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(E)}_unsubscribe(y,E){this.handlersMap[y]&&E&&this.handlersMap[y].delete(E),(!E||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return b.receivers=[],b})();function cl(b="",g=10){let y="";for(let E=0;E<g;E++)y+=Math.floor(10*Math.random());return b+y}class ky{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,y,E=50){var M=this;return(0,l.Z)(function*(){const L=typeof MessageChannel<"u"?new MessageChannel:null;if(!L)throw new Error("connection_unavailable");let oe,Oe;return new Promise((lt,It)=>{const on=cl("",20);L.port1.start();const Jn=setTimeout(()=>{It(new Error("unsupported_event"))},E);Oe={messageChannel:L,onMessage(cs){const Ba=cs;if(Ba.data.eventId===on)switch(Ba.data.status){case"ack":clearTimeout(Jn),oe=setTimeout(()=>{It(new Error("timeout"))},3e3);break;case"done":clearTimeout(oe),lt(Ba.data.response);break;default:clearTimeout(Jn),clearTimeout(oe),It(new Error("invalid_response"))}}},M.handlers.add(Oe),L.port1.addEventListener("message",Oe.onMessage),M.target.postMessage({eventType:g,eventId:on,data:y},[L.port2])}).finally(()=>{Oe&&M.removeMessageHandler(Oe)})})()}}function zi(){return window}function Cs(){return typeof zi().WorkerGlobalScope<"u"&&"function"==typeof zi().importScripts}function Ta(){return(Ta=(0,l.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const pc="firebaseLocalStorageDb",gc="firebaseLocalStorage",Ou="fbase_key";class Ma{constructor(g){this.request=g}toPromise(){return new Promise((g,y)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function Pu(b,g){return b.transaction([gc],g?"readwrite":"readonly").objectStore(gc)}function Em(){const b=indexedDB.open(pc,1);return new Promise((g,y)=>{b.addEventListener("error",()=>{y(b.error)}),b.addEventListener("upgradeneeded",()=>{const E=b.result;try{E.createObjectStore(gc,{keyPath:Ou})}catch(M){y(M)}}),b.addEventListener("success",(0,l.Z)(function*(){const E=b.result;E.objectStoreNames.contains(gc)?g(E):(E.close(),yield function Cm(){const b=indexedDB.deleteDatabase(pc);return new Ma(b).toPromise()}(),g(yield Em()))}))})}function _c(b,g,y){return zs.apply(this,arguments)}function zs(){return(zs=(0,l.Z)(function*(b,g,y){const E=Pu(b,!0).put({[Ou]:g,value:y});return new Ma(E).toPromise()})).apply(this,arguments)}function Nu(){return(Nu=(0,l.Z)(function*(b,g){const y=Pu(b,!1).get(g),E=yield new Ma(y).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Dm(b,g){const y=Pu(b,!0).delete(g);return new Ma(y).toPromise()}const Fu=(()=>{class b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,l.Z)(function*(){return y.db||(y.db=yield Em()),y.db})()}_withRetries(y){var E=this;return(0,l.Z)(function*(){let M=0;for(;;)try{const L=yield E._openDb();return yield y(L)}catch(L){if(M++>3)throw L;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,l.Z)(function*(){return Cs()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,l.Z)(function*(){y.receiver=ku._getInstance(function Ru(){return Cs()?self:null}()),y.receiver._subscribe("keyChanged",function(){var E=(0,l.Z)(function*(M,L){return{keyProcessed:(yield y._poll()).includes(L.key)}});return function(M,L){return E.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var E=(0,l.Z)(function*(M,L){return["keyChanged"]});return function(M,L){return E.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,l.Z)(function*(){var E,M;if(y.activeServiceWorker=yield function Ry(){return Ta.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new ky(y.activeServiceWorker);const L=yield y.sender._send("ping",{},800);!L||(null===(E=L[0])||void 0===E?void 0:E.fulfilled)&&(null===(M=L[0])||void 0===M?void 0:M.value.includes("keyChanged"))&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var E=this;return(0,l.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Gh(){var b;return(null===(b=navigator?.serviceWorker)||void 0===b?void 0:b.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:y},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,l.Z)(function*(){try{if(!indexedDB)return!1;const y=yield Em();return yield _c(y,yo,"1"),yield Dm(y,yo),!0}catch{}return!1})()}_withPendingWrite(y){var E=this;return(0,l.Z)(function*(){E.pendingWrites++;try{yield y()}finally{E.pendingWrites--}})()}_set(y,E){var M=this;return(0,l.Z)(function*(){return M._withPendingWrite((0,l.Z)(function*(){return yield M._withRetries(L=>_c(L,y,E)),M.localCache[y]=E,M.notifyServiceWorker(y)}))})()}_get(y){var E=this;return(0,l.Z)(function*(){const M=yield E._withRetries(L=>function Oy(b,g){return Nu.apply(this,arguments)}(L,y));return E.localCache[y]=M,M})()}_remove(y){var E=this;return(0,l.Z)(function*(){return E._withPendingWrite((0,l.Z)(function*(){return yield E._withRetries(M=>Dm(M,y)),delete E.localCache[y],E.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,l.Z)(function*(){const E=yield y._withRetries(oe=>{const Oe=Pu(oe,!1).getAll();return new Ma(Oe).toPromise()});if(!E)return[];if(0!==y.pendingWrites)return[];const M=[],L=new Set;for(const{fbase_key:oe,value:Oe}of E)L.add(oe),JSON.stringify(y.localCache[oe])!==JSON.stringify(Oe)&&(y.notifyListeners(oe,Oe),M.push(oe));for(const oe of Object.keys(y.localCache))y.localCache[oe]&&!L.has(oe)&&(y.notifyListeners(oe,null),M.push(oe));return M})()}notifyListeners(y,E){this.localCache[y]=E;const M=this.listeners[y];if(M)for(const L of Array.from(M))L(E)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,l.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(E)}_removeListener(y,E){this.listeners[y]&&(this.listeners[y].delete(E),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return b.type="LOCAL",b})();function Py(b,g){return St(b,"POST","/v2/accounts/mfaSignIn:start",Gt(b,g))}function xa(){return(xa=(0,l.Z)(function*(b){return(yield St(b,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ul(b){return new Promise((g,y)=>{const E=document.createElement("script");E.setAttribute("src",b),E.onload=g,E.onerror=M=>{const L=Fe("internal-error");L.customData=M,y(L)},E.type="text/javascript",E.charset="UTF-8",function vc(){var b,g;return null!==(g=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==g?g:document}().appendChild(E)})}function Wh(b){return`__${b}${Math.floor(1e6*Math.random())}`}const Am=1e12;class MC{constructor(g){this.auth=g,this.counter=Am,this._widgets=new Map}render(g,y){const E=this.counter;return this._widgets.set(E,new Xn(g,this.auth.name,y||{})),this.counter++,E}reset(g){var y;const E=g||Am;null===(y=this._widgets.get(E))||void 0===y||y.delete(),this._widgets.delete(E)}getResponse(g){var y;return(null===(y=this._widgets.get(g||Am))||void 0===y?void 0:y.getResponse())||""}execute(g){var y=this;return(0,l.Z)(function*(){var E;return null===(E=y._widgets.get(g||Am))||void 0===E||E.execute(),""})()}}class Xn{constructor(g,y,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof g?document.getElementById(g):g;ne(M,"argument-error",{appName:y}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function xC(b){const g=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<b;E++)g.push(y.charAt(Math.floor(Math.random()*y.length)));return g.join("")}(50);const{callback:g,"expired-callback":y}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ny=Wh("rcb"),WT=new Ke(3e4,6e4);class YT{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=zi().grecaptcha)||void 0===g||!g.render)}load(g,y=""){return ne(function KT(b){return b.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b)}(y),g,"argument-error"),this.shouldResolveImmediately(y)?Promise.resolve(zi().grecaptcha):new Promise((E,M)=>{const L=zi().setTimeout(()=>{M(Fe(g,"network-request-failed"))},WT.get());zi()[Ny]=()=>{zi().clearTimeout(L),delete zi()[Ny];const Oe=zi().grecaptcha;if(!Oe)return void M(Fe(g,"internal-error"));const lt=Oe.render;Oe.render=(It,on)=>{const Jn=lt(It,on);return this.counter++,Jn},this.hostLanguage=y,E(Oe)},ul(`https://www.google.com/recaptcha/api.js??${(0,$.xO)({onload:Ny,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(L),M(Fe(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var y;return!(null===(y=zi().grecaptcha)||void 0===y||!y.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ZT{load(g){return(0,l.Z)(function*(){return new MC(g)})()}clearedOneInstance(){}}const $o="recaptcha",kC={theme:"light",type:"image"};class Fy{constructor(g,y=Object.assign({},kC),E){this.parameters=y,this.type=$o,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ct(E),this.isInvisible="invisible"===this.parameters.size,ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof g?document.getElementById(g):g;ne(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ZT:new YT,this.validateStartingState()}verify(){var g=this;return(0,l.Z)(function*(){g.assertNotDestroyed();const y=yield g.render(),E=g.getAssertedRecaptcha();return E.getResponse(y)||new Promise(L=>{const oe=Oe=>{!Oe||(g.tokenChangeListeners.delete(oe),L(Oe))};g.tokenChangeListeners.add(oe),g.isInvisible&&E.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){ne(!this.parameters.sitekey,this.auth,"argument-error"),ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return y=>{if(this.tokenChangeListeners.forEach(E=>E(y)),"function"==typeof g)g(y);else if("string"==typeof g){const E=zi()[g];"function"==typeof E&&E(y)}}}assertNotDestroyed(){ne(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,l.Z)(function*(){if(yield g.init(),!g.widgetId){let y=g.container;if(!g.isInvisible){const E=document.createElement("div");y.appendChild(E),y=E}g.widgetId=g.getAssertedRecaptcha().render(y,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,l.Z)(function*(){ne(Be()&&!Cs(),g.auth,"internal-error"),yield function Zi(){let b=null;return new Promise(g=>{"complete"!==document.readyState?(b=()=>g(),window.addEventListener("load",b)):g()}).catch(g=>{throw b&&window.removeEventListener("load",b),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const y=yield function Vu(b){return xa.apply(this,arguments)}(g.auth);ne(y,g.auth,"internal-error"),g.parameters.sitekey=y})()}getAssertedRecaptcha(){return ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class dl{constructor(g,y){this.verificationId=g,this.onConfirmation=y}confirm(g){const y=va._fromVerification(this.verificationId,g);return this.onConfirmation(y)}}function V(b,g,y){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,l.Z)(function*(b,g,y){const E=Ct(b),M=yield Ye(E,g,(0,$.m9)(y));return new dl(M,L=>Ea(E,L))})).apply(this,arguments)}function Es(b,g,y){return gi.apply(this,arguments)}function gi(){return(gi=(0,l.Z)(function*(b,g,y){const E=(0,$.m9)(b);yield gr(!1,E,"phone");const M=yield Ye(E.auth,g,(0,$.m9)(y));return new dl(M,L=>$t(E,L))})).apply(this,arguments)}function vt(b,g,y){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,l.Z)(function*(b,g,y){const E=(0,$.m9)(b),M=yield Ye(E.auth,g,(0,$.m9)(y));return new dl(M,L=>B(E,L))})).apply(this,arguments)}function Ye(b,g,y){return Un.apply(this,arguments)}function Un(){return(Un=(0,l.Z)(function*(b,g,y){var E;const M=yield y.verify();try{let L;if(ne("string"==typeof M,b,"argument-error"),ne(y.type===$o,b,"argument-error"),L="string"==typeof g?{phoneNumber:g}:g,"session"in L){const oe=L.session;if("phoneNumber"in L)return ne("enroll"===oe.type,b,"internal-error"),(yield hc(b,{idToken:oe.credential,phoneEnrollmentInfo:{phoneNumber:L.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{ne("signin"===oe.type,b,"internal-error");const Oe=(null===(E=L.multiFactorHint)||void 0===E?void 0:E.uid)||L.multiFactorUid;return ne(Oe,b,"missing-multi-factor-info"),(yield Py(b,{mfaPendingCredential:oe.credential,mfaEnrollmentId:Oe,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:oe}=yield Th(b,{phoneNumber:L.phoneNumber,recaptchaToken:M});return oe}}finally{y._reset()}})).apply(this,arguments)}function Kn(b,g){return tn.apply(this,arguments)}function tn(){return(tn=(0,l.Z)(function*(b,g){yield Iu((0,$.m9)(b),g)})).apply(this,arguments)}let ka=(()=>{class b{constructor(y){this.providerId=b.PROVIDER_ID,this.auth=Ct(y)}verifyPhoneNumber(y,E){return Ye(this.auth,y,(0,$.m9)(E))}static credential(y,E){return va._fromVerification(y,E)}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:E,temporaryProof:M}=y;return E&&M?va._fromTokenResponse(E,M):null}}return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b})();function On(b,g){return g?ee(g):(ne(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}class Je extends zn{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Us(g,this._buildIdpRequest())}_linkToIdToken(g,y){return Us(g,this._buildIdpRequest(y))}_getReauthenticationResolver(g){return Us(g,this._buildIdpRequest())}_buildIdpRequest(g){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(y.idToken=g),y}}function Ni(b){return pm(b.auth,new Je(b),b.bypassAuthState)}function Pn(b){const{auth:g,user:y}=b;return ne(y,g,"internal-error"),ho(y,new Je(b),b.bypassAuthState)}function Ra(b){return cr.apply(this,arguments)}function cr(){return(cr=(0,l.Z)(function*(b){const{auth:g,user:y}=b;return ne(y,g,"internal-error"),Iu(y,new Je(b),b.bypassAuthState)})).apply(this,arguments)}class _n{constructor(g,y,E,M,L=!1){this.auth=g,this.resolver=E,this.user=M,this.bypassAuthState=L,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var g=this;return new Promise(function(){var y=(0,l.Z)(function*(E,M){g.pendingPromise={resolve:E,reject:M};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(L){g.reject(L)}});return function(E,M){return y.apply(this,arguments)}}())}onAuthEvent(g){var y=this;return(0,l.Z)(function*(){const{urlResponse:E,sessionId:M,postBody:L,tenantId:oe,error:Oe,type:lt}=g;if(Oe)return void y.reject(Oe);const It={auth:y.auth,requestUri:E,sessionId:M,tenantId:oe||void 0,postBody:L||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(lt)(It))}catch(on){y.reject(on)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Ni;case"linkViaPopup":case"linkViaRedirect":return Ra;case"reauthViaPopup":case"reauthViaRedirect":return Pn;default:Qe(this.auth,"internal-error")}}resolve(g){Ee(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){Ee(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Tm=new Ke(2e3,1e4);function Ly(b,g,y){return wc.apply(this,arguments)}function wc(){return(wc=(0,l.Z)(function*(b,g,y){const E=Ct(b);Ie(b,g,Yi);const M=On(E,y);return new bn(E,"signInViaPopup",g,M).executeNotNull()})).apply(this,arguments)}function qh(b,g,y){return Yh.apply(this,arguments)}function Yh(){return(Yh=(0,l.Z)(function*(b,g,y){const E=(0,$.m9)(b);Ie(E.auth,g,Yi);const M=On(E.auth,y);return new bn(E.auth,"reauthViaPopup",g,M,E).executeNotNull()})).apply(this,arguments)}function Bu(b,g,y){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,l.Z)(function*(b,g,y){const E=(0,$.m9)(b);Ie(E.auth,g,Yi);const M=On(E.auth,y);return new bn(E.auth,"linkViaPopup",g,M,E).executeNotNull()})).apply(this,arguments)}let bn=(()=>{class b extends _n{constructor(y,E,M,L,oe){super(y,E,L,oe),this.provider=M,this.authWindow=null,this.pollId=null,b.currentPopupAction&&b.currentPopupAction.cancel(),b.currentPopupAction=this}executeNotNull(){var y=this;return(0,l.Z)(function*(){const E=yield y.execute();return ne(E,y.auth,"internal-error"),E})()}onExecution(){var y=this;return(0,l.Z)(function*(){Ee(1===y.filter.length,"Popup operations only handle one event");const E=cl();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],E),y.authWindow.associatedEvent=E,y.resolver._originValidation(y.auth).catch(M=>{y.reject(M)}),y.resolver._isIframeWebStorageSupported(y.auth,M=>{M||y.reject(Fe(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(Fe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,b.currentPopupAction=null}pollUserCancellation(){const y=()=>{var E,M;this.pollId=null!==(M=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Fe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(y,Tm.get())};y()}}return b.currentPopupAction=null,b})();const Cc=new Map;class Ec extends _n{constructor(g,y,E=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,E),this.eventId=null}execute(){var g=()=>super.execute,y=this;return(0,l.Z)(function*(){let E=Cc.get(y.auth._key());if(!E){try{const L=(yield function zo(b,g){return Nr.apply(this,arguments)}(y.resolver,y.auth))?yield g().call(y):null;E=()=>Promise.resolve(L)}catch(M){E=()=>Promise.reject(M)}Cc.set(y.auth._key(),E)}return y.bypassAuthState||Cc.set(y.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(g){var y=()=>super.onAuthEvent,E=this;return(0,l.Z)(function*(){if("signInViaRedirect"===g.type)return y().call(E,g);if("unknown"!==g.type){if(g.eventId){const M=yield E.auth._redirectUserForId(g.eventId);if(M)return E.user=M,y().call(E,g);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,l.Z)(function*(){})()}cleanUp(){}}function Nr(){return(Nr=(0,l.Z)(function*(b,g){const y=Ir(g),E=ai(b);if(!(yield E._isAvailable()))return!1;const M="true"===(yield E._get(y));return yield E._remove(y),M})).apply(this,arguments)}function Fr(b,g){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,l.Z)(function*(b,g){return ai(b)._set(Ir(g),"true")})).apply(this,arguments)}function Kh(){Cc.clear()}function Lt(b,g){Cc.set(b._key(),g)}function ai(b){return ee(b._redirectPersistence)}function Ir(b){return z("pendingRedirect",b.config.apiKey,b.name)}function Pa(b,g,y){return function Mi(b,g,y){return Zh.apply(this,arguments)}(b,g,y)}function Zh(){return(Zh=(0,l.Z)(function*(b,g,y){const E=Ct(b);Ie(b,g,Yi);const M=On(E,y);return yield Fr(M,E),M._openRedirect(E,g,"signInViaRedirect")})).apply(this,arguments)}function Mm(b,g,y){return function Dc(b,g,y){return Na.apply(this,arguments)}(b,g,y)}function Na(){return(Na=(0,l.Z)(function*(b,g,y){const E=(0,$.m9)(b);Ie(E.auth,g,Yi);const M=On(E.auth,y);yield Fr(M,E.auth);const L=yield xm(E);return M._openRedirect(E.auth,g,"reauthViaRedirect",L)})).apply(this,arguments)}function Vy(b,g,y){return function By(b,g,y){return Qh.apply(this,arguments)}(b,g,y)}function Qh(){return(Qh=(0,l.Z)(function*(b,g,y){const E=(0,$.m9)(b);Ie(E.auth,g,Yi);const M=On(E.auth,y);yield gr(!1,E,g.providerId),yield Fr(M,E.auth);const L=yield xm(E);return M._openRedirect(E.auth,g,"linkViaRedirect",L)})).apply(this,arguments)}function Xh(b,g){return hl.apply(this,arguments)}function hl(){return(hl=(0,l.Z)(function*(b,g){return yield Ct(b)._initializationPromise,Jh(b,g,!1)})).apply(this,arguments)}function Jh(b,g){return fl.apply(this,arguments)}function fl(){return(fl=(0,l.Z)(function*(b,g,y=!1){const E=Ct(b),M=On(E,g),oe=yield new Ec(E,M,y).execute();return oe&&!y&&(delete oe.user._redirectEventId,yield E._persistUserIfCurrent(oe.user),yield E._setRedirectUser(null,g)),oe})).apply(this,arguments)}function xm(b){return ef.apply(this,arguments)}function ef(){return(ef=(0,l.Z)(function*(b){const g=cl(`${b.uid}:::`);return b._redirectEventId=g,yield b.auth._setRedirectUser(b),yield b.auth._persistUserIfCurrent(b),g})).apply(this,arguments)}class ju{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let y=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(g,E)&&(y=!0,this.sendToConsumer(g,E),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function Uy(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tf(b);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=g,y=!0)),y}sendToConsumer(g,y){var E;if(g.error&&!tf(g)){const M=(null===(E=g.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";y.onError(Fe(this.auth,M))}else y.onAuthEvent(g)}isEventForConsumer(g,y){const E=null===y.eventId||!!g.eventId&&g.eventId===y.eventId;return y.filter.includes(g.type)&&E}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(we(g))}saveEventToCache(g){this.cachedEventUids.add(we(g)),this.lastProcessedEventTime=Date.now()}}function we(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(g=>g).join("-")}function tf({type:b,error:g}){return"unknown"===b&&"auth/no-auth-event"===g?.code}function Fa(b){return li.apply(this,arguments)}function li(){return(li=(0,l.Z)(function*(b,g={}){return St(b,"GET","/v1/projects",g)})).apply(this,arguments)}const ls=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nf=/^https?/;function rf(){return(rf=(0,l.Z)(function*(b){if(b.config.emulator)return;const{authorizedDomains:g}=yield Fa(b);for(const y of g)try{if(RC(y))return}catch{}Qe(b,"unauthorized-domain")})).apply(this,arguments)}function RC(b){const g=je(),{protocol:y,hostname:E}=new URL(g);if(b.startsWith("chrome-extension://")){const oe=new URL(b);return""===oe.hostname&&""===E?"chrome-extension:"===y&&b.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===y&&oe.hostname===E}if(!nf.test(y))return!1;if(ls.test(b))return E===b;const M=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(E)}const Hy=new Ke(3e4,6e4);function sf(){const b=zi().___jsl;if(b?.H)for(const g of Object.keys(b.H))if(b.H[g].r=b.H[g].r||[],b.H[g].L=b.H[g].L||[],b.H[g].r=[...b.H[g].L],b.CP)for(let y=0;y<b.CP.length;y++)b.CP[y]=null}let La=null;function km(b){return La=La||function jy(b){return new Promise((g,y)=>{var E,M,L;function oe(){sf(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{sf(),y(Fe(b,"network-request-failed"))},timeout:Hy.get()})}if(null!==(M=null===(E=zi().gapi)||void 0===E?void 0:E.iframes)&&void 0!==M&&M.Iframe)g(gapi.iframes.getContext());else{if(null===(L=zi().gapi)||void 0===L||!L.load){const Oe=Wh("iframefcb");return zi()[Oe]=()=>{gapi.load?oe():y(Fe(b,"network-request-failed"))},ul(`https://apis.google.com/js/api.js?onload=${Oe}`).catch(lt=>y(lt))}oe()}}).catch(g=>{throw La=null,g})}(b),La}const $y=new Ke(5e3,15e3),lf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Rm=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pl(b){const g=b.config;ne(g.authDomain,b,"auth-domain-config-required");const y=g.emulator?vn(g,"emulator/auth/iframe"):`https://${b.config.authDomain}/__/auth/iframe`,E={apiKey:g.apiKey,appName:b.name,v:F.SDK_VERSION},M=Rm.get(b.config.apiHost);M&&(E.eid=M);const L=b._getFrameworks();return L.length&&(E.fw=L.join(",")),`${y}?${(0,$.xO)(E).slice(1)}`}function ml(){return ml=(0,l.Z)(function*(b){const g=yield km(b),y=zi().gapi;return ne(y,b,"internal-error"),g.open({where:document.body,url:pl(b),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lf,dontclear:!0},E=>new Promise(function(){var M=(0,l.Z)(function*(L,oe){yield E.restyle({setHideOnLeave:!1});const Oe=Fe(b,"network-request-failed"),lt=zi().setTimeout(()=>{oe(Oe)},$y.get());function It(){zi().clearTimeout(lt),L(E)}E.ping(It).then(It,()=>{oe(Oe)})});return function(L,oe){return M.apply(this,arguments)}}()))}),ml.apply(this,arguments)}const zu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ic{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Gu(b,g,y,E,M,L){ne(b.config.authDomain,b,"auth-domain-config-required"),ne(b.config.apiKey,b,"invalid-api-key");const oe={apiKey:b.config.apiKey,appName:b.name,authType:y,redirectUrl:E,v:F.SDK_VERSION,eventId:M};if(g instanceof Yi){g.setDefaultLanguage(b.languageCode),oe.providerId=g.providerId||"",(0,$.xb)(g.getCustomParameters())||(oe.customParameters=JSON.stringify(g.getCustomParameters()));for(const[lt,It]of Object.entries(L||{}))oe[lt]=It}if(g instanceof wa){const lt=g.getScopes().filter(It=>""!==It);lt.length>0&&(oe.scopes=lt.join(","))}b.tenantId&&(oe.tid=b.tenantId);const Oe=oe;for(const lt of Object.keys(Oe))void 0===Oe[lt]&&delete Oe[lt];return`${function Va({config:b}){return b.emulator?vn(b,"emulator/auth/handler"):`https://${b.authDomain}/__/auth/handler`}(b)}?${(0,$.xO)(Oe).slice(1)}`}const hf="webStorageSupport",Wu=class Pm{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ho,this._completeRedirectFn=Jh,this._overrideRedirectResult=Lt}_openPopup(g,y,E,M){var L=this;return(0,l.Z)(function*(){var oe;Ee(null===(oe=L.eventManagers[g._key()])||void 0===oe?void 0:oe.manager,"_initialize() not called before _openPopup()");const Oe=Gu(g,y,E,je(),M);return function Sc(b,g,y,E=500,M=600){const L=Math.max((window.screen.availHeight-M)/2,0).toString(),oe=Math.max((window.screen.availWidth-E)/2,0).toString();let Oe="";const lt=Object.assign(Object.assign({},zu),{width:E.toString(),height:M.toString(),top:L,left:oe}),It=(0,$.z$)().toLowerCase();y&&(Oe=G(It)?"_blank":y),A(It)&&(g=g||"http://localhost",lt.scrollbars="yes");const on=Object.entries(lt).reduce((cs,[Ba,_f])=>`${cs}${Ba}=${_f},`,"");if(function Jt(b=(0,$.z$)()){var g;return ke(b)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(It)&&"_self"!==Oe)return function _l(b,g){const y=document.createElement("a");y.href=b,y.target=g;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(E)}(g||"",Oe),new Ic(null);const Jn=window.open(g||"",Oe,on);ne(Jn,b,"popup-blocked");try{Jn.focus()}catch{}return new Ic(Jn)}(g,Oe,cl())})()}_openRedirect(g,y,E,M){var L=this;return(0,l.Z)(function*(){return yield L._originValidation(g),function wm(b){zi().location.href=b}(Gu(g,y,E,je(),M)),new Promise(()=>{})})()}_initialize(g){const y=g._key();if(this.eventManagers[y]){const{manager:M,promise:L}=this.eventManagers[y];return M?Promise.resolve(M):(Ee(L,"If manager is not set, promise should be"),L)}const E=this.initAndGetManager(g);return this.eventManagers[y]={promise:E},E.catch(()=>{delete this.eventManagers[y]}),E}initAndGetManager(g){var y=this;return(0,l.Z)(function*(){const E=yield function cf(b){return ml.apply(this,arguments)}(g),M=new ju(g);return E.register("authEvent",L=>(ne(L?.authEvent,g,"invalid-auth-event"),{status:M.onEvent(L.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[g._key()]={manager:M},y.iframes[g._key()]=E,M})()}_isIframeWebStorageSupported(g,y){this.iframes[g._key()].send(hf,{type:hf},M=>{var L;const oe=null===(L=M?.[0])||void 0===L?void 0:L[hf];void 0!==oe&&y(!!oe),Qe(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const y=g._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function $u(b){return rf.apply(this,arguments)}(g)),this.originValidationPromises[y]}get _shouldInitProactively(){return Yt()||R()||ke()}};class Ac extends class Nm{constructor(g){this.factorId=g}_process(g,y,E){switch(y.type){case"enroll":return this._finalizeEnroll(g,y.credential,E);case"signin":return this._finalizeSignIn(g,y.credential);default:return ce("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Ac(g)}_finalizeEnroll(g,y,E){return function Uh(b,g){return St(b,"POST","/v2/accounts/mfaEnrollment:finalize",Gt(b,g))}(g,{idToken:y,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,y){return function Lu(b,g){return St(b,"POST","/v2/accounts/mfaSignIn:finalize",Gt(b,g))}(g,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Gs=(()=>{class b{constructor(){}static assertion(y){return Ac._fromCredential(y)}}return b.FACTOR_ID="phone",b})();var Is="@firebase/auth";class ff{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var y=this;return(0,l.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const y=this.auth.onIdTokenChanged(E=>{var M;g((null===(M=E)||void 0===M?void 0:M.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,y),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const y=this.internalListeners.get(g);!y||(this.internalListeners.delete(g),y(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,$.Pz)("authIdTokenMaxAge"),function Wy(b){(0,F._registerComponent)(new ve.wA("auth",(g,{options:y})=>{const E=g.getProvider("app").getImmediate(),M=g.getProvider("heartbeat"),{apiKey:L,authDomain:oe}=E.options;return((Oe,lt)=>{ne(L&&!L.includes(":"),"invalid-api-key",{appName:Oe.name}),ne(!oe?.includes(":"),"argument-error",{appName:Oe.name});const It={apiKey:L,authDomain:oe,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Vn(b)},on=new Vs(Oe,lt,It);return function le(b,g){const y=g?.persistence||[],E=(Array.isArray(y)?y:[y]).map(ee);g?.errorMap&&b._updateErrorMap(g.errorMap),b._initializeWithPersistence(E,g?.popupRedirectResolver)}(on,y),on})(E,M)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,y,E)=>{g.getProvider("auth-internal").initialize()})),(0,F._registerComponent)(new ve.wA("auth-internal",g=>{const y=Ct(g.getProvider("auth").getImmediate());return new ff(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,F.registerVersion)(Is,"0.20.9",function pf(b){switch(b){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(b)),(0,F.registerVersion)(Is,"0.20.9","esm2017")}("Browser")},2090:(pt,Re,N)=>{N.d(Re,{$s:()=>st,BH:()=>Nt,DV:()=>ti,Dv:()=>An,G6:()=>Ie,GJ:()=>qi,L:()=>me,LL:()=>mn,P0:()=>Be,Pz:()=>ln,Sg:()=>Ke,UG:()=>Te,UI:()=>ir,US:()=>ve,Wj:()=>Mt,Wl:()=>xn,Yr:()=>Pe,ZB:()=>q,ZR:()=>Zn,aH:()=>yt,b$:()=>de,cI:()=>St,dS:()=>Rt,eu:()=>ne,g5:()=>F,gK:()=>ii,gQ:()=>Dn,h$:()=>re,hl:()=>Ze,hu:()=>$,jU:()=>et,lb:()=>Ai,m9:()=>Qt,ne:()=>kn,p$:()=>K,pd:()=>Hi,r3:()=>ni,ru:()=>Ce,tV:()=>ye,uI:()=>Ae,ug:()=>Ti,vZ:()=>rt,w1:()=>Qe,w9:()=>fi,xO:()=>wn,xb:()=>Oi,z$:()=>Ne,zI:()=>ce,zd:()=>bi});const $=function(Y,z){if(!Y)throw F(z)},F=function(Y){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Y)},se=function(Y){const z=[];let P=0;for(let k=0;k<Y.length;k++){let A=Y.charCodeAt(k);A<128?z[P++]=A:A<2048?(z[P++]=A>>6|192,z[P++]=63&A|128):55296==(64512&A)&&k+1<Y.length&&56320==(64512&Y.charCodeAt(k+1))?(A=65536+((1023&A)<<10)+(1023&Y.charCodeAt(++k)),z[P++]=A>>18|240,z[P++]=A>>12&63|128,z[P++]=A>>6&63|128,z[P++]=63&A|128):(z[P++]=A>>12|224,z[P++]=A>>6&63|128,z[P++]=63&A|128)}return z},ve={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Y,z){if(!Array.isArray(Y))throw Error("encodeByteArray takes an array as a parameter");this.init_();const P=z?this.byteToCharMapWebSafe_:this.byteToCharMap_,k=[];for(let A=0;A<Y.length;A+=3){const R=Y[A],G=A+1<Y.length,ue=G?Y[A+1]:0,Le=A+2<Y.length,Ge=Le?Y[A+2]:0;let dt=(15&ue)<<2|Ge>>6,Jt=63&Ge;Le||(Jt=64,G||(dt=64)),k.push(P[R>>2],P[(3&R)<<4|ue>>4],P[dt],P[Jt])}return k.join("")},encodeString(Y,z){return this.HAS_NATIVE_SUPPORT&&!z?btoa(Y):this.encodeByteArray(se(Y),z)},decodeString(Y,z){return this.HAS_NATIVE_SUPPORT&&!z?atob(Y):function(Y){const z=[];let P=0,k=0;for(;P<Y.length;){const A=Y[P++];if(A<128)z[k++]=String.fromCharCode(A);else if(A>191&&A<224){const R=Y[P++];z[k++]=String.fromCharCode((31&A)<<6|63&R)}else if(A>239&&A<365){const Le=((7&A)<<18|(63&Y[P++])<<12|(63&Y[P++])<<6|63&Y[P++])-65536;z[k++]=String.fromCharCode(55296+(Le>>10)),z[k++]=String.fromCharCode(56320+(1023&Le))}else{const R=Y[P++],G=Y[P++];z[k++]=String.fromCharCode((15&A)<<12|(63&R)<<6|63&G)}}return z.join("")}(this.decodeStringToByteArray(Y,z))},decodeStringToByteArray(Y,z){this.init_();const P=z?this.charToByteMapWebSafe_:this.charToByteMap_,k=[];for(let A=0;A<Y.length;){const R=P[Y.charAt(A++)],ue=A<Y.length?P[Y.charAt(A)]:0;++A;const Ge=A<Y.length?P[Y.charAt(A)]:64;++A;const ke=A<Y.length?P[Y.charAt(A)]:64;if(++A,null==R||null==ue||null==Ge||null==ke)throw Error();k.push(R<<2|ue>>4),64!==Ge&&(k.push(ue<<4&240|Ge>>2),64!==ke&&k.push(Ge<<6&192|ke))}return k},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Y=0;Y<this.ENCODED_VALS.length;Y++)this.byteToCharMap_[Y]=this.ENCODED_VALS.charAt(Y),this.charToByteMap_[this.byteToCharMap_[Y]]=Y,this.byteToCharMapWebSafe_[Y]=this.ENCODED_VALS_WEBSAFE.charAt(Y),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Y]]=Y,Y>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Y)]=Y,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Y)]=Y)}}},re=function(Y){const z=se(Y);return ve.encodeByteArray(z,!0)},me=function(Y){return re(Y).replace(/\./g,"")},ye=function(Y){try{return ve.decodeString(Y,!0)}catch(z){console.error("base64Decode failed: ",z)}return null};function K(Y){return q(void 0,Y)}function q(Y,z){if(!(z instanceof Object))return z;switch(z.constructor){case Date:return new Date(z.getTime());case Object:void 0===Y&&(Y={});break;case Array:Y=[];break;default:return z}for(const P in z)!z.hasOwnProperty(P)||!X(P)||(Y[P]=q(Y[P],z[P]));return Y}function X(Y){return"__proto__"!==Y}function Ne(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ae(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ne())}function Te(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function et(){return"object"==typeof self&&self.self===self}function Ce(){const Y="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Y&&void 0!==Y.id}function de(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Qe(){const Y=Ne();return Y.indexOf("MSIE ")>=0||Y.indexOf("Trident/")>=0}function Pe(){return!1}function Ie(){return!Te()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ze(){return"object"==typeof indexedDB}function ne(){return new Promise((Y,z)=>{try{let P=!0;const k="validate-browser-context-for-indexeddb-analytics-module",A=self.indexedDB.open(k);A.onsuccess=()=>{A.result.close(),P||self.indexedDB.deleteDatabase(k),Y(!0)},A.onupgradeneeded=()=>{P=!1},A.onerror=()=>{var R;z((null===(R=A.error)||void 0===R?void 0:R.message)||"")}}catch(P){z(P)}})}function ce(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const le=()=>function Ee(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const Y=process.env.__FIREBASE_DEFAULTS__;return Y?JSON.parse(Y):void 0})()||(()=>{if(typeof document>"u")return;const Y=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/),z=Y&&ye(Y[1]);return z&&JSON.parse(z)})(),Be=Y=>{const z=(Y=>{var z,P;return null===(P=null===(z=le())||void 0===z?void 0:z.emulatorHosts)||void 0===P?void 0:P[Y]})(Y);if(!z)return;const P=z.lastIndexOf(":");if(P<=0||P+1===z.length)throw new Error(`Invalid host ${z} with no separate hostname and port!`);const k=parseInt(z.substring(P+1),10);return"["===z[0]?[z.substring(1,P-1),k]:[z.substring(0,P),k]},yt=()=>{var Y;return null===(Y=le())||void 0===Y?void 0:Y.config},ln=Y=>{var z;return null===(z=le())||void 0===z?void 0:z[`_${Y}`]};class Nt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((z,P)=>{this.resolve=z,this.reject=P})}wrapCallback(z){return(P,k)=>{P?this.reject(P):this.resolve(k),"function"==typeof z&&(this.promise.catch(()=>{}),1===z.length?z(P):z(P,k))}}}function Ke(Y,z){if(Y.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const k=z||"demo-project",A=Y.iat||0,R=Y.sub||Y.user_id;if(!R)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const G=Object.assign({iss:`https://securetoken.google.com/${k}`,aud:k,iat:A,exp:A+3600,auth_time:A,sub:R,user_id:R,firebase:{sign_in_provider:"custom",identities:{}}},Y);return[me(JSON.stringify({alg:"none",type:"JWT"})),me(JSON.stringify(G)),""].join(".")}class Zn extends Error{constructor(z,P,k){super(P),this.code=z,this.customData=k,this.name="FirebaseError",Object.setPrototypeOf(this,Zn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mn.prototype.create)}}class mn{constructor(z,P,k){this.service=z,this.serviceName=P,this.errors=k}create(z,...P){const k=P[0]||{},A=`${this.service}/${z}`,R=this.errors[z],G=R?function cn(Y,z){return Y.replace(Gt,(P,k)=>{const A=z[k];return null!=A?String(A):`<${k}?>`})}(R,k):"Error";return new Zn(A,`${this.serviceName}: ${G} (${A}).`,k)}}const Gt=/\{\$([^}]+)}/g;function St(Y){return JSON.parse(Y)}function xn(Y){return JSON.stringify(Y)}const nr=function(Y){let z={},P={},k={},A="";try{const R=Y.split(".");z=St(ye(R[0])||""),P=St(ye(R[1])||""),A=R[2],k=P.d||{},delete P.d}catch{}return{header:z,claims:P,data:k,signature:A}},fi=function(Y){const P=nr(Y).claims;return!!P&&"object"==typeof P&&P.hasOwnProperty("iat")},qi=function(Y){const z=nr(Y).claims;return"object"==typeof z&&!0===z.admin};function ni(Y,z){return Object.prototype.hasOwnProperty.call(Y,z)}function ti(Y,z){if(Object.prototype.hasOwnProperty.call(Y,z))return Y[z]}function Oi(Y){for(const z in Y)if(Object.prototype.hasOwnProperty.call(Y,z))return!1;return!0}function ir(Y,z,P){const k={};for(const A in Y)Object.prototype.hasOwnProperty.call(Y,A)&&(k[A]=z.call(P,Y[A],A,Y));return k}function rt(Y,z){if(Y===z)return!0;const P=Object.keys(Y),k=Object.keys(z);for(const A of P){if(!k.includes(A))return!1;const R=Y[A],G=z[A];if(En(R)&&En(G)){if(!rt(R,G))return!1}else if(R!==G)return!1}for(const A of k)if(!P.includes(A))return!1;return!0}function En(Y){return null!==Y&&"object"==typeof Y}function wn(Y){const z=[];for(const[P,k]of Object.entries(Y))Array.isArray(k)?k.forEach(A=>{z.push(encodeURIComponent(P)+"="+encodeURIComponent(A))}):z.push(encodeURIComponent(P)+"="+encodeURIComponent(k));return z.length?"&"+z.join("&"):""}function bi(Y){const z={};return Y.replace(/^\?/,"").split("&").forEach(k=>{if(k){const[A,R]=k.split("=");z[decodeURIComponent(A)]=decodeURIComponent(R)}}),z}function Hi(Y){const z=Y.indexOf("?");if(!z)return"";const P=Y.indexOf("#",z);return Y.substring(z,P>0?P:void 0)}class Dn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let z=1;z<this.blockSize;++z)this.pad_[z]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(z,P){P||(P=0);const k=this.W_;if("string"==typeof z)for(let ke=0;ke<16;ke++)k[ke]=z.charCodeAt(P)<<24|z.charCodeAt(P+1)<<16|z.charCodeAt(P+2)<<8|z.charCodeAt(P+3),P+=4;else for(let ke=0;ke<16;ke++)k[ke]=z[P]<<24|z[P+1]<<16|z[P+2]<<8|z[P+3],P+=4;for(let ke=16;ke<80;ke++){const dt=k[ke-3]^k[ke-8]^k[ke-14]^k[ke-16];k[ke]=4294967295&(dt<<1|dt>>>31)}let Ge,_e,A=this.chain_[0],R=this.chain_[1],G=this.chain_[2],ue=this.chain_[3],Le=this.chain_[4];for(let ke=0;ke<80;ke++){ke<40?ke<20?(Ge=ue^R&(G^ue),_e=1518500249):(Ge=R^G^ue,_e=1859775393):ke<60?(Ge=R&G|ue&(R|G),_e=2400959708):(Ge=R^G^ue,_e=3395469782);const dt=(A<<5|A>>>27)+Ge+Le+_e+k[ke]&4294967295;Le=ue,ue=G,G=4294967295&(R<<30|R>>>2),R=A,A=dt}this.chain_[0]=this.chain_[0]+A&4294967295,this.chain_[1]=this.chain_[1]+R&4294967295,this.chain_[2]=this.chain_[2]+G&4294967295,this.chain_[3]=this.chain_[3]+ue&4294967295,this.chain_[4]=this.chain_[4]+Le&4294967295}update(z,P){if(null==z)return;void 0===P&&(P=z.length);const k=P-this.blockSize;let A=0;const R=this.buf_;let G=this.inbuf_;for(;A<P;){if(0===G)for(;A<=k;)this.compress_(z,A),A+=this.blockSize;if("string"==typeof z){for(;A<P;)if(R[G]=z.charCodeAt(A),++G,++A,G===this.blockSize){this.compress_(R),G=0;break}}else for(;A<P;)if(R[G]=z[A],++G,++A,G===this.blockSize){this.compress_(R),G=0;break}}this.inbuf_=G,this.total_+=P}digest(){const z=[];let P=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let A=this.blockSize-1;A>=56;A--)this.buf_[A]=255&P,P/=256;this.compress_(this.buf_);let k=0;for(let A=0;A<5;A++)for(let R=24;R>=0;R-=8)z[k]=this.chain_[A]>>R&255,++k;return z}}function kn(Y,z){const P=new dn(Y,z);return P.subscribe.bind(P)}class dn{constructor(z,P){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=P,this.task.then(()=>{z(this)}).catch(k=>{this.error(k)})}next(z){this.forEachObserver(P=>{P.next(z)})}error(z){this.forEachObserver(P=>{P.error(z)}),this.close(z)}complete(){this.forEachObserver(z=>{z.complete()}),this.close()}subscribe(z,P,k){let A;if(void 0===z&&void 0===P&&void 0===k)throw new Error("Missing Observer.");A=function ht(Y,z){if("object"!=typeof Y||null===Y)return!1;for(const P of z)if(P in Y&&"function"==typeof Y[P])return!0;return!1}(z,["next","error","complete"])?z:{next:z,error:P,complete:k},void 0===A.next&&(A.next=gt),void 0===A.error&&(A.error=gt),void 0===A.complete&&(A.complete=gt);const R=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?A.error(this.finalError):A.complete()}catch{}}),this.observers.push(A),R}unsubscribeOne(z){void 0===this.observers||void 0===this.observers[z]||(delete this.observers[z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(z){if(!this.finalized)for(let P=0;P<this.observers.length;P++)this.sendOne(P,z)}sendOne(z,P){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[z])try{P(this.observers[z])}catch(k){typeof console<"u"&&console.error&&console.error(k)}})}close(z){this.finalized||(this.finalized=!0,void 0!==z&&(this.finalError=z),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gt(){}const An=function(Y,z,P,k){let A;if(k<z?A="at least "+z:k>P&&(A=0===P?"none":"no more than "+P),A)throw new Error(Y+" failed: Was called with "+k+(1===k?" argument.":" arguments.")+" Expects "+A+".")};function ii(Y,z){return`${Y} failed: ${z} argument `}function Mt(Y,z,P,k){if((!k||P)&&"function"!=typeof P)throw new Error(ii(Y,z)+"must be a valid function.")}function Ai(Y,z,P,k){if((!k||P)&&("object"!=typeof P||null===P))throw new Error(ii(Y,z)+"must be a valid context object.")}const Rt=function(Y){const z=[];let P=0;for(let k=0;k<Y.length;k++){let A=Y.charCodeAt(k);if(A>=55296&&A<=56319){const R=A-55296;k++,$(k<Y.length,"Surrogate pair missing trail surrogate."),A=65536+(R<<10)+(Y.charCodeAt(k)-56320)}A<128?z[P++]=A:A<2048?(z[P++]=A>>6|192,z[P++]=63&A|128):A<65536?(z[P++]=A>>12|224,z[P++]=A>>6&63|128,z[P++]=63&A|128):(z[P++]=A>>18|240,z[P++]=A>>12&63|128,z[P++]=A>>6&63|128,z[P++]=63&A|128)}return z},Ti=function(Y){let z=0;for(let P=0;P<Y.length;P++){const k=Y.charCodeAt(P);k<128?z++:k<2048?z+=2:k>=55296&&k<=56319?(z+=4,P++):z+=3}return z};function st(Y,z=1e3,P=2){const k=z*Math.pow(P,Y),A=Math.round(.5*k*(Math.random()-.5)*2);return Math.min(144e5,k+A)}function Qt(Y){return Y&&Y._delegate?Y._delegate:Y}},6868:(pt,Re,N)=>{var l=N(4650);let $=null;function F(){return $}const re=new l.OlP("DocumentToken");let me=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return function ye(){return(0,l.LFG)(q)}()},providedIn:"platform"}),n})();const K=new l.OlP("Location Initialized");let q=(()=>{class n extends me{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(e){const i=F().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=F().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,i,r){X()?this._history.pushState(e,i,r):this.location.hash=r}replaceState(e,i,r){X()?this._history.replaceState(e,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(re))},n.\u0275prov=l.Yz7({token:n,factory:function(){return function Ne(){return new q((0,l.LFG)(re))}()},providedIn:"platform"}),n})();function X(){return!!window.history.pushState}function Ae(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function Te(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function et(n){return n&&"?"!==n[0]?"?"+n:n}let Ce=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return(0,l.f3M)(ct)},providedIn:"root"}),n})();const de=new l.OlP("appBaseHref");let ct=(()=>{class n extends Ce{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??(0,l.f3M)(re).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Ae(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+et(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,s){const c=this.prepareExternalUrl(r+et(s));this._platformLocation.pushState(e,i,c)}replaceState(e,i,r,s){const c=this.prepareExternalUrl(r+et(s));this._platformLocation.replaceState(e,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(me),l.LFG(de,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Qe=(()=>{class n extends Ce{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=Ae(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,s){let c=this.prepareExternalUrl(r+et(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(e,i,c)}replaceState(e,i,r,s){let c=this.prepareExternalUrl(r+et(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(me),l.LFG(de,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Fe=(()=>{class n{constructor(e){this._subject=new l.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const i=this._locationStrategy.getBaseHref();this._baseHref=Te(Ze(i)),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+et(i))}normalize(e){return n.stripTrailingSlash(function Ie(n,t){return n&&t.startsWith(n)?t.substring(n.length):t}(this._baseHref,Ze(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+et(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+et(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}}return n.normalizeQueryParams=et,n.joinWithSlash=Ae,n.stripTrailingSlash=Te,n.\u0275fac=function(e){return new(e||n)(l.LFG(Ce))},n.\u0275prov=l.Yz7({token:n,factory:function(){return function Pe(){return new Fe((0,l.LFG)(Ce))}()},providedIn:"root"}),n})();function Ze(n){return n.replace(/\/index.html$/,"")}var J=(()=>((J=J||{})[J.Format=0]="Format",J[J.Standalone=1]="Standalone",J))(),ee=(()=>((ee=ee||{})[ee.Narrow=0]="Narrow",ee[ee.Abbreviated=1]="Abbreviated",ee[ee.Wide=2]="Wide",ee[ee.Short=3]="Short",ee))(),he=(()=>((he=he||{})[he.Short=0]="Short",he[he.Medium=1]="Medium",he[he.Long=2]="Long",he[he.Full=3]="Full",he))(),le=(()=>((le=le||{})[le.Decimal=0]="Decimal",le[le.Group=1]="Group",le[le.List=2]="List",le[le.PercentSign=3]="PercentSign",le[le.PlusSign=4]="PlusSign",le[le.MinusSign=5]="MinusSign",le[le.Exponential=6]="Exponential",le[le.SuperscriptingExponent=7]="SuperscriptingExponent",le[le.PerMille=8]="PerMille",le[le.Infinity=9]="Infinity",le[le.NaN=10]="NaN",le[le.TimeSeparator=11]="TimeSeparator",le[le.CurrencyDecimal=12]="CurrencyDecimal",le[le.CurrencyGroup=13]="CurrencyGroup",le))();function mn(n,t){return rt((0,l.cg1)(n)[l.wAp.DateFormat],t)}function cn(n,t){return rt((0,l.cg1)(n)[l.wAp.TimeFormat],t)}function Gt(n,t){return rt((0,l.cg1)(n)[l.wAp.DateTimeFormat],t)}function St(n,t){const e=(0,l.cg1)(n),i=e[l.wAp.NumberSymbols][t];if(typeof i>"u"){if(t===le.CurrencyDecimal)return e[l.wAp.NumberSymbols][le.Decimal];if(t===le.CurrencyGroup)return e[l.wAp.NumberSymbols][le.Group]}return i}function ni(n){if(!n[l.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[l.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function rt(n,t){for(let e=t;e>-1;e--)if(typeof n[e]<"u")return n[e];throw new Error("Locale data API: locale data undefined")}function En(n){const[t,e]=n.split(":");return{hours:+t,minutes:+e}}const Hi=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Dn={},kn=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var dn=(()=>((dn=dn||{})[dn.Short=0]="Short",dn[dn.ShortGMT=1]="ShortGMT",dn[dn.Long=2]="Long",dn[dn.Extended=3]="Extended",dn))(),mt=(()=>((mt=mt||{})[mt.FullYear=0]="FullYear",mt[mt.Month=1]="Month",mt[mt.Date=2]="Date",mt[mt.Hours=3]="Hours",mt[mt.Minutes=4]="Minutes",mt[mt.Seconds=5]="Seconds",mt[mt.FractionalSeconds=6]="FractionalSeconds",mt[mt.Day=7]="Day",mt))(),ht=(()=>((ht=ht||{})[ht.DayPeriods=0]="DayPeriods",ht[ht.Days=1]="Days",ht[ht.Months=2]="Months",ht[ht.Eras=3]="Eras",ht))();function gt(n,t,e,i){let r=function R(n){if(ue(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[r,s=1,c=1]=n.split("-").map(d=>+d);return An(r,s-1,c)}const e=parseFloat(n);if(!isNaN(n-e))return new Date(e);let i;if(i=n.match(Hi))return function G(n){const t=new Date(0);let e=0,i=0;const r=n[8]?t.setUTCFullYear:t.setFullYear,s=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(t,Number(n[1]),Number(n[2])-1,Number(n[3]));const c=Number(n[4]||0)-e,d=Number(n[5]||0)-i,p=Number(n[6]||0),_=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return s.call(t,c,d,p,_),t}(i)}const t=new Date(n);if(!ue(t))throw new Error(`Unable to convert "${n}" into a date`);return t}(n);t=ii(e,t)||t;let d,c=[];for(;t;){if(d=kn.exec(t),!d){c.push(t);break}{c=c.concat(d.slice(1));const w=c.pop();if(!w)break;t=w}}let p=r.getTimezoneOffset();i&&(p=P(i,p),r=function A(n,t,e){const i=e?-1:1,r=n.getTimezoneOffset();return function k(n,t){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+t),n}(n,i*(P(t,r)-r))}(r,i,!0));let _="";return c.forEach(w=>{const I=function z(n){if(Y[n])return Y[n];let t;switch(n){case"G":case"GG":case"GGG":t=Zt(ht.Eras,ee.Abbreviated);break;case"GGGG":t=Zt(ht.Eras,ee.Wide);break;case"GGGGG":t=Zt(ht.Eras,ee.Narrow);break;case"y":t=Rt(mt.FullYear,1,0,!1,!0);break;case"yy":t=Rt(mt.FullYear,2,0,!0,!0);break;case"yyy":t=Rt(mt.FullYear,3,0,!1,!0);break;case"yyyy":t=Rt(mt.FullYear,4,0,!1,!0);break;case"Y":t=Qt(1);break;case"YY":t=Qt(2,!0);break;case"YYY":t=Qt(3);break;case"YYYY":t=Qt(4);break;case"M":case"L":t=Rt(mt.Month,1,1);break;case"MM":case"LL":t=Rt(mt.Month,2,1);break;case"MMM":t=Zt(ht.Months,ee.Abbreviated);break;case"MMMM":t=Zt(ht.Months,ee.Wide);break;case"MMMMM":t=Zt(ht.Months,ee.Narrow);break;case"LLL":t=Zt(ht.Months,ee.Abbreviated,J.Standalone);break;case"LLLL":t=Zt(ht.Months,ee.Wide,J.Standalone);break;case"LLLLL":t=Zt(ht.Months,ee.Narrow,J.Standalone);break;case"w":t=Tt(1);break;case"ww":t=Tt(2);break;case"W":t=Tt(1,!0);break;case"d":t=Rt(mt.Date,1);break;case"dd":t=Rt(mt.Date,2);break;case"c":case"cc":t=Rt(mt.Day,1);break;case"ccc":t=Zt(ht.Days,ee.Abbreviated,J.Standalone);break;case"cccc":t=Zt(ht.Days,ee.Wide,J.Standalone);break;case"ccccc":t=Zt(ht.Days,ee.Narrow,J.Standalone);break;case"cccccc":t=Zt(ht.Days,ee.Short,J.Standalone);break;case"E":case"EE":case"EEE":t=Zt(ht.Days,ee.Abbreviated);break;case"EEEE":t=Zt(ht.Days,ee.Wide);break;case"EEEEE":t=Zt(ht.Days,ee.Narrow);break;case"EEEEEE":t=Zt(ht.Days,ee.Short);break;case"a":case"aa":case"aaa":t=Zt(ht.DayPeriods,ee.Abbreviated);break;case"aaaa":t=Zt(ht.DayPeriods,ee.Wide);break;case"aaaaa":t=Zt(ht.DayPeriods,ee.Narrow);break;case"b":case"bb":case"bbb":t=Zt(ht.DayPeriods,ee.Abbreviated,J.Standalone,!0);break;case"bbbb":t=Zt(ht.DayPeriods,ee.Wide,J.Standalone,!0);break;case"bbbbb":t=Zt(ht.DayPeriods,ee.Narrow,J.Standalone,!0);break;case"B":case"BB":case"BBB":t=Zt(ht.DayPeriods,ee.Abbreviated,J.Format,!0);break;case"BBBB":t=Zt(ht.DayPeriods,ee.Wide,J.Format,!0);break;case"BBBBB":t=Zt(ht.DayPeriods,ee.Narrow,J.Format,!0);break;case"h":t=Rt(mt.Hours,1,-12);break;case"hh":t=Rt(mt.Hours,2,-12);break;case"H":t=Rt(mt.Hours,1);break;case"HH":t=Rt(mt.Hours,2);break;case"m":t=Rt(mt.Minutes,1);break;case"mm":t=Rt(mt.Minutes,2);break;case"s":t=Rt(mt.Seconds,1);break;case"ss":t=Rt(mt.Seconds,2);break;case"S":t=Rt(mt.FractionalSeconds,1);break;case"SS":t=Rt(mt.FractionalSeconds,2);break;case"SSS":t=Rt(mt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=Ln(dn.Short);break;case"ZZZZZ":t=Ln(dn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=Ln(dn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=Ln(dn.Long);break;default:return null}return Y[n]=t,t}(w);_+=I?I(r,e,p):"''"===w?"'":w.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),_}function An(n,t,e){const i=new Date(0);return i.setFullYear(n,t,e),i.setHours(0,0,0),i}function ii(n,t){const e=function Be(n){return(0,l.cg1)(n)[l.wAp.LocaleId]}(n);if(Dn[e]=Dn[e]||{},Dn[e][t])return Dn[e][t];let i="";switch(t){case"shortDate":i=mn(n,he.Short);break;case"mediumDate":i=mn(n,he.Medium);break;case"longDate":i=mn(n,he.Long);break;case"fullDate":i=mn(n,he.Full);break;case"shortTime":i=cn(n,he.Short);break;case"mediumTime":i=cn(n,he.Medium);break;case"longTime":i=cn(n,he.Long);break;case"fullTime":i=cn(n,he.Full);break;case"short":const r=ii(n,"shortTime"),s=ii(n,"shortDate");i=wi(Gt(n,he.Short),[r,s]);break;case"medium":const c=ii(n,"mediumTime"),d=ii(n,"mediumDate");i=wi(Gt(n,he.Medium),[c,d]);break;case"long":const p=ii(n,"longTime"),_=ii(n,"longDate");i=wi(Gt(n,he.Long),[p,_]);break;case"full":const w=ii(n,"fullTime"),I=ii(n,"fullDate");i=wi(Gt(n,he.Full),[w,I])}return i&&(Dn[e][t]=i),i}function wi(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,i){return null!=t&&i in t?t[i]:e})),n}function Mt(n,t,e="-",i,r){let s="";(n<0||r&&n<=0)&&(r?n=1-n:(n=-n,s=e));let c=String(n);for(;c.length<t;)c="0"+c;return i&&(c=c.slice(c.length-t)),s+c}function Rt(n,t,e=0,i=!1,r=!1){return function(s,c){let d=function Ti(n,t){switch(n){case mt.FullYear:return t.getFullYear();case mt.Month:return t.getMonth();case mt.Date:return t.getDate();case mt.Hours:return t.getHours();case mt.Minutes:return t.getMinutes();case mt.Seconds:return t.getSeconds();case mt.FractionalSeconds:return t.getMilliseconds();case mt.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,s);if((e>0||d>-e)&&(d+=e),n===mt.Hours)0===d&&-12===e&&(d=12);else if(n===mt.FractionalSeconds)return function Ai(n,t){return Mt(n,3).substring(0,t)}(d,t);const p=St(c,le.MinusSign);return Mt(d,t,p,i,r)}}function Zt(n,t,e=J.Format,i=!1){return function(r,s){return function ri(n,t,e,i,r,s){switch(e){case ht.Months:return function Nt(n,t,e){const i=(0,l.cg1)(n),s=rt([i[l.wAp.MonthsFormat],i[l.wAp.MonthsStandalone]],t);return rt(s,e)}(t,r,i)[n.getMonth()];case ht.Days:return function ln(n,t,e){const i=(0,l.cg1)(n),s=rt([i[l.wAp.DaysFormat],i[l.wAp.DaysStandalone]],t);return rt(s,e)}(t,r,i)[n.getDay()];case ht.DayPeriods:const c=n.getHours(),d=n.getMinutes();if(s){const _=function ti(n){const t=(0,l.cg1)(n);return ni(t),(t[l.wAp.ExtraData][2]||[]).map(i=>"string"==typeof i?En(i):[En(i[0]),En(i[1])])}(t),w=function Oi(n,t,e){const i=(0,l.cg1)(n);ni(i);const s=rt([i[l.wAp.ExtraData][0],i[l.wAp.ExtraData][1]],t)||[];return rt(s,e)||[]}(t,r,i),I=_.findIndex(T=>{if(Array.isArray(T)){const[O,U]=T,W=c>=O.hours&&d>=O.minutes,ie=c<U.hours||c===U.hours&&d<U.minutes;if(O.hours<U.hours){if(W&&ie)return!0}else if(W||ie)return!0}else if(T.hours===c&&T.minutes===d)return!0;return!1});if(-1!==I)return w[I]}return function yt(n,t,e){const i=(0,l.cg1)(n),s=rt([i[l.wAp.DayPeriodsFormat],i[l.wAp.DayPeriodsStandalone]],t);return rt(s,e)}(t,r,i)[c<12?0:1];case ht.Eras:return function Ke(n,t){return rt((0,l.cg1)(n)[l.wAp.Eras],t)}(t,i)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${e}`)}}(r,s,n,t,e,i)}}function Ln(n){return function(t,e,i){const r=-1*i,s=St(e,le.MinusSign),c=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case dn.Short:return(r>=0?"+":"")+Mt(c,2,s)+Mt(Math.abs(r%60),2,s);case dn.ShortGMT:return"GMT"+(r>=0?"+":"")+Mt(c,1,s);case dn.Long:return"GMT"+(r>=0?"+":"")+Mt(c,2,s)+":"+Mt(Math.abs(r%60),2,s);case dn.Extended:return 0===i?"Z":(r>=0?"+":"")+Mt(c,2,s)+":"+Mt(Math.abs(r%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}function wt(n){return An(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function Tt(n,t=!1){return function(e,i){let r;if(t){const s=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,c=e.getDate();r=1+Math.floor((c+s)/7)}else{const s=wt(e),c=function st(n){const t=An(n,0,1).getDay();return An(n,0,1+(t<=4?4:11)-t)}(s.getFullYear()),d=s.getTime()-c.getTime();r=1+Math.round(d/6048e5)}return Mt(r,n,St(i,le.MinusSign))}}function Qt(n,t=!1){return function(e,i){return Mt(wt(e).getFullYear(),n,St(i,le.MinusSign),t)}}const Y={};function P(n,t){n=n.replace(/:/g,"");const e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function ue(n){return n instanceof Date&&!isNaN(n.valueOf())}let Cn=(()=>{class n{constructor(e,i,r,s){this._iterableDiffers=e,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&((0,l.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,l.AaK)(i.item)}`);this._toggleClass(i.item,!0)}),e.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!0)):Object.keys(e).forEach(i=>this._toggleClass(i,!!e[i])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!1)):Object.keys(e).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(e,i){(e=e.trim())&&e.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.ZZ4),l.Y36(l.aQg),l.Y36(l.SBq),l.Y36(l.Qsj))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class ao{constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ss=(()=>{class n{constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((r,s,c)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new ao(r.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)i.remove(null===s?void 0:s);else if(null!==s){const d=i.get(s);i.move(d,c),Bs(d,r)}});for(let r=0,s=i.length;r<s;r++){const d=i.get(r).context;d.index=r,d.count=s,d.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{Bs(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.s_b),l.Y36(l.Rgc),l.Y36(l.ZZ4))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Bs(n,t){n.context.$implicit=t.item}let Rn=(()=>{class n{constructor(e,i){this._viewContainer=e,this._context=new tc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){ji("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){ji("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.s_b),l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class tc{constructor(){this.$implicit=null,this.ngIf=null}}function ji(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,l.AaK)(t)}'.`)}class or{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let zr=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const i=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let i=0;i<this._defaultViews.length;i++)this._defaultViews[i].enforceState(e)}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),n})(),ys=(()=>{class n{constructor(e,i,r){this.ngSwitch=r,r._addCase(),this._view=new or(e,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.s_b),l.Y36(l.Rgc),l.Y36(zr,9))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),n})(),lo=(()=>{class n{constructor(e,i,r){r._addDefault(new or(e,i))}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.s_b),l.Y36(l.Rgc),l.Y36(zr,9))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngSwitchDefault",""]],standalone:!0}),n})();function Or(n,t){return new l.vHH(2100,!1)}class dm{createSubscription(t,e){return t.subscribe({next:e,error:i=>{throw i}})}dispose(t){t.unsubscribe()}}class vs{createSubscription(t,e){return t.then(e,i=>{throw i})}dispose(t){}}const Th=new vs,rl=new dm;let _a=(()=>{class n{constructor(e){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,i=>this._updateLatestValue(e,i))}_selectStrategy(e){if((0,l.QGY)(e))return Th;if((0,l.F4k)(e))return rl;throw Or()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,i){e===this._obj&&(this._latestValue=i,this._ref.markForCheck())}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.sBO,16))},n.\u0275pipe=l.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})();const wu=new l.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let ya=(()=>{class n{constructor(e,i){this.locale=e,this.defaultTimezone=i}transform(e,i="mediumDate",r,s){if(null==e||""===e||e!=e)return null;try{return gt(e,i,s||this.locale,r??this.defaultTimezone??void 0)}catch(c){throw Or()}}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.soG,16),l.Y36(wu,24))},n.\u0275pipe=l.Yjl({name:"date",type:n,pure:!0,standalone:!0}),n})(),ba=(()=>{class n{transform(e){return JSON.stringify(e,null,2)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=l.Yjl({name:"json",type:n,pure:!1,standalone:!0}),n})(),mr=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();const bs="browser";function $i(n){return n===bs}function Hs(n){return"server"===n}let Du=(()=>{class n{}return n.\u0275prov=(0,l.Yz7)({token:n,providedIn:"root",factory:()=>new xh((0,l.LFG)(re),window)}),n})();class xh{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function lr(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const c=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(c)return c}r=i.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=os(this.window.history)||os(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function os(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ll extends class _m extends class ve{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ge(n){$||($=n)}(new ll)}onAndCancel(t,e,i){return t.addEventListener(e,i,!1),()=>{t.removeEventListener(e,i,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function Ey(){return Ia=Ia||document.querySelector("base"),Ia?Ia.getAttribute("href"):null}();return null==e?null:function _o(n){pi=pi||document.createElement("a"),pi.setAttribute("href",n);const t=pi.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Ia=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function sr(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const i=e.indexOf("="),[r,s]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}(document.cookie,t)}}let pi,Ia=null;const mi=new l.OlP("TRANSITION_ID"),Dy=[{provide:l.ip1,useFactory:function ym(n,t,e){return()=>{e.get(l.CZH).donePromise.then(()=>{const i=F(),r=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[mi,re,l.zs3],multi:!0}];let Sy=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Fh=new l.OlP("EventManagerPlugins");let Tu=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>r.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}addGlobalEventListener(e,i,r){return this._findPluginFor(i).addGlobalEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){const i=this._eventNameToPlugin.get(e);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const c=r[s];if(c.supports(e))return this._eventNameToPlugin.set(e,c),c}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Fh),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class uc{constructor(t){this._doc=t}addGlobalEventListener(t,e,i){const r=F().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,i)}}let dc=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(e){const i=new Set;e.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Sa=(()=>{class n extends dc{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,i,r){e.forEach(s=>{const c=this._doc.createElement("style");c.textContent=s,r.push(i.appendChild(c))})}addHost(e){const i=[];this._addStylesToHost(this._stylesSet,e,i),this._hostNodes.set(e,i)}removeHost(e){const i=this._hostNodes.get(e);i&&i.forEach(Lh),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(e,r,i)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(Lh))}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(re))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function Lh(n){F().remove(n)}const Vh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},vm=/%COMP%/g;function Mu(n,t,e){for(let i=0;i<t.length;i++){let r=t[i];Array.isArray(r)?Mu(n,r,e):(r=r.replace(vm,n),e.push(r))}return e}function xu(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let Hh=(()=>{class n{constructor(e,i,r){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new yo(e)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;switch(i.encapsulation){case l.ifc.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new bm(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(e),r}case 1:case l.ifc.ShadowDom:return new My(this.eventManager,this.sharedStylesHost,e,i);default:if(!this.rendererByCompId.has(i.id)){const r=Mu(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Tu),l.LFG(Sa),l.LFG(l.AFp))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class yo{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(Vh[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){(fc(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(fc(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i="string"==typeof t?document.querySelector(t):t;if(!i)throw new Error(`The selector "${t}" did not match any elements`);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;const s=Vh[r];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){const r=Vh[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(l.JOm.DashCase|l.JOm.Important)?t.style.setProperty(e,i,r&l.JOm.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&l.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t[e]=i}setValue(t,e){t.nodeValue=e}listen(t,e,i){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,xu(i)):this.eventManager.addEventListener(t,e,xu(i))}}function fc(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class bm extends yo{constructor(t,e,i,r){super(t),this.component=i;const s=Mu(r+"-"+i.id,i.styles,[]);e.addStyles(s),this.contentAttr=function hc(n){return"_ngcontent-%COMP%".replace(vm,n)}(r+"-"+i.id),this.hostAttr=function Uh(n){return"_nghost-%COMP%".replace(vm,n)}(r+"-"+i.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}}class My extends yo{constructor(t,e,i,r){super(t),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Mu(r.id,r.styles,[]);for(let c=0;c<s.length;c++){const d=document.createElement("style");d.textContent=s[c],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Aa=(()=>{class n extends uc{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(re))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const xy=["alt","control","meta","shift"],Ho={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},zh={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ku=(()=>{class n extends uc{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,i,r){const s=n.parseEventName(i),c=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(e,s.domEventName,c))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let c="",d=i.indexOf("code");if(d>-1&&(i.splice(d,1),c="code."),xy.forEach(_=>{const w=i.indexOf(_);w>-1&&(i.splice(w,1),c+=_+".")}),c+=s,0!=i.length||0===s.length)return null;const p={};return p.domEventName=r,p.fullKey=c,p}static matchEventFullKeyCode(e,i){let r=Ho[e.key]||e.key,s="";return i.indexOf("code.")>-1&&(r=e.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),xy.forEach(c=>{c!==r&&(0,zh[c])(e)&&(s+=c+".")}),s+=r,s===i)}static eventCallback(e,i,r){return s=>{n.matchEventFullKeyCode(s,e)&&r.runGuarded(()=>i(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(re))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const pc=(0,l.eFA)(l._c5,"browser",[{provide:l.Lbi,useValue:bs},{provide:l.g9A,useValue:function Ry(){ll.makeCurrent()},multi:!0},{provide:re,useFactory:function Gh(){return(0,l.RDi)(document),document},deps:[]}]),mc=new l.OlP(""),gc=[{provide:l.rWj,useClass:class Iy{addToWindow(t){l.dqk.getAngularTestability=(i,r=!0)=>{const s=t.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},l.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),l.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),l.dqk.frameworkStabilizers||(l.dqk.frameworkStabilizers=[]),l.dqk.frameworkStabilizers.push(i=>{const r=l.dqk.getAllAngularTestabilities();let s=r.length,c=!1;const d=function(p){c=c||p,s--,0==s&&i(c)};r.forEach(function(p){p.whenStable(d)})})}findTestabilityInTree(t,e,i){return null==e?null:t.getTestability(e)??(i?F().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:l.lri,useClass:l.dDg,deps:[l.R0b,l.eoX,l.rWj]},{provide:l.dDg,useClass:l.dDg,deps:[l.R0b,l.eoX,l.rWj]}],Ou=[{provide:l.zSh,useValue:"root"},{provide:l.qLn,useFactory:function Ta(){return new l.qLn},deps:[]},{provide:Fh,useClass:Aa,multi:!0,deps:[re,l.R0b,l.Lbi]},{provide:Fh,useClass:ku,multi:!0,deps:[re]},{provide:Hh,useClass:Hh,deps:[Tu,Sa,l.AFp]},{provide:l.FYo,useExisting:Hh},{provide:dc,useExisting:Sa},{provide:Sa,useClass:Sa,deps:[re]},{provide:Tu,useClass:Tu,deps:[Fh,l.R0b]},{provide:class Ca{},useClass:Sy,deps:[]},[]];let Ma=(()=>{class n{constructor(e){}static withServerTransition(e){return{ngModule:n,providers:[{provide:l.AFp,useValue:e.appId},{provide:mi,useExisting:l.AFp},Dy]}}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(mc,12))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[...Ou,...gc],imports:[mr,l.hGG]}),n})(),zs=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(re))},n.\u0275prov=l.Yz7({token:n,factory:function(e){let i=null;return i=e?new e:function _c(){return new zs((0,l.LFG)(re))}(),i},providedIn:"root"}),n})();typeof window<"u"&&window;let $o=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:function(e){let i=null;return i=e?new(e||n):l.LFG(Fy),i},providedIn:"root"}),n})(),Fy=(()=>{class n extends $o{constructor(e){super(),this._doc=e}sanitize(e,i){if(null==i)return null;switch(e){case l.q3G.NONE:return i;case l.q3G.HTML:return(0,l.qzn)(i,"HTML")?(0,l.z3N)(i):(0,l.EiD)(this._doc,String(i)).toString();case l.q3G.STYLE:return(0,l.qzn)(i,"Style")?(0,l.z3N)(i):i;case l.q3G.SCRIPT:if((0,l.qzn)(i,"Script"))return(0,l.z3N)(i);throw new Error("unsafe value used in a script context");case l.q3G.URL:return(0,l.qzn)(i,"URL")?(0,l.z3N)(i):(0,l.mCW)(String(i));case l.q3G.RESOURCE_URL:if((0,l.qzn)(i,"ResourceURL"))return(0,l.z3N)(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return(0,l.JVY)(e)}bypassSecurityTrustStyle(e){return(0,l.L6k)(e)}bypassSecurityTrustScript(e){return(0,l.eBb)(e)}bypassSecurityTrustUrl(e){return(0,l.LAX)(e)}bypassSecurityTrustResourceUrl(e){return(0,l.pB0)(e)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(re))},n.\u0275prov=l.Yz7({token:n,factory:function(e){let i=null;return i=e?new e:function kC(n){return new Fy(n.get(re))}(l.LFG(l.zs3)),i},providedIn:"root"}),n})();var dl=N(9934),V=N(2090),Pr=N(9681),Es=N(1877),gi=N(4859),vt=N(7579);class Pi extends vt.x{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}}var Ye=N(4004),Un=N(4482),Kn=N(5403);function tn(n,t){return(0,Un.e)((e,i)=>{let r=0;e.subscribe((0,Kn.x)(i,s=>n.call(t,s,r++)&&i.next(s)))})}var ka=N(3269),On=N(8996);function Je(...n){const t=(0,ka.yG)(n);return(0,On.D)(n,t)}var Ni=N(9751),Pn=N(6451),Ra=N(5363),cr=N(8421);function _n(n,t){return(0,Un.e)((e,i)=>{let r=null,s=0,c=!1;const d=()=>c&&!r&&i.complete();e.subscribe((0,Kn.x)(i,p=>{r?.unsubscribe();let _=0;const w=s++;(0,cr.Xf)(n(p,w)).subscribe(r=(0,Kn.x)(i,I=>i.next(t?t(p,I,w,_++):I),()=>{r=null,d()}))},()=>{c=!0,d()}))})}var Tm=N(6063);class Ly extends vt.x{constructor(t=1/0,e=1/0,i=Tm.l){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:c}=this;e||(i.push(t),!r&&i.push(s.now()+c)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let c=0;c<s.length&&!t.closed;c+=i?1:2)t.next(s[c]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*t;if(t<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const c=e.now();let d=0;for(let p=1;p<i.length&&i[p]<=c;p+=2)d=p;d&&i.splice(0,d+1)}}}var wc=N(3099);function qh(n,t,e){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:t=1/0,refCount:r=!1,scheduler:e}=n):i=n??1/0,(0,wc.B)({connector:()=>new Ly(i,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}const Bu=(0,N(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Ds=N(515);function bn(n){return n<=0?()=>Ds.E:(0,Un.e)((t,e)=>{let i=0;t.subscribe((0,Kn.x)(e,r=>{++i<=n&&(e.next(r),n<=i&&e.complete())}))})}function Oa(n){return(0,Un.e)((t,e)=>{let i=!1;t.subscribe((0,Kn.x)(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function Cc(n=Ec){return(0,Un.e)((t,e)=>{let i=!1;t.subscribe((0,Kn.x)(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function Ec(){return new Bu}var zo=N(4671);function Nr(n,t){const e=arguments.length>=2;return i=>i.pipe(n?tn((r,s)=>n(r,s,i)):zo.y,bn(1),e?Oa(t):Cc(()=>new Bu))}var Fr=N(576);function Uu(n,t){return(0,Fr.m)(t)?_n(()=>n,t):_n(()=>n)}var Kh=N(9468),Lt=N(880),ai=N(2011),Ir=N(5867);class Pa{constructor(t){return t}}class Mi{constructor(){return(0,Ir.C6)()}}const Dc=new l.OlP("angularfire2._apps"),Na={provide:Pa,useFactory:function Mm(n){return n&&1===n.length?n[0]:new Pa((0,Ir.Mq)())},deps:[[new l.FiY,Dc]]},Vy={provide:Mi,deps:[[new l.FiY,Dc]]};function By(n){return(t,e)=>{const i=t.runOutsideAngular(()=>n(e));return new Pa(i)}}let Qh=(()=>{class n{constructor(e){(0,Ir.KN)("angularfire",Lt.q4.full,"core"),(0,Ir.KN)("angularfire",Lt.q4.full,"app"),(0,Ir.KN)("angular",l.q4F.full,e.toString())}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.Lbi))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[Na,Vy]}),n})();function Xh(n,...t){return{ngModule:Qh,providers:[{provide:Dc,useFactory:By(n),multi:!0,deps:[l.R0b,l.zs3,Lt.HU,...t]}]}}const xm=(0,Lt.u3)(Ir.ZF,!0);var we=N(5861);const tf=new Map,Uy={activated:!1,tokenObservers:[]},Fa={initialized:!1,enabled:!1};function li(n){return tf.get(n)||Uy}function ls(n,t){tf.set(n,t)}function nf(){return Fa}class La{constructor(t,e,i,r,s){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,we.Z)(function*(){e.stop();try{e.pending=new V.BH,yield function km(n){return new Promise(t=>{setTimeout(t,n)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new V.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(i){e.retryPolicy(i)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const _r=new V.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function lf(n){if(!li(n).activated)throw _r.create("use-before-activation",{appName:n.name})}function cf(n,t){return ml.apply(this,arguments)}function ml(){return(ml=(0,we.Z)(function*({url:n,body:t},e){var i,r;const s={"Content-Type":"application/json"},c=e.getImmediate({optional:!0});if(c){const O=yield c.getHeartbeatsHeader();O&&(s["X-Firebase-Client"]=O)}const d={method:"POST",body:JSON.stringify(t),headers:s};let p,_;try{p=yield fetch(n,d)}catch(O){throw _r.create("fetch-network-error",{originalErrorMessage:null===(i=O)||void 0===i?void 0:i.message})}if(200!==p.status)throw _r.create("fetch-status-error",{httpStatus:p.status});try{_=yield p.json()}catch(O){throw _r.create("fetch-parse-error",{originalErrorMessage:null===(r=O)||void 0===r?void 0:r.message})}const w=_.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw _r.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${_.ttl}`});const I=1e3*Number(w[1]),T=Date.now();return{token:_.token,expireTimeMillis:T+I,issuedAtTimeMillis:T}})).apply(this,arguments)}function gl(n,t){const{projectId:e,appId:i,apiKey:r}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${e}/apps/${i}:exchangeDebugToken?key=${r}`,body:{debug_token:t}}}const Ic="firebase-app-check-store";let _l=null;function df(){return _l||(_l=new Promise((n,t)=>{var e;try{const i=indexedDB.open("firebase-app-check-database",1);i.onsuccess=r=>{n(r.target.result)},i.onerror=r=>{var s;t(_r.create("storage-open",{originalErrorMessage:null===(s=r.target.error)||void 0===s?void 0:s.message}))},i.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Ic,{keyPath:"compositeKey"})}}catch(i){t(_r.create("storage-open",{originalErrorMessage:null===(e=i)||void 0===e?void 0:e.message}))}}),_l)}function Wu(){return(Wu=(0,we.Z)(function*(n,t){const i=(yield df()).transaction(Ic,"readwrite"),s=i.objectStore(Ic).put({compositeKey:n,value:t});return new Promise((c,d)=>{s.onsuccess=p=>{c()},i.onerror=p=>{var _;d(_r.create("storage-set",{originalErrorMessage:null===(_=p.target.error)||void 0===_?void 0:_.message}))}})})).apply(this,arguments)}const Is=new Es.Yd("@firebase/app-check");function pf(n,t){return(0,V.hl)()?function Gu(n,t){return function Pm(n,t){return Wu.apply(this,arguments)}(function Gs(n){return`${n.options.appId}-${n.name}`}(n),t)}(n,t).catch(e=>{Is.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function Lm(){return nf().enabled}function qu(){return gf.apply(this,arguments)}function gf(){return(gf=(0,we.Z)(function*(){const n=nf();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const b={error:"UNKNOWN_ERROR"};function g(n){return V.US.encodeString(JSON.stringify(n),!1)}function y(n){return E.apply(this,arguments)}function E(){return(E=(0,we.Z)(function*(n,t=!1){const e=n.app;lf(e);const i=li(e);let s,r=i.token;if(r&&!It(r)&&(ls(e,Object.assign(Object.assign({},i),{token:void 0})),r=void 0),!r){const p=yield i.cachedTokenPromise;p&&(It(p)?r=p:yield pf(e,void 0))}if(!t&&r&&It(r))return{token:r.token};let d,c=!1;if(Lm()){i.exchangeTokenPromise||(i.exchangeTokenPromise=cf(gl(e,yield qu()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),c=!0);const p=yield i.exchangeTokenPromise;return yield pf(e,p),ls(e,Object.assign(Object.assign({},i),{token:p})),{token:p.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),c=!0),r=yield i.exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?Is.warn(p.message):Is.error(p),s=p}return r?s?d=It(r)?{token:r.token,internalError:s}:on(s):(d={token:r.token},ls(e,Object.assign(Object.assign({},i),{token:r})),yield pf(e,r)):d=on(s),c&&lt(e,d),d})).apply(this,arguments)}function L(n,t){const e=li(n),i=e.tokenObservers.filter(r=>r.next!==t);0===i.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),ls(n,Object.assign(Object.assign({},e),{tokenObservers:i}))}function oe(n){const{app:t}=n,e=li(t);let i=e.tokenRefresher;i||(i=function Oe(n){const{app:t}=n;return new La((0,we.Z)(function*(){let i;if(i=li(t).token?yield y(n,!0):yield y(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{const e=li(t);if(e.token){let i=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,e.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(n),ls(t,Object.assign(Object.assign({},e),{tokenRefresher:i}))),!i.isRunning()&&e.isTokenAutoRefreshEnabled&&i.start()}function lt(n,t){const e=li(n).tokenObservers;for(const i of e)try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch{}}function It(n){return n.expireTimeMillis-Date.now()>0}function on(n){return{token:g(b),error:n}}class Jn{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:t}=li(this.app);for(const e of t)L(this.app,e.next);return Promise.resolve()}}const Zy="app-check-internal";!function VC(){(0,Pr._registerComponent)(new gi.wA("app-check",n=>function cs(n,t){return new Jn(n,t)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(Zy).initialize()})),(0,Pr._registerComponent)(new gi.wA(Zy,n=>function Ba(n){return{getToken:t=>y(n,t),addTokenListener:t=>function M(n,t,e,i){const{app:r}=n,s=li(r),c={next:e,error:i,type:t};if(ls(r,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,c]})),s.token&&It(s.token)){const d=s.token;Promise.resolve().then(()=>{e({token:d.token}),oe(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>oe(n))}(n,"INTERNAL",t),removeTokenListener:t=>L(n.app,t)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Pr.registerVersion)("@firebase/app-check","0.5.14")}();class Yu{constructor(){return(0,Lt.vb)("app-check")}}typeof window<"u"&&window;var Cf=N(127);const iv=new l.OlP("angularfire2.auth.use-emulator"),rv=new l.OlP("angularfire2.auth.settings"),$m=new l.OlP("angularfire2.auth.tenant-id"),wl=new l.OlP("angularfire2.auth.langugage-code"),sv=new l.OlP("angularfire2.auth.use-device-language"),ov=new l.OlP("angularfire.auth.persistence"),av=(n,t,e,i,r,s,c,d)=>(0,ai.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=t.runOutsideAngular(()=>n.auth());if(e&&p.useEmulator(...e),i&&(p.tenantId=i),p.languageCode=r,s&&p.useDeviceLanguage(),c)for(const[_,w]of Object.entries(c))p.settings[_]=w;return d&&p.setPersistence(d),p},[e,i,r,s,c,d]);let Qu=(()=>{class n{constructor(e,i,r,s,c,d,p,_,w,I,T,O){const U=new vt.x,W=Je(void 0).pipe((0,Ra.Q)(c.outsideAngular),_n(()=>s.runOutsideAngular(()=>Promise.resolve().then(N.bind(N,5881)))),(0,Ye.U)(()=>(0,ai.on)(e,s,i)),(0,Ye.U)(ie=>av(ie,s,d,_,w,I,p,T)),qh({bufferSize:1,refCount:!1}));if(Hs(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Je(null);else{W.pipe(Nr()).subscribe();const ze=W.pipe(_n(bt=>bt.getRedirectResult().then(Ut=>Ut,()=>null)),Lt.iC,qh({bufferSize:1,refCount:!1})),nt=W.pipe(_n(bt=>new Ni.y(Ut=>({unsubscribe:s.runOutsideAngular(()=>bt.onAuthStateChanged(zt=>Ut.next(zt),zt=>Ut.error(zt),()=>Ut.complete()))})))),ft=W.pipe(_n(bt=>new Ni.y(Ut=>({unsubscribe:s.runOutsideAngular(()=>bt.onIdTokenChanged(zt=>Ut.next(zt),zt=>Ut.error(zt),()=>Ut.complete()))}))));this.authState=ze.pipe(Uu(nt),(0,Kh.R)(c.outsideAngular),(0,Ra.Q)(c.insideAngular)),this.user=ze.pipe(Uu(ft),(0,Kh.R)(c.outsideAngular),(0,Ra.Q)(c.insideAngular)),this.idToken=this.user.pipe(_n(bt=>bt?(0,On.D)(bt.getIdToken()):Je(null))),this.idTokenResult=this.user.pipe(_n(bt=>bt?(0,On.D)(bt.getIdTokenResult()):Je(null))),this.credential=(0,Pn.T)(ze,U,this.authState.pipe(tn(bt=>!bt))).pipe((0,Ye.U)(bt=>bt?.user?bt:null),(0,Kh.R)(c.outsideAngular),(0,Ra.Q)(c.insideAngular))}return(0,ai.pX)(this,W,s,{spy:{apply:(ie,ze,nt)=>{(ie.startsWith("signIn")||ie.startsWith("createUser"))&&nt.then(ft=>U.next(ft))}}})}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ai.Dh),l.LFG(ai.xv,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(Lt.HU),l.LFG(iv,8),l.LFG(rv,8),l.LFG($m,8),l.LFG(wl,8),l.LFG(sv,8),l.LFG(ov,8),l.LFG(Yu,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),zm=(()=>{class n{constructor(){Cf.Z.registerVersion("angularfire",Lt.q4.full,"auth-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[Qu]}),n})();const Ss_production=!0,Ss_appVersion="0.2.2",Ss_firebase={projectId:"office-buddy-trieste",appId:"1:1068194485548:web:6aa016842792c2728a0889",storageBucket:"office-buddy-trieste.appspot.com",apiKey:"AIzaSyAaOlWtCuWDd6ujq6fvRY7Nm_XqU-Uo93g",authDomain:"office-buddy-trieste.firebaseapp.com",messagingSenderId:"1068194485548",measurementId:"G-YLR034EBYB",databaseURL:"https://office-buddy-trieste-default-rtdb.europe-west1.firebasedatabase.app/"},Ss_firebaseApiUrls={badges:"/badges",users:"/users"},Ss_formatter={shortDate:"",longDate:"",badgeIsoDateTime:"yyyy-MM-ddTHH:mm",badgeHumanDateTime:"dd/MM/yyyy HH:mm"};var Xu=N(4986);function $C(n,t,e,i,r){return(s,c)=>{let d=e,p=t,_=0;s.subscribe((0,Kn.x)(c,w=>{const I=_++;p=d?n(p,w,I):(d=!0,w),i&&c.next(p)},r&&(()=>{d&&c.next(p),c.complete()})))}}function Ju(n,t){return(0,Un.e)($C(n,t,arguments.length>=2,!0))}function ed(n,t=zo.y){return n=n??Ef,(0,Un.e)((e,i)=>{let r,s=!0;e.subscribe((0,Kn.x)(i,c=>{const d=t(c);(s||!n(r,d))&&(s=!1,r=d,i.next(c))}))})}function Ef(n,t){return n===t}var Gm=N(5032);N(5881);var eM=N(3942);const lv="@firebase/database";let cv="";function GC(n){cv=n}class WC{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,V.Wl)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,V.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class qC{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,V.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const Wm=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new WC(t)}}catch{}return new qC},Mc=Wm("localStorage"),uv=Wm("sessionStorage"),Cl=new Es.Yd("@firebase/database"),tM=function(){let n=1;return function(){return n++}}(),nM=function(n){const t=(0,V.dS)(n),e=new V.gQ;e.update(t);const i=e.digest();return V.US.encodeByteArray(i)},xc=function(...n){let t="";for(let e=0;e<n.length;e++){const i=n[e];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?t+=xc.apply(null,i):t+="object"==typeof i?(0,V.Wl)(i):i,t+=" "}return t};let nd=null,iM=!0;const rM=function(n,t){(0,V.hu)(!t||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Cl.logLevel=Es.in.VERBOSE,nd=Cl.log.bind(Cl),t&&uv.set("logging_enabled",!0)):"function"==typeof n?nd=n:(nd=null,uv.remove("logging_enabled"))},Sr=function(...n){if(!0===iM&&(iM=!1,null===nd&&!0===uv.get("logging_enabled")&&rM(!0)),nd){const t=xc.apply(null,n);nd(t)}},qm=function(n){return function(...t){Sr(n,...t)}},dv=function(...n){const t="FIREBASE INTERNAL ERROR: "+xc(...n);Cl.error(t)},vo=function(...n){const t=`FIREBASE FATAL ERROR: ${xc(...n)}`;throw Cl.error(t),new Error(t)},yr=function(...n){const t="FIREBASE WARNING: "+xc(...n);Cl.warn(t)},If=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},bo="[MIN_NAME]",Go="[MAX_NAME]",Ua=function(n,t){if(n===t)return 0;if(n===bo||t===Go)return-1;if(t===bo||n===Go)return 1;{const e=Ym(n),i=Ym(t);return null!==e?null!==i?e-i==0?n.length-t.length:e-i:-1:null!==i?1:n<t?-1:1}},Sf=function(n,t){return n===t?0:n<t?-1:1},Af=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+(0,V.Wl)(t))},hv=function(n){if("object"!=typeof n||null===n)return(0,V.Wl)(n);const t=[];for(const i in n)t.push(i);t.sort();let e="{";for(let i=0;i<t.length;i++)0!==i&&(e+=","),e+=(0,V.Wl)(t[i]),e+=":",e+=hv(n[t[i]]);return e+="}",e},ZC=function(n,t){const e=n.length;if(e<=t)return[n];const i=[];for(let r=0;r<e;r+=t)i.push(n.substring(r,r+t>e?e:r+t));return i};function ur(n,t){for(const e in n)n.hasOwnProperty(e)&&t(e,n[e])}const QC=function(n){(0,V.hu)(!If(n),"Invalid JSON number");const i=1023;let r,s,c,d,p;0===n?(s=0,c=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=d+i,c=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(s=0,c=Math.round(n/Math.pow(2,-1074))));const _=[];for(p=52;p;p-=1)_.push(c%2?1:0),c=Math.floor(c/2);for(p=11;p;p-=1)_.push(s%2?1:0),s=Math.floor(s/2);_.push(r?1:0),_.reverse();const w=_.join("");let I="";for(p=0;p<64;p+=8){let T=parseInt(w.substr(p,8),2).toString(16);1===T.length&&(T="0"+T),I+=T}return I.toLowerCase()},fv=new RegExp("^-?(0*)\\d{1,10}$"),XC=-2147483648,pv=2147483647,Ym=function(n){if(fv.test(n)){const t=Number(n);if(t>=XC&&t<=pv)return t}return null},kc=function(n){try{n()}catch(t){setTimeout(()=>{throw yr("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},Tf=function(n,t){const e=setTimeout(n,t);return"number"==typeof e&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(e):"object"==typeof e&&e.unref&&e.unref(),e};class qr{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(i=>this.appCheck=i)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){yr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class mv{constructor(t,e,i){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?(Sr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',yr(t)}}let id=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const eE=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,nE="websocket",yv="long_polling";class vv{constructor(t,e,i,r,s=!1,c="",d=!1){this.secure=e,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=c,this.includeNamespaceInQueryParams=d,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Mc.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Mc.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function iE(n,t,e){let i;if((0,V.hu)("string"==typeof t,"typeof type must == string"),(0,V.hu)("object"==typeof e,"typeof params must == object"),t===nE)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(t!==yv)throw new Error("Unknown connection type: "+t);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function cM(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(e.ns=n.namespace);const r=[];return ur(e,(s,c)=>{r.push(s+"="+c)}),i+r.join("&")}class uM{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,V.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,V.p$)(this.counters_)}}const bv={},El={};function wo(n){const t=n.toString();return bv[t]||(bv[t]=new uM),bv[t]}class hM{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&kc(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class As{constructor(t,e,i,r,s,c,d){this.connId=t,this.repoInfo=e,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=c,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=qm(t),this.stats_=wo(e),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),iE(e,yv,p))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new hM(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,V.Yr)()||"complete"===document.readyState)n();else{let t=!1;const e=function(){document.body?t||(t=!0,n()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new xf((...s)=>{const[c,d,p,_,w]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=d,this.password=p;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[c,d]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(c,d)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&eE.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){As.forceAllow_=!0}static forceDisallow(){As.forceDisallow_=!0}static isAvailable(){return!((0,V.Yr)()||!As.forceAllow_&&(As.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,V.Wl)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const i=(0,V.h$)(e),r=ZC(i,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,V.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=t,i.pw=e,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,V.Wl)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class xf{constructor(t,e,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,V.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=tM(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=xf.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(d){Sr("frame writing exception"),d.stack&&Sr(d.stack),Sr(d)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||Sr("No IE domain setting required")}catch{const i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const c=this.pendingSegs.shift();i=i+"&seg"+r+"="+c.seg+"&ts"+r+"="+c.ts+"&d"+r+"="+c.d,r++}return e+=i,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,i){this.pendingSegs.push({seg:t,ts:e,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const i=()=>{this.outstandingRequests.delete(e),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(r),i()})}addTag(t,e){(0,V.Yr)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=()=>{Sr("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}let od=null;typeof MozWebSocket<"u"?od=MozWebSocket:typeof WebSocket<"u"&&(od=WebSocket);let ad=(()=>{class n{constructor(e,i,r,s,c,d,p){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=qm(this.connId),this.stats_=wo(i),this.connURL=n.connectionURL_(i,d,p,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(e,i,r,s,c){const d={v:"5"};return!(0,V.Yr)()&&typeof location<"u"&&location.hostname&&eE.test(location.hostname)&&(d.r="f"),i&&(d.s=i),r&&(d.ls=r),s&&(d.ac=s),c&&(d.p=c),iE(e,nE,d)}open(e,i){this.onDisconnect=i,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Mc.set("previous_websocket_failure",!0);try{let r;if((0,V.Yr)()){r={headers:{"User-Agent":`Firebase/5/${cv}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,d=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;d&&(r.proxy={origin:d})}this.mySock=new od(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&null!==od&&!n.forceDisallow_}static previouslyFailed(){return Mc.isInMemoryStorage||!0===Mc.get("previous_websocket_failure")}markConnectionHealthy(){Mc.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,V.cI)(i);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,V.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const i=Number(e);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const i=e.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const i=(0,V.Wl)(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=ZC(i,16384);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),cE=(()=>{class n{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[As,ad]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const i=ad&&ad.isAvailable();let r=i&&!ad.previouslyFailed();if(e.webSocketOnly&&(i||yr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[ad];else{const s=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&s.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class Dv{constructor(t,e,i,r,s,c,d,p,_,w){this.id=t,this.repoInfo_=e,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=c,this.onReady_=d,this.onDisconnect_=p,this.onKill_=_,this.lastSessionId=w,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=qm("c:"+this.id+":"),this.transportManager_=new cE(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,i)},Math.floor(0));const r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=Tf(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=Af("t",t),i=Af("d",t);if("c"===e)this.onSecondaryControl_(i);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=Af("t",t),i=Af("d",t);"c"===e?this.onControl_(i):"d"===e&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=Af("t",t);if("d"in t){const i=t.d;if("h"===e)this.onHandshake_(i);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(i):"r"===e?this.onReset_(i):"e"===e?dv("Server Error: "+i):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):dv("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,i=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==i&&yr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,i),Tf(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Tf(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Mc.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class fE{put(t,e,i,r){}merge(t,e,i,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,i){}onDisconnectMerge(t,e,i){}onDisconnectCancel(t,e){}reportStats(t){}}class EM{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,V.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const i=[...this.listeners_[t]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,e)}}on(t,e,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:i});const r=this.getInitialEvent(t);r&&e.apply(i,r)}off(t,e,i){this.validateEventType_(t);const r=this.listeners_[t]||[];for(let s=0;s<r.length;s++)if(r[s].callback===e&&(!i||i===r[s].context))return void r.splice(s,1)}validateEventType_(t){(0,V.hu)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class Rc extends EM{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,V.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Rc}getInitialEvent(t){return(0,V.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class Hn{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function Tn(){return new Hn("")}function un(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Ha(n){return n.pieces_.length-n.pieceNum_}function Gn(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new Hn(n.pieces_,t)}function ld(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Oc(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function Sv(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new Hn(t,0)}function ci(n,t){const e=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)e.push(n.pieces_[i]);if(t instanceof Hn)for(let i=t.pieceNum_;i<t.pieces_.length;i++)e.push(t.pieces_[i]);else{const i=t.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&e.push(i[r])}return new Hn(e,0)}function nn(n){return n.pieceNum_>=n.pieces_.length}function Yr(n,t){const e=un(n),i=un(t);if(null===e)return t;if(e===i)return Yr(Gn(n),Gn(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function gE(n,t){const e=Oc(n,0),i=Oc(t,0);for(let r=0;r<e.length&&r<i.length;r++){const s=Ua(e[r],i[r]);if(0!==s)return s}return e.length===i.length?0:e.length<i.length?-1:1}function Av(n,t){if(Ha(n)!==Ha(t))return!1;for(let e=n.pieceNum_,i=t.pieceNum_;e<=n.pieces_.length;e++,i++)if(n.pieces_[e]!==t.pieces_[i])return!1;return!0}function Ws(n,t){let e=n.pieceNum_,i=t.pieceNum_;if(Ha(n)>Ha(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[i])return!1;++e,++i}return!0}class _E{constructor(t,e){this.errorPrefix_=e,this.parts_=Oc(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,V.ug)(this.parts_[i]);DM(this)}}function DM(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Il(n))}function Il(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class Mv extends EM{constructor(){let t,e;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new Mv}getInitialEvent(t){return(0,V.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const cd=1e3;let kf,Pc=(()=>{class n extends fE{constructor(e,i,r,s,c,d,p,_){if(super(),this.repoInfo_=e,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=c,this.authTokenProvider_=d,this.appCheckTokenProvider_=p,this.authOverride_=_,this.id=n.nextPersistentConnectionId_++,this.log_=qm("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=cd,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,_&&!(0,V.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Mv.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&Rc.getInstance().on("online",this.onOnline_,this)}sendRequest(e,i,r){const s=++this.requestNumber_,c={r:s,a:e,b:i};this.log_((0,V.Wl)(c)),(0,V.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const i=new V.BH,r={p:e._path.toString(),q:e._queryObject};return this.outstandingGets_.push({action:"g",request:r,onComplete:d=>{const p=d.d;"ok"===d.s?i.resolve(p):i.reject(p)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(e,i,r,s){this.initConnection_();const c=e._queryIdentifier,d=e._path.toString();this.log_("Listen called for "+d+" "+c),this.listens.has(d)||this.listens.set(d,new Map),(0,V.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,V.hu)(!this.listens.get(d).has(c),"listen() called twice for same path/queryId.");const p={onComplete:s,hashFn:i,query:e,tag:r};this.listens.get(d).set(c,p),this.connected_&&this.sendListen_(p)}sendGet_(e){const i=this.outstandingGets_[e];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(e){const i=e.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);const c={p:r};e.tag&&(c.q=i._queryObject,c.t=e.tag),c.h=e.hashFn(),this.sendRequest("q",c,p=>{const _=p.d,w=p.s;n.warnOnListenWarnings_(_,i),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",p),"ok"!==w&&this.removeListen_(r,s),e.onComplete&&e.onComplete(w,_))})}static warnOnListenWarnings_(e,i){if(e&&"object"==typeof e&&(0,V.r3)(e,"w")){const r=(0,V.DV)(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',c=i._path.toString();yr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,V.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,i=(0,V.w9)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{const c=s.s,d=s.d||"error";this.authToken_===e&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const i=e.s,r=e.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(e,i){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),(0,V.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,i)}sendUnlisten_(e,i,r,s){this.log_("Unlisten on "+e+" for "+i);const c={p:e};s&&(c.q=r,c.t=s),this.sendRequest("n",c)}onDisconnectPut(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:i,onComplete:r})}onDisconnectMerge(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:i,onComplete:r})}onDisconnectCancel(e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(e,i,r,s){const c={p:i,d:r};this.log_("onDisconnect "+e,c),this.sendRequest(e,c,d=>{s&&setTimeout(()=>{s(d.s,d.d)},Math.floor(0))})}put(e,i,r,s){this.putInternal("p",e,i,r,s)}merge(e,i,r,s){this.putInternal("m",e,i,r,s)}putInternal(e,i,r,s,c){this.initConnection_();const d={p:i,d:r};void 0!==c&&(d.h=c),this.outstandingPuts_.push({action:e,request:d,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(e){const i=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(i,r,c=>{this.log_(i+" response",c),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(c.s,c.d)})}reportStats(e){if(this.connected_){const i={c:e};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,V.Wl)(e));const i=e.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,i){this.log_("handleServerMessage",e,i),"d"===e?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===e?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===e?this.onListenRevoked_(i.p,i.q):"ac"===e?this.onAuthRevoked_(i.s,i.d):"apc"===e?this.onAppCheckRevoked_(i.s,i.d):"sd"===e?this.onSecurityDebugPacket_(i):dv("Unrecognized action received from server: "+(0,V.Wl)(e)+"\nAre you using the latest client?")}onReady_(e,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,V.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=cd,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=cd,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=cd),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-e);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,we.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const i=e.onDataMessage_.bind(e),r=e.onReady_.bind(e),s=e.onRealtimeDisconnect_.bind(e),c=e.id+":"+n.nextConnectionId_++,d=e.lastSessionId;let p=!1,_=null;const w=function(){_?_.close():(p=!0,s())};e.realtime_={close:w,sendRequest:function(O){(0,V.hu)(_,"sendRequest call when we're not connected not allowed."),_.sendRequest(O)}};const T=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[O,U]=yield Promise.all([e.authTokenProvider_.getToken(T),e.appCheckTokenProvider_.getToken(T)]);p?Sr("getToken() completed but was canceled"):(Sr("getToken() completed. Creating connection."),e.authToken_=O&&O.accessToken,e.appCheckToken_=U&&U.token,_=new Dv(c,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,i,r,s,W=>{yr(W+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},d))}catch(O){e.log_("Failed to get token: "+O),p||(e.repoInfo_.nodeAdmin&&yr(O),w())}}})()}interrupt(e){Sr("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Sr("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,V.xb)(this.interruptReasons_)&&(this.reconnectDelay_=cd,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const i=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const i=this.outstandingPuts_[e];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,i){let r;r=i?i.map(c=>hv(c)).join("$"):"default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,i){const r=new Hn(e).toString();let s;if(this.listens.has(r)){const c=this.listens.get(r);s=c.get(i),c.delete(i),0===c.size&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,i){Sr("Auth token revoked: "+e+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,i){Sr("App check token revoked: "+e+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const i of e.values())this.sendListen_(i);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let i="js";(0,V.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+i+"."+cv.replace(/\./g,"-")]=1,(0,V.uI)()?e["framework.cordova"]=1:(0,V.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Rc.getInstance().currentlyOnline();return(0,V.xb)(this.interruptReasons_)&&e}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class yn{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new yn(t,e)}}class ng{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const i=new yn(bo,t),r=new yn(bo,e);return 0!==this.compare(i,r)}minPost(){return yn.MIN}}class CE extends ng{static get __EMPTY_NODE(){return kf}static set __EMPTY_NODE(t){kf=t}compare(t,e){return Ua(t.name,e.name)}isDefinedOn(t){throw(0,V.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return yn.MIN}maxPost(){return new yn(Go,kf)}makePost(t,e){return(0,V.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new yn(t,kf)}toString(){return".key"}}const Wo=new CE;class ig{constructor(t,e,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let c=1;for(;!t.isEmpty();)if(c=e?i(t.key,e):1,r&&(c*=-1),c<0)t=this.isReverse_?t.left:t.right;else{if(0===c){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let kv,Ot=(()=>{class n{constructor(e,i,r,s,c){this.key=e,this.value=i,this.color=r??n.RED,this.left=s??Kr.EMPTY_NODE,this.right=c??Kr.EMPTY_NODE}copy(e,i,r,s,c){return new n(e??this.key,i??this.value,r??this.color,s??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,r){let s=this;const c=r(e,s.key);return s=c<0?s.copy(null,null,null,s.left.insert(e,i,r),null):0===c?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(e,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Kr.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,i){let r,s;if(r=this,i(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(e,r.key)){if(r.right.isEmpty())return Kr.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Kr{constructor(t,e=Kr.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new Kr(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,Ot.BLACK,null,null))}remove(t){return new Kr(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Ot.BLACK,null,null))}get(t){let e,i=this.root_;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e)return i.value;e<0?i=i.left:e>0&&(i=i.right)}return null}getPredecessorKey(t){let e,i=this.root_,r=null;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}e<0?i=i.left:e>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new ig(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new ig(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new ig(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new ig(this.root_,null,this.comparator_,!0,t)}}function DE(n,t){return Ua(n.name,t.name)}function xv(n,t){return Ua(n,t)}Kr.EMPTY_NODE=new class EE{copy(t,e,i,r,s){return this}insert(t,e,i){return new Ot(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const SE=function(n){return"number"==typeof n?"number:"+QC(n):"string:"+n},Rv=function(n){if(n.isLeafNode()){const t=n.val();(0,V.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,V.r3)(t,".sv"),"Priority must be a string or number.")}else(0,V.hu)(n===kv||n.isEmpty(),"priority of unexpected type.");(0,V.hu)(n===kv||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let AE,AM,Ov,ud=(()=>{class n{constructor(e,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=i,this.lazyHash_=null,(0,V.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Rv(this.priorityNode_)}static set __childrenNodeConstructor(e){AE=e}static get __childrenNodeConstructor(){return AE}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return nn(e)?this:".priority"===un(e)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,i){return null}updateImmediateChild(e,i){return".priority"===e?this.updatePriority(i):i.isEmpty()&&".priority"!==e?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,i).updatePriority(this.priorityNode_)}updateChild(e,i){const r=un(e);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,V.hu)(".priority"!==r||1===Ha(e),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Gn(e),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,i){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+SE(this.priorityNode_.val())+":");const i=typeof this.value_;e+=i+":",e+="number"===i?QC(this.value_):this.value_,this.lazyHash_=nM(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:((0,V.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const i=typeof e.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),c=n.VALUE_TYPE_ORDER.indexOf(r);return(0,V.hu)(s>=0,"Unknown leaf type: "+i),(0,V.hu)(c>=0,"Unknown leaf type: "+r),s===c?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:c-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const i=e;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const ei=new class TM extends ng{compare(t,e){const i=t.node.getPriority(),r=e.node.getPriority(),s=i.compareTo(r);return 0===s?Ua(t.name,e.name):s}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return yn.MIN}maxPost(){return new yn(Go,new ud("[PRIORITY-POST]",Ov))}makePost(t,e){const i=AM(t);return new yn(e,new ud("[PRIORITY-POST]",i))}toString(){return".priority"}},Pv=Math.log(2);class MM{constructor(t){this.count=parseInt(Math.log(t+1)/Pv,10),this.current_=this.count-1;const r=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&r}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const Nv=function(n,t,e,i){n.sort(t);const r=function(p,_){const w=_-p;let I,T;if(0===w)return null;if(1===w)return I=n[p],T=e?e(I):I,new Ot(T,I.node,Ot.BLACK,null,null);{const O=parseInt(w/2,10)+p,U=r(p,O),W=r(O+1,_);return I=n[O],T=e?e(I):I,new Ot(T,I.node,Ot.BLACK,U,W)}},d=function(p){let _=null,w=null,I=n.length;const T=function(U,W){const ie=I-U,ze=I;I-=U;const nt=r(ie+1,ze),ft=n[ie],bt=e?e(ft):ft;O(new Ot(bt,ft.node,W,null,nt))},O=function(U){_?(_.left=U,_=U):(w=U,_=U)};for(let U=0;U<p.count;++U){const W=p.nextBitIsOne(),ie=Math.pow(2,p.count-(U+1));W?T(ie,Ot.BLACK):(T(ie,Ot.BLACK),T(ie,Ot.RED))}return w}(new MM(n.length));return new Kr(i||t,d)};let ME;const Rf={};class ja{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,V.hu)(Rf&&ei,"ChildrenNode.ts has not been loaded"),ME=ME||new ja({".priority":Rf},{".priority":ei}),ME}get(t){const e=(0,V.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Kr?e:null}hasIndex(t){return(0,V.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,V.hu)(t!==Wo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=e.getIterator(yn.Wrap);let d,c=s.getNext();for(;c;)r=r||t.isDefinedOn(c.node),i.push(c),c=s.getNext();d=r?Nv(i,t.getCompare()):Rf;const p=t.toString(),_=Object.assign({},this.indexSet_);_[p]=t;const w=Object.assign({},this.indexes_);return w[p]=d,new ja(w,_)}addToIndexes(t,e){const i=(0,V.UI)(this.indexes_,(r,s)=>{const c=(0,V.DV)(this.indexSet_,s);if((0,V.hu)(c,"Missing index implementation for "+s),r===Rf){if(c.isDefinedOn(t.node)){const d=[],p=e.getIterator(yn.Wrap);let _=p.getNext();for(;_;)_.name!==t.name&&d.push(_),_=p.getNext();return d.push(t),Nv(d,c.getCompare())}return Rf}{const d=e.get(t.name);let p=r;return d&&(p=p.remove(new yn(t.name,d))),p.insert(t,t.node)}});return new ja(i,this.indexSet_)}removeFromIndexes(t,e){const i=(0,V.UI)(this.indexes_,r=>{if(r===Rf)return r;{const s=e.get(t.name);return s?r.remove(new yn(t.name,s)):r}});return new ja(i,this.indexSet_)}}let dd,an=(()=>{class n{constructor(e,i,r){this.children_=e,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Rv(this.priorityNode_),this.children_.isEmpty()&&(0,V.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return dd||(dd=new n(new Kr(xv),null,ja.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||dd}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const i=this.children_.get(e);return null===i?dd:i}}getChild(e){const i=un(e);return null===i?this:this.getImmediateChild(i).getChild(Gn(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,i){if((0,V.hu)(i,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(i);{const r=new yn(e,i);let s,c;i.isEmpty()?(s=this.children_.remove(e),c=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,i),c=this.indexMap_.addToIndexes(r,this.children_));const d=s.isEmpty()?dd:this.priorityNode_;return new n(s,d,c)}}updateChild(e,i){const r=un(e);if(null===r)return i;{(0,V.hu)(".priority"!==un(e)||1===Ha(e),".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Gn(e),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const i={};let r=0,s=0,c=!0;if(this.forEachChild(ei,(d,p)=>{i[d]=p.val(e),r++,c&&n.INTEGER_REGEXP_.test(d)?s=Math.max(s,Number(d)):c=!1}),!e&&c&&s<2*r){const d=[];for(const p in i)d[p]=i[p];return d}return e&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+SE(this.getPriority().val())+":"),this.forEachChild(ei,(i,r)=>{const s=r.hash();""!==s&&(e+=":"+i+":"+s)}),this.lazyHash_=""===e?"":nM(e)}return this.lazyHash_}getPredecessorChildName(e,i,r){const s=this.resolveIndex_(r);if(s){const c=s.getPredecessorKey(new yn(e,i));return c?c.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(e){const i=this.getFirstChildName(e);return i?new yn(i,this.children_.get(i)):null}getLastChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(e){const i=this.getLastChildName(e);return i?new yn(i,this.children_.get(i)):null}forEachChild(e,i){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,yn.Wrap);let c=s.peek();for(;null!=c&&i.compare(c,e)<0;)s.getNext(),c=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,yn.Wrap);let c=s.peek();for(;null!=c&&i.compare(c,e)>0;)s.getNext(),c=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===qo?-1:0}withIndex(e){if(e===Wo||this.indexMap_.hasIndex(e))return this;{const i=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(e){return e===Wo||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const i=e;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(ei),s=i.getIterator(ei);let c=r.getNext(),d=s.getNext();for(;c&&d;){if(c.name!==d.name||!c.node.equals(d.node))return!1;c=r.getNext(),d=s.getNext()}return null===c&&null===d}return!1}return!1}}resolveIndex_(e){return e===Wo?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const qo=new class xM extends an{constructor(){super(new Kr(xv),an.EMPTY_NODE,ja.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return an.EMPTY_NODE}isEmpty(){return!1}};function Ei(n,t=null){if(null===n)return an.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),(0,V.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new ud(n,Ei(t));if(n instanceof Array){let e=an.EMPTY_NODE;return ur(n,(i,r)=>{if((0,V.r3)(n,i)&&"."!==i.substring(0,1)){const s=Ei(r);(s.isLeafNode()||!s.isEmpty())&&(e=e.updateImmediateChild(i,s))}}),e.updatePriority(Ei(t))}{const e=[];let i=!1;if(ur(n,(c,d)=>{if("."!==c.substring(0,1)){const p=Ei(d);p.isEmpty()||(i=i||!p.getPriority().isEmpty(),e.push(new yn(c,p)))}}),0===e.length)return an.EMPTY_NODE;const s=Nv(e,DE,c=>c.name,xv);if(i){const c=Nv(e,ei.getCompare());return new an(s,Ei(t),new ja({".priority":c},{".priority":ei}))}return new an(s,Ei(t),ja.Default)}}Object.defineProperties(yn,{MIN:{value:new yn(bo,an.EMPTY_NODE)},MAX:{value:new yn(Go,qo)}}),CE.__EMPTY_NODE=an.EMPTY_NODE,ud.__childrenNodeConstructor=an,function IE(n){kv=n}(qo),function Nc(n){Ov=n}(qo),function TE(n){AM=n}(Ei);class hd extends ng{constructor(t){super(),this.indexPath_=t,(0,V.hu)(!nn(t)&&".priority"!==un(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const i=this.extractChild(t.node),r=this.extractChild(e.node),s=i.compareTo(r);return 0===s?Ua(t.name,e.name):s}makePost(t,e){const i=Ei(t),r=an.EMPTY_NODE.updateChild(this.indexPath_,i);return new yn(e,r)}maxPost(){const t=an.EMPTY_NODE.updateChild(this.indexPath_,qo);return new yn(Go,t)}toString(){return Oc(this.indexPath_,0).join("/")}}const rg=new class RM extends ng{compare(t,e){const i=t.node.compareTo(e.node);return 0===i?Ua(t.name,e.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return yn.MIN}maxPost(){return yn.MAX}makePost(t,e){const i=Ei(t);return new yn(e,i)}toString(){return".value"}},fd="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",OM=function(){let n=0;const t=[];return function(e){const i=e===n;let r;n=e;const s=new Array(8);for(r=7;r>=0;r--)s[r]=fd.charAt(e%64),e=Math.floor(e/64);(0,V.hu)(0===e,"Cannot push at time == 0");let c=s.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)c+=fd.charAt(t[r]);return(0,V.hu)(20===c.length,"nextPushId: Length should be 20."),c}}(),Lv=function(n){if(n===""+pv)return"-";const t=Ym(n);if(null!=t)return""+(t+1);const e=new Array(n.length);for(let c=0;c<e.length;c++)e[c]=n.charAt(c);if(e.length<786)return e.push("-"),e.join("");let i=e.length-1;for(;i>=0&&"z"===e[i];)i--;if(-1===i)return Go;const s=fd.charAt(fd.indexOf(e[i])+1);return e[i]=s,e.slice(0,i+1).join("")},RE=function(n){if(n===""+XC)return bo;const t=Ym(n);if(null!=t)return""+(t-1);const e=new Array(n.length);for(let i=0;i<e.length;i++)e[i]=n.charAt(i);return"-"===e[e.length-1]?1===e.length?""+pv:(delete e[e.length-1],e.join("")):(e[e.length-1]=fd.charAt(fd.indexOf(e[e.length-1])-1),e.join("")+"z".repeat(786-e.length))};function Vv(n){return{type:"value",snapshotNode:n}}function Fc(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function Lc(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function sg(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}class Uv{constructor(t){this.index_=t}updateChild(t,e,i,r,s,c){(0,V.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=t.getImmediateChild(e);return d.getChild(r).equals(i.getChild(r))&&d.isEmpty()===i.isEmpty()||(null!=c&&(i.isEmpty()?t.hasChild(e)?c.trackChildChange(Lc(e,d)):(0,V.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?c.trackChildChange(Fc(e,i)):c.trackChildChange(sg(e,i,d))),t.isLeafNode()&&i.isEmpty())?t:t.updateImmediateChild(e,i).withIndex(this.index_)}updateFullNode(t,e,i){return null!=i&&(t.isLeafNode()||t.forEachChild(ei,(r,s)=>{e.hasChild(r)||i.trackChildChange(Lc(r,s))}),e.isLeafNode()||e.forEachChild(ei,(r,s)=>{if(t.hasChild(r)){const c=t.getImmediateChild(r);c.equals(s)||i.trackChildChange(sg(r,s,c))}else i.trackChildChange(Fc(r,s))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?an.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class og{constructor(t){this.indexedFilter_=new Uv(t.getIndex()),this.index_=t.getIndex(),this.startPost_=og.getStartPost_(t),this.endPost_=og.getEndPost_(t)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0}updateChild(t,e,i,r,s,c){return this.matches(new yn(e,i))||(i=an.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,i,r,s,c)}updateFullNode(t,e,i){e.isLeafNode()&&(e=an.EMPTY_NODE);let r=e.withIndex(this.index_);r=r.updatePriority(an.EMPTY_NODE);const s=this;return e.forEachChild(ei,(c,d)=>{s.matches(new yn(c,d))||(r=r.updateImmediateChild(c,an.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class pd{constructor(t){this.rangedFilter_=new og(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}updateChild(t,e,i,r,s,c){return this.rangedFilter_.matches(new yn(e,i))||(i=an.EMPTY_NODE),t.getImmediateChild(e).equals(i)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,i,r,s,c):this.fullLimitUpdateChild_(t,e,i,s,c)}updateFullNode(t,e,i){let r;if(e.isLeafNode()||e.isEmpty())r=an.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let s;r=an.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;s.hasNext()&&c<this.limit_;){const d=s.getNext();let p;if(p=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),d)<=0:this.index_.compare(d,this.rangedFilter_.getEndPost())<=0,!p)break;r=r.updateImmediateChild(d.name,d.node),c++}}else{let s,c,d,p;if(r=e.withIndex(this.index_),r=r.updatePriority(an.EMPTY_NODE),this.reverse_){p=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const I=this.index_.getCompare();d=(T,O)=>I(O,T)}else p=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),d=this.index_.getCompare();let _=0,w=!1;for(;p.hasNext();){const I=p.getNext();!w&&d(s,I)<=0&&(w=!0),w&&_<this.limit_&&d(I,c)<=0?_++:r=r.updateImmediateChild(I.name,an.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,i,r,s){let c;if(this.reverse_){const I=this.index_.getCompare();c=(T,O)=>I(O,T)}else c=this.index_.getCompare();const d=t;(0,V.hu)(d.numChildren()===this.limit_,"");const p=new yn(e,i),_=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),w=this.rangedFilter_.matches(p);if(d.hasChild(e)){const I=d.getImmediateChild(e);let T=r.getChildAfterChild(this.index_,_,this.reverse_);for(;null!=T&&(T.name===e||d.hasChild(T.name));)T=r.getChildAfterChild(this.index_,T,this.reverse_);const O=null==T?1:c(T,p);if(w&&!i.isEmpty()&&O>=0)return s?.trackChildChange(sg(e,i,I)),d.updateImmediateChild(e,i);{s?.trackChildChange(Lc(e,I));const W=d.updateImmediateChild(e,an.EMPTY_NODE);return null!=T&&this.rangedFilter_.matches(T)?(s?.trackChildChange(Fc(T.name,T.node)),W.updateImmediateChild(T.name,T.node)):W}}return i.isEmpty()?t:w&&c(_,p)>=0?(null!=s&&(s.trackChildChange(Lc(_.name,_.node)),s.trackChildChange(Fc(e,i))),d.updateImmediateChild(e,i).updateImmediateChild(_.name,an.EMPTY_NODE)):t}}class Of{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ei}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,V.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,V.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:bo}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,V.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,V.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Go}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,V.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ei}copy(){const t=new Of;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function lg(n,t,e){const i=n.copy();return i.startSet_=!0,void 0===t&&(t=null),i.indexStartValue_=t,null!=e?(i.startNameSet_=!0,i.indexStartName_=e):(i.startNameSet_=!1,i.indexStartName_=""),i}function Pf(n,t,e){const i=n.copy();return i.endSet_=!0,void 0===t&&(t=null),i.indexEndValue_=t,void 0!==e?(i.endNameSet_=!0,i.indexEndName_=e):(i.endNameSet_=!1,i.indexEndName_=""),i}function md(n,t){const e=n.copy();return e.index_=t,e}function Hv(n){const t={};if(n.isDefault())return t;let e;return n.index_===ei?e="$priority":n.index_===rg?e="$value":n.index_===Wo?e="$key":((0,V.hu)(n.index_ instanceof hd,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=(0,V.Wl)(e),n.startSet_&&(t.startAt=(0,V.Wl)(n.indexStartValue_),n.startNameSet_&&(t.startAt+=","+(0,V.Wl)(n.indexStartName_))),n.endSet_&&(t.endAt=(0,V.Wl)(n.indexEndValue_),n.endNameSet_&&(t.endAt+=","+(0,V.Wl)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function cg(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_)),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_)),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;""===e&&(e=n.isViewFromLeft()?"l":"r"),t.vf=e}return n.index_!==ei&&(t.i=n.index_.toString()),t}class jv extends fE{constructor(t,e,i,r){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=qm("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,V.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,i,r){const s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);const c=jv.getListenId_(t,i),d={};this.listens_[c]=d;const p=Hv(t._queryParams);this.restRequest_(s+".json",p,(_,w)=>{let I=w;if(404===_&&(I=null,_=null),null===_&&this.onDataUpdate_(s,I,!1,i),(0,V.DV)(this.listens_,c)===d){let T;T=_?401===_?"permission_denied":"rest_error:"+_:"ok",r(T,null)}})}unlisten(t,e){const i=jv.getListenId_(t,e);delete this.listens_[i]}get(t){const e=Hv(t._queryParams),i=t._path.toString(),r=new V.BH;return this.restRequest_(i+".json",e,(s,c)=>{let d=c;404===s&&(d=null,s=null),null===s?(this.onDataUpdate_(i,d,!1,null),r.resolve(d)):r.reject(new Error(d))}),r.promise}refreshAuthToken(t){}restRequest_(t,e={},i){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(e.auth=r.accessToken),s&&s.token&&(e.ac=s.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,V.xO)(e);this.log_("Sending REST request for "+c);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(i&&4===d.readyState){this.log_("REST Response for "+c+" received. status:",d.status,"response:",d.responseText);let p=null;if(d.status>=200&&d.status<300){try{p=(0,V.cI)(d.responseText)}catch{yr("Failed to parse JSON response for "+c+": "+d.responseText)}i(null,p)}else 401!==d.status&&404!==d.status&&yr("Got unsuccessful REST response for "+c+" Status: "+d.status),i(d.status);i=null}},d.open("GET",c,!0),d.send()})}}class PE{constructor(){this.rootNode_=an.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function $v(){return{value:null,children:new Map}}function za(n,t,e){if(nn(t))n.value=e,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(t,e);else{const i=un(t);n.children.has(i)||n.children.set(i,$v()),za(n.children.get(i),t=Gn(t),e)}}function gd(n,t){if(nn(t))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const e=n.value;return n.value=null,e.forEachChild(ei,(i,r)=>{za(n,new Hn(i),r)}),gd(n,t)}}if(n.children.size>0){const e=un(t);return t=Gn(t),n.children.has(e)&&gd(n.children.get(e),t)&&n.children.delete(e),0===n.children.size}return!0}function Nf(n,t,e){null!==n.value?e(t,n.value):function zv(n,t){n.children.forEach((e,i)=>{t(i,e)})}(n,(i,r)=>{Nf(r,new Hn(t.toString()+"/"+i),e)})}class Gv{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&ur(this.last_,(i,r)=>{e[i]=e[i]-r}),this.last_=t,e}}class VM{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Gv(t);const i=1e4+2e4*Math.random();Tf(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const t=this.statsListener_.get(),e={};let i=!1;ur(t,(r,s)=>{s>0&&(0,V.r3)(this.statsToReport_,r)&&(e[r]=s,i=!0)}),i&&this.server_.reportStats(e),Tf(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var qs=(()=>{return(n=qs||(qs={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",qs;var n})();function Wv(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class qv{constructor(t,e,i){this.path=t,this.affectedTree=e,this.revert=i,this.type=qs.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(nn(this.path)){if(null!=this.affectedTree.value)return(0,V.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new Hn(t));return new qv(Tn(),e,this.revert)}}return(0,V.hu)(un(this.path)===t,"operationForChild called for unrelated child."),new qv(Gn(this.path),this.affectedTree,this.revert)}}class _d{constructor(t,e){this.source=t,this.path=e,this.type=qs.LISTEN_COMPLETE}operationForChild(t){return nn(this.path)?new _d(this.source,Tn()):new _d(this.source,Gn(this.path))}}class Sl{constructor(t,e,i){this.source=t,this.path=e,this.snap=i,this.type=qs.OVERWRITE}operationForChild(t){return nn(this.path)?new Sl(this.source,Tn(),this.snap.getImmediateChild(t)):new Sl(this.source,Gn(this.path),this.snap)}}class yd{constructor(t,e,i){this.source=t,this.path=e,this.children=i,this.type=qs.MERGE}operationForChild(t){if(nn(this.path)){const e=this.children.subtree(new Hn(t));return e.isEmpty()?null:e.value?new Sl(this.source,Tn(),e.value):new yd(this.source,Tn(),e)}return(0,V.hu)(un(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new yd(this.source,Gn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Yo{constructor(t,e,i){this.node_=t,this.fullyInitialized_=e,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(nn(t))return this.isFullyInitialized()&&!this.filtered_;const e=un(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class q1{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function dg(n,t,e,i,r,s){const c=i.filter(d=>d.type===e);c.sort((d,p)=>function Z1(n,t,e){if(null==t.childName||null==e.childName)throw(0,V.g5)("Should only compare child_ events.");const i=new yn(t.childName,t.snapshotNode),r=new yn(e.childName,e.snapshotNode);return n.index_.compare(i,r)}(n,d,p)),c.forEach(d=>{const p=function K1(n,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}(n,d,s);r.forEach(_=>{_.respondsTo(d.type)&&t.push(_.createEvent(p,n.query_))})})}function Yv(n,t){return{eventCache:n,serverCache:t}}function hg(n,t,e,i){return Yv(new Yo(t,e,i),n.serverCache)}function BM(n,t,e,i){return Yv(n.eventCache,new Yo(t,e,i))}function Kv(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function vd(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Ko;class ui{constructor(t,e=(()=>(Ko||(Ko=new Kr(Sf)),Ko))()){this.value=t,this.children=e}static fromObject(t){let e=new ui(null);return ur(t,(i,r)=>{e=e.set(new Hn(i),r)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:Tn(),value:this.value};if(nn(t))return null;{const i=un(t),r=this.children.get(i);if(null!==r){const s=r.findRootMostMatchingPathAndValue(Gn(t),e);return null!=s?{path:ci(new Hn(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(nn(t))return this;{const e=un(t),i=this.children.get(e);return null!==i?i.subtree(Gn(t)):new ui(null)}}set(t,e){if(nn(t))return new ui(e,this.children);{const i=un(t),s=(this.children.get(i)||new ui(null)).set(Gn(t),e),c=this.children.insert(i,s);return new ui(this.value,c)}}remove(t){if(nn(t))return this.children.isEmpty()?new ui(null):new ui(null,this.children);{const e=un(t),i=this.children.get(e);if(i){const r=i.remove(Gn(t));let s;return s=r.isEmpty()?this.children.remove(e):this.children.insert(e,r),null===this.value&&s.isEmpty()?new ui(null):new ui(this.value,s)}return this}}get(t){if(nn(t))return this.value;{const e=un(t),i=this.children.get(e);return i?i.get(Gn(t)):null}}setTree(t,e){if(nn(t))return e;{const i=un(t),s=(this.children.get(i)||new ui(null)).setTree(Gn(t),e);let c;return c=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new ui(this.value,c)}}fold(t){return this.fold_(Tn(),t)}fold_(t,e){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(ci(t,r),e)}),e(t,this.value,i)}findOnPath(t,e){return this.findOnPath_(t,Tn(),e)}findOnPath_(t,e,i){const r=!!this.value&&i(e,this.value);if(r)return r;if(nn(t))return null;{const s=un(t),c=this.children.get(s);return c?c.findOnPath_(Gn(t),ci(e,s),i):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,Tn(),e)}foreachOnPath_(t,e,i){if(nn(t))return this;{this.value&&i(e,this.value);const r=un(t),s=this.children.get(r);return s?s.foreachOnPath_(Gn(t),ci(e,r),i):new ui(null)}}foreach(t){this.foreach_(Tn(),t)}foreach_(t,e){this.children.inorderTraversal((i,r)=>{r.foreach_(ci(t,i),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,i)=>{i.value&&t(e,i.value)})}}class Ys{constructor(t){this.writeTree_=t}static empty(){return new Ys(new ui(null))}}function Vc(n,t,e){if(nn(t))return new Ys(new ui(e));{const i=n.writeTree_.findRootMostValueAndPath(t);if(null!=i){const r=i.path;let s=i.value;const c=Yr(r,t);return s=s.updateChild(c,e),new Ys(n.writeTree_.set(r,s))}{const r=new ui(e),s=n.writeTree_.setTree(t,r);return new Ys(s)}}}function fg(n,t,e){let i=n;return ur(e,(r,s)=>{i=Vc(i,ci(t,r),s)}),i}function pg(n,t){if(nn(t))return Ys.empty();{const e=n.writeTree_.setTree(t,new ui(null));return new Ys(e)}}function Qv(n,t){return null!=us(n,t)}function us(n,t){const e=n.writeTree_.findRootMostValueAndPath(t);return null!=e?n.writeTree_.get(e.path).getChild(Yr(e.path,t)):null}function Xv(n){const t=[],e=n.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(ei,(i,r)=>{t.push(new yn(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&t.push(new yn(i,r.value))}),t}function Al(n,t){if(nn(t))return n;{const e=us(n,t);return new Ys(null!=e?new ui(e):n.writeTree_.subtree(t))}}function Jv(n){return n.writeTree_.isEmpty()}function Bc(n,t){return FE(Tn(),n.writeTree_,t)}function FE(n,t,e){if(null!=t.value)return e.updateChild(n,t.value);{let i=null;return t.children.inorderTraversal((r,s)=>{".priority"===r?((0,V.hu)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):e=FE(ci(n,r),s,e)}),!e.getChild(n).isEmpty()&&null!==i&&(e=e.updateChild(ci(n,".priority"),i)),e}}function mg(n,t){return BE(t,n)}function tb(n,t){if(n.snap)return Ws(n.path,t);for(const e in n.children)if(n.children.hasOwnProperty(e)&&Ws(ci(n.path,e),t))return!0;return!1}function LE(n){return n.visible}function nb(n,t,e){let i=Ys.empty();for(let r=0;r<n.length;++r){const s=n[r];if(t(s)){const c=s.path;let d;if(s.snap)Ws(e,c)?(d=Yr(e,c),i=Vc(i,d,s.snap)):Ws(c,e)&&(d=Yr(c,e),i=Vc(i,Tn(),s.snap.getChild(d)));else{if(!s.children)throw(0,V.g5)("WriteRecord should have .snap or .children");if(Ws(e,c))d=Yr(e,c),i=fg(i,d,s.children);else if(Ws(c,e))if(d=Yr(c,e),nn(d))i=fg(i,Tn(),s.children);else{const p=(0,V.DV)(s.children,un(d));if(p){const _=p.getChild(Gn(d));i=Vc(i,Tn(),_)}}}}}return i}function yg(n,t,e,i,r){if(i||r){const s=Al(n.visibleWrites,t);return!r&&Jv(s)?e:r||null!=e||Qv(s,Tn())?Bc(nb(n.allWrites,function(_){return(_.visible||r)&&(!i||!~i.indexOf(_.writeId))&&(Ws(_.path,t)||Ws(t,_.path))},t),e||an.EMPTY_NODE):null}{const s=us(n.visibleWrites,t);if(null!=s)return s;{const c=Al(n.visibleWrites,t);return Jv(c)?e:null!=e||Qv(c,Tn())?Bc(c,e||an.EMPTY_NODE):null}}}function Ff(n,t,e,i){return yg(n.writeTree,n.treePath,t,e,i)}function sb(n,t){return function ib(n,t,e){let i=an.EMPTY_NODE;const r=us(n.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(ei,(s,c)=>{i=i.updateImmediateChild(s,c)}),i;if(e){const s=Al(n.visibleWrites,t);return e.forEachChild(ei,(c,d)=>{const p=Bc(Al(s,new Hn(c)),d);i=i.updateImmediateChild(c,p)}),Xv(s).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}return Xv(Al(n.visibleWrites,t)).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}(n.writeTree,n.treePath,t)}function ob(n,t,e,i){return function VE(n,t,e,i,r){(0,V.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=ci(t,e);if(Qv(n.visibleWrites,s))return null;{const c=Al(n.visibleWrites,s);return Jv(c)?r.getChild(e):Bc(c,r.getChild(e))}}(n.writeTree,n.treePath,t,e,i)}function Lf(n,t){return function UM(n,t){return us(n.visibleWrites,t)}(n.writeTree,ci(n.treePath,t))}function Zr(n,t,e){return function rb(n,t,e,i){const r=ci(t,e),s=us(n.visibleWrites,r);return null!=s?s:i.isCompleteForChild(e)?Bc(Al(n.visibleWrites,r),i.getNode().getImmediateChild(e)):null}(n.writeTree,n.treePath,t,e)}function ab(n,t){return BE(ci(n.treePath,t),n.writeTree)}function BE(n,t){return{treePath:n,writeTree:t}}class X1{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,i=t.childName;(0,V.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,V.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if("child_added"===e&&"child_removed"===s)this.changeMap.set(i,sg(i,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===e&&"child_changed"===s)this.changeMap.set(i,Lc(i,r.oldSnap));else if("child_changed"===e&&"child_added"===s)this.changeMap.set(i,Fc(i,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==s)throw(0,V.g5)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(i,sg(i,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}}const vg=new class $M{getCompleteChild(t){return null}getChildAfterChild(t,e,i){return null}};class bg{constructor(t,e,i=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=i}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const i=null!=this.optCompleteServerCache_?new Yo(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Zr(this.writes_,t,i)}}getChildAfterChild(t,e,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:vd(this.viewCache_),s=function jM(n,t,e,i,r,s){return function Q1(n,t,e,i,r,s,c){let d;const p=Al(n.visibleWrites,t),_=us(p,Tn());if(null!=_)d=_;else{if(null==e)return[];d=Bc(p,e)}if(d=d.withIndex(c),d.isEmpty()||d.isLeafNode())return[];{const w=[],I=c.getCompare(),T=s?d.getReverseIteratorFrom(i,c):d.getIteratorFrom(i,c);let O=T.getNext();for(;O&&w.length<r;)0!==I(O,i)&&w.push(O),O=T.getNext();return w}}(n.writeTree,n.treePath,t,e,i,r,s)}(this.writes_,r,e,1,i,t);return 0===s.length?null:s[0]}}function HE(n,t,e,i,r,s){const c=t.eventCache;if(null!=Lf(i,e))return t;{let d,p;if(nn(e))if((0,V.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const _=vd(t),I=sb(i,_ instanceof an?_:an.EMPTY_NODE);d=n.filter.updateFullNode(t.eventCache.getNode(),I,s)}else{const _=Ff(i,vd(t));d=n.filter.updateFullNode(t.eventCache.getNode(),_,s)}else{const _=un(e);if(".priority"===_){(0,V.hu)(1===Ha(e),"Can't have a priority with additional path components");const w=c.getNode();p=t.serverCache.getNode();const I=ob(i,e,w,p);d=null!=I?n.filter.updatePriority(w,I):c.getNode()}else{const w=Gn(e);let I;if(c.isCompleteForChild(_)){p=t.serverCache.getNode();const T=ob(i,e,c.getNode(),p);I=null!=T?c.getNode().getImmediateChild(_).updateChild(w,T):c.getNode().getImmediateChild(_)}else I=Zr(i,_,t.serverCache);d=null!=I?n.filter.updateChild(c.getNode(),_,I,w,r,s):c.getNode()}}return hg(t,d,c.isFullyInitialized()||nn(e),n.filter.filtersNodes())}}function Vf(n,t,e,i,r,s,c,d){const p=t.serverCache;let _;const w=c?n.filter:n.filter.getIndexedFilter();if(nn(e))_=w.updateFullNode(p.getNode(),i,null);else if(w.filtersNodes()&&!p.isFiltered()){const O=p.getNode().updateChild(e,i);_=w.updateFullNode(p.getNode(),O,null)}else{const O=un(e);if(!p.isCompleteForPath(e)&&Ha(e)>1)return t;const U=Gn(e),ie=p.getNode().getImmediateChild(O).updateChild(U,i);_=".priority"===O?w.updatePriority(p.getNode(),ie):w.updateChild(p.getNode(),O,ie,U,vg,null)}const I=BM(t,_,p.isFullyInitialized()||nn(e),w.filtersNodes());return HE(n,I,e,r,new bg(r,I,s),d)}function lb(n,t,e,i,r,s,c){const d=t.eventCache;let p,_;const w=new bg(r,t,s);if(nn(e))_=n.filter.updateFullNode(t.eventCache.getNode(),i,c),p=hg(t,_,!0,n.filter.filtersNodes());else{const I=un(e);if(".priority"===I)_=n.filter.updatePriority(t.eventCache.getNode(),i),p=hg(t,_,d.isFullyInitialized(),d.isFiltered());else{const T=Gn(e),O=d.getNode().getImmediateChild(I);let U;if(nn(T))U=i;else{const W=w.getCompleteChild(I);U=null!=W?".priority"===ld(T)&&W.getChild(Sv(T)).isEmpty()?W:W.updateChild(T,i):an.EMPTY_NODE}p=O.equals(U)?t:hg(t,n.filter.updateChild(d.getNode(),I,U,T,w,c),d.isFullyInitialized(),n.filter.filtersNodes())}}return p}function jE(n,t){return n.eventCache.isCompleteForChild(t)}function cb(n,t,e){return e.foreach((i,r)=>{t=t.updateChild(i,r)}),t}function ub(n,t,e,i,r,s,c,d){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let _,p=t;_=nn(e)?i:new ui(null).setTree(e,i);const w=t.serverCache.getNode();return _.children.inorderTraversal((I,T)=>{if(w.hasChild(I)){const U=cb(0,t.serverCache.getNode().getImmediateChild(I),T);p=Vf(n,p,new Hn(I),U,r,s,c,d)}}),_.children.inorderTraversal((I,T)=>{const O=!t.serverCache.isCompleteForChild(I)&&null===T.value;if(!w.hasChild(I)&&!O){const W=cb(0,t.serverCache.getNode().getImmediateChild(I),T);p=Vf(n,p,new Hn(I),W,r,s,c,d)}}),p}class YM{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new Uv(i.getIndex()),s=function OE(n){return n.loadsAllData()?new Uv(n.getIndex()):n.hasLimit()?new pd(n):new og(n)}(i);this.processor_=function zM(n){return{filter:n}}(s);const c=e.serverCache,d=e.eventCache,p=r.updateFullNode(an.EMPTY_NODE,c.getNode(),null),_=s.updateFullNode(an.EMPTY_NODE,d.getNode(),null),w=new Yo(p,c.isFullyInitialized(),r.filtersNodes()),I=new Yo(_,d.isFullyInitialized(),s.filtersNodes());this.viewCache_=Yv(I,w),this.eventGenerator_=new q1(this.query_)}get query(){return this.query_}}function KM(n,t){const e=vd(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!nn(t)&&!e.getImmediateChild(un(t)).isEmpty())?e.getChild(t):null}function GE(n){return 0===n.eventRegistrations_.length}function wg(n,t,e){const i=[];if(e){(0,V.hu)(null==t,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(s=>{const c=s.createCancelEvent(e,r);c&&i.push(c)})}if(t){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){const c=n.eventRegistrations_[s];if(c.matches(t)){if(t.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}else r.push(c)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function WE(n,t,e,i){t.type===qs.MERGE&&null!==t.source.queryId&&((0,V.hu)(vd(n.viewCache_),"We should always have a full cache before handling merges"),(0,V.hu)(Kv(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,s=function WM(n,t,e,i,r){const s=new X1;let c,d;if(e.type===qs.OVERWRITE){const _=e;_.source.fromUser?c=lb(n,t,_.path,_.snap,i,r,s):((0,V.hu)(_.source.fromServer,"Unknown source."),d=_.source.tagged||t.serverCache.isFiltered()&&!nn(_.path),c=Vf(n,t,_.path,_.snap,i,r,d,s))}else if(e.type===qs.MERGE){const _=e;_.source.fromUser?c=function $E(n,t,e,i,r,s,c){let d=t;return i.foreach((p,_)=>{const w=ci(e,p);jE(t,un(w))&&(d=lb(n,d,w,_,r,s,c))}),i.foreach((p,_)=>{const w=ci(e,p);jE(t,un(w))||(d=lb(n,d,w,_,r,s,c))}),d}(n,t,_.path,_.children,i,r,s):((0,V.hu)(_.source.fromServer,"Unknown source."),d=_.source.tagged||t.serverCache.isFiltered(),c=ub(n,t,_.path,_.children,i,r,d,s))}else if(e.type===qs.ACK_USER_WRITE){const _=e;c=_.revert?function qM(n,t,e,i,r,s){let c;if(null!=Lf(i,e))return t;{const d=new bg(i,t,r),p=t.eventCache.getNode();let _;if(nn(e)||".priority"===un(e)){let w;if(t.serverCache.isFullyInitialized())w=Ff(i,vd(t));else{const I=t.serverCache.getNode();(0,V.hu)(I instanceof an,"serverChildren would be complete if leaf node"),w=sb(i,I)}_=n.filter.updateFullNode(p,w,s)}else{const w=un(e);let I=Zr(i,w,t.serverCache);null==I&&t.serverCache.isCompleteForChild(w)&&(I=p.getImmediateChild(w)),_=null!=I?n.filter.updateChild(p,w,I,Gn(e),d,s):t.eventCache.getNode().hasChild(w)?n.filter.updateChild(p,w,an.EMPTY_NODE,Gn(e),d,s):p,_.isEmpty()&&t.serverCache.isFullyInitialized()&&(c=Ff(i,vd(t)),c.isLeafNode()&&(_=n.filter.updateFullNode(_,c,s)))}return c=t.serverCache.isFullyInitialized()||null!=Lf(i,Tn()),hg(t,_,c,n.filter.filtersNodes())}}(n,t,_.path,i,r,s):function Zo(n,t,e,i,r,s,c){if(null!=Lf(r,e))return t;const d=t.serverCache.isFiltered(),p=t.serverCache;if(null!=i.value){if(nn(e)&&p.isFullyInitialized()||p.isCompleteForPath(e))return Vf(n,t,e,p.getNode().getChild(e),r,s,d,c);if(nn(e)){let _=new ui(null);return p.getNode().forEachChild(Wo,(w,I)=>{_=_.set(new Hn(w),I)}),ub(n,t,e,_,r,s,d,c)}return t}{let _=new ui(null);return i.foreach((w,I)=>{const T=ci(e,w);p.isCompleteForPath(T)&&(_=_.set(w,p.getNode().getChild(T)))}),ub(n,t,e,_,r,s,d,c)}}(n,t,_.path,_.affectedTree,i,r,s)}else{if(e.type!==qs.LISTEN_COMPLETE)throw(0,V.g5)("Unknown operation type: "+e.type);c=function db(n,t,e,i,r){const s=t.serverCache;return HE(n,BM(t,s.getNode(),s.isFullyInitialized()||nn(e),s.isFiltered()),e,i,vg,r)}(n,t,e.path,i,s)}const p=s.getChanges();return function UE(n,t,e){const i=t.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=Kv(n);(e.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&e.push(Vv(Kv(t)))}}(t,c,p),{viewCache:c,changes:p}}(n.processor_,r,t,e,i);return function GM(n,t){(0,V.hu)(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,V.hu)(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,V.hu)(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,Bf(n,s.changes,s.viewCache.eventCache.getNode(),null)}function Bf(n,t,e,i){return function Y1(n,t,e,i){const r=[],s=[];return t.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&s.push(function Bv(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}(c.childName,c.snapshotNode))}),dg(n,r,"child_removed",t,i,e),dg(n,r,"child_added",t,i,e),dg(n,r,"child_moved",s,i,e),dg(n,r,"child_changed",t,i,e),dg(n,r,"value",t,i,e),r}(n.eventGenerator_,t,e,i?[i]:n.eventRegistrations_)}let Cd,Ed;class Uf{constructor(){this.views=new Map}}function Cg(n,t,e,i){const r=t.source.queryId;if(null!==r){const s=n.views.get(r);return(0,V.hu)(null!=s,"SyncTree gave us an op for an invalid query."),WE(s,t,e,i)}{let s=[];for(const c of n.views.values())s=s.concat(WE(c,t,e,i));return s}}function fb(n,t,e,i,r){const c=n.views.get(t._queryIdentifier);if(!c){let d=Ff(e,r?i:null),p=!1;d?p=!0:i instanceof an?(d=sb(e,i),p=!1):(d=an.EMPTY_NODE,p=!1);const _=Yv(new Yo(d,p,!1),new Yo(i,r,!1));return new YM(t,_)}return c}function Eg(n){const t=[];for(const e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function Lr(n,t){let e=null;for(const i of n.views.values())e=e||KM(i,t);return e}function Hf(n,t){return t._queryParams.loadsAllData()?Dg(n):n.views.get(t._queryIdentifier)}function jf(n,t){return null!=Hf(n,t)}function Ks(n){return null!=Dg(n)}function Dg(n){for(const t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let JM=1;class Dd{constructor(t){this.listenProvider_=t,this.syncPointTree_=new ui(null),this.pendingWriteTree_=function HM(){return{visibleWrites:Ys.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function pb(n,t,e,i,r){return function gg(n,t,e,i,r){(0,V.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:t,snap:e,writeId:i,visible:r}),r&&(n.visibleWrites=Vc(n.visibleWrites,t,e)),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i,r),r?Id(n,new Sl({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function Tl(n,t,e=!1){const i=function eb(n,t){for(let e=0;e<n.allWrites.length;e++){const i=n.allWrites[e];if(i.writeId===t)return i}return null}(n.pendingWriteTree_,t);if(function wd(n,t){const e=n.allWrites.findIndex(d=>d.writeId===t);(0,V.hu)(e>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[e];n.allWrites.splice(e,1);let r=i.visible,s=!1,c=n.allWrites.length-1;for(;r&&c>=0;){const d=n.allWrites[c];d.visible&&(c>=e&&tb(d,i.path)?r=!1:Ws(i.path,d.path)&&(s=!0)),c--}return!!r&&(s?(function _g(n){n.visibleWrites=nb(n.allWrites,LE,Tn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=pg(n.visibleWrites,i.path):ur(i.children,p=>{n.visibleWrites=pg(n.visibleWrites,ci(i.path,p))}),!0))}(n.pendingWriteTree_,t)){let s=new ui(null);return null!=i.snap?s=s.set(Tn(),!0):ur(i.children,c=>{s=s.set(new Hn(c),!0)}),Id(n,new qv(i.path,s,e))}return[]}function Ig(n,t,e){return Id(n,new Sl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function $f(n,t,e,i,r=!1){const s=t._path,c=n.syncPointTree_.get(s);let d=[];if(c&&("default"===t._queryIdentifier||jf(c,t))){const p=function YE(n,t,e,i){const r=t._queryIdentifier,s=[];let c=[];const d=Ks(n);if("default"===r)for(const[p,_]of n.views.entries())c=c.concat(wg(_,e,i)),GE(_)&&(n.views.delete(p),_.query._queryParams.loadsAllData()||s.push(_.query));else{const p=n.views.get(r);p&&(c=c.concat(wg(p,e,i)),GE(p)&&(n.views.delete(r),p.query._queryParams.loadsAllData()||s.push(p.query)))}return d&&!Ks(n)&&s.push(new(function hb(){return(0,V.hu)(Cd,"Reference.ts has not been loaded"),Cd}())(t._repo,t._path)),{removed:s,events:c}}(c,t,e,i);(function tF(n){return 0===n.views.size})(c)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const _=p.removed;if(d=p.events,!r){const w=-1!==_.findIndex(T=>T._queryParams.loadsAllData()),I=n.syncPointTree_.findOnPath(s,(T,O)=>Ks(O));if(w&&!I){const T=n.syncPointTree_.subtree(s);if(!T.isEmpty()){const O=function sx(n){return n.fold((t,e,i)=>{if(e&&Ks(e))return[Dg(e)];{let r=[];return e&&(r=Eg(e)),ur(i,(s,c)=>{r=r.concat(c)}),r}})}(T);for(let U=0;U<O.length;++U){const W=O[U],ie=W.query,ze=XE(n,W);n.listenProvider_.startListening(Hc(ie),Ml(n,ie),ze.hashFn,ze.onComplete)}}}!I&&_.length>0&&!i&&(w?n.listenProvider_.stopListening(Hc(t),null):_.forEach(T=>{const O=n.queryToTagMap.get(Qo(T));n.listenProvider_.stopListening(Hc(T),O)}))}!function ox(n,t){for(let e=0;e<t.length;++e){const i=t[e];if(!i._queryParams.loadsAllData()){const r=Qo(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}(n,_)}return d}function Sg(n,t,e,i){const r=JE(n,i);if(null!=r){const s=Uc(r),c=s.path,d=s.queryId,p=Yr(c,t);return mb(n,c,new Sl(Wv(d),p,e))}return[]}function zf(n,t,e,i=!1){const r=t._path;let s=null,c=!1;n.syncPointTree_.foreachOnPath(r,(T,O)=>{const U=Yr(T,r);s=s||Lr(O,U),c=c||Ks(O)});let p,d=n.syncPointTree_.get(r);d?(c=c||Ks(d),s=s||Lr(d,Tn())):(d=new Uf,n.syncPointTree_=n.syncPointTree_.set(r,d)),null!=s?p=!0:(p=!1,s=an.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((O,U)=>{const W=Lr(U,Tn());W&&(s=s.updateImmediateChild(O,W))}));const _=jf(d,t);if(!_&&!t._queryParams.loadsAllData()){const T=Qo(t);(0,V.hu)(!n.queryToTagMap.has(T),"View does not exist, but we have a tag");const O=function Xo(){return JM++}();n.queryToTagMap.set(T,O),n.tagToQueryMap.set(O,T)}let I=function qE(n,t,e,i,r,s){const c=fb(n,t,i,r,s);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,c),function ZM(n,t){n.eventRegistrations_.push(t)}(c,e),function QM(n,t){const e=n.viewCache_.eventCache,i=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(ei,(s,c)=>{i.push(Fc(s,c))}),e.isFullyInitialized()&&i.push(Vv(e.getNode())),Bf(n,i,e.getNode(),t)}(c,e)}(d,t,e,mg(n.pendingWriteTree_,r),s,p);if(!_&&!c&&!i){const T=Hf(d,t);I=I.concat(function Gf(n,t,e){const i=t._path,r=Ml(n,t),s=XE(n,e),c=n.listenProvider_.startListening(Hc(t),r,s.hashFn,s.onComplete),d=n.syncPointTree_.subtree(i);if(r)(0,V.hu)(!Ks(d.value),"If we're adding a query, it shouldn't be shadowed");else{const p=d.fold((_,w,I)=>{if(!nn(_)&&w&&Ks(w))return[Dg(w).query];{let T=[];return w&&(T=T.concat(Eg(w).map(O=>O.query))),ur(I,(O,U)=>{T=T.concat(U)}),T}});for(let _=0;_<p.length;++_){const w=p[_];n.listenProvider_.stopListening(Hc(w),Ml(n,w))}}return c}(n,t,T))}return I}function Ag(n,t,e){const r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(t,(c,d)=>{const _=Lr(d,Yr(c,t));if(_)return _});return yg(r,t,s,e,!0)}function Id(n,t){return ZE(t,n.syncPointTree_,null,mg(n.pendingWriteTree_,Tn()))}function ZE(n,t,e,i){if(nn(n.path))return QE(n,t,e,i);{const r=t.get(Tn());null==e&&null!=r&&(e=Lr(r,Tn()));let s=[];const c=un(n.path),d=n.operationForChild(c),p=t.children.get(c);if(p&&d){const _=e?e.getImmediateChild(c):null,w=ab(i,c);s=s.concat(ZE(d,p,_,w))}return r&&(s=s.concat(Cg(r,n,i,e))),s}}function QE(n,t,e,i){const r=t.get(Tn());null==e&&null!=r&&(e=Lr(r,Tn()));let s=[];return t.children.inorderTraversal((c,d)=>{const p=e?e.getImmediateChild(c):null,_=ab(i,c),w=n.operationForChild(c);w&&(s=s.concat(QE(w,d,p,_)))}),r&&(s=s.concat(Cg(r,n,i,e))),s}function XE(n,t){const e=t.query,i=Ml(n,e);return{hashFn:()=>(function J1(n){return n.viewCache_.serverCache.getNode()}(t)||an.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function nx(n,t,e){const i=JE(n,e);if(i){const r=Uc(i),s=r.path,c=r.queryId,d=Yr(s,t);return mb(n,s,new _d(Wv(c),d))}return[]}(n,e._path,i):function tx(n,t){return Id(n,new _d({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(n,e._path);{const s=function aM(n,t){let e="Unknown Error";"too_big"===n?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?e="Client doesn't have permission to access the desired data.":"unavailable"===n&&(e="The service is unavailable");const i=new Error(n+" at "+t._path.toString()+": "+e);return i.code=n.toUpperCase(),i}(r,e);return $f(n,e,null,s)}}}}function Ml(n,t){const e=Qo(t);return n.queryToTagMap.get(e)}function Qo(n){return n._path.toString()+"$"+n._queryIdentifier}function JE(n,t){return n.tagToQueryMap.get(t)}function Uc(n){const t=n.indexOf("$");return(0,V.hu)(-1!==t&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new Hn(n.substr(0,t))}}function mb(n,t,e){const i=n.syncPointTree_.get(t);return(0,V.hu)(i,"Missing sync point for query tag that we're tracking"),Cg(i,e,mg(n.pendingWriteTree_,t),null)}function Hc(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function XM(){return(0,V.hu)(Ed,"Reference.ts has not been loaded"),Ed}())(n._repo,n._path):n}class vr{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new vr(e)}node(){return this.node_}}class Ga{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=ci(this.path_,t);return new Ga(this.syncTree_,e)}node(){return Ag(this.syncTree_,this.path_)}}const Ts=function(n,t,e){return n&&"object"==typeof n?((0,V.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?gb(n[".sv"],t,e):"object"==typeof n[".sv"]?Sd(n[".sv"],t):void(0,V.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},gb=function(n,t,e){if("timestamp"===n)return e.timestamp;(0,V.hu)(!1,"Unexpected server value: "+n)},Sd=function(n,t,e){n.hasOwnProperty("increment")||(0,V.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,V.hu)(!1,"Unexpected increment value: "+i);const r=t.node();if((0,V.hu)(null!==r&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const c=r.getValue();return"number"!=typeof c?i:c+i},jc=function(n,t,e,i){return kl(t,new Ga(e,n),i)},xl=function(n,t,e){return kl(n,new vr(t),e)};function kl(n,t,e){const i=n.getPriority().val(),r=Ts(i,t.getImmediateChild(".priority"),e);let s;if(n.isLeafNode()){const c=n,d=Ts(c.getValue(),t,e);return d!==c.getValue()||r!==c.getPriority().val()?new ud(d,Ei(r)):n}{const c=n;return s=c,r!==c.getPriority().val()&&(s=s.updatePriority(new ud(r))),c.forEachChild(ei,(d,p)=>{const _=kl(p,t.getImmediateChild(d),e);_!==p&&(s=s.updateImmediateChild(d,_))}),s}}class Rl{constructor(t="",e=null,i={children:{},childCount:0}){this.name=t,this.parent=e,this.node=i}}function Wa(n,t){let e=t instanceof Hn?t:new Hn(t),i=n,r=un(e);for(;null!==r;){const s=(0,V.DV)(i.node.children,r)||{children:{},childCount:0};i=new Rl(r,i,s),e=Gn(e),r=un(e)}return i}function Zs(n){return n.node.value}function Ol(n,t){n.node.value=t,Mg(n)}function $c(n){return n.node.childCount>0}function Wf(n,t){ur(n.node.children,(e,i)=>{t(new Rl(e,n,i))})}function _b(n,t,e,i){e&&!i&&t(n),Wf(n,r=>{_b(r,t,!0,i)}),e&&i&&t(n)}function Ad(n){return new Hn(null===n.parent?n.name:Ad(n.parent)+"/"+n.name)}function Mg(n){null!==n.parent&&function nD(n,t,e){const i=function eD(n){return void 0===Zs(n)&&!$c(n)}(e),r=(0,V.r3)(n.node.children,t);i&&r?(delete n.node.children[t],n.node.childCount--,Mg(n)):!i&&!r&&(n.node.children[t]=e.node,n.node.childCount++,Mg(n))}(n.parent,n.name,n)}const iD=/[\[\].#$\/\u0000-\u001F\u007F]/,rD=/[\[\].#$\u0000-\u001F\u007F]/,yb=10485760,xg=function(n){return"string"==typeof n&&0!==n.length&&!iD.test(n)},vb=function(n){return"string"==typeof n&&0!==n.length&&!rD.test(n)},Td=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!If(n)||n&&"object"==typeof n&&(0,V.r3)(n,".sv")},Qs=function(n,t,e,i){i&&void 0===t||zc((0,V.gK)(n,"value"),t,e)},zc=function(n,t,e){const i=e instanceof Hn?new _E(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+Il(i));if("function"==typeof t)throw new Error(n+"contains a function "+Il(i)+" with contents = "+t.toString());if(If(t))throw new Error(n+"contains "+t.toString()+" "+Il(i));if("string"==typeof t&&t.length>yb/3&&(0,V.ug)(t)>yb)throw new Error(n+"contains a string greater than "+yb+" utf8 bytes "+Il(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let r=!1,s=!1;if(ur(t,(c,d)=>{if(".value"===c)r=!0;else if(".priority"!==c&&".sv"!==c&&(s=!0,!xg(c)))throw new Error(n+" contains an invalid key ("+c+") "+Il(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Tv(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=(0,V.ug)(t),DM(n)})(i,c),zc(n,d,i),function yE(n){const t=n.parts_.pop();n.byteLength_-=(0,V.ug)(t),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&s)throw new Error(n+' contains ".value" child '+Il(i)+" in addition to actual children.")}},qf=function(n,t,e,i){if(i&&void 0===t)return;const r=(0,V.gK)(n,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(r+" must be an object containing the children to replace.");const s=[];ur(t,(c,d)=>{const p=new Hn(c);if(zc(r,d,ci(e,p)),".priority"===ld(p)&&!Td(d))throw new Error(r+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(p)}),function(n,t){let e,i;for(e=0;e<t.length;e++){i=t[e];const s=Oc(i);for(let c=0;c<s.length;c++)if((".priority"!==s[c]||c!==s.length-1)&&!xg(s[c]))throw new Error(n+"contains an invalid key ("+s[c]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(gE);let r=null;for(e=0;e<t.length;e++){if(i=t[e],null!==r&&Ws(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,s)},Md=function(n,t,e){if(!e||void 0!==t){if(If(t))throw new Error((0,V.gK)(n,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Td(t))throw new Error((0,V.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Gc=function(n,t,e,i){if(!(i&&void 0===e||xg(e)))throw new Error((0,V.gK)(n,t)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Yf=function(n,t,e,i){if(!(i&&void 0===e||vb(e)))throw new Error((0,V.gK)(n,t)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Qr=function(n,t){if(".info"===un(t))throw new Error(n+" failed = Can't modify data under /.info/")},bb=function(n,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!xg(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),vb(n)}(e))throw new Error((0,V.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class sD{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function xd(n,t){let e=null;for(let i=0;i<t.length;i++){const r=t[i],s=r.getPath();null!==e&&!Av(s,e.path)&&(n.eventLists_.push(e),e=null),null===e&&(e={events:[],path:s}),e.events.push(r)}e&&n.eventLists_.push(e)}function wb(n,t,e){xd(n,e),Rg(n,i=>Av(i,t))}function ds(n,t,e){xd(n,e),Rg(n,i=>Ws(i,t)||Ws(t,i))}function Rg(n,t){n.recursionDepth_++;let e=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(t(r.path)?(Cb(n.eventLists_[i]),n.eventLists_[i]=null):e=!1)}e&&(n.eventLists_=[]),n.recursionDepth_--}function Cb(n){for(let t=0;t<n.events.length;t++){const e=n.events[t];if(null!==e){n.events[t]=null;const i=e.getEventRunner();nd&&Sr("event: "+e.toString()),kc(i)}}}const oD="repo_interrupt";class lD{constructor(t,e,i,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new sD,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=$v(),this.transactionQueueTree_=new Rl,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Eb(n){const e=n.infoData_.getNode(new Hn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function Kf(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:Eb(n)})}function Db(n,t,e,i,r){n.dataUpdateCount++;const s=new Hn(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let c=[];if(r)if(i){const p=(0,V.UI)(e,_=>Ei(_));c=function ix(n,t,e,i){const r=JE(n,i);if(r){const s=Uc(r),c=s.path,d=s.queryId,p=Yr(c,t),_=ui.fromObject(e);return mb(n,c,new yd(Wv(d),p,_))}return[]}(n.serverSyncTree_,s,p,r)}else{const p=Ei(e);c=Sg(n.serverSyncTree_,s,p,r)}else if(i){const p=(0,V.UI)(e,_=>Ei(_));c=function ex(n,t,e){const i=ui.fromObject(e);return Id(n,new yd({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,i))}(n.serverSyncTree_,s,p)}else{const p=Ei(e);c=Ig(n.serverSyncTree_,s,p)}let d=s;c.length>0&&(d=Wc(n,s)),ds(n.eventQueue_,d,c)}function Ib(n,t){Zf(n,"connected",t),!1===t&&function fD(n){Di(n,"onDisconnectEvents");const t=Kf(n),e=$v();Nf(n.onDisconnect_,Tn(),(r,s)=>{const c=jc(r,s,n.serverSyncTree_,t);za(e,r,c)});let i=[];Nf(e,Tn(),(r,s)=>{i=i.concat(Ig(n.serverSyncTree_,r,s));const c=xb(n,r);Wc(n,c)}),n.onDisconnect_=$v(),ds(n.eventQueue_,Tn(),i)}(n)}function Zf(n,t,e){const i=new Hn("/.info/"+t),r=Ei(e);n.infoData_.updateSnapshot(i,r);const s=Ig(n.infoSyncTree_,i,r);ds(n.eventQueue_,i,s)}function Qf(n){return n.nextWriteId_++}function Og(n,t,e,i,r){Di(n,"set",{path:t.toString(),value:e,priority:i});const s=Kf(n),c=Ei(e,i),d=Ag(n.serverSyncTree_,t),p=xl(c,d,s),_=Qf(n),w=pb(n.serverSyncTree_,t,p,_,!0);xd(n.eventQueue_,w),n.server_.put(t.toString(),c.val(!0),(T,O)=>{const U="ok"===T;U||yr("set at "+t+" failed: "+T);const W=Tl(n.serverSyncTree_,_,!U);ds(n.eventQueue_,t,W),qa(0,r,T,O)});const I=xb(n,t);Wc(n,I),ds(n.eventQueue_,I,[])}function pD(n,t,e){n.server_.onDisconnectCancel(t.toString(),(i,r)=>{"ok"===i&&gd(n.onDisconnect_,t),qa(0,e,i,r)})}function Sb(n,t,e,i){const r=Ei(e);n.server_.onDisconnectPut(t.toString(),r.val(!0),(s,c)=>{"ok"===s&&za(n.onDisconnect_,t,r),qa(0,i,s,c)})}function Ab(n,t,e){let i;i=".info"===un(t._path)?$f(n.infoSyncTree_,t,e):$f(n.serverSyncTree_,t,e),wb(n.eventQueue_,t._path,i)}function Tb(n){n.persistentConnection_&&n.persistentConnection_.interrupt(oD)}function Di(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),Sr(e,...t)}function qa(n,t,e,i){t&&kc(()=>{if("ok"===e)t(null);else{const r=(e||"error").toUpperCase();let s=r;i&&(s+=": "+i);const c=new Error(s);c.code=r,t(c)}})}function Mb(n,t,e){return Ag(n.serverSyncTree_,t,e)||an.EMPTY_NODE}function Xf(n,t=n.transactionQueueTree_){if(t||Jf(n,t),Zs(t)){const e=_D(n,t);(0,V.hu)(e.length>0,"Sending zero length transaction queue"),e.every(r=>0===r.status)&&function hx(n,t,e){const i=e.map(_=>_.currentWriteId),r=Mb(n,t,i);let s=r;const c=r.hash();for(let _=0;_<e.length;_++){const w=e[_];(0,V.hu)(0===w.status,"tryToSendTransactionQueue_: items in queue should all be run."),w.status=1,w.retryCount++;const I=Yr(t,w.path);s=s.updateChild(I,w.currentOutputSnapshotRaw)}const d=s.val(!0),p=t;n.server_.put(p.toString(),d,_=>{Di(n,"transaction put response",{path:p.toString(),status:_});let w=[];if("ok"===_){const I=[];for(let T=0;T<e.length;T++)e[T].status=2,w=w.concat(Tl(n.serverSyncTree_,e[T].currentWriteId)),e[T].onComplete&&I.push(()=>e[T].onComplete(null,!0,e[T].currentOutputSnapshotResolved)),e[T].unwatcher();Jf(n,Wa(n.transactionQueueTree_,t)),Xf(n,n.transactionQueueTree_),ds(n.eventQueue_,t,w);for(let T=0;T<I.length;T++)kc(I[T])}else{if("datastale"===_)for(let I=0;I<e.length;I++)e[I].status=3===e[I].status?4:0;else{yr("transaction at "+p.toString()+" failed: "+_);for(let I=0;I<e.length;I++)e[I].status=4,e[I].abortReason=_}Wc(n,t)}},c)}(n,Ad(t),e)}else $c(t)&&Wf(t,e=>{Xf(n,e)})}function Wc(n,t){const e=qc(n,t),i=Ad(e);return function gD(n,t,e){if(0===t.length)return;const i=[];let r=[];const c=t.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<t.length;d++){const p=t[d],_=Yr(e,p.path);let I,w=!1;if((0,V.hu)(null!==_,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)w=!0,I=p.abortReason,r=r.concat(Tl(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=25)w=!0,I="maxretry",r=r.concat(Tl(n.serverSyncTree_,p.currentWriteId,!0));else{const T=Mb(n,p.path,c);p.currentInputSnapshot=T;const O=t[d].update(T.val());if(void 0!==O){zc("transaction failed: Data returned ",O,p.path);let U=Ei(O);"object"==typeof O&&null!=O&&(0,V.r3)(O,".priority")||(U=U.updatePriority(T.getPriority()));const ie=p.currentWriteId,ze=Kf(n),nt=xl(U,T,ze);p.currentOutputSnapshotRaw=U,p.currentOutputSnapshotResolved=nt,p.currentWriteId=Qf(n),c.splice(c.indexOf(ie),1),r=r.concat(pb(n.serverSyncTree_,p.path,nt,p.currentWriteId,p.applyLocally)),r=r.concat(Tl(n.serverSyncTree_,ie,!0))}else w=!0,I="nodata",r=r.concat(Tl(n.serverSyncTree_,p.currentWriteId,!0))}ds(n.eventQueue_,e,r),r=[],w&&(t[d].status=2,setTimeout(t[d].unwatcher,Math.floor(0)),t[d].onComplete&&i.push("nodata"===I?()=>t[d].onComplete(null,!1,t[d].currentInputSnapshot):()=>t[d].onComplete(new Error(I),!1,null)))}Jf(n,n.transactionQueueTree_);for(let d=0;d<i.length;d++)kc(i[d]);Xf(n,n.transactionQueueTree_)}(n,_D(n,e),i),i}function qc(n,t){let e,i=n.transactionQueueTree_;for(e=un(t);null!==e&&void 0===Zs(i);)i=Wa(i,e),e=un(t=Gn(t));return i}function _D(n,t){const e=[];return yD(n,t,e),e.sort((i,r)=>i.order-r.order),e}function yD(n,t,e){const i=Zs(t);if(i)for(let r=0;r<i.length;r++)e.push(i[r]);Wf(t,r=>{yD(n,r,e)})}function Jf(n,t){const e=Zs(t);if(e){let i=0;for(let r=0;r<e.length;r++)2!==e[r].status&&(e[i]=e[r],i++);e.length=i,Ol(t,e.length>0?e:void 0)}Wf(t,i=>{Jf(n,i)})}function xb(n,t){const e=Ad(qc(n,t)),i=Wa(n.transactionQueueTree_,t);return function tD(n,t,e){let i=e?n:n.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,r=>{Pg(n,r)}),Pg(n,i),_b(i,r=>{Pg(n,r)}),e}function Pg(n,t){const e=Zs(t);if(e){const i=[];let r=[],s=-1;for(let c=0;c<e.length;c++)3===e[c].status||(1===e[c].status?((0,V.hu)(s===c-1,"All SENT items should be at beginning of queue."),s=c,e[c].status=3,e[c].abortReason="set"):((0,V.hu)(0===e[c].status,"Unexpected transaction status in abort"),e[c].unwatcher(),r=r.concat(Tl(n.serverSyncTree_,e[c].currentWriteId,!0)),e[c].onComplete&&i.push(e[c].onComplete.bind(null,new Error("set"),!1,null))));-1===s?Ol(t,void 0):e.length=s+1,ds(n.eventQueue_,Ad(t),r);for(let c=0;c<i.length;c++)kc(i[c])}}const ep=function(n,t){const e=Jo(n),i=e.namespace;return"firebase.com"===e.domain&&vo(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==e.domain&&vo("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&yr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new vv(e.host,e.secure,i,"ws"===e.scheme||"wss"===e.scheme,t,"",i!==e.subdomain),path:new Hn(e.pathString)}},Jo=function(n){let t="",e="",i="",r="",s="",c=!0,d="https",p=443;if("string"==typeof n){let _=n.indexOf("//");_>=0&&(d=n.substring(0,_-1),n=n.substring(_+2));let w=n.indexOf("/");-1===w&&(w=n.length);let I=n.indexOf("?");-1===I&&(I=n.length),t=n.substring(0,Math.min(w,I)),w<I&&(r=function rF(n){let t="";const e=n.split("/");for(let i=0;i<e.length;i++)if(e[i].length>0){let r=e[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}t+="/"+r}return t}(n.substring(w,I)));const T=function kb(n){const t={};"?"===n.charAt(0)&&(n=n.substring(1));for(const e of n.split("&")){if(0===e.length)continue;const i=e.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):yr(`Invalid query segment '${e}' in query '${n}'`)}return t}(n.substring(Math.min(n.length,I)));_=t.indexOf(":"),_>=0?(c="https"===d||"wss"===d,p=parseInt(t.substring(_+1),10)):_=t.length;const O=t.slice(0,_);if("localhost"===O.toLowerCase())e="localhost";else if(O.split(".").length<=2)e=O;else{const U=t.indexOf(".");i=t.substring(0,U).toLowerCase(),e=t.substring(U+1),s=i}"ns"in T&&(s=T.ns)}return{host:t,port:p,domain:e,subdomain:i,secure:c,scheme:d,pathString:r,namespace:s}};class vD{constructor(t,e,i,r){this.eventType=t,this.eventRegistration=e,this.snapshot=i,this.prevName=r}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,V.Wl)(this.snapshot.exportVal())}}class bD{constructor(t,e,i){this.eventRegistration=t,this.error=e,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Xs{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,V.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class Js{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new V.BH;return pD(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){Qr("OnDisconnect.remove",this._path);const t=new V.BH;return Sb(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){Qr("OnDisconnect.set",this._path),Qs("OnDisconnect.set",t,this._path,!1);const e=new V.BH;return Sb(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){Qr("OnDisconnect.setWithPriority",this._path),Qs("OnDisconnect.setWithPriority",t,this._path,!1),Md("OnDisconnect.setWithPriority",e,!1);const i=new V.BH;return function mD(n,t,e,i,r){const s=Ei(e,i);n.server_.onDisconnectPut(t.toString(),s.val(!0),(c,d)=>{"ok"===c&&za(n.onDisconnect_,t,s),qa(0,r,c,d)})}(this._repo,this._path,t,e,i.wrapCallback(()=>{})),i.promise}update(t){Qr("OnDisconnect.update",this._path),qf("OnDisconnect.update",t,this._path,!1);const e=new V.BH;return function iF(n,t,e,i){if((0,V.xb)(e))return Sr("onDisconnect().update() called with empty data.  Don't do anything."),void qa(0,i,"ok",void 0);n.server_.onDisconnectMerge(t.toString(),e,(r,s)=>{"ok"===r&&ur(e,(c,d)=>{const p=Ei(d);za(n.onDisconnect_,ci(t,c),p)}),qa(0,i,r,s)})}(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class Ii{constructor(t,e,i,r){this._repo=t,this._path=e,this._queryParams=i,this._orderByCalled=r}get key(){return nn(this._path)?null:ld(this._path)}get ref(){return new eo(this._repo,this._path)}get _queryIdentifier(){const t=cg(this._queryParams),e=hv(t);return"{}"===e?"default":e}get _queryObject(){return cg(this._queryParams)}isEqual(t){if(!((t=(0,V.m9)(t))instanceof Ii))return!1;const e=this._repo===t._repo,i=Av(this._path,t._path);return e&&i&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function mE(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)""!==n.pieces_[e]&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}(this._path)}}function tp(n,t){if(!0===n._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function Ya(n){let t=null,e=null;if(n.hasStart()&&(t=n.getIndexStartValue()),n.hasEnd()&&(e=n.getIndexEndValue()),n.getIndex()===Wo){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==bo)throw new Error(i);if("string"!=typeof t)throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==Go)throw new Error(i);if("string"!=typeof e)throw new Error(r)}}else if(n.getIndex()===ei){if(null!=t&&!Td(t)||null!=e&&!Td(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,V.hu)(n.getIndex()instanceof hd||n.getIndex()===rg,"unknown index type."),null!=t&&"object"==typeof t||null!=e&&"object"==typeof e)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Ng(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class eo extends Ii{constructor(t,e){super(t,e,new Of,!1)}get parent(){const t=Sv(this._path);return null===t?null:new eo(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class Yc{constructor(t,e,i){this._node=t,this.ref=e,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new Hn(t),i=Io(this.ref,t);return new Yc(this._node.getChild(e),i,ei)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>t(new Yc(r,Io(this.ref,i),ei)))}hasChild(t){const e=new Hn(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function wD(n,t){return(n=(0,V.m9)(n))._checkNotDeleted("ref"),void 0!==t?Io(n._root,t):n._root}function Fg(n,t){(n=(0,V.m9)(n))._checkNotDeleted("refFromURL");const e=ep(t,n._repo.repoInfo_.nodeAdmin);bb("refFromURL",e);const i=e.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&vo("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),wD(n,e.path.toString())}function Io(n,t){return null===un((n=(0,V.m9)(n))._path)?(e=t,e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Yf("child","path",e,!1)):Yf("child","path",t,!1),new eo(n._repo,ci(n._path,t));var e}function Lg(n,t){n=(0,V.m9)(n),Qr("set",n._path),Qs("set",t,n._path,!1);const e=new V.BH;return Og(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}function px(n,t){qf("update",t,n._path,!1);const e=new V.BH;return function hD(n,t,e,i){Di(n,"update",{path:t.toString(),value:e});let r=!0;const s=Kf(n),c={};if(ur(e,(d,p)=>{r=!1,c[d]=jc(ci(t,d),Ei(p),n.serverSyncTree_,s)}),r)Sr("update() called with empty data.  Don't do anything."),qa(0,i,"ok",void 0);else{const d=Qf(n),p=function nF(n,t,e,i){!function bd(n,t,e,i){(0,V.hu)(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:t,children:e,writeId:i,visible:!0}),n.visibleWrites=fg(n.visibleWrites,t,e),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i);const r=ui.fromObject(e);return Id(n,new yd({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,r))}(n.serverSyncTree_,t,c,d);xd(n.eventQueue_,p),n.server_.merge(t.toString(),e,(_,w)=>{const I="ok"===_;I||yr("update at "+t+" failed: "+_);const T=Tl(n.serverSyncTree_,d,!I),O=T.length>0?Wc(n,t):t;ds(n.eventQueue_,O,T),qa(0,i,_,w)}),ur(e,_=>{const w=xb(n,ci(t,_));Wc(n,w)}),ds(n.eventQueue_,t,[])}}(n._repo,n._path,t,e.wrapCallback(()=>{})),e.promise}function DD(n){n=(0,V.m9)(n);const t=new Xs(()=>{}),e=new kd(t);return function dD(n,t,e){const i=function rx(n,t){const e=t._path;let i=null;n.syncPointTree_.foreachOnPath(e,(_,w)=>{const I=Yr(_,e);i=i||Lr(w,I)});let r=n.syncPointTree_.get(e);r?i=i||Lr(r,Tn()):(r=new Uf,n.syncPointTree_=n.syncPointTree_.set(e,r));const s=null!=i,c=s?new Yo(i,!0,!1):null;return function zE(n){return Kv(n.viewCache_)}(fb(r,t,mg(n.pendingWriteTree_,t._path),s?c.getNode():an.EMPTY_NODE,s))}(n.serverSyncTree_,t);return null!=i?Promise.resolve(i):n.server_.get(t).then(r=>{const s=Ei(r).withIndex(t._queryParams.getIndex());let c;if(zf(n.serverSyncTree_,t,e,!0),t._queryParams.loadsAllData())c=Ig(n.serverSyncTree_,t._path,s);else{const d=Ml(n.serverSyncTree_,t);c=Sg(n.serverSyncTree_,t._path,s,d)}return ds(n.eventQueue_,t._path,c),$f(n.serverSyncTree_,t,e,null,!0),s},r=>(Di(n,"get for query "+(0,V.Wl)(t)+" failed: "+r),Promise.reject(new Error(r))))}(n._repo,n,e).then(i=>new Yc(i,new eo(n._repo,n._path),n._queryParams.getIndex()))}class kd{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const i=e._queryParams.getIndex();return new vD("value",this,new Yc(t.snapshotNode,new eo(e._repo,e._path),i))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new bD(this,t,e):null}matches(t){return t instanceof kd&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Rd{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new bD(this,t,e):null}createEvent(t,e){(0,V.hu)(null!=t.childName,"Child events should have a childName.");const i=Io(new eo(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new vD(t.type,this,new Yc(t.snapshotNode,i,r),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof Rd&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Pl(n,t,e,i,r){let s;if("object"==typeof i&&(s=void 0,r=i),"function"==typeof i&&(s=i),r&&r.onlyOnce){const p=e,_=(w,I)=>{Ab(n._repo,n,d),p(w,I)};_.userCallback=e.userCallback,_.context=e.context,e=_}const c=new Xs(e,s||void 0),d="value"===t?new kd(c):new Rd(t,c);return function cx(n,t,e){let i;i=".info"===un(t._path)?zf(n.infoSyncTree_,t,e):zf(n.serverSyncTree_,t,e),wb(n.eventQueue_,t._path,i)}(n._repo,n,d),()=>Ab(n._repo,n,d)}function Bg(n,t,e,i){return Pl(n,"value",t,e,i)}function Rb(n,t,e,i){return Pl(n,"child_added",t,e,i)}function Ob(n,t,e,i){return Pl(n,"child_changed",t,e,i)}function Pb(n,t,e,i){return Pl(n,"child_moved",t,e,i)}function Nb(n,t,e,i){return Pl(n,"child_removed",t,e,i)}function Fb(n,t,e){let i=null;const r=e?new Xs(e):null;"value"===t?i=new kd(r):t&&(i=new Rd(t,r)),Ab(n._repo,n,i)}class to{}class Lb extends to{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Qs("endAt",this._value,t._path,!0);const e=Pf(t._queryParams,this._value,this._key);if(Ng(e),Ya(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ii(t._repo,t._path,e,t._orderByCalled)}}class mx extends to{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Qs("endBefore",this._value,t._path,!1);const e=function $a(n,t,e){let i,r;return n.index_===Wo?("string"==typeof t&&(t=RE(t)),r=Pf(n,t,e)):(i=null==e?bo:RE(e),r=Pf(n,t,i)),r.endBeforeSet_=!0,r}(t._queryParams,this._value,this._key);if(Ng(e),Ya(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ii(t._repo,t._path,e,t._orderByCalled)}}class SD extends to{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Qs("startAt",this._value,t._path,!0);const e=lg(t._queryParams,this._value,this._key);if(Ng(e),Ya(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ii(t._repo,t._path,e,t._orderByCalled)}}class yx extends to{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Qs("startAfter",this._value,t._path,!1);const e=function PM(n,t,e){let i;if(n.index_===Wo)"string"==typeof t&&(t=Lv(t)),i=lg(n,t,e);else{let r;r=null==e?Go:Lv(e),i=lg(n,t,r)}return i.startAfterSet_=!0,i}(t._queryParams,this._value,this._key);if(Ng(e),Ya(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ii(t._repo,t._path,e,t._orderByCalled)}}class bx extends to{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ii(t._repo,t._path,function ag(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}(t._queryParams,this._limit),t._orderByCalled)}}class Cx extends to{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ii(t._repo,t._path,function Do(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}(t._queryParams,this._limit),t._orderByCalled)}}class Dx extends to{constructor(t){super(),this._path=t}_apply(t){tp(t,"orderByChild");const e=new Hn(this._path);if(nn(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new hd(e),r=md(t._queryParams,i);return Ya(r),new Ii(t._repo,t._path,r,!0)}}class Sx extends to{_apply(t){tp(t,"orderByKey");const e=md(t._queryParams,Wo);return Ya(e),new Ii(t._repo,t._path,e,!0)}}class Tx extends to{_apply(t){tp(t,"orderByPriority");const e=md(t._queryParams,ei);return Ya(e),new Ii(t._repo,t._path,e,!0)}}class xx extends to{_apply(t){tp(t,"orderByValue");const e=md(t._queryParams,rg);return Ya(e),new Ii(t._repo,t._path,e,!0)}}class TD extends to{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){if(Qs("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Lb(this._value,this._key)._apply(new SD(this._value,this._key)._apply(t))}}function no(n,...t){let e=(0,V.m9)(n);for(const i of t)e=i._apply(e);return e}(function eF(n){(0,V.hu)(!Cd,"__referenceConstructor has already been defined"),Cd=n})(eo),function KE(n){(0,V.hu)(!Ed,"__referenceConstructor has already been defined"),Ed=n}(eo);const Ug={};function Bb(n,t,e,i,r){let s=i||n.options.databaseURL;void 0===s&&(n.options.projectId||vo("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Sr("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,_,c=ep(s,r),d=c.repoInfo;typeof process<"u"&&process.env&&(_=process.env.FIREBASE_DATABASE_EMULATOR_HOST),_?(p=!0,s=`http://${_}?ns=${d.namespace}`,c=ep(s,r),d=c.repoInfo):p=!c.repoInfo.secure;const w=r&&p?new id(id.OWNER):new mv(n.name,n.options,t);bb("Invalid Firebase Database URL",c),nn(c.path)||vo("Database URL must point to the root of a Firebase Database (not including a child path).");const I=function Hb(n,t,e,i){let r=Ug[t.name];r||(r={},Ug[t.name]=r);let s=r[n.toURLString()];return s&&vo("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new lD(n,false,e,i),r[n.toURLString()]=s,s}(d,n,w,new qr(n.name,e));return new kx(I,n)}class kx{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function cD(n,t,e){if(n.stats_=wo(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new jv(n.repoInfo_,(i,r,s,c)=>{Db(n,i,r,s,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Ib(n,!0),0);else{if(typeof e<"u"&&null!==e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,V.Wl)(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new Pc(n.repoInfo_,t,(i,r,s,c)=>{Db(n,i,r,s,c)},i=>{Ib(n,i)},i=>{!function uD(n,t){ur(t,(e,i)=>{Zf(n,e,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function dM(n,t){const e=n.toString();return El[e]||(El[e]=t()),El[e]}(n.repoInfo_,()=>new VM(n.stats_,n.server_)),n.infoData_=new PE,n.infoSyncTree_=new Dd({startListening:(i,r,s,c)=>{let d=[];const p=n.infoData_.getNode(i._path);return p.isEmpty()||(d=Ig(n.infoSyncTree_,i._path,p),setTimeout(()=>{c("ok")},0)),d},stopListening:()=>{}}),Zf(n,"connected",!1),n.serverSyncTree_=new Dd({startListening:(i,r,s,c)=>(n.server_.listen(i,s,r,(d,p)=>{const _=c(d,p);ds(n.eventQueue_,i._path,_)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new eo(this._repo,Tn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Ub(n,t){const e=Ug[t];(!e||e[n.key]!==n)&&vo(`Database ${t}(${n.repoInfo_}) has already been deleted.`),Tb(n),delete e[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&vo("Cannot call "+t+" on a deleted database.")}}function RD(){cE.IS_TRANSPORT_INITIALIZED&&yr("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Od(){RD(),As.forceDisallow()}function oF(){RD(),ad.forceDisallow(),As.forceAllow()}function aF(n,t){rM(n,t)}const Ox={".sv":"timestamp"};class Pd{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Pc.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)},Pc.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)},function Vt(n){GC(Pr.SDK_VERSION),(0,Pr._registerComponent)(new gi.wA("database",(t,{instanceIdentifier:e})=>Bb(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,Pr.registerVersion)(lv,"0.13.8",n),(0,Pr.registerVersion)(lv,"0.13.8","esm2017")}();const FD=new Es.Yd("@firebase/database-compat"),zb=function(n){FD.warn("FIREBASE WARNING: "+n)};class VD{constructor(t){this._delegate=t}cancel(t){(0,V.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,V.Wj)("OnDisconnect.cancel","onComplete",t,!0);const e=this._delegate.cancel();return t&&e.then(()=>t(null),i=>t(i)),e}remove(t){(0,V.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,V.Wj)("OnDisconnect.remove","onComplete",t,!0);const e=this._delegate.remove();return t&&e.then(()=>t(null),i=>t(i)),e}set(t,e){(0,V.Dv)("OnDisconnect.set",1,2,arguments.length),(0,V.Wj)("OnDisconnect.set","onComplete",e,!0);const i=this._delegate.set(t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,V.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,V.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const r=this._delegate.setWithPriority(t,e);return i&&r.then(()=>i(null),s=>i(s)),r}update(t,e){if((0,V.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,zb("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,V.Wj)("OnDisconnect.update","onComplete",e,!0);const i=this._delegate.update(t);return e&&i.then(()=>e(null),r=>e(r)),i}}class BD{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return(0,V.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Ka{constructor(t,e){this._database=t,this._delegate=e}val(){return(0,V.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,V.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,V.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,V.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return(0,V.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),Yf("DataSnapshot.child","path",t,!1),new Ka(this._database,this._delegate.child(t))}hasChild(t){return(0,V.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Yf("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return(0,V.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return(0,V.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,V.Wj)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new Ka(this._database,e)))}hasChildren(){return(0,V.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,V.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,V.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ms(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Tr{constructor(t,e){this.database=t,this._delegate=e}on(t,e,i,r){var s;(0,V.Dv)("Query.on",2,4,arguments.length),(0,V.Wj)("Query.on","callback",e,!1);const c=Tr.getCancelAndContextArgs_("Query.on",i,r),d=(_,w)=>{e.call(c.context,new Ka(this.database,_),w)};d.userCallback=e,d.context=c.context;const p=null===(s=c.cancel)||void 0===s?void 0:s.bind(c.context);switch(t){case"value":return Bg(this._delegate,d,p),e;case"child_added":return Rb(this._delegate,d,p),e;case"child_removed":return Nb(this._delegate,d,p),e;case"child_changed":return Ob(this._delegate,d,p),e;case"child_moved":return Pb(this._delegate,d,p),e;default:throw new Error((0,V.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,i){if((0,V.Dv)("Query.off",0,3,arguments.length),function(n,t,e){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,V.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),(0,V.Wj)("Query.off","callback",e,!0),(0,V.lb)("Query.off","context",i,!0),e){const r=()=>{};r.userCallback=e,r.context=i,Fb(this._delegate,t,r)}else Fb(this._delegate,t)}get(){return DD(this._delegate).then(t=>new Ka(this.database,t))}once(t,e,i,r){(0,V.Dv)("Query.once",1,4,arguments.length),(0,V.Wj)("Query.once","callback",e,!0);const s=Tr.getCancelAndContextArgs_("Query.once",i,r),c=new V.BH,d=(_,w)=>{const I=new Ka(this.database,_);e&&e.call(s.context,I,w),c.resolve(I)};d.userCallback=e,d.context=s.context;const p=_=>{s.cancel&&s.cancel.call(s.context,_),c.reject(_)};switch(t){case"value":Bg(this._delegate,d,p,{onlyOnce:!0});break;case"child_added":Rb(this._delegate,d,p,{onlyOnce:!0});break;case"child_removed":Nb(this._delegate,d,p,{onlyOnce:!0});break;case"child_changed":Ob(this._delegate,d,p,{onlyOnce:!0});break;case"child_moved":Pb(this._delegate,d,p,{onlyOnce:!0});break;default:throw new Error((0,V.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(t){return(0,V.Dv)("Query.limitToFirst",1,1,arguments.length),new Tr(this.database,no(this._delegate,function wx(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new bx(n)}(t)))}limitToLast(t){return(0,V.Dv)("Query.limitToLast",1,1,arguments.length),new Tr(this.database,no(this._delegate,function Ex(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Cx(n)}(t)))}orderByChild(t){return(0,V.Dv)("Query.orderByChild",1,1,arguments.length),new Tr(this.database,no(this._delegate,function Ix(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Yf("orderByChild","path",n,!1),new Dx(n)}(t)))}orderByKey(){return(0,V.Dv)("Query.orderByKey",0,0,arguments.length),new Tr(this.database,no(this._delegate,function Ax(){return new Sx}()))}orderByPriority(){return(0,V.Dv)("Query.orderByPriority",0,0,arguments.length),new Tr(this.database,no(this._delegate,function Mx(){return new Tx}()))}orderByValue(){return(0,V.Dv)("Query.orderByValue",0,0,arguments.length),new Tr(this.database,no(this._delegate,function AD(){return new xx}()))}startAt(t=null,e){return(0,V.Dv)("Query.startAt",0,2,arguments.length),new Tr(this.database,no(this._delegate,function _x(n=null,t){return Gc("startAt","key",t,!0),new SD(n,t)}(t,e)))}startAfter(t=null,e){return(0,V.Dv)("Query.startAfter",0,2,arguments.length),new Tr(this.database,no(this._delegate,function vx(n,t){return Gc("startAfter","key",t,!0),new yx(n,t)}(t,e)))}endAt(t=null,e){return(0,V.Dv)("Query.endAt",0,2,arguments.length),new Tr(this.database,no(this._delegate,function ID(n,t){return Gc("endAt","key",t,!0),new Lb(n,t)}(t,e)))}endBefore(t=null,e){return(0,V.Dv)("Query.endBefore",0,2,arguments.length),new Tr(this.database,no(this._delegate,function gx(n,t){return Gc("endBefore","key",t,!0),new mx(n,t)}(t,e)))}equalTo(t,e){return(0,V.Dv)("Query.equalTo",1,2,arguments.length),new Tr(this.database,no(this._delegate,function MD(n,t){return Gc("equalTo","key",t,!0),new TD(n,t)}(t,e)))}toString(){return(0,V.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,V.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if((0,V.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof Tr))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,i){const r={cancel:void 0,context:void 0};if(e&&i)r.cancel=e,(0,V.Wj)(t,"cancel",r.cancel,!0),r.context=i,(0,V.lb)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error((0,V.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r}get ref(){return new Ms(this.database,new eo(this._delegate._repo,this._delegate._path))}}class Ms extends Tr{constructor(t,e){super(t,new Ii(e._repo,e._path,new Of,!1)),this.database=t,this._delegate=e}getKey(){return(0,V.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return(0,V.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new Ms(this.database,Io(this._delegate,t))}getParent(){(0,V.Dv)("Reference.parent",0,0,arguments.length);const t=this._delegate.parent;return t?new Ms(this.database,t):null}getRoot(){return(0,V.Dv)("Reference.root",0,0,arguments.length),new Ms(this.database,this._delegate.root)}set(t,e){(0,V.Dv)("Reference.set",1,2,arguments.length),(0,V.Wj)("Reference.set","onComplete",e,!0);const i=Lg(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}update(t,e){if((0,V.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,zb("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Qr("Reference.update",this._delegate._path),(0,V.Wj)("Reference.update","onComplete",e,!0);const i=px(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,V.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,V.Wj)("Reference.setWithPriority","onComplete",i,!0);const r=function Vg(n,t,e){if(Qr("setWithPriority",n._path),Qs("setWithPriority",t,n._path,!1),Md("setWithPriority",e,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new V.BH;return Og(n._repo,n._path,t,e,i.wrapCallback(()=>{})),i.promise}(this._delegate,t,e);return i&&r.then(()=>i(null),s=>i(s)),r}remove(t){(0,V.Dv)("Reference.remove",0,1,arguments.length),(0,V.Wj)("Reference.remove","onComplete",t,!0);const e=function fx(n){return Qr("remove",n._path),Lg(n,null)}(this._delegate);return t&&e.then(()=>t(null),i=>t(i)),e}transaction(t,e,i){(0,V.Dv)("Reference.transaction",1,3,arguments.length),(0,V.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,V.Wj)("Reference.transaction","onComplete",e,!0),function(n,t,e,i){if(void 0!==e&&"boolean"!=typeof e)throw new Error((0,V.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const r=function Fx(n,t,e){var i;if(n=(0,V.m9)(n),Qr("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const r=null===(i=e?.applyLocally)||void 0===i||i,s=new V.BH,d=Bg(n,()=>{});return function dx(n,t,e,i,r,s){Di(n,"transaction on "+t);const c={path:t,update:e,onComplete:i,status:null,order:tM(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=Mb(n,t,void 0);c.currentInputSnapshot=d;const p=c.update(d.val());if(void 0===p)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{zc("transaction failed: Data returned ",p,c.path),c.status=0;const _=Wa(n.transactionQueueTree_,t),w=Zs(_)||[];let I;w.push(c),Ol(_,w),"object"==typeof p&&null!==p&&(0,V.r3)(p,".priority")?(I=(0,V.DV)(p,".priority"),(0,V.hu)(Td(I),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):I=(Ag(n.serverSyncTree_,t)||an.EMPTY_NODE).getPriority().val();const T=Kf(n),O=Ei(p,I),U=xl(O,d,T);c.currentOutputSnapshotRaw=O,c.currentOutputSnapshotResolved=U,c.currentWriteId=Qf(n);const W=pb(n.serverSyncTree_,t,U,c.currentWriteId,c.applyLocally);ds(n.eventQueue_,t,W),Xf(n,n.transactionQueueTree_)}}(n._repo,n._path,t,(p,_,w)=>{let I=null;p?s.reject(p):(I=new Yc(w,new eo(n._repo,n._path),ei),s.resolve(new Pd(_,I)))},d,r),s.promise}(this._delegate,t,{applyLocally:i}).then(s=>new BD(s.committed,new Ka(this.database,s.snapshot)));return e&&r.then(s=>e(null,s.committed,s.snapshot),s=>e(s,!1,null)),r}setPriority(t,e){(0,V.Dv)("Reference.setPriority",1,2,arguments.length),(0,V.Wj)("Reference.setPriority","onComplete",e,!0);const i=function ED(n,t){n=(0,V.m9)(n),Qr("setPriority",n._path),Md("setPriority",t,!1);const e=new V.BH;return Og(n._repo,ci(n._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}push(t,e){(0,V.Dv)("Reference.push",0,2,arguments.length),(0,V.Wj)("Reference.push","onComplete",e,!0);const i=function CD(n,t){n=(0,V.m9)(n),Qr("push",n._path),Qs("push",t,n._path,!0);const e=Eb(n._repo),i=OM(e),r=Io(n,i),s=Io(n,i);let c;return c=null!=t?Lg(s,t).then(()=>s):Promise.resolve(s),r.then=c.then.bind(c),r.catch=c.then.bind(c,void 0),r}(this._delegate,t),r=i.then(c=>new Ms(this.database,c));e&&r.then(()=>e(null),c=>e(c));const s=new Ms(this.database,i);return s.then=r.then.bind(r),s.catch=r.catch.bind(r,void 0),s}onDisconnect(){return Qr("Reference.onDisconnect",this._delegate._path),new VD(new Js(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class np{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Od,forceLongPolling:oF}}useEmulator(t,e,i={}){!function Rx(n,t,e,i={}){(n=(0,V.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&vo("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&vo('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new id(id.OWNER);else if(i.mockUserToken){const c="string"==typeof i.mockUserToken?i.mockUserToken:(0,V.Sg)(i.mockUserToken,n.app.options.projectId);s=new id(c)}!function kD(n,t,e,i){n.repoInfo_=new vv(`${t}:${e}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),i&&(n.authTokenProvider_=i)}(r,t,e,s)}(this._delegate,t,e,i)}ref(t){if((0,V.Dv)("database.ref",0,1,arguments.length),t instanceof Ms){const e=Fg(this._delegate,t.toString());return new Ms(this,e)}{const e=wD(this._delegate,t);return new Ms(this,e)}}refFromURL(t){(0,V.Dv)("database.refFromURL",1,1,arguments.length);const i=Fg(this._delegate,t);return new Ms(this,i)}goOffline(){return(0,V.Dv)("database.goOffline",0,0,arguments.length),function PD(n){(n=(0,V.m9)(n))._checkNotDeleted("goOffline"),Tb(n._repo)}(this._delegate)}goOnline(){return(0,V.Dv)("database.goOnline",0,0,arguments.length),function ND(n){(n=(0,V.m9)(n))._checkNotDeleted("goOnline"),function ux(n){n.persistentConnection_&&n.persistentConnection_.resume(oD)}(n._repo)}(this._delegate)}}np.ServerValue={TIMESTAMP:function Px(){return Ox}(),increment:n=>function Nx(n){return{".sv":{increment:n}}}(n)};var Vx=Object.freeze({__proto__:null,initStandalone:function ip({app:n,url:t,version:e,customAuthImpl:i,namespace:r,nodeAdmin:s=!1}){GC(e);const c=new gi.zt("auth-internal",new gi.H0("database-standalone"));return c.setComponent(new gi.wA("auth-internal",()=>i,"PRIVATE")),{instance:new np(Bb(n,c,void 0,t,s),n),namespace:r}}});const Bx=np.ServerValue;function Gb(n){return null==n}function Wb(n){return"function"==typeof n.set}function HD(n,t){return Wb(t)?t:n.ref(t)}function Nd(n,t){if(function Hg(n){return"string"==typeof n}(n))return t.stringCase();if(Wb(n))return t.firebaseCase();if(function UD(n){return"function"==typeof n.exportVal}(n))return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Za(n,t,e="on",i=Xu.z){return new Ni.y(r=>{let s=null;return s=n[e](t,(c,d)=>{i.schedule(()=>{r.next({snapshot:c,prevKey:d})}),"once"===e&&i.schedule(()=>r.complete())},c=>{i.schedule(()=>r.error(c))}),"on"===e?{unsubscribe(){null!=s&&n.off(t,s)}}:{unsubscribe(){}}}).pipe((0,Ye.U)(r=>{const{snapshot:s,prevKey:c}=r;let d=null;return s.exists()&&(d=s.key),{type:t,payload:s,prevKey:c,key:d}}),(0,wc.B)())}function jD(n,t){const e=n.length;for(let i=0;i<e;i++)if(n[i].payload.key===t)return i;return-1}function $D(n,t){const{payload:e,prevKey:i,key:r}=t,s=jD(n,r),c=function jx(n,t){if(Gb(t))return 0;{const e=jD(n,t);return-1===e?n.length:e+1}}(n,i);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let d=null;t.payload.forEach(p=>{const _={payload:p,type:"value",prevKey:d,key:p.key};return d=p.key,n=[...n,_],!1})}return n;case"child_added":if(s>-1){const d=n[s-1];(d&&d.key||null)!==i&&(n=n.filter(p=>p.payload.key!==e.key)).splice(c,0,t)}else{if(null==i)return[t,...n];(n=n.slice()).splice(c,0,t)}return n;case"child_removed":return n.filter(d=>d.payload.key!==e.key);case"child_changed":return n.map(d=>d.payload.key===r?t:d);case"child_moved":if(s>-1){const d=n.splice(s,1)[0];return(n=n.slice()).splice(c,0,d),n}return n;default:return n}}function qb(n){return(Gb(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function Yb(n,t,e){return function Hx(n,t,e){return Za(n,"value","once",e).pipe(_n(i=>{const r=[Je(i)];return t.forEach(s=>r.push(Za(n,s,"on",e))),(0,Pn.T)(...r).pipe(Ju($D,[]))}),ed())}(n,t=qb(t),e)}function zD(n,t,e){const i=(t=qb(t)).map(r=>Za(n,r,"on",e));return(0,Pn.T)(...i)}function Gx(n,t){return function(i,r){return Nd(i,{stringCase:()=>n.child(i)[t](r),firebaseCase:()=>i[t](r),snapshotCase:()=>i.ref[t](r)})}}function cF(n){return function(e){return e?Nd(e,{stringCase:()=>n.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):n.remove()}}function Wx(n,t){return function(){return Za(n,"value","on",t)}}!function Ux(n){n.INTERNAL.registerComponent(new gi.wA("database-compat",(t,{instanceIdentifier:e})=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("database").getImmediate({identifier:e});return new np(r,i)},"PUBLIC").setServiceProps({Reference:Ms,Query:Tr,Database:np,DataSnapshot:Ka,enableLogging:aF,INTERNAL:Vx,ServerValue:Bx}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.8")}(eM.Z);const jg=new l.OlP("angularfire2.realtimeDatabaseURL"),qx=new l.OlP("angularfire2.database.use-emulator");let Yx=(()=>{class n{constructor(e,i,r,s,c,d,p,_,w,I,T,O,U,W,ie){this.schedulers=d;const ze=p,nt=(0,ai.on)(e,c,i);_&&av(nt,c,w,T,O,U,I,W),this.database=(0,ai.cc)(`${nt.name}.database.${r}`,"AngularFireDatabase",nt.name,()=>{const ft=c.runOutsideAngular(()=>nt.database(r||void 0));return ze&&ft.useEmulator(...ze),ft},[ze])}list(e,i){const r=this.schedulers.ngZone.runOutsideAngular(()=>HD(this.database,e));let s=r;return i&&(s=i(r)),function uF(n,t){const e=t.schedulers.outsideAngular,i=t.schedulers.ngZone.run(()=>n.ref);return{query:n,update:Gx(i,"update"),set:Gx(i,"set"),push:r=>i.push(r),remove:cF(i),snapshotChanges:r=>Yb(n,r,e).pipe(Lt.iC),stateChanges:r=>zD(n,r,e).pipe(Lt.iC),auditTrail:r=>function GD(n,t,e){return function zx(n,t,e){return function $x(n,t){return Za(n,"value","on",t).pipe((0,Ye.U)(e=>{let i;return e.payload.forEach(r=>(i=r.key,!1)),{data:e,lastKeyToLoad:i}}))}(n,e).pipe(function td(...n){const t=(0,ka.jO)(n);return(0,Un.e)((e,i)=>{const r=n.length,s=new Array(r);let c=n.map(()=>!1),d=!1;for(let p=0;p<r;p++)(0,cr.Xf)(n[p]).subscribe((0,Kn.x)(i,_=>{s[p]=_,!d&&!c[p]&&(c[p]=!0,(d=c.every(zo.y))&&(c=null))},Gm.Z));e.subscribe((0,Kn.x)(i,p=>{if(d){const _=[p,...s];i.next(t?t(..._):_)}}))})}(t),(0,Ye.U)(([r,s])=>{const c=r.lastKeyToLoad,d=s.map(p=>p.key);return{actions:s,lastKeyToLoad:c,loadedKeys:d}}),function Df(n){return(0,Un.e)((t,e)=>{let i=!1,r=0;t.subscribe((0,Kn.x)(e,s=>(i||(i=!n(s,r++)))&&e.next(s)))})}(r=>-1===r.loadedKeys.indexOf(r.lastKeyToLoad)),(0,Ye.U)(r=>r.actions))}(n,zD(n,t).pipe(Ju((r,s)=>[...r,s],[])),e)}(n,r,e).pipe(Lt.iC),valueChanges:(r,s)=>Yb(n,r,e).pipe((0,Ye.U)(d=>d.map(p=>s&&s.idField?Object.assign(Object.assign({},p.payload.val()),{[s.idField]:p.key}):p.payload.val())),Lt.iC)}}(s,this)}object(e){return function WD(n,t){return{query:n,snapshotChanges:()=>Wx(n,t.schedulers.outsideAngular)().pipe(Lt.iC),update:e=>n.ref.update(e),set:e=>n.ref.set(e),remove:()=>n.ref.remove(),valueChanges:()=>Wx(n,t.schedulers.outsideAngular)().pipe(Lt.iC,(0,Ye.U)(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>HD(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ai.Dh),l.LFG(ai.xv,8),l.LFG(jg,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(Lt.HU),l.LFG(qx,8),l.LFG(Qu,8),l.LFG(iv,8),l.LFG(rv,8),l.LFG($m,8),l.LFG(wl,8),l.LFG(sv,8),l.LFG(ov,8),l.LFG(Yu,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Fd=(()=>{class n{constructor(e){this.db=e,this.usersRef=this.db.list(Ss_firebaseApiUrls.users,i=>i.orderByChild("email"))}ngOnInit(){}getList(){return this.usersRef.snapshotChanges().pipe((0,Ye.U)(e=>e.map(i=>({key:i.payload.key,...i.payload.val()}))))}getByKey(e){if(e)return this.db.object(`${Ss_firebaseApiUrls.users}/${e}`)}create(e){return this.usersRef.push(e)}update(e,i){return this.usersRef.set(e,i)}deleteByKey(e){return this.usersRef.remove(e)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Yx))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const{isArray:Zx}=Array,{getPrototypeOf:Qx,prototype:Xx,keys:Jx}=Object;function qD(n){if(1===n.length){const t=n[0];if(Zx(t))return{args:t,keys:null};if(function YD(n){return n&&"object"==typeof n&&Qx(n)===Xx}(t)){const e=Jx(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}const{isArray:ek}=Array;function Zc(n){return(0,Ye.U)(t=>function tk(n,t){return ek(t)?n(...t):n(t)}(n,t))}function KD(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}var ZD=N(9672);function $g(...n){const t=(0,ka.yG)(n),e=(0,ka.jO)(n),{args:i,keys:r}=qD(n);if(0===i.length)return(0,On.D)([],t);const s=new Ni.y(function QD(n,t,e=zo.y){return i=>{XD(t,()=>{const{length:r}=n,s=new Array(r);let c=r,d=r;for(let p=0;p<r;p++)XD(t,()=>{const _=(0,On.D)(n[p],t);let w=!1;_.subscribe((0,Kn.x)(i,I=>{s[p]=I,w||(w=!0,d--),d||i.next(e(s.slice()))},()=>{--c||i.complete()}))},i)},i)}}(i,t,r?c=>KD(r,c):zo.y));return e?s.pipe(Zc(e)):s}function XD(n,t,e){n?(0,ZD.f)(e,n,t):t()}var Ld=N(8189);function Nl(...n){return function nk(){return(0,Ld.J)(1)}()((0,On.D)(n,(0,ka.yG)(n)))}function Fl(n){return new Ni.y(t=>{(0,cr.Xf)(n()).subscribe(t)})}var JD=N(9635);function Ll(n,t){const e=(0,Fr.m)(n)?n:()=>n,i=r=>r.error(e());return new Ni.y(t?r=>t.schedule(i,0,r):i)}var Qi=N(727);function Kb(){return(0,Un.e)((n,t)=>{let e=null;n._refCount++;const i=(0,Kn.x)(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const r=n._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}class Zb extends Ni.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,(0,Un.A)(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Qi.w0;const e=this.getSubject();t.add(this.source.subscribe((0,Kn.x)(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Qi.w0.EMPTY)}return t}refCount(){return Kb()(this)}}function Gi(...n){const t=(0,ka.yG)(n);return(0,Un.e)((e,i)=>{(t?Nl(n,e,t):Nl(n,e)).subscribe(i)})}var br=N(5577);function Qa(n,t){return(0,Fr.m)(t)?(0,br.z)(n,t,1):(0,br.z)(n,1)}var di=N(8505);function ea(n){return(0,Un.e)((t,e)=>{let s,i=null,r=!1;i=t.subscribe((0,Kn.x)(e,void 0,void 0,c=>{s=(0,cr.Xf)(n(c,ea(n)(t))),i?(i.unsubscribe(),i=null,s.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(e))})}function Qb(n){return n<=0?()=>Ds.E:(0,Un.e)((t,e)=>{let i=[];t.subscribe((0,Kn.x)(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function eI(n,t){const e=arguments.length>=2;return i=>i.pipe(n?tn((r,s)=>n(r,s,i)):zo.y,Qb(1),e?Oa(t):Cc(()=>new Bu))}function tI(n,t=!1){return(0,Un.e)((e,i)=>{let r=0;e.subscribe((0,Kn.x)(i,s=>{const c=n(s,r++);(c||t)&&i.next(s),!c&&i.complete()}))})}function nI(n){return(0,Ye.U)(()=>n)}function zg(n){return(0,Un.e)((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}const pn="primary",Vd=Symbol("RouteTitle");class iI{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Bd(n){return new iI(n)}function ik(n,t,e){const i=e.path.split("/");if(i.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const c=i[s],d=n[s];if(c.startsWith(":"))r[c.substring(1)]=d;else if(c!==d.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function ta(n,t){const e=n?Object.keys(n):void 0,i=t?Object.keys(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!sI(n[r],t[r]))return!1;return!0}function sI(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),i=[...t].sort();return e.every((r,s)=>i[s]===r)}return n===t}function oI(n){return Array.prototype.concat.apply([],n)}function Gg(n){return n.length>0?n[n.length-1]:null}function wr(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function na(n){return(0,l.CqO)(n)?n:(0,l.QGY)(n)?(0,On.D)(Promise.resolve(n)):Je(n)}const Jb={exact:function t0(n,t,e){if(!Xa(n.segments,t.segments)||!Hd(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!n.children[i]||!t0(n.children[i],t.children[i],e))return!1;return!0},subset:ok},lI={exact:function Ud(n,t){return ta(n,t)},subset:function sk(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>sI(n[e],t[e]))},ignored:()=>!0};function e0(n,t,e){return Jb[e.paths](n.root,t.root,e.matrixParams)&&lI[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function ok(n,t,e){return n0(n,t,t.segments,e)}function n0(n,t,e,i){if(n.segments.length>e.length){const r=n.segments.slice(0,e.length);return!(!Xa(r,e)||t.hasChildren()||!Hd(r,e,i))}if(n.segments.length===e.length){if(!Xa(n.segments,e)||!Hd(n.segments,e,i))return!1;for(const r in t.children)if(!n.children[r]||!ok(n.children[r],t.children[r],i))return!1;return!0}{const r=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!!(Xa(n.segments,r)&&Hd(n.segments,r,i)&&n.children[pn])&&n0(n.children[pn],t,s,i)}}function Hd(n,t,e){return t.every((i,r)=>lI[e](n[r].parameters,i.parameters))}class Qc{constructor(t,e,i){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Bd(this.queryParams)),this._queryParamMap}toString(){return dI.serialize(this)}}class hn{constructor(t,e){this.segments=t,this.children=e,this.parent=null,wr(e,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return qg(this)}}class rp{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Bd(this.parameters)),this._parameterMap}toString(){return gI(this)}}function Xa(n,t){return n.length===t.length&&n.every((e,i)=>e.path===t[i].path)}let r0=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return new Wg},providedIn:"root"}),n})();class Wg{parse(t){const e=new dk(t);return new Qc(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${sp(t.root,!0)}`,i=function hF(n){const t=Object.keys(n).map(e=>{const i=n[e];return Array.isArray(i)?i.map(r=>`${Yg(e)}=${Yg(r)}`).join("&"):`${Yg(e)}=${Yg(i)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${i}${"string"==typeof t.fragment?`#${function fI(n){return encodeURI(n)}(t.fragment)}`:""}`}}const dI=new Wg;function qg(n){return n.segments.map(t=>gI(t)).join("/")}function sp(n,t){if(!n.hasChildren())return qg(n);if(t){const e=n.children[pn]?sp(n.children[pn],!1):"",i=[];return wr(n.children,(r,s)=>{s!==pn&&i.push(`${s}:${sp(r,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function uI(n,t){let e=[];return wr(n.children,(i,r)=>{r===pn&&(e=e.concat(t(i,r)))}),wr(n.children,(i,r)=>{r!==pn&&(e=e.concat(t(i,r)))}),e}(n,(i,r)=>r===pn?[sp(n.children[pn],!1)]:[`${r}:${sp(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[pn]?`${qg(n)}/${e[0]}`:`${qg(n)}/(${e.join("//")})`}}function hI(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Yg(n){return hI(n).replace(/%3B/gi,";")}function pI(n){return hI(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function op(n){return decodeURIComponent(n)}function mI(n){return op(n.replace(/\+/g,"%20"))}function gI(n){return`${pI(n.path)}${function dF(n){return Object.keys(n).map(t=>`;${pI(t)}=${pI(n[t])}`).join("")}(n.parameters)}`}const ak=/^[^\/()?;=#]+/;function Kg(n){const t=n.match(ak);return t?t[0]:""}const _I=/^[^=?&#]+/,ck=/^[^&#]+/;class dk{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new hn([],{}):new hn([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[pn]=new hn(t,e)),i}parseSegment(){const t=Kg(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new l.vHH(4009,!1);return this.capture(t),new rp(op(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Kg(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const r=Kg(this.remaining);r&&(i=r,this.capture(i))}t[op(e)]=op(i)}parseQueryParam(t){const e=function lk(n){const t=n.match(_I);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const c=function uk(n){const t=n.match(ck);return t?t[0]:""}(this.remaining);c&&(i=c,this.capture(i))}const r=mI(e),s=mI(i);if(t.hasOwnProperty(r)){let c=t[r];Array.isArray(c)||(c=[c],t[r]=c),c.push(s)}else t[r]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Kg(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new l.vHH(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=pn);const c=this.parseChildren();e[s]=1===Object.keys(c).length?c[pn]:new hn([],c),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new l.vHH(4011,!1)}}function s0(n){return n.segments.length>0?new hn([],{[pn]:n}):n}function Zg(n){const t={};for(const i of Object.keys(n.children)){const s=Zg(n.children[i]);(s.segments.length>0||s.hasChildren())&&(t[i]=s)}return function hk(n){if(1===n.numberOfChildren&&n.children[pn]){const t=n.children[pn];return new hn(n.segments.concat(t.segments),t.children)}return n}(new hn(n.segments,t))}function Xc(n){return n instanceof Qc}function bI(n,t,e,i,r){if(0===e.length)return Jc(t.root,t.root,t.root,i,r);const s=function a0(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new fk(!0,0,n);let t=0,e=!1;const i=n.reduce((r,s,c)=>{if("object"==typeof s&&null!=s){if(s.outlets){const d={};return wr(s.outlets,(p,_)=>{d[_]="string"==typeof p?p.split("/"):p}),[...r,{outlets:d}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===c?(s.split("/").forEach((d,p)=>{0==p&&"."===d||(0==p&&""===d?e=!0:".."===d?t++:""!=d&&r.push(d))}),r):[...r,s]},[]);return new fk(e,t,i)}(e);return s.toRoot()?Jc(t.root,t.root,new hn([],{}),i,r):function c(p){const _=function mk(n,t,e,i){if(n.isAbsolute)return new eu(t.root,!0,0);if(-1===i)return new eu(e,e===t.root,0);return function CI(n,t,e){let i=n,r=t,s=e;for(;s>r;){if(s-=r,i=i.parent,!i)throw new l.vHH(4005,!1);r=i.segments.length}return new eu(i,!1,r-s)}(e,i+(jd(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,t,n.snapshot?._urlSegment,p),w=_.processChildren?tu(_.segmentGroup,_.index,s.commands):l0(_.segmentGroup,_.index,s.commands);return Jc(t.root,_.segmentGroup,w,i,r)}(n.snapshot?._lastPathIndex)}function jd(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function $d(n){return"object"==typeof n&&null!=n&&n.outlets}function Jc(n,t,e,i,r){let c,s={};i&&wr(i,(p,_)=>{s[_]=Array.isArray(p)?p.map(w=>`${w}`):`${p}`}),c=n===t?e:wI(n,t,e);const d=s0(Zg(c));return new Qc(d,s,r)}function wI(n,t,e){const i={};return wr(n.children,(r,s)=>{i[s]=r===t?e:wI(r,t,e)}),new hn(n.segments,i)}class fk{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&jd(i[0]))throw new l.vHH(4003,!1);const r=i.find($d);if(r&&r!==Gg(i))throw new l.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class eu{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}}function l0(n,t,e){if(n||(n=new hn([],{})),0===n.segments.length&&n.hasChildren())return tu(n,t,e);const i=function ia(n,t,e){let i=0,r=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return s;const c=n.segments[r],d=e[i];if($d(d))break;const p=`${d}`,_=i<e.length-1?e[i+1]:null;if(r>0&&void 0===p)break;if(p&&_&&"object"==typeof _&&void 0===_.outlets){if(!EI(p,_,c))return s;i+=2}else{if(!EI(p,{},c))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new hn(n.segments.slice(0,i.pathIndex),{});return s.children[pn]=new hn(n.segments.slice(i.pathIndex),n.children),tu(s,0,r)}return i.match&&0===r.length?new hn(n.segments,{}):i.match&&!n.hasChildren()?c0(n,t,e):i.match?tu(n,0,r):c0(n,t,e)}function tu(n,t,e){if(0===e.length)return new hn(n.segments,{});{const i=function ap(n){return $d(n[0])?n[0].outlets:{[pn]:n}}(e),r={};return wr(i,(s,c)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[c]=l0(n.children[c],t,s))}),wr(n.children,(s,c)=>{void 0===i[c]&&(r[c]=s)}),new hn(n.segments,r)}}function c0(n,t,e){const i=n.segments.slice(0,t);let r=0;for(;r<e.length;){const s=e[r];if($d(s)){const p=Xg(s.outlets);return new hn(i,p)}if(0===r&&jd(e[0])){i.push(new rp(n.segments[t].path,zd(e[0]))),r++;continue}const c=$d(s)?s.outlets[pn]:`${s}`,d=r<e.length-1?e[r+1]:null;c&&d&&jd(d)?(i.push(new rp(c,zd(d))),r+=2):(i.push(new rp(c,{})),r++)}return new hn(i,{})}function Xg(n){const t={};return wr(n,(e,i)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[i]=c0(new hn([],{}),0,e))}),t}function zd(n){const t={};return wr(n,(e,i)=>t[i]=`${e}`),t}function EI(n,t,e){return n==e.path&&ta(t,e.parameters)}class Ja{constructor(t,e){this.id=t,this.url=e}}class u0 extends Ja{constructor(t,e,i="imperative",r=null){super(t,e),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ra extends Ja{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class nu extends Ja{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class DI extends Ja{constructor(t,e,i,r){super(t,e),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class gk extends Ja{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class II extends Ja{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class SI extends Ja{constructor(t,e,i,r,s){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class d0 extends Ja{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class AI extends Ja{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _k{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class yk{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class fF{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class h0{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class f0{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class p0{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Jg{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class TI{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=g0(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){const e=g0(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=_0(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return _0(t,this._root).map(e=>e.value)}}function g0(n,t){if(n===t.value)return t;for(const e of t.children){const i=g0(n,e);if(i)return i}return null}function _0(n,t){if(n===t.value)return[t];for(const e of t.children){const i=_0(n,e);if(i.length)return i.unshift(t),i}return[]}class el{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function iu(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class e_ extends TI{constructor(t,e){super(t),this.snapshot=e,w0(this,t)}toString(){return this.snapshot.toString()}}function y0(n,t){const e=function MI(n,t){const c=new lp([],{},{},"",{},pn,t,null,n.root,-1,{});return new b0("",new el(c,[]))}(n,t),i=new Pi([new rp("",{})]),r=new Pi({}),s=new Pi({}),c=new Pi({}),d=new Pi(""),p=new Vl(i,r,c,d,s,pn,t,e.root);return p.snapshot=e.root,new e_(new el(p,[]),e)}class Vl{constructor(t,e,i,r,s,c,d,p){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=c,this.component=d,this.title=this.data?.pipe((0,Ye.U)(_=>_[Vd]))??Je(void 0),this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ye.U)(t=>Bd(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ye.U)(t=>Bd(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function v0(n,t="emptyOnly"){const e=n.pathFromRoot;let i=0;if("always"!==t)for(i=e.length-1;i>=1;){const r=e[i],s=e[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function vk(n){return n.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(i))}class lp{constructor(t,e,i,r,s,c,d,p,_,w,I,T){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=c,this.component=d,this.title=this.data?.[Vd],this.routeConfig=p,this._urlSegment=_,this._lastPathIndex=w,this._correctedLastPathIndex=T??w,this._resolve=I}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Bd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Bd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class b0 extends TI{constructor(t,e){super(e),this.url=t,w0(this,e)}toString(){return C0(this._root)}}function w0(n,t){t.value._routerState=n,t.children.forEach(e=>w0(n,e))}function C0(n){const t=n.children.length>0?` { ${n.children.map(C0).join(", ")} } `:"";return`${n.value}${t}`}function t_(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,ta(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),ta(t.params,e.params)||n.params.next(e.params),function rI(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!ta(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),ta(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Mr(n,t){const e=ta(n.params,t.params)&&function cI(n,t){return Xa(n,t)&&n.every((e,i)=>ta(e.parameters,t[i].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||Mr(n.parent,t.parent))}function cp(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=t.value;const r=function bk(n,t,e){return t.children.map(i=>{for(const r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return cp(n,i,r);return cp(n,i)})}(n,t,e);return new el(i,r)}{if(n.shouldAttach(t.value)){const s=n.retrieve(t.value);if(null!==s){const c=s.route;return c.value._futureSnapshot=t.value,c.children=t.children.map(d=>cp(n,d)),c}}const i=function pF(n){return new Vl(new Pi(n.url),new Pi(n.params),new Pi(n.queryParams),new Pi(n.fragment),new Pi(n.data),n.outlet,n.component,n)}(t.value),r=t.children.map(s=>cp(n,s));return new el(i,r)}}const xI="ngNavigationCancelingError";function E0(n,t){const{redirectTo:e,navigationBehaviorOptions:i}=Xc(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=D0(!1,0,t);return r.url=e,r.navigationBehaviorOptions=i,r}function D0(n,t,e){const i=new Error("NavigationCancelingError: "+(n||""));return i[xI]=!0,i.cancellationCode=t,e&&(i.url=e),i}function Wd(n){return kI(n)&&Xc(n.url)}function kI(n){return n&&n[xI]}class I0{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new up,this.attachRef=null}}let up=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(e,i){const r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){const i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new I0,this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const dp=!1;let S0=(()=>{class n{constructor(e,i,r,s,c){this.parentContexts=e,this.location=i,this.changeDetector=s,this.environmentInjector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new l.vpe,this.deactivateEvents=new l.vpe,this.attachEvents=new l.vpe,this.detachEvents=new l.vpe,this.name=r||pn,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new l.vHH(4012,dp);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new l.vHH(4012,dp);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new l.vHH(4012,dp);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new l.vHH(4013,dp);this._activatedRoute=e;const r=this.location,c=e._futureSnapshot.component,d=this.parentContexts.getOrCreateContext(this.name).children,p=new wk(e,d,r.injector);if(i&&function Ck(n){return!!n.resolveComponentFactory}(i)){const _=i.resolveComponentFactory(c);this.activated=r.createComponent(_,r.length,p)}else this.activated=r.createComponent(c,{index:r.length,injector:p,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(up),l.Y36(l.s_b),l.$8M("name"),l.Y36(l.sBO),l.Y36(l.lqb))},n.\u0275dir=l.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class wk{constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===Vl?this.route:t===up?this.childContexts:this.parent.get(t,e)}}let qd=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[l.jDz],decls:1,vars:0,template:function(e,i){1&e&&l._UZ(0,"router-outlet")},dependencies:[S0],encapsulation:2}),n})();function A0(n,t){return n.providers&&!n._injector&&(n._injector=(0,l.MMx)(n.providers,t,`Route: ${n.path}`)),n._injector??t}function M0(n){const t=n.children&&n.children.map(M0),e=t?{...n,children:t}:{...n};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==pn&&(e.component=qd),e}function xs(n){return n.outlet||pn}function i_(n,t){const e=n.filter(i=>xs(i)===t);return e.push(...n.filter(i=>xs(i)!==t)),e}function r_(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class mF{constructor(t,e,i,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r}activate(t){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),t_(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){const r=iu(e);t.children.forEach(s=>{const c=s.value.outlet;this.deactivateRoutes(s,r[c],i),delete r[c]}),wr(r,(s,c)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(r===s)if(r.component){const c=i.getContext(r.outlet);c&&this.deactivateChildRoutes(t,e,c.children)}else this.deactivateChildRoutes(t,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=iu(t);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],r);if(i&&i.outlet){const c=i.outlet.detach(),d=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:c,route:t,contexts:d})}}deactivateRouteAndOutlet(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=iu(t);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(t,e,i){const r=iu(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new p0(s.value.snapshot))}),t.children.length&&this.forwardEvent(new h0(t.value.snapshot))}activateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(t_(r),r===s)if(r.component){const c=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,c.children)}else this.activateChildRoutes(t,e,i);else if(r.component){const c=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const d=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),c.children.onOutletReAttached(d.contexts),c.attachRef=d.componentRef,c.route=d.route.value,c.outlet&&c.outlet.attach(d.componentRef,d.route.value),t_(d.route.value),this.activateChildRoutes(t,null,c.children)}else{const d=r_(r.snapshot),p=d?.get(l._Vd)??null;c.attachRef=null,c.route=r,c.resolver=p,c.injector=d,c.outlet&&c.outlet.activateWith(r,c.injector),this.activateChildRoutes(t,null,c.children)}}else this.activateChildRoutes(t,null,i)}}class PI{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class s_{constructor(t,e){this.component=t,this.route=e}}function Sk(n,t,e){const i=n._root;return hp(i,t?t._root:null,e,[i.value])}function ru(n,t){const e=Symbol(),i=t.get(n,e);return i===e?"function"!=typeof n||(0,l.Z0I)(n)?t.get(n):n:i}function hp(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=iu(t);return n.children.forEach(c=>{(function FI(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,c=t?t.value:null,d=e?e.getContext(n.value.outlet):null;if(c&&s.routeConfig===c.routeConfig){const p=function LI(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!Xa(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Xa(n.url,t.url)||!ta(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Mr(n,t)||!ta(n.queryParams,t.queryParams);default:return!Mr(n,t)}}(c,s,s.routeConfig.runGuardsAndResolvers);p?r.canActivateChecks.push(new PI(i)):(s.data=c.data,s._resolvedData=c._resolvedData),hp(n,t,s.component?d?d.children:null:e,i,r),p&&d&&d.outlet&&d.outlet.isActivated&&r.canDeactivateChecks.push(new s_(d.outlet.component,c))}else c&&fp(t,d,r),r.canActivateChecks.push(new PI(i)),hp(n,null,s.component?d?d.children:null:e,i,r)})(c,s[c.value.outlet],e,i.concat([c.value]),r),delete s[c.value.outlet]}),wr(s,(c,d)=>fp(c,e.getContext(d),r)),r}function fp(n,t,e){const i=iu(n),r=n.value;wr(i,(s,c)=>{fp(s,r.component?t?t.children.getContext(c):null:t,e)}),e.canDeactivateChecks.push(new s_(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}function pp(n){return"function"==typeof n}function $I(n){return n instanceof Bu||"EmptyError"===n?.name}const mp=Symbol("INITIAL_VALUE");function gp(){return _n(n=>$g(n.map(t=>t.pipe(bn(1),Gi(mp)))).pipe((0,Ye.U)(t=>{for(const e of t)if(!0!==e){if(e===mp)return mp;if(!1===e||e instanceof Qc)return e}return!0}),tn(t=>t!==mp),bn(1)))}function x0(n){return(0,JD.z)((0,di.b)(t=>{if(Xc(t))throw E0(0,t)}),(0,Ye.U)(t=>!0===t))}const l_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function k0(n,t,e,i,r){const s=zI(n,t,e);return s.matched?function a_(n,t,e,i){const r=t.canMatch;return r&&0!==r.length?Je(r.map(c=>{const d=ru(c,n);return na(function jI(n){return n&&pp(n.canMatch)}(d)?d.canMatch(t,e):n.runInContext(()=>d(t,e)))})).pipe(gp(),x0()):Je(!0)}(i=A0(t,i),t,e).pipe((0,Ye.U)(c=>!0===c?s:{...l_})):Je(s)}function zI(n,t,e){if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?{...l_}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const r=(t.matcher||ik)(e,n,t);if(!r)return{...l_};const s={};wr(r.posParams,(d,p)=>{s[p]=d.path});const c=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:c,positionalParamSegments:r.posParams??{}}}function Kd(n,t,e,i,r="corrected"){if(e.length>0&&function WI(n,t,e){return e.some(i=>c_(n,t,i)&&xs(i)!==pn)}(n,e,i)){const c=new hn(t,function Mk(n,t,e,i){const r={};r[pn]=i,i._sourceSegment=n,i._segmentIndexShift=t.length;for(const s of e)if(""===s.path&&xs(s)!==pn){const c=new hn([],{});c._sourceSegment=n,c._segmentIndexShift=t.length,r[xs(s)]=c}return r}(n,t,i,new hn(e,n.children)));return c._sourceSegment=n,c._segmentIndexShift=t.length,{segmentGroup:c,slicedSegments:[]}}if(0===e.length&&function IF(n,t,e){return e.some(i=>c_(n,t,i))}(n,e,i)){const c=new hn(n.segments,function GI(n,t,e,i,r,s){const c={};for(const d of i)if(c_(n,e,d)&&!r[xs(d)]){const p=new hn([],{});p._sourceSegment=n,p._segmentIndexShift="legacy"===s?n.segments.length:t.length,c[xs(d)]=p}return{...r,...c}}(n,t,e,i,n.children,r));return c._sourceSegment=n,c._segmentIndexShift=t.length,{segmentGroup:c,slicedSegments:e}}const s=new hn(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:e}}function c_(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function qI(n,t,e,i){return!!(xs(n)===i||i!==pn&&c_(t,e,n))&&("**"===n.path||zI(t,n,e).matched)}function YI(n,t,e){return 0===t.length&&!n.children[e]}const su=!1;class u_{constructor(t){this.segmentGroup=t||null}}class xk{constructor(t){this.urlTree=t}}function d_(n){return Ll(new u_(n))}function kk(n){return Ll(new xk(n))}class SF{constructor(t,e,i,r,s){this.injector=t,this.configLoader=e,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const t=Kd(this.urlTree.root,[],[],this.config).segmentGroup,e=new hn(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,e,pn).pipe((0,Ye.U)(s=>this.createUrlTree(Zg(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ea(s=>{if(s instanceof xk)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof u_?this.noMatchError(s):s}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,pn).pipe((0,Ye.U)(r=>this.createUrlTree(Zg(r),t.queryParams,t.fragment))).pipe(ea(r=>{throw r instanceof u_?this.noMatchError(r):r}))}noMatchError(t){return new l.vHH(4002,su)}createUrlTree(t,e,i){const r=s0(t);return new Qc(r,e,i)}expandSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(t,e,i).pipe((0,Ye.U)(s=>new hn([],s))):this.expandSegment(t,i,e,i.segments,r,!0)}expandChildren(t,e,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return(0,On.D)(r).pipe(Qa(s=>{const c=i.children[s],d=i_(e,s);return this.expandSegmentGroup(t,d,c,s).pipe((0,Ye.U)(p=>({segment:p,outlet:s})))}),Ju((s,c)=>(s[c.outlet]=c.segment,s),{}),eI())}expandSegment(t,e,i,r,s,c){return(0,On.D)(i).pipe(Qa(d=>this.expandSegmentAgainstRoute(t,e,i,d,r,s,c).pipe(ea(_=>{if(_ instanceof u_)return Je(null);throw _}))),Nr(d=>!!d),ea((d,p)=>{if($I(d))return YI(e,r,s)?Je(new hn([],{})):d_(e);throw d}))}expandSegmentAgainstRoute(t,e,i,r,s,c,d){return qI(r,e,s,c)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,s,c):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c):d_(e):d_(e)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,r,c):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?kk(s):this.lineralizeSegments(i,s).pipe((0,br.z)(c=>{const d=new hn(c,{});return this.expandSegment(t,d,e,c,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c){const{matched:d,consumedSegments:p,remainingSegments:_,positionalParamSegments:w}=zI(e,r,s);if(!d)return d_(e);const I=this.applyRedirectCommands(p,r.redirectTo,w);return r.redirectTo.startsWith("/")?kk(I):this.lineralizeSegments(r,I).pipe((0,br.z)(T=>this.expandSegment(t,e,i,T.concat(_),c,!1)))}matchSegmentAgainstRoute(t,e,i,r,s){return"**"===i.path?(t=A0(i,t),i.loadChildren?(i._loadedRoutes?Je({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(t,i)).pipe((0,Ye.U)(d=>(i._loadedRoutes=d.routes,i._loadedInjector=d.injector,new hn(r,{})))):Je(new hn(r,{}))):k0(e,i,r,t).pipe(_n(({matched:c,consumedSegments:d,remainingSegments:p})=>c?this.getChildConfig(t=i._injector??t,i,r).pipe((0,br.z)(w=>{const I=w.injector??t,T=w.routes,{segmentGroup:O,slicedSegments:U}=Kd(e,d,p,T),W=new hn(O.segments,O.children);if(0===U.length&&W.hasChildren())return this.expandChildren(I,T,W).pipe((0,Ye.U)(ft=>new hn(d,ft)));if(0===T.length&&0===U.length)return Je(new hn(d,{}));const ie=xs(i)===s;return this.expandSegment(I,W,T,U,ie?pn:s,!0).pipe((0,Ye.U)(nt=>new hn(d.concat(nt.segments),nt.children)))})):d_(e)))}getChildConfig(t,e,i){return e.children?Je({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?Je({routes:e._loadedRoutes,injector:e._loadedInjector}):function DF(n,t,e,i){const r=t.canLoad;return void 0===r||0===r.length?Je(!0):Je(r.map(c=>{const d=ru(c,n);return na(function Ak(n){return n&&pp(n.canLoad)}(d)?d.canLoad(t,e):n.runInContext(()=>d(t,e)))})).pipe(gp(),x0())}(t,e,i).pipe((0,br.z)(r=>r?this.configLoader.loadChildren(t,e).pipe((0,di.b)(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):function Ok(n){return Ll(D0(su,3))}())):Je({routes:[],injector:t})}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return Je(i);if(r.numberOfChildren>1||!r.children[pn])return Ll(new l.vHH(4e3,su));r=r.children[pn]}}applyRedirectCommands(t,e,i){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i)}applyRedirectCreateUrlTree(t,e,i,r){const s=this.createSegmentGroup(t,e.root,i,r);return new Qc(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const i={};return wr(t,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const d=r.substring(1);i[s]=e[d]}else i[s]=r}),i}createSegmentGroup(t,e,i,r){const s=this.createSegments(t,e.segments,i,r);let c={};return wr(e.children,(d,p)=>{c[p]=this.createSegmentGroup(t,d,i,r)}),new hn(s,c)}createSegments(t,e,i,r){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,r):this.findOrReturn(s,i))}findPosParam(t,e,i){const r=i[e.path.substring(1)];if(!r)throw new l.vHH(4001,su);return r}findOrReturn(t,e){let i=0;for(const r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}}class KI{}class Fk{constructor(t,e,i,r,s,c,d,p){this.injector=t,this.rootComponentType=e,this.config=i,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=d,this.urlSerializer=p}recognize(){const t=Kd(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,pn).pipe((0,Ye.U)(e=>{if(null===e)return null;const i=new lp([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},pn,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new el(i,e),s=new b0(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(t){const e=t.value,i=v0(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(t,e,i):this.processSegment(t,e,i,i.segments,r)}processChildren(t,e,i){return(0,On.D)(Object.keys(i.children)).pipe(Qa(r=>{const s=i.children[r],c=i_(e,r);return this.processSegmentGroup(t,c,s,r)}),Ju((r,s)=>r&&s?(r.push(...s),r):null),tI(r=>null!==r),Oa(null),eI(),(0,Ye.U)(r=>{if(null===r)return null;const s=ZI(r);return function R0(n){n.sort((t,e)=>t.value.outlet===pn?-1:e.value.outlet===pn?1:t.value.outlet.localeCompare(e.value.outlet))}(s),s}))}processSegment(t,e,i,r,s){return(0,On.D)(e).pipe(Qa(c=>this.processSegmentAgainstRoute(c._injector??t,c,i,r,s)),Nr(c=>!!c),ea(c=>{if($I(c))return YI(i,r,s)?Je([]):Je(null);throw c}))}processSegmentAgainstRoute(t,e,i,r,s){if(e.redirectTo||!qI(e,i,r,s))return Je(null);let c;if("**"===e.path){const d=r.length>0?Gg(r).parameters:{},p=XI(i)+r.length;c=Je({snapshot:new lp(r,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,P0(e),xs(e),e.component??e._loadedComponent??null,e,QI(i),p,N0(e),p),consumedSegments:[],remainingSegments:[]})}else c=k0(i,e,r,t).pipe((0,Ye.U)(({matched:d,consumedSegments:p,remainingSegments:_,parameters:w})=>{if(!d)return null;const I=XI(i)+p.length;return{snapshot:new lp(p,w,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,P0(e),xs(e),e.component??e._loadedComponent??null,e,QI(i),I,N0(e),I),consumedSegments:p,remainingSegments:_}}));return c.pipe(_n(d=>{if(null===d)return Je(null);const{snapshot:p,consumedSegments:_,remainingSegments:w}=d;t=e._injector??t;const I=e._loadedInjector??t,T=function Lk(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(e),{segmentGroup:O,slicedSegments:U}=Kd(i,_,w,T.filter(ie=>void 0===ie.redirectTo),this.relativeLinkResolution);if(0===U.length&&O.hasChildren())return this.processChildren(I,T,O).pipe((0,Ye.U)(ie=>null===ie?null:[new el(p,ie)]));if(0===T.length&&0===U.length)return Je([new el(p,[])]);const W=xs(e)===s;return this.processSegment(I,T,O,U,W?pn:s).pipe((0,Ye.U)(ie=>null===ie?null:[new el(p,ie)]))}))}}function io(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function ZI(n){const t=[],e=new Set;for(const i of n){if(!io(i)){t.push(i);continue}const r=t.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),e.add(r)):t.push(i)}for(const i of e){const r=ZI(i.children);t.push(new el(i.value,r))}return t.filter(i=>!e.has(i))}function QI(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function XI(n){let t=n,e=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift??0;return e-1}function P0(n){return n.data||{}}function N0(n){return n.resolve||{}}function f_(n){return"string"==typeof n.title||null===n.title}function sa(n){return _n(t=>{const e=n(t);return e?(0,On.D)(e).pipe((0,Ye.U)(()=>t)):Je(t)})}let F0=(()=>{class n{buildTitle(e){let i,r=e.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===pn);return i}getResolvedTitleForRoute(e){return e.data[Vd]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return(0,l.f3M)(p_)},providedIn:"root"}),n})(),p_=(()=>{class n extends F0{constructor(e){super(),this.title=e}updateTitle(e){const i=this.buildTitle(e);void 0!==i&&this.title.setTitle(i)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(zs))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Hk{}class jk extends class TF{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const m_=new l.OlP("",{providedIn:"root",factory:()=>({})}),g_=new l.OlP("ROUTES");let iS=(()=>{class n{constructor(e,i){this.injector=e,this.compiler=i,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return Je(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const i=na(e.loadComponent()).pipe((0,di.b)(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),zg(()=>{this.componentLoaders.delete(e)})),r=new Zb(i,()=>new vt.x).pipe(Kb());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Je({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe((0,Ye.U)(d=>{this.onLoadEndListener&&this.onLoadEndListener(i);let p,_,w=!1;Array.isArray(d)?_=d:(p=d.create(e).injector,_=oI(p.get(g_,[],l.XFs.Self|l.XFs.Optional)));return{routes:_.map(M0),injector:p}}),zg(()=>{this.childrenLoaders.delete(i)})),c=new Zb(s,()=>new vt.x).pipe(Kb());return this.childrenLoaders.set(i,c),c}loadModuleFactoryOrRoutes(e){return na(e()).pipe((0,br.z)(i=>i instanceof l.YKP||Array.isArray(i)?Je(i):(0,On.D)(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.zs3),l.LFG(l.Sil))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class rS{}class zk{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function MF(n){throw n}function L0(n,t,e){return t.parse("/")}const sS={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},oS={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function V0(){const n=(0,l.f3M)(r0),t=(0,l.f3M)(up),e=(0,l.f3M)(Fe),i=(0,l.f3M)(l.zs3),r=(0,l.f3M)(l.Sil),s=(0,l.f3M)(g_,{optional:!0})??[],c=(0,l.f3M)(m_,{optional:!0})??{},d=(0,l.f3M)(p_),p=(0,l.f3M)(F0,{optional:!0}),_=(0,l.f3M)(rS,{optional:!0}),w=(0,l.f3M)(Hk,{optional:!0}),I=new xi(null,n,t,e,i,r,oI(s));return _&&(I.urlHandlingStrategy=_),w&&(I.routeReuseStrategy=w),I.titleStrategy=p??d,function aS(n,t){n.errorHandler&&(t.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(t.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(t.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(t.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(t.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(t.canceledNavigationResolution=n.canceledNavigationResolution)}(c,I),I}let xi=(()=>{class n{constructor(e,i,r,s,c,d,p){this.rootComponentType=e,this.urlSerializer=i,this.rootContexts=r,this.location=s,this.config=p,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new vt.x,this.errorHandler=MF,this.malformedUriErrorHandler=L0,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Je(void 0),this.urlHandlingStrategy=new zk,this.routeReuseStrategy=new jk,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=c.get(iS),this.configLoader.onLoadEndListener=T=>this.triggerEvent(new yk(T)),this.configLoader.onLoadStartListener=T=>this.triggerEvent(new _k(T)),this.ngModule=c.get(l.h0i),this.console=c.get(l.c2e);const I=c.get(l.R0b);this.isNgZoneEnabled=I instanceof l.R0b&&l.R0b.isInAngularZone(),this.resetConfig(p),this.currentUrlTree=function rk(){return new Qc(new hn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=y0(this.currentUrlTree,this.rootComponentType),this.transitions=new Pi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(e){const i=this.events;return e.pipe(tn(r=>0!==r.id),(0,Ye.U)(r=>({...r,extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),_n(r=>{let s=!1,c=!1;return Je(r).pipe((0,di.b)(d=>{this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),_n(d=>{const p=this.browserUrlTree.toString(),_=!this.navigated||d.extractedUrl.toString()!==p||p!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||_)&&this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return vp(d.source)&&(this.browserUrlTree=d.extractedUrl),Je(d).pipe(_n(I=>{const T=this.transitions.getValue();return i.next(new u0(I.id,this.serializeUrl(I.extractedUrl),I.source,I.restoredState)),T!==this.transitions.getValue()?Ds.E:Promise.resolve(I)}),function Nk(n,t,e,i){return _n(r=>function Pk(n,t,e,i,r){return new SF(n,t,e,i,r).apply()}(n,t,e,r.extractedUrl,i).pipe((0,Ye.U)(s=>({...r,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,di.b)(I=>{this.currentNavigation={...this.currentNavigation,finalUrl:I.urlAfterRedirects},r.urlAfterRedirects=I.urlAfterRedirects}),function Vk(n,t,e,i,r,s){return(0,br.z)(c=>function So(n,t,e,i,r,s,c="emptyOnly",d="legacy"){return new Fk(n,t,e,i,r,c,d,s).recognize().pipe(_n(p=>null===p?function AF(n){return new Ni.y(t=>t.error(n))}(new KI):Je(p)))}(n,t,e,c.urlAfterRedirects,i.serialize(c.urlAfterRedirects),i,r,s).pipe((0,Ye.U)(d=>({...c,targetSnapshot:d}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,di.b)(I=>{if(r.targetSnapshot=I.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!I.extras.skipLocationChange){const O=this.urlHandlingStrategy.merge(I.urlAfterRedirects,I.rawUrl);this.setBrowserUrl(O,I)}this.browserUrlTree=I.urlAfterRedirects}const T=new gk(I.id,this.serializeUrl(I.extractedUrl),this.serializeUrl(I.urlAfterRedirects),I.targetSnapshot);i.next(T)}));if(_&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:T,extractedUrl:O,source:U,restoredState:W,extras:ie}=d,ze=new u0(T,this.serializeUrl(O),U,W);i.next(ze);const nt=y0(O,this.rootComponentType).snapshot;return Je(r={...d,targetSnapshot:nt,urlAfterRedirects:O,extras:{...ie,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=d.rawUrl,d.resolve(null),Ds.E}),(0,di.b)(d=>{const p=new II(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(p)}),(0,Ye.U)(d=>r={...d,guards:Sk(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),function _F(n,t){return(0,br.z)(e=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:c}}=e;return 0===c.length&&0===s.length?Je({...e,guardsResult:!0}):function yF(n,t,e,i){return(0,On.D)(n).pipe((0,br.z)(r=>function o_(n,t,e,i,r){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?Je(s.map(d=>{const p=r_(t)??r,_=ru(d,p);return na(function HI(n){return n&&pp(n.canDeactivate)}(_)?_.canDeactivate(n,t,e,i):p.runInContext(()=>_(n,t,e,i))).pipe(Nr())})).pipe(gp()):Je(!0)}(r.component,r.route,e,t,i)),Nr(r=>!0!==r,!0))}(c,i,r,n).pipe((0,br.z)(d=>d&&function VI(n){return"boolean"==typeof n}(d)?function vF(n,t,e,i){return(0,On.D)(t).pipe(Qa(r=>Nl(function wF(n,t){return null!==n&&t&&t(new fF(n)),Je(!0)}(r.route.parent,i),function bF(n,t){return null!==n&&t&&t(new f0(n)),Je(!0)}(r.route,i),function EF(n,t,e){const i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(c=>function NI(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(c)).filter(c=>null!==c).map(c=>Fl(()=>Je(c.guards.map(p=>{const _=r_(c.node)??e,w=ru(p,_);return na(function UI(n){return n&&pp(n.canActivateChild)}(w)?w.canActivateChild(i,n):_.runInContext(()=>w(i,n))).pipe(Nr())})).pipe(gp())));return Je(s).pipe(gp())}(n,r.path,e),function CF(n,t,e){const i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return Je(!0);const r=i.map(s=>Fl(()=>{const c=r_(t)??e,d=ru(s,c);return na(function BI(n){return n&&pp(n.canActivate)}(d)?d.canActivate(t,n):c.runInContext(()=>d(t,n))).pipe(Nr())}));return Je(r).pipe(gp())}(n,r.route,e))),Nr(r=>!0!==r,!0))}(i,s,n,t):Je(d)),(0,Ye.U)(d=>({...e,guardsResult:d})))})}(this.ngModule.injector,d=>this.triggerEvent(d)),(0,di.b)(d=>{if(r.guardsResult=d.guardsResult,Xc(d.guardsResult))throw E0(0,d.guardsResult);const p=new SI(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.triggerEvent(p)}),tn(d=>!!d.guardsResult||(this.restoreHistory(d),this.cancelNavigationTransition(d,"",3),!1)),sa(d=>{if(d.guards.canActivateChecks.length)return Je(d).pipe((0,di.b)(p=>{const _=new d0(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(_)}),_n(p=>{let _=!1;return Je(p).pipe(function JI(n,t){return(0,br.z)(e=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return Je(e);let s=0;return(0,On.D)(r).pipe(Qa(c=>function eS(n,t,e,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!f_(r)&&(s[Vd]=r.title),function Bk(n,t,e,i){const r=function tS(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return Je({});const s={};return(0,On.D)(r).pipe((0,br.z)(c=>function Uk(n,t,e,i){const r=r_(t)??i,s=ru(n,r);return na(s.resolve?s.resolve(t,e):r.runInContext(()=>s(t,e)))}(n[c],t,e,i).pipe(Nr(),(0,di.b)(d=>{s[c]=d}))),Qb(1),nI(s),ea(c=>$I(c)?Ds.E:Ll(c)))}(s,n,t,i).pipe((0,Ye.U)(c=>(n._resolvedData=c,n.data=v0(n,e).resolve,r&&f_(r)&&(n.data[Vd]=r.title),null)))}(c.route,i,n,t)),(0,di.b)(()=>s++),Qb(1),(0,br.z)(c=>s===r.length?Je(e):Ds.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,di.b)({next:()=>_=!0,complete:()=>{_||(this.restoreHistory(p),this.cancelNavigationTransition(p,"",2))}}))}),(0,di.b)(p=>{const _=new AI(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(_)}))}),sa(d=>{const p=_=>{const w=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&w.push(this.configLoader.loadComponent(_.routeConfig).pipe((0,di.b)(I=>{_.component=I}),(0,Ye.U)(()=>{})));for(const I of _.children)w.push(...p(I));return w};return $g(p(d.targetSnapshot.root)).pipe(Oa(),bn(1))}),sa(()=>this.afterPreactivation()),(0,Ye.U)(d=>{const p=function Gd(n,t,e){const i=cp(n,t._root,e?e._root:void 0);return new e_(i,t)}(this.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return r={...d,targetRouterState:p}}),(0,di.b)(d=>{this.currentUrlTree=d.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),this.routerState=d.targetRouterState,"deferred"===this.urlUpdateStrategy&&(d.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,d),this.browserUrlTree=d.urlAfterRedirects)}),((n,t,e)=>(0,Ye.U)(i=>(new mF(t,i.targetRouterState,i.currentRouterState,e).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,d=>this.triggerEvent(d)),(0,di.b)({next(){s=!0},complete(){s=!0}}),zg(()=>{s||c||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),ea(d=>{if(c=!0,kI(d)){Wd(d)||(this.navigated=!0,this.restoreHistory(r,!0));const p=new nu(r.id,this.serializeUrl(r.extractedUrl),d.message,d.cancellationCode);if(i.next(p),Wd(d)){const _=this.urlHandlingStrategy.merge(d.url,this.rawUrlTree),w={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||vp(r.source)};this.scheduleNavigation(_,"imperative",null,w,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{this.restoreHistory(r,!0);const p=new DI(r.id,this.serializeUrl(r.extractedUrl),d,r.targetSnapshot??void 0);i.next(p);try{r.resolve(this.errorHandler(d))}catch(_){r.reject(_)}}return Ds.E}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next({...this.transitions.value,...e})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{const r={replaceUrl:!0},s=e.state?.navigationId?e.state:null;if(s){const d={...s};delete d.navigationId,delete d.\u0275routerPageId,0!==Object.keys(d).length&&(r.state=d)}const c=this.parseUrl(e.url);this.scheduleNavigation(c,i,s,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){this.config=e.map(M0),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,i={}){const{relativeTo:r,queryParams:s,fragment:c,queryParamsHandling:d,preserveFragment:p}=i,_=r||this.routerState.root,w=p?this.currentUrlTree.fragment:c;let I=null;switch(d){case"merge":I={...this.currentUrlTree.queryParams,...s};break;case"preserve":I=this.currentUrlTree.queryParams;break;default:I=s||null}return null!==I&&(I=this.removeEmptyProps(I)),bI(_,this.currentUrlTree,e,I,w??null)}navigateByUrl(e,i={skipLocationChange:!1}){const r=Xc(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(e,i={skipLocationChange:!1}){return function __(n){for(let t=0;t<n.length;t++){if(null==n[t])throw new l.vHH(4008,false)}}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return i}isActive(e,i){let r;if(r=!0===i?{...sS}:!1===i?{...oS}:i,Xc(e))return e0(this.currentUrlTree,e,r);const s=this.parseUrl(e);return e0(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.keys(e).reduce((i,r)=>{const s=e[r];return null!=s&&(i[r]=s),i},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new ra(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,i,r,s,c){if(this.disposed)return Promise.resolve(!1);let d,p,_;c?(d=c.resolve,p=c.reject,_=c.promise):_=new Promise((T,O)=>{d=T,p=O});const w=++this.navigationId;let I;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),I=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):I=0,this.setTransition({id:w,targetPageId:I,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:s,resolve:d,reject:p,promise:_,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_.catch(T=>Promise.reject(T))}setBrowserUrl(e,i){const r=this.urlSerializer.serialize(e),s={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(e,i=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===r?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===r&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,i,r){const s=new nu(e.id,this.serializeUrl(e.extractedUrl),i,r);this.triggerEvent(s),e.resolve(!1)}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}}return n.\u0275fac=function(e){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:function(){return V0()},providedIn:"root"}),n})();function vp(n){return"imperative"!==n}let bp=(()=>{class n{constructor(e,i,r,s,c){this.router=e,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=c,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new vt.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(e){this._preserveFragment=(0,l.D6c)(e)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(e){this._skipLocationChange=(0,l.D6c)(e)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(e){this._replaceUrl=(0,l.D6c)(e)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(e){if(null!=this.tabIndexAttribute)return;const i=this.renderer,r=this.el.nativeElement;null!==e?i.setAttribute(r,"tabindex",e):i.removeAttribute(r,"tabindex")}ngOnChanges(e){this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(xi),l.Y36(Vl),l.$8M("tabindex"),l.Y36(l.Qsj),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,i){1&e&&l.NdJ("click",function(){return i.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[l.TTD]}),n})(),Zd=(()=>{class n{constructor(e,i,r){this.router=e,this.route=i,this.locationStrategy=r,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new vt.x,this.subscription=e.events.subscribe(s=>{s instanceof ra&&this.updateTargetUrlAndHref()})}set preserveFragment(e){this._preserveFragment=(0,l.D6c)(e)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(e){this._skipLocationChange=(0,l.D6c)(e)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(e){this._replaceUrl=(0,l.D6c)(e)}get replaceUrl(){return this._replaceUrl}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:null}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,i,r,s,c){return!!(0!==e||i||r||s||c||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(xi),l.Y36(Vl),l.Y36(Ce))},n.\u0275dir=l.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,i){1&e&&l.NdJ("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&e&&l.uIk("target",i.target)("href",i.href,l.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[l.TTD]}),n})(),B0=(()=>{class n{constructor(e,i,r,s,c,d){this.router=e,this.element=i,this.renderer=r,this.cdr=s,this.link=c,this.linkWithHref=d,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new l.vpe,this.routerEventsSubscription=e.events.subscribe(p=>{p instanceof ra&&this.update()})}ngAfterContentInit(){Je(this.links.changes,this.linksWithHrefs.changes,Je(null)).pipe((0,Ld.J)()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const e=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=(0,On.D)(e).pipe((0,Ld.J)()).subscribe(i=>{this.isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(e){const i=Array.isArray(e)?e:e.split(" ");this.classes=i.filter(r=>!!r)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const e=this.hasActiveLinks();this.isActive!==e&&(this.isActive=e,this.cdr.markForCheck(),this.classes.forEach(i=>{e?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),e&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(e))})}isLinkActive(e){const i=function lS(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>!!r.urlTree&&e.isActive(r.urlTree,i)}hasActiveLinks(){const e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.linkWithHref&&e(this.linkWithHref)||this.links.some(e)||this.linksWithHrefs.some(e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(xi),l.Y36(l.SBq),l.Y36(l.Qsj),l.Y36(l.sBO),l.Y36(bp,8),l.Y36(Zd,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(e,i,r){if(1&e&&(l.Suo(r,bp,5),l.Suo(r,Zd,5)),2&e){let s;l.iGM(s=l.CRH())&&(i.links=s),l.iGM(s=l.CRH())&&(i.linksWithHrefs=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[l.TTD]}),n})();class cS{}let kF=(()=>{class n{constructor(e,i,r,s,c){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(tn(e=>e instanceof ra),Qa(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=(0,l.MMx)(s.providers,e,`Route: ${s.path}`));const c=s._injector??e,d=s._loadedInjector??c;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?r.push(this.preloadConfig(c,s)):(s.children||s._loadedRoutes)&&r.push(this.processRoutes(d,s.children??s._loadedRoutes))}return(0,On.D)(r).pipe((0,Ld.J)())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(e,i):Je(null);const s=r.pipe((0,br.z)(c=>null===c?Je(void 0):(i._loadedRoutes=c.routes,i._loadedInjector=c.injector,this.processRoutes(c.injector??e,c.routes))));if(i.loadComponent&&!i._loadedComponent){const c=this.loader.loadComponent(i);return(0,On.D)([s,c]).pipe((0,Ld.J)())}return s})}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(xi),l.LFG(l.Sil),l.LFG(l.lqb),l.LFG(cS),l.LFG(iS))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const y_=new l.OlP("");let uS=(()=>{class n{constructor(e,i,r={}){this.router=e,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof u0?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof ra&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Jg&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.router.triggerEvent(new Jg(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(e){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function wp(n,t){return{\u0275kind:n,\u0275providers:t}}function dS(n){return[{provide:g_,multi:!0,useValue:n}]}function Wk(){const n=(0,l.f3M)(l.zs3);return t=>{const e=n.get(l.z2F);if(t!==e.components[0])return;const i=n.get(xi),r=n.get(hS);1===n.get(Qd)&&i.initialNavigation(),n.get(Ul,null,l.XFs.Optional)?.setUpPreloading(),n.get(y_,null,l.XFs.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.next(),r.complete()}}const hS=new l.OlP("",{factory:()=>new vt.x}),Qd=new l.OlP("",{providedIn:"root",factory:()=>1});const Ul=new l.OlP("");function pS(n){return wp(0,[{provide:Ul,useExisting:kF},{provide:cS,useExisting:n}])}const b_=new l.OlP("ROUTER_FORROOT_GUARD"),U0=[Fe,{provide:r0,useClass:Wg},{provide:xi,useFactory:V0},up,{provide:Vl,useFactory:function Gk(n){return n.routerState.root},deps:[xi]},iS];function w_(){return new l.PXZ("Router",xi)}let PF=(()=>{class n{constructor(e){}static forRoot(e,i){return{ngModule:n,providers:[U0,[],dS(e),{provide:b_,useFactory:gS,deps:[[xi,new l.FiY,new l.tp0]]},{provide:m_,useValue:i||{}},i?.useHash?{provide:Ce,useClass:Qe}:{provide:Ce,useClass:ct},{provide:y_,useFactory:()=>{const n=(0,l.f3M)(xi),t=(0,l.f3M)(Du),e=(0,l.f3M)(m_);return e.scrollOffset&&t.setOffset(e.scrollOffset),new uS(n,t,e)}},i?.preloadingStrategy?pS(i.preloadingStrategy).\u0275providers:[],{provide:l.PXZ,multi:!0,useFactory:w_},i?.initialNavigation?Kk(i):[],[{provide:_S,useFactory:Wk},{provide:l.tb,multi:!0,useExisting:_S}]]}}static forChild(e){return{ngModule:n,providers:[dS(e)]}}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(b_,8))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[qd]}),n})();function gS(n){return"guarded"}function Kk(n){return["disabled"===n.initialNavigation?wp(3,[{provide:l.ip1,multi:!0,useFactory:()=>{const t=(0,l.f3M)(xi);return()=>{t.setUpLocationChangeListener()}}},{provide:Qd,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?wp(2,[{provide:Qd,useValue:0},{provide:l.ip1,multi:!0,deps:[l.zs3],useFactory:t=>{const e=t.get(K,Promise.resolve());let i=!1;return()=>e.then(()=>new Promise(s=>{const c=t.get(xi),d=t.get(hS);(function r(s){t.get(xi).events.pipe(tn(d=>d instanceof ra||d instanceof nu||d instanceof DI),(0,Ye.U)(d=>d instanceof ra||d instanceof nu&&(0===d.code||1===d.code)&&null),tn(d=>null!==d),bn(1)).subscribe(()=>{s()})})(()=>{s(!0),i=!0}),c.afterPreactivation=()=>(s(!0),i||d.closed?Je(void 0):d),c.initialNavigation()}))}}]).\u0275providers:[]]}const _S=new l.OlP("");let oa=(()=>{class n{constructor(e,i,r){this.angularFireAuth=e,this.userApiService=i,this.router=r,this.userSubject=new Pi(null),this.user$=this.userSubject.asObservable(),this.isAdmin$=this.user$.pipe((0,Ye.U)(s=>!!s?.isAdmin)),this.isAuthorized$=this.user$.pipe((0,Ye.U)(s=>!!s?.isAuthorized)),this.isAuthenticated$=this.user$.pipe((0,Ye.U)(s=>!!s)),this.angularFireAuth.authState.pipe(tn(s=>!!s)).subscribe(s=>this.retrieveUserInfo(s))}login(){this.angularFireAuth.signInWithPopup(new dl.Q).then(e=>{console.debug("[AuthService login",e.user)},e=>{this.resetUserInfo(),alert(e.message)})}logout(){this.angularFireAuth.signOut().then(e=>{this.router.navigate(["login"]),this.resetUserInfo()})}setUserInfo(e){this.userSubject.next(e)}resetUserInfo(){this.userSubject.next(null)}retrieveUserInfo(e){if(!e?.uid)return void this.resetUserInfo();const{uid:i,email:r,displayName:s}=e,c={uid:i,email:r,displayName:s,isAdmin:!1,isAuthorized:!1};this.setUserInfo(c),this.userApiService.getByKey(e.uid)?.valueChanges().subscribe({next:d=>{console.debug("[AuthService retrieveUserInfo OK]",{...c,isAdmin:d?.isAdmin}),this.setUserInfo({...c,isAdmin:d?.isAdmin,isAuthorized:!!d}),this.router.navigate(["home"])},error:d=>{console.error("[AuthService retrieveUserInfo ERROR]",d)}})}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Qu),l.LFG(Fd),l.LFG(xi))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var yS=N(1144);const vS=["addListener","removeListener"],Qk=["addEventListener","removeEventListener"],Xk=["on","off"];function aa(n,t,e,i){if((0,Fr.m)(e)&&(i=e,e=void 0),i)return aa(n,t,e).pipe(Zc(i));const[r,s]=function H0(n){return(0,Fr.m)(n.addEventListener)&&(0,Fr.m)(n.removeEventListener)}(n)?Qk.map(c=>d=>n[c](t,d,e)):function BF(n){return(0,Fr.m)(n.addListener)&&(0,Fr.m)(n.removeListener)}(n)?vS.map(C_(n,t)):function bS(n){return(0,Fr.m)(n.on)&&(0,Fr.m)(n.off)}(n)?Xk.map(C_(n,t)):[];if(!r&&(0,yS.z)(n))return(0,br.z)(c=>aa(c,t,e))((0,cr.Xf)(n));if(!r)throw new TypeError("Invalid event target");return new Ni.y(c=>{const d=(...p)=>c.next(1<p.length?p:p[0]);return r(d),()=>s(d)})}function C_(n,t){return e=>i=>n[e](t,i)}const Hl=new Ni.y(Gm.Z),jF={connector:()=>new vt.x};function wS(n,t=jF){const{connector:e}=t;return(0,Un.e)((i,r)=>{const s=e();(0,cr.Xf)(n(function HF(n){return new Ni.y(t=>n.subscribe(t))}(s))).subscribe(r),r.add(i.subscribe(s))})}function tR(n,t){return t?e=>Nl(t.pipe(bn(1),function $F(){return(0,Un.e)((n,t)=>{n.subscribe((0,Kn.x)(t,Gm.Z))})}()),e.pipe(tR(n))):(0,br.z)((e,i)=>n(e,i).pipe(bn(1),nI(e)))}var zF=N(3532);function nR(n=0,t,e=Xu.P){let i=-1;return null!=t&&((0,zF.K)(t)?e=t:i=t),new Ni.y(r=>{let s=function GF(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;s<0&&(s=0);let c=0;return e.schedule(function(){r.closed||(r.next(c++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function E_(n,t=Xu.z){const e=nR(n,t);return tR(()=>e)}const D_="Service workers are disabled or not supported by this browser";class j0{constructor(t){if(this.serviceWorker=t,t){const i=aa(t,"controllerchange").pipe((0,Ye.U)(()=>t.controller)),s=Nl(Fl(()=>Je(t.controller)),i);this.worker=s.pipe(tn(w=>!!w)),this.registration=this.worker.pipe(_n(()=>t.getRegistration()));const _=aa(t,"message").pipe((0,Ye.U)(w=>w.data)).pipe(tn(w=>w&&w.type)).pipe(function eR(n){return n?t=>wS(n)(t):t=>function Jk(n,t){const e=(0,Fr.m)(n)?n:()=>n;return(0,Fr.m)(t)?wS(t,{connector:e}):i=>new Zb(i,e)}(new vt.x)(t)}());_.connect(),this.events=_}else this.worker=this.events=this.registration=function WF(n){return Fl(()=>Ll(new Error(n)))}(D_)}postMessage(t,e){return this.worker.pipe(bn(1),(0,di.b)(i=>{i.postMessage({action:t,...e})})).toPromise().then(()=>{})}postMessageWithOperation(t,e,i){const r=this.waitForOperationCompleted(i),s=this.postMessage(t,e);return Promise.all([s,r]).then(([,c])=>c)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(t){let e;return e="string"==typeof t?i=>i.type===t:i=>t.includes(i.type),this.events.pipe(tn(e))}nextEventOfType(t){return this.eventsOfType(t).pipe(bn(1))}waitForOperationCompleted(t){return this.eventsOfType("OPERATION_COMPLETED").pipe(tn(e=>e.nonce===t),bn(1),(0,Ye.U)(e=>{if(void 0!==e.result)return e.result;throw new Error(e.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let qF=(()=>{class n{constructor(e){if(this.sw=e,this.subscriptionChanges=new vt.x,!e.isEnabled)return this.messages=Hl,this.notificationClicks=Hl,void(this.subscription=Hl);this.messages=this.sw.eventsOfType("PUSH").pipe((0,Ye.U)(r=>r.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,Ye.U)(r=>r.data)),this.pushManager=this.sw.registration.pipe((0,Ye.U)(r=>r.pushManager));const i=this.pushManager.pipe(_n(r=>r.getSubscription()));this.subscription=(0,Pn.T)(i,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(e){if(!this.sw.isEnabled)return Promise.reject(new Error(D_));const i={userVisibleOnly:!0};let r=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(r.length));for(let c=0;c<r.length;c++)s[c]=r.charCodeAt(c);return i.applicationServerKey=s,this.pushManager.pipe(_n(c=>c.subscribe(i)),bn(1)).toPromise().then(c=>(this.subscriptionChanges.next(c),c))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe(bn(1),_n(i=>{if(null===i)throw new Error("Not subscribed to push notifications.");return i.unsubscribe().then(r=>{if(!r)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(D_))}decodeBase64(e){return atob(e)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(j0))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),iR=(()=>{class n{constructor(e){if(this.sw=e,!e.isEnabled)return this.versionUpdates=Hl,this.available=Hl,this.activated=Hl,void(this.unrecoverable=Hl);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.available=this.versionUpdates.pipe(tn(i=>"VERSION_READY"===i.type),(0,Ye.U)(i=>({type:"UPDATE_AVAILABLE",current:i.currentVersion,available:i.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(D_));const e=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:e},e)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(D_));const e=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:e},e)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(j0))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class CS{}const o=new l.OlP("NGSW_REGISTER_SCRIPT");function a(n,t,e,i){return()=>{if(!$i(i)||!("serviceWorker"in navigator)||!1===e.enabled)return;let r;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof e.registrationStrategy)r=e.registrationStrategy();else{const[c,...d]=(e.registrationStrategy||"registerWhenStable:30000").split(":");switch(c){case"registerImmediately":r=Je(null);break;case"registerWithDelay":r=u(+d[0]||0);break;case"registerWhenStable":r=d[0]?(0,Pn.T)(h(n),u(+d[0])):h(n);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${e.registrationStrategy}`)}}n.get(l.R0b).runOutsideAngular(()=>r.pipe(bn(1)).subscribe(()=>navigator.serviceWorker.register(t,{scope:e.scope}).catch(c=>console.error("Service worker registration failed with:",c))))}}function u(n){return Je(null).pipe(E_(n))}function h(n){return n.get(l.z2F).isStable.pipe(tn(e=>e))}function f(n,t){return new j0($i(t)&&!1!==n.enabled?navigator.serviceWorker:void 0)}let C,m=(()=>{class n{static register(e,i={}){return{ngModule:n,providers:[{provide:o,useValue:e},{provide:CS,useValue:i},{provide:j0,useFactory:f,deps:[CS,l.Lbi]},{provide:l.ip1,useFactory:a,deps:[l.zs3,o,CS,l.Lbi],multi:!0}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[qF,iR]}),n})(),v=(()=>{class n{constructor(e){this.swUpdate=e}init(){this.swUpdate.versionUpdates.pipe(tn(e=>"VERSION_READY"===e.type)).subscribe(e=>{console.debug({versionCheck:e}),confirm("A new version is available, do you want to install it?")&&document.location.reload()})}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(iR))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();try{C=typeof Intl<"u"&&Intl.v8BreakIterator}catch{C=!1}let x,D=(()=>{class n{constructor(e){this._platformId=e,this.isBrowser=this._platformId?$i(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!C)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.Lbi))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const j=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function Z(){if(x)return x;if("object"!=typeof document||!document)return x=new Set(j),x;let n=document.createElement("input");return x=new Set(j.filter(t=>(n.setAttribute("type",t),n.type===t))),x}let ae,ut,Bt;function We(n){return function xe(){if(null==ae&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>ae=!0}))}finally{ae=ae||!1}return ae}()?n:!!n.capture}function Pt(){if(null==ut){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return ut=!1,ut;if("scrollBehavior"in document.documentElement.style)ut=!0;else{const n=Element.prototype.scrollTo;ut=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return ut}function yi(n){if(function jn(){if(null==Bt){const n=typeof document<"u"?document.head:null;Bt=!(!n||!n.createShadowRoot&&!n.attachShadow)}return Bt}()){const t=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function tl(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const t=n.shadowRoot.activeElement;if(t===n)break;n=t}return n}function la(n){return n.composedPath?n.composedPath()[0]:n.target}function Cp(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Ao(n,...t){return t.length?t.some(e=>n[e]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function sR(n,t=Xu.z){return(0,Un.e)((e,i)=>{let r=null,s=null,c=null;const d=()=>{if(r){r.unsubscribe(),r=null;const _=s;s=null,i.next(_)}};function p(){const _=c+n,w=t.now();if(w<_)return r=this.schedule(void 0,_-w),void i.add(r);d()}e.subscribe((0,Kn.x)(i,_=>{s=_,c=t.now(),r||(r=t.schedule(p,n),i.add(r))},()=>{d(),i.complete()},void 0,()=>{s=r=null}))})}function YF(n){return tn((t,e)=>n<=e)}function dr(n){return(0,Un.e)((t,e)=>{(0,cr.Xf)(n).subscribe((0,Kn.x)(e,()=>e.complete(),Gm.Z)),!e.closed&&t.subscribe(e)})}function vi(n){return null!=n&&"false"!=`${n}`}function A_(n,t=0){return function Jz(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):t}function TS(n){return Array.isArray(n)?n:[n]}function Cr(n){return null==n?"":"string"==typeof n?n:`${n}px`}function ou(n){return n instanceof l.SBq?n.nativeElement:n}let KF=(()=>{class n{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),e3=(()=>{class n{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,i)=>this._cleanupObserver(i))}observe(e){const i=ou(e);return new Ni.y(r=>{const c=this._observeElement(i).subscribe(r);return()=>{c.unsubscribe(),this._unobserveElement(i)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const i=new vt.x,r=this._mutationObserverFactory.create(s=>i.next(s));r&&r.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:r,stream:i,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:i,stream:r}=this._observedElements.get(e);i&&i.disconnect(),r.complete(),this._observedElements.delete(e)}}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(KF))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),t3=(()=>{class n{constructor(e,i,r){this._contentObserver=e,this._elementRef=i,this._ngZone=r,this.event=new l.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(e){this._disabled=vi(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=A_(e),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(sR(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(e3),l.Y36(l.SBq),l.Y36(l.R0b))},n.\u0275dir=l.lG2({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),ZF=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[KF]}),n})();const QF=new Set;let T_,n3=(()=>{class n{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):s3}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function r3(n){if(!QF.has(n))try{T_||(T_=document.createElement("style"),T_.setAttribute("type","text/css"),document.head.appendChild(T_)),T_.sheet&&(T_.sheet.insertRule(`@media ${n} {body{ }}`,0),QF.add(n))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(D))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function s3(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let o3=(()=>{class n{constructor(e,i){this._mediaMatcher=e,this._zone=i,this._queries=new Map,this._destroySubject=new vt.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return XF(TS(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){let s=$g(XF(TS(e)).map(c=>this._registerQuery(c).observable));return s=Nl(s.pipe(bn(1)),s.pipe(YF(1),sR(0))),s.pipe((0,Ye.U)(c=>{const d={matches:!1,breakpoints:{}};return c.forEach(({matches:p,query:_})=>{d.matches=d.matches||p,d.breakpoints[_]=p}),d}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const i=this._mediaMatcher.matchMedia(e),s={observable:new Ni.y(c=>{const d=p=>this._zone.run(()=>c.next(p));return i.addListener(d),()=>{i.removeListener(d)}}).pipe(Gi(i),(0,Ye.U)(({matches:c})=>({query:e,matches:c})),dr(this._destroySubject)),mql:i};return this._queries.set(e,s),s}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(n3),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function XF(n){return n.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}class tL{constructor(t){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new vt.x,this._typeaheadSubscription=Qi.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new vt.x,this.change=new vt.x,t instanceof l.n_E&&t.changes.subscribe(e=>{if(this._activeItem){const r=e.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}})}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,di.b)(e=>this._pressedLetters.push(e)),sR(t),tn(()=>this._pressedLetters.length>0),(0,Ye.U)(()=>this._pressedLetters.join(""))).subscribe(e=>{const i=this._getItemsArray();for(let r=1;r<i.length+1;r++){const s=(this._activeItemIndex+r)%i.length,c=i[s];if(!this._skipPredicateFn(c)&&0===c.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}setActiveItem(t){const e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){const e=t.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!t[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;default:return void((r||Ao(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){const e=this._getItemsArray(),i="number"==typeof t?t:e.indexOf(t);this._activeItem=e[i]??null,this._activeItemIndex=i}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){const e=this._getItemsArray();for(let i=1;i<=e.length;i++){const r=(this._activeItemIndex+t*i+e.length)%e.length;if(!this._skipPredicateFn(e[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){const i=this._getItemsArray();if(i[t]){for(;this._skipPredicateFn(i[t]);)if(!i[t+=e])return;this.setActiveItem(t)}}_getItemsArray(){return this._items instanceof l.n_E?this._items.toArray():this._items}}class c3 extends tL{setActiveItem(t){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(t),this.activeItem&&this.activeItem.setActiveStyles()}}class nL extends tL{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}}let MS=(()=>{class n{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function d3(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const i=function u3(n){try{return n.frameElement}catch{return null}}(function v3(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(e));if(i&&(-1===rL(i)||!this.isVisible(i)))return!1;let r=e.nodeName.toLowerCase(),s=rL(e);return e.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function _3(n){let t=n.nodeName.toLowerCase(),e="input"===t&&n.type;return"text"===e||"password"===e||"select"===t||"textarea"===t}(e))&&("audio"===r?!!e.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,i){return function y3(n){return!function f3(n){return function m3(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function h3(n){let t=n.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(n)||function p3(n){return function g3(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||iL(n))}(e)&&!this.isDisabled(e)&&(i?.ignoreVisibility||this.isVisible(e))}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(D))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function iL(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let t=n.getAttribute("tabindex");return!(!t||isNaN(parseInt(t,10)))}function rL(n){if(!iL(n))return null;const t=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}class b3{constructor(t,e,i,r,s=!1){this._element=t,this._checker=e,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){const e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){const i=this._getFirstTabbableElement(e);return i?.focus(t),!!i}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){const e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){const e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let i=0;i<e.length;i++){const r=e[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[i]):null;if(r)return r}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let i=e.length-1;i>=0;i--){const r=e[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[i]):null;if(r)return r}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(bn(1)).subscribe(t)}}let oR=(()=>{class n{constructor(e,i,r){this._checker=e,this._ngZone=i,this._document=r}create(e,i=!1){return new b3(e,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(MS),l.LFG(l.R0b),l.LFG(re))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function aR(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function lR(n){const t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const w3=new l.OlP("cdk-input-modality-detector-options"),C3={ignoreKeys:[18,17,224,91,16]},M_=We({passive:!0,capture:!0});let E3=(()=>{class n{constructor(e,i,r,s){this._platform=e,this._mostRecentTarget=null,this._modality=new Pi(null),this._lastTouchMs=0,this._onKeydown=c=>{this._options?.ignoreKeys?.some(d=>d===c.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=la(c))},this._onMousedown=c=>{Date.now()-this._lastTouchMs<650||(this._modality.next(aR(c)?"keyboard":"mouse"),this._mostRecentTarget=la(c))},this._onTouchstart=c=>{lR(c)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=la(c))},this._options={...C3,...s},this.modalityDetected=this._modality.pipe(YF(1)),this.modalityChanged=this.modalityDetected.pipe(ed()),e.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,M_),r.addEventListener("mousedown",this._onMousedown,M_),r.addEventListener("touchstart",this._onTouchstart,M_)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,M_),document.removeEventListener("mousedown",this._onMousedown,M_),document.removeEventListener("touchstart",this._onTouchstart,M_))}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(D),l.LFG(l.R0b),l.LFG(re),l.LFG(w3,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const D3=new l.OlP("liveAnnouncerElement",{providedIn:"root",factory:function I3(){return null}}),S3=new l.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let A3=(()=>{class n{constructor(e,i,r,s){this._ngZone=i,this._defaultOptions=s,this._document=r,this._liveElement=e||this._createLiveElement()}announce(e,...i){const r=this._defaultOptions;let s,c;return 1===i.length&&"number"==typeof i[0]?c=i[0]:[s,c]=i,this.clear(),clearTimeout(this._previousTimeout),s||(s=r&&r.politeness?r.politeness:"polite"),null==c&&r&&(c=r.duration),this._liveElement.setAttribute("aria-live",s),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(d=>this._currentResolve=d)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,"number"==typeof c&&(this._previousTimeout=setTimeout(()=>this.clear(),c)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const e="cdk-live-announcer-element",i=this._document.getElementsByClassName(e),r=this._document.createElement("div");for(let s=0;s<i.length;s++)i[s].remove();return r.classList.add(e),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),this._document.body.appendChild(r),r}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(D3,8),l.LFG(l.R0b),l.LFG(re),l.LFG(S3,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const T3=new l.OlP("cdk-focus-monitor-default-options"),xS=We({passive:!0,capture:!0});let Ip=(()=>{class n{constructor(e,i,r,s,c){this._ngZone=e,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new vt.x,this._rootNodeFocusAndBlurListener=d=>{for(let _=la(d);_;_=_.parentElement)"focus"===d.type?this._onFocus(d,_):this._onBlur(d,_)},this._document=s,this._detectionMode=c?.detectionMode||0}monitor(e,i=!1){const r=ou(e);if(!this._platform.isBrowser||1!==r.nodeType)return Je(null);const s=yi(r)||this._getDocument(),c=this._elementInfo.get(r);if(c)return i&&(c.checkChildren=!0),c.subject;const d={checkChildren:i,subject:new vt.x,rootNode:s};return this._elementInfo.set(r,d),this._registerGlobalListeners(d),d.subject}stopMonitoring(e){const i=ou(e),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(e,i,r){const s=ou(e);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([d,p])=>this._originChanged(d,i,p)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,i){e.classList.toggle("cdk-focused",!!i),e.classList.toggle("cdk-touch-focused","touch"===i),e.classList.toggle("cdk-keyboard-focused","keyboard"===i),e.classList.toggle("cdk-mouse-focused","mouse"===i),e.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(e,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,i){const r=this._elementInfo.get(i),s=la(e);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(e,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&e.relatedTarget instanceof Node&&i.contains(e.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(e,i){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(i))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const i=e.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,xS),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,xS)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(dr(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(e){const i=e.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,xS),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,xS),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,i,r){this._setClasses(e,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(e){const i=[];return this._elementInfo.forEach((r,s)=>{(s===e||r.checkChildren&&s.contains(e))&&i.push([s,r])}),i}_isLastInteractionFromInputLabel(e){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===e||"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName||e.disabled)return!1;const s=e.labels;if(s)for(let c=0;c<s.length;c++)if(s[c].contains(i))return!0;return!1}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.R0b),l.LFG(D),l.LFG(E3),l.LFG(re,8),l.LFG(T3,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const oL="cdk-high-contrast-black-on-white",aL="cdk-high-contrast-white-on-black",cR="cdk-high-contrast-active";let lL=(()=>{class n{constructor(e,i){this._platform=e,this._document=i,this._breakpointSubscription=(0,l.f3M)(o3).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(e):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(cR,oL,aL),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?e.add(cR,oL):2===i&&e.add(cR,aL)}}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(D),l.LFG(re))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),cL=(()=>{class n{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(lL))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[ZF]}),n})();const M3=new l.OlP("cdk-dir-doc",{providedIn:"root",factory:function x3(){return(0,l.f3M)(re)}}),k3=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Jd=(()=>{class n{constructor(e){if(this.value="ltr",this.change=new l.vpe,e){const r=e.documentElement?e.documentElement.dir:null;this.value=function R3(n){const t=n?.toLowerCase()||"";return"auto"===t&&typeof navigator<"u"&&navigator?.language?k3.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(M3,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),W0=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();function O3(n,t){if(1&n&&l._UZ(0,"mat-pseudo-checkbox",4),2&n){const e=l.oxw();l.Q6J("state",e.selected?"checked":"unchecked")("disabled",e.disabled)}}function P3(n,t){if(1&n&&(l.TgZ(0,"span",5),l._uU(1),l.qZA()),2&n){const e=l.oxw();l.xp6(1),l.hij("(",e.group.label,")")}}const N3=["*"],L3=new l.OlP("mat-sanity-checks",{providedIn:"root",factory:function F3(){return!0}});let Wn=(()=>{class n{constructor(e,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!Cp()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(lL),l.LFG(L3,8),l.LFG(re))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[W0,W0]}),n})();function uR(n){return class extends n{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=vi(t)}}}function q0(n,t){return class extends n{constructor(...e){super(...e),this.defaultColor=t,this.color=t}get color(){return this._color}set color(e){const i=e||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function Y0(n){return class extends n{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=vi(t)}}}function V3(n,t=0){return class extends n{constructor(...e){super(...e),this._tabIndex=t,this.defaultTabIndex=t}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=null!=e?A_(e):this.defaultTabIndex}}}function hL(n){return class extends n{constructor(...t){super(...t),this.errorState=!1}updateErrorState(){const t=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==t&&(this.errorState=s,this.stateChanges.next())}}}const B3=new l.OlP("MAT_DATE_LOCALE",{providedIn:"root",factory:function U3(){return(0,l.f3M)(l.soG)}});class $l{constructor(){this._localeChanges=new vt.x,this.localeChanges=this._localeChanges}getValidDateOrNull(t){return this.isDateInstance(t)&&this.isValid(t)?t:null}deserialize(t){return null==t||this.isDateInstance(t)&&this.isValid(t)?t:this.invalid()}setLocale(t){this.locale=t,this._localeChanges.next()}compareDate(t,e){return this.getYear(t)-this.getYear(e)||this.getMonth(t)-this.getMonth(e)||this.getDate(t)-this.getDate(e)}sameDate(t,e){if(t&&e){let i=this.isValid(t),r=this.isValid(e);return i&&r?!this.compareDate(t,e):i==r}return t==e}clampDate(t,e,i){return e&&this.compareDate(t,e)<0?e:i&&this.compareDate(t,i)>0?i:t}}const dR=new l.OlP("mat-date-formats"),H3=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function hR(n,t){const e=Array(n);for(let i=0;i<n;i++)e[i]=t(i);return e}let j3=(()=>{class n extends $l{constructor(e,i){super(),this.useUtcForDisplay=!1,super.setLocale(e)}getYear(e){return e.getFullYear()}getMonth(e){return e.getMonth()}getDate(e){return e.getDate()}getDayOfWeek(e){return e.getDay()}getMonthNames(e){const i=new Intl.DateTimeFormat(this.locale,{month:e,timeZone:"utc"});return hR(12,r=>this._format(i,new Date(2017,r,1)))}getDateNames(){const e=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return hR(31,i=>this._format(e,new Date(2017,0,i+1)))}getDayOfWeekNames(e){const i=new Intl.DateTimeFormat(this.locale,{weekday:e,timeZone:"utc"});return hR(7,r=>this._format(i,new Date(2017,0,r+1)))}getYearName(e){const i=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(i,e)}getFirstDayOfWeek(){return 0}getNumDaysInMonth(e){return this.getDate(this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+1,0))}clone(e){return new Date(e.getTime())}createDate(e,i,r){let s=this._createDateWithOverflow(e,i,r);return s.getMonth(),s}today(){return new Date}parse(e,i){return"number"==typeof e?new Date(e):e?new Date(Date.parse(e)):null}format(e,i){if(!this.isValid(e))throw Error("NativeDateAdapter: Cannot format invalid date.");const r=new Intl.DateTimeFormat(this.locale,{...i,timeZone:"utc"});return this._format(r,e)}addCalendarYears(e,i){return this.addCalendarMonths(e,12*i)}addCalendarMonths(e,i){let r=this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+i,this.getDate(e));return this.getMonth(r)!=((this.getMonth(e)+i)%12+12)%12&&(r=this._createDateWithOverflow(this.getYear(r),this.getMonth(r),0)),r}addCalendarDays(e,i){return this._createDateWithOverflow(this.getYear(e),this.getMonth(e),this.getDate(e)+i)}toIso8601(e){return[e.getUTCFullYear(),this._2digit(e.getUTCMonth()+1),this._2digit(e.getUTCDate())].join("-")}deserialize(e){if("string"==typeof e){if(!e)return null;if(H3.test(e)){let i=new Date(e);if(this.isValid(i))return i}}return super.deserialize(e)}isDateInstance(e){return e instanceof Date}isValid(e){return!isNaN(e.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(e,i,r){const s=new Date;return s.setFullYear(e,i,r),s.setHours(0,0,0,0),s}_2digit(e){return("00"+e).slice(-2)}_format(e,i){const r=new Date;return r.setUTCFullYear(i.getFullYear(),i.getMonth(),i.getDate()),r.setUTCHours(i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()),e.format(r)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(B3,8),l.LFG(D))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const $3={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};let z3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[{provide:$l,useClass:j3}]}),n})(),fL=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[{provide:dR,useValue:$3}],imports:[z3]}),n})(),fR=(()=>{class n{isErrorState(e,i){return!!(e&&e.invalid&&(e.touched||i&&i.submitted))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),pL=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Wn,Wn]}),n})();class q3{constructor(t,e,i,r=!1){this._renderer=t,this.element=e,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const mL={enterDuration:225,exitDuration:150},pR=We({passive:!0}),gL=["mousedown","touchstart"],_L=["mouseup","mouseleave","touchend","touchcancel"];class K3{constructor(t,e,i,r){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=ou(i))}fadeInRipple(t,e,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...mL,...i.animation};i.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);const c=i.radius||function Z3(n,t,e){const i=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(i*i+r*r)}(t,e,r),d=t-r.left,p=e-r.top,_=s.enterDuration,w=document.createElement("div");w.classList.add("mat-ripple-element"),w.style.left=d-c+"px",w.style.top=p-c+"px",w.style.height=2*c+"px",w.style.width=2*c+"px",null!=i.color&&(w.style.backgroundColor=i.color),w.style.transitionDuration=`${_}ms`,this._containerElement.appendChild(w);const I=window.getComputedStyle(w),O=I.transitionDuration,U="none"===I.transitionProperty||"0s"===O||"0s, 0s"===O,W=new q3(this,w,i,U);w.style.transform="scale3d(1, 1, 1)",W.state=0,i.persistent||(this._mostRecentTransientRipple=W);let ie=null;return!U&&(_||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const ze=()=>this._finishRippleTransition(W),nt=()=>this._destroyRipple(W);w.addEventListener("transitionend",ze),w.addEventListener("transitioncancel",nt),ie={onTransitionEnd:ze,onTransitionCancel:nt}}),this._activeRipples.set(W,ie),(U||!_)&&this._finishRippleTransition(W),W}fadeOutRipple(t){if(2===t.state||3===t.state)return;const e=t.element,i={...mL,...t.config.animation};e.style.transitionDuration=`${i.exitDuration}ms`,e.style.opacity="0",t.state=2,(t._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=ou(t);!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(gL))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(_L),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){0===t.state?this._startFadeOutTransition(t):2===t.state&&this._destroyRipple(t)}_startFadeOutTransition(t){const e=t===this._mostRecentTransientRipple,{persistent:i}=t.config;t.state=1,!i&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){const e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=3,null!==e&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel)),t.element.remove()}_onMousedown(t){const e=aR(t),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!i&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!lR(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let i=0;i<e.length;i++)this.fadeInRipple(e[i].clientX,e[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(e=>{this._triggerElement.addEventListener(e,this,pR)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(gL.forEach(t=>{this._triggerElement.removeEventListener(t,this,pR)}),this._pointerUpEventsRegistered&&_L.forEach(t=>{this._triggerElement.removeEventListener(t,this,pR)}))}}const Q3=new l.OlP("mat-ripple-global-options");let Z0=(()=>{class n{constructor(e,i,r,s,c){this._elementRef=e,this._animationMode=c,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new K3(this,i,e,r)}get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,i=0,r){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,i,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...e})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.R0b),l.Y36(D),l.Y36(Q3,8),l.Y36(l.QbO,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,i){2&e&&l.ekj("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),kS=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Wn,Wn]}),n})(),yL=(()=>{class n{constructor(e){this._animationMode=e,this.state="unchecked",this.disabled=!1}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.QbO,8))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(e,i){2&e&&l.ekj("mat-pseudo-checkbox-indeterminate","indeterminate"===i.state)("mat-pseudo-checkbox-checked","checked"===i.state)("mat-pseudo-checkbox-disabled",i.disabled)("_mat-animation-noopable","NoopAnimations"===i._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(e,i){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}'],encapsulation:2,changeDetection:0}),n})(),mR=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Wn]}),n})();const vL=new l.OlP("MAT_OPTION_PARENT_COMPONENT"),bL=new l.OlP("MatOptgroup");let X3=0;class wL{constructor(t,e=!1){this.source=t,this.isUserInput=e}}let J3=(()=>{class n{constructor(e,i,r,s){this._element=e,this._changeDetectorRef=i,this._parent=r,this.group=s,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+X3++,this.onSelectionChange=new l.vpe,this._stateChanges=new vt.x}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=vi(e)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(e,i){const r=this._getHostElement();"function"==typeof r.focus&&r.focus(i)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(13===e.keyCode||32===e.keyCode)&&!Ao(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue=e,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new wL(this,e))}}return n.\u0275fac=function(e){l.$Z()},n.\u0275dir=l.lG2({type:n,inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),n})(),CL=(()=>{class n extends J3{constructor(e,i,r,s){super(e,i,r,s)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.sBO),l.Y36(vL,8),l.Y36(bL,8))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(e,i){1&e&&l.NdJ("click",function(){return i._selectViaInteraction()})("keydown",function(s){return i._handleKeydown(s)}),2&e&&(l.Ikx("id",i.id),l.uIk("tabindex",i._getTabIndex())("aria-selected",i._getAriaSelected())("aria-disabled",i.disabled.toString()),l.ekj("mat-selected",i.selected)("mat-option-multiple",i.multiple)("mat-active",i.active)("mat-option-disabled",i.disabled))},exportAs:["matOption"],features:[l.qOj],ngContentSelectors:N3,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(e,i){1&e&&(l.F$t(),l.YNc(0,O3,1,2,"mat-pseudo-checkbox",0),l.TgZ(1,"span",1),l.Hsn(2),l.qZA(),l.YNc(3,P3,2,1,"span",2),l._UZ(4,"div",3)),2&e&&(l.Q6J("ngIf",i.multiple),l.xp6(3),l.Q6J("ngIf",i.group&&i.group._inert),l.xp6(1),l.Q6J("matRippleTrigger",i._getHostElement())("matRippleDisabled",i.disabled||i.disableRipple))},dependencies:[Z0,Rn,yL],styles:['.mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.mat-option.mat-active::before{content:""}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.cdk-high-contrast-active .mat-option.mat-selected:not(.mat-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-option.mat-selected:not(.mat-option-multiple)::after{right:auto;left:16px}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}'],encapsulation:2,changeDetection:0}),n})();function gR(n,t,e){if(e.length){let i=t.toArray(),r=e.toArray(),s=0;for(let c=0;c<n+1;c++)i[c].group&&i[c].group===r[s]&&s++;return s}return 0}let RS=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[kS,mr,Wn,mR]}),n})();const eG=["mat-button",""],tG=["*"],iG=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],rG=q0(uR(Y0(class{constructor(n){this._elementRef=n}})));let x_=(()=>{class n extends rG{constructor(e,i,r){super(e),this._focusMonitor=i,this._animationMode=r,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of iG)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);e.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e,i){e?this._focusMonitor.focusVia(this._getHostElement(),e,i):this._getHostElement().focus(i)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...e){return e.some(i=>this._getHostElement().hasAttribute(i))}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(Ip),l.Y36(l.QbO,8))},n.\u0275cmp=l.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(e,i){if(1&e&&l.Gf(Z0,5),2&e){let r;l.iGM(r=l.CRH())&&(i.ripple=r.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(e,i){2&e&&(l.uIk("disabled",i.disabled||null),l.ekj("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[l.qOj],attrs:eG,ngContentSelectors:tG,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,i){1&e&&(l.F$t(),l.TgZ(0,"span",0),l.Hsn(1),l.qZA(),l._UZ(2,"span",1)(3,"span",2)),2&e&&(l.xp6(2),l.ekj("mat-button-ripple-round",i.isRoundButton||i.isIconButton),l.Q6J("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},dependencies:[Z0],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.mat-flat-button::before,.mat-raised-button::before,.mat-fab::before,.mat-mini-fab::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-stroked-button::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}"],encapsulation:2,changeDetection:0}),n})(),_R=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[kS,Wn,Wn]}),n})(),sG=(()=>{class n{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(e){this._vertical=vi(e)}get inset(){return this._inset}set inset(e){this._inset=vi(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(e,i){2&e&&(l.uIk("aria-orientation",i.vertical?"vertical":"horizontal"),l.ekj("mat-divider-vertical",i.vertical)("mat-divider-horizontal",!i.vertical)("mat-divider-inset",i.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(e,i){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0}),n})(),yR=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Wn,Wn]}),n})();function DL(...n){const t=(0,ka.jO)(n),{args:e,keys:i}=qD(n),r=new Ni.y(s=>{const{length:c}=e;if(!c)return void s.complete();const d=new Array(c);let p=c,_=c;for(let w=0;w<c;w++){let I=!1;(0,cr.Xf)(e[w]).subscribe((0,Kn.x)(s,T=>{I||(I=!0,_--),d[w]=T},()=>p--,void 0,()=>{(!p||!I)&&(_||s.next(i?KD(i,d):d),s.complete())}))}});return t?r.pipe(Zc(t)):r}class oG{}class eh{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const i=e.indexOf(":");if(i>0){const r=e.slice(0,i),s=r.toLowerCase(),c=e.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(c):this.headers.set(s,[c])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let i=t[e];const r=e.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof eh?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new eh;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof eh?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":const s=t.value;if(s){let c=this.headers.get(e);if(!c)return;c=c.filter(d=>-1===s.indexOf(d)),0===c.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,c)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class aG{encodeKey(t){return IL(t)}encodeValue(t){return IL(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const cG=/%(\d[a-f0-9])/gi,uG={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function IL(n){return encodeURIComponent(n).replace(cG,(t,e)=>uG[e]??t)}function OS(n){return`${n}`}class th{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new aG,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function lG(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[c,d]=-1==s?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,s)),t.decodeValue(r.slice(s+1))],p=e.get(c)||[];p.push(d),e.set(c,p)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const i=t.fromObject[e],r=Array.isArray(i)?i.map(OS):[OS(i)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(i=>{const r=t[i];Array.isArray(r)?r.forEach(s=>{e.push({param:i,value:s,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new th({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(OS(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let i=this.map.get(t.param)||[];const r=i.indexOf(OS(t.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class dG{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function SL(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function AL(n){return typeof Blob<"u"&&n instanceof Blob}function TL(n){return typeof FormData<"u"&&n instanceof FormData}class Q0{constructor(t,e,i,r){let s;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function hG(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new eh),this.context||(this.context=new dG),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=e;else{const d=e.indexOf("?");this.urlWithParams=e+(-1===d?"?":d<e.length-1?"&":"")+c}}else this.params=new th,this.urlWithParams=e}serializeBody(){return null===this.body?null:SL(this.body)||AL(this.body)||TL(this.body)||function fG(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof th?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||TL(this.body)?null:AL(this.body)?this.body.type||null:SL(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof th?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,s=void 0!==t.body?t.body:this.body,c=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,d=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let p=t.headers||this.headers,_=t.params||this.params;const w=t.context??this.context;return void 0!==t.setHeaders&&(p=Object.keys(t.setHeaders).reduce((I,T)=>I.set(T,t.setHeaders[T]),p)),t.setParams&&(_=Object.keys(t.setParams).reduce((I,T)=>I.set(T,t.setParams[T]),_)),new Q0(e,i,s,{params:_,headers:p,context:w,reportProgress:d,responseType:r,withCredentials:c})}}var Xr=(()=>((Xr=Xr||{})[Xr.Sent=0]="Sent",Xr[Xr.UploadProgress=1]="UploadProgress",Xr[Xr.ResponseHeader=2]="ResponseHeader",Xr[Xr.DownloadProgress=3]="DownloadProgress",Xr[Xr.Response=4]="Response",Xr[Xr.User=5]="User",Xr))();class vR extends class pG{constructor(t,e=200,i="OK"){this.headers=t.headers||new eh,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(t={}){super(t),this.type=Xr.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new vR({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}function bR(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let xL=(()=>{class n{constructor(e){this.handler=e}request(e,i,r={}){let s;if(e instanceof Q0)s=e;else{let p,_;p=r.headers instanceof eh?r.headers:new eh(r.headers),r.params&&(_=r.params instanceof th?r.params:new th({fromObject:r.params})),s=new Q0(e,i,void 0!==r.body?r.body:null,{headers:p,context:r.context,params:_,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const c=Je(s).pipe(Qa(p=>this.handler.handle(p)));if(e instanceof Q0||"events"===r.observe)return c;const d=c.pipe(tn(p=>p instanceof vR));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return d.pipe((0,Ye.U)(p=>{if(null!==p.body&&!(p.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return p.body}));case"blob":return d.pipe((0,Ye.U)(p=>{if(null!==p.body&&!(p.body instanceof Blob))throw new Error("Response is not a Blob.");return p.body}));case"text":return d.pipe((0,Ye.U)(p=>{if(null!==p.body&&"string"!=typeof p.body)throw new Error("Response is not a string.");return p.body}));default:return d.pipe((0,Ye.U)(p=>p.body))}case"response":return d;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:(new th).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,bR(r,i))}post(e,i,r={}){return this.request("POST",e,bR(r,i))}put(e,i,r={}){return this.request("PUT",e,bR(r,i))}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(oG))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const gG=["*"];let PS;function X0(n){return function _G(){if(void 0===PS&&(PS=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(PS=n.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return PS}()?.createHTML(n)||n}function kL(n){return Error(`Unable to find icon with the name "${n}"`)}function RL(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function OL(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class Sp{constructor(t,e,i){this.url=t,this.svgText=e,this.options=i}}let NS=(()=>{class n{constructor(e,i,r,s){this._httpClient=e,this._sanitizer=i,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(e,i,r){return this.addSvgIconInNamespace("",e,i,r)}addSvgIconLiteral(e,i,r){return this.addSvgIconLiteralInNamespace("",e,i,r)}addSvgIconInNamespace(e,i,r,s){return this._addSvgIconConfig(e,i,new Sp(r,null,s))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,i,r,s){const c=this._sanitizer.sanitize(l.q3G.HTML,r);if(!c)throw OL(r);const d=X0(c);return this._addSvgIconConfig(e,i,new Sp("",d,s))}addSvgIconSet(e,i){return this.addSvgIconSetInNamespace("",e,i)}addSvgIconSetLiteral(e,i){return this.addSvgIconSetLiteralInNamespace("",e,i)}addSvgIconSetInNamespace(e,i,r){return this._addSvgIconSetConfig(e,new Sp(i,null,r))}addSvgIconSetLiteralInNamespace(e,i,r){const s=this._sanitizer.sanitize(l.q3G.HTML,i);if(!s)throw OL(i);const c=X0(s);return this._addSvgIconSetConfig(e,new Sp("",c,r))}registerFontClassAlias(e,i=e){return this._fontCssClassesByAlias.set(e,i),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const i=this._sanitizer.sanitize(l.q3G.RESOURCE_URL,e);if(!i)throw RL(e);const r=this._cachedIconsByUrl.get(i);return r?Je(FS(r)):this._loadSvgIconFromConfig(new Sp(e,null)).pipe((0,di.b)(s=>this._cachedIconsByUrl.set(i,s)),(0,Ye.U)(s=>FS(s)))}getNamedSvgIcon(e,i=""){const r=PL(i,e);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,e),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const c=this._iconSetConfigs.get(i);return c?this._getSvgFromIconSetConfigs(e,c):Ll(kL(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?Je(FS(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe((0,Ye.U)(i=>FS(i)))}_getSvgFromIconSetConfigs(e,i){const r=this._extractIconWithNameFromAnySet(e,i);return r?Je(r):DL(i.filter(c=>!c.svgText).map(c=>this._loadSvgIconSetFromConfig(c).pipe(ea(d=>{const _=`Loading icon set URL: ${this._sanitizer.sanitize(l.q3G.RESOURCE_URL,c.url)} failed: ${d.message}`;return this._errorHandler.handleError(new Error(_)),Je(null)})))).pipe((0,Ye.U)(()=>{const c=this._extractIconWithNameFromAnySet(e,i);if(!c)throw kL(e);return c}))}_extractIconWithNameFromAnySet(e,i){for(let r=i.length-1;r>=0;r--){const s=i[r];if(s.svgText&&s.svgText.toString().indexOf(e)>-1){const c=this._svgElementFromConfig(s),d=this._extractSvgIconFromSet(c,e,s.options);if(d)return d}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe((0,di.b)(i=>e.svgText=i),(0,Ye.U)(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?Je(null):this._fetchIcon(e).pipe((0,di.b)(i=>e.svgText=i))}_extractSvgIconFromSet(e,i,r){const s=e.querySelector(`[id="${i}"]`);if(!s)return null;const c=s.cloneNode(!0);if(c.removeAttribute("id"),"svg"===c.nodeName.toLowerCase())return this._setSvgAttributes(c,r);if("symbol"===c.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(c),r);const d=this._svgElementFromString(X0("<svg></svg>"));return d.appendChild(c),this._setSvgAttributes(d,r)}_svgElementFromString(e){const i=this._document.createElement("DIV");i.innerHTML=e;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(e){const i=this._svgElementFromString(X0("<svg></svg>")),r=e.attributes;for(let s=0;s<r.length;s++){const{name:c,value:d}=r[s];"id"!==c&&i.setAttribute(c,d)}for(let s=0;s<e.childNodes.length;s++)e.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(e.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(e,i){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),i&&i.viewBox&&e.setAttribute("viewBox",i.viewBox),e}_fetchIcon(e){const{url:i,options:r}=e,s=r?.withCredentials??!1;if(!this._httpClient)throw function yG(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const c=this._sanitizer.sanitize(l.q3G.RESOURCE_URL,i);if(!c)throw RL(i);const d=this._inProgressUrlFetches.get(c);if(d)return d;const p=this._httpClient.get(c,{responseType:"text",withCredentials:s}).pipe((0,Ye.U)(_=>X0(_)),zg(()=>this._inProgressUrlFetches.delete(c)),(0,wc.B)());return this._inProgressUrlFetches.set(c,p),p}_addSvgIconConfig(e,i,r){return this._svgIconConfigs.set(PL(e,i),r),this}_addSvgIconSetConfig(e,i){const r=this._iconSetConfigs.get(e);return r?r.push(i):this._iconSetConfigs.set(e,[i]),this}_svgElementFromConfig(e){if(!e.svgElement){const i=this._svgElementFromString(e.svgText);this._setSvgAttributes(i,e.options),e.svgElement=i}return e.svgElement}_getIconConfigFromResolvers(e,i){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](i,e);if(s)return bG(s)?new Sp(s.url,null,s.options):new Sp(s,null)}}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(xL,8),l.LFG($o),l.LFG(re,8),l.LFG(l.qLn))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function FS(n){return n.cloneNode(!0)}function PL(n,t){return n+":"+t}function bG(n){return!(!n.url||!n.options)}const wG=q0(class{constructor(n){this._elementRef=n}}),CG=new l.OlP("MAT_ICON_DEFAULT_OPTIONS"),EG=new l.OlP("mat-icon-location",{providedIn:"root",factory:function DG(){const n=(0,l.f3M)(re),t=n?n.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),NL=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],IG=NL.map(n=>`[${n}]`).join(", "),SG=/^url\(['"]?#(.*?)['"]?\)$/;let wR=(()=>{class n extends wG{constructor(e,i,r,s,c,d){super(e),this._iconRegistry=i,this._location=s,this._errorHandler=c,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=Qi.w0.EMPTY,d&&(d.color&&(this.color=this.defaultColor=d.color),d.fontSet&&(this.fontSet=d.fontSet)),r||e.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(e){this._inline=vi(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const i=this._cleanupFontValue(e);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const i=this._cleanupFontValue(e);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_splitIconName(e){if(!e)return["",""];const i=e.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let i=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=e.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>e.classList.remove(r)),i.forEach(r=>e.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(c=>{s.setAttribute(c.name,`url('${e}#${c.value}')`)})})}_cacheChildrenWithExternalReferences(e){const i=e.querySelectorAll(IG),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)NL.forEach(c=>{const d=i[s],p=d.getAttribute(c),_=p?p.match(SG):null;if(_){let w=r.get(d);w||(w=[],r.set(d,w)),w.push({name:c,value:_[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[i,r]=this._splitIconName(e);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(bn(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${s.message}`))})}}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(NS),l.$8M("aria-hidden"),l.Y36(EG),l.Y36(l.qLn),l.Y36(CG,8))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(e,i){2&e&&(l.uIk("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet)("fontIcon",i._usingFontIcon()?i.fontIcon:null),l.ekj("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[l.qOj],ngContentSelectors:gG,decls:1,vars:0,template:function(e,i){1&e&&(l.F$t(),l.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),n})(),FL=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Wn,Wn]}),n})();var LL=N(4408);let CR,AG=1;const LS={};function VL(n){return n in LS&&(delete LS[n],!0)}const TG={setImmediate(n){const t=AG++;return LS[t]=!0,CR||(CR=Promise.resolve()),CR.then(()=>VL(t)&&n()),t},clearImmediate(n){VL(n)}},{setImmediate:MG,clearImmediate:xG}=TG,VS={setImmediate(...n){const{delegate:t}=VS;return(t?.setImmediate||MG)(...n)},clearImmediate(n){const{delegate:t}=VS;return(t?.clearImmediate||xG)(n)},delegate:void 0};var BL=N(7565);const ER=new class RG extends BL.v{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;t=t||i.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw r}}}(class kG extends LL.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=VS.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(t,e,i);const{actions:s}=t;null!=e&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==e&&(VS.clearImmediate(e),t._scheduled=void 0)}});class UL{}const au="*";function nh(n,t){return{type:7,name:n,definitions:t,options:{}}}function ca(n,t=null){return{type:4,styles:t,timings:n}}function HL(n,t=null){return{type:3,steps:n,options:t}}function jL(n,t=null){return{type:2,steps:n,options:t}}function Li(n){return{type:6,styles:n,offset:null}}function zl(n,t,e){return{type:0,name:n,styles:t,options:e}}function To(n,t,e=null){return{type:1,expr:n,animation:t,options:e}}function DR(n=null){return{type:9,options:n}}function IR(n,t,e=null){return{type:11,selector:n,animation:t,options:e}}function zL(n){Promise.resolve().then(n)}class J0{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){zL(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class GL{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,i=0,r=0;const s=this.players.length;0==s?zL(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++e==s&&this._onFinish()}),c.onDestroy(()=>{++i==s&&this._onDestroy()}),c.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((c,d)=>Math.max(c,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(r)})}getPosition(){const t=this.players.reduce((e,i)=>null===e||i.totalTime>e.totalTime?i:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class AR{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class TR extends AR{constructor(t,e,i,r){super(),this.component=t,this.viewContainerRef=e,this.injector=i,this.componentFactoryResolver=r}}class ew extends AR{constructor(t,e,i,r){super(),this.templateRef=t,this.viewContainerRef=e,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class PG extends AR{constructor(t){super(),this.element=t instanceof l.SBq?t.nativeElement:t}}class MR{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof TR?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof ew?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof PG?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class NG extends MR{constructor(t,e,i,r,s){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=c=>{const d=c.element,p=this._document.createComment("dom-portal");d.parentNode.insertBefore(p,d),this.outletElement.appendChild(d),this._attachedPortal=c,super.setDisposeFn(()=>{p.parentNode&&p.parentNode.replaceChild(d,p)})},this._document=s}attachComponentPortal(t){const i=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(i,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=i.create(t.injector||this._defaultInjector||l.zs3.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let e=t.viewContainerRef,i=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(i);-1!==r&&e.remove(r)}),this._attachedPortal=t,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let xR=(()=>{class n extends MR{constructor(e,i,r){super(),this._componentFactoryResolver=e,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new l.vpe,this.attachDomPortal=s=>{const c=s.element,d=this._document.createComment("dom-portal");s.setAttachedHost(this),c.parentNode.insertBefore(d,c),this._getRootNode().appendChild(c),this._attachedPortal=s,super.setDisposeFn(()=>{d.parentNode&&d.parentNode.replaceChild(c,d)})},this._document=r}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(e){e.setAttachedHost(this);const i=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,s=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),c=i.createComponent(s,i.length,e.injector||i.injector);return i!==this._viewContainerRef&&this._getRootNode().appendChild(c.hostView.rootNodes[0]),super.setDisposeFn(()=>c.destroy()),this._attachedPortal=e,this._attachedRef=c,this.attached.emit(c),c}attachTemplatePortal(e){e.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l._Vd),l.Y36(l.s_b),l.Y36(re))},n.\u0275dir=l.lG2({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[l.qOj]}),n})(),tw=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();const nw={schedule(n){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:i}=nw;i&&(t=i.requestAnimationFrame,e=i.cancelAnimationFrame);const r=t(s=>{e=void 0,n(s)});return new Qi.w0(()=>e?.(r))},requestAnimationFrame(...n){const{delegate:t}=nw;return(t?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:t}=nw;return(t?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};new class LG extends BL.v{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;t=t||i.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw r}}}(class FG extends LL.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=nw.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(t,e,i);const{actions:s}=t;null!=e&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==e&&(nw.cancelAnimationFrame(e),t._scheduled=void 0)}});function WL(n,t=Xu.z){return function BG(n){return(0,Un.e)((t,e)=>{let i=!1,r=null,s=null,c=!1;const d=()=>{if(s?.unsubscribe(),s=null,i){i=!1;const _=r;r=null,e.next(_)}c&&e.complete()},p=()=>{s=null,c&&e.complete()};t.subscribe((0,Kn.x)(e,_=>{i=!0,r=_,s||(0,cr.Xf)(n(_)).subscribe(s=(0,Kn.x)(e,d,p))},()=>{c=!0,(!i||!s||s.closed)&&e.complete()}))})}(()=>nR(n,t))}let HG=(()=>{class n{constructor(e,i,r){this._ngZone=e,this._platform=i,this._scrolled=new vt.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new Ni.y(i=>{this._globalSubscription||this._addGlobalListener();const r=e>0?this._scrolled.pipe(WL(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Je()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){const r=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe(tn(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(e){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,e)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,i){let r=ou(i),s=e.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>aa(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.R0b),l.LFG(D),l.LFG(re,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),iw=(()=>{class n{constructor(e,i,r){this._platform=e,this._change=new vt.x,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(e.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,i=this._getWindow(),r=e.documentElement,s=r.getBoundingClientRect();return{top:-s.top||e.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||e.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(WL(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(D),l.LFG(l.R0b),l.LFG(re,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),k_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),qL=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[W0,k_,W0,k_]}),n})();const YL=Pt();class $G{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Cr(-this._previousScrollPosition.left),t.style.top=Cr(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,i=t.style,r=this._document.body.style,s=i.scrollBehavior||"",c=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),YL&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),YL&&(i.scrollBehavior=s,r.scrollBehavior=c)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,i=this._viewportRuler.getViewportSize();return e.scrollHeight>i.height||e.scrollWidth>i.width}}class zG{constructor(t,e,i,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class KL{enable(){}disable(){}attach(){}}function kR(n,t){return t.some(e=>n.bottom<e.top||n.top>e.bottom||n.right<e.left||n.left>e.right)}function ZL(n,t){return t.some(e=>n.top<e.top||n.bottom>e.bottom||n.left<e.left||n.right>e.right)}class GG{constructor(t,e,i,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();kR(e,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let WG=(()=>{class n{constructor(e,i,r,s){this._scrollDispatcher=e,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new KL,this.close=c=>new zG(this._scrollDispatcher,this._ngZone,this._viewportRuler,c),this.block=()=>new $G(this._viewportRuler,this._document),this.reposition=c=>new GG(this._scrollDispatcher,this._viewportRuler,this._ngZone,c),this._document=s}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(HG),l.LFG(iw),l.LFG(l.R0b),l.LFG(re))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class rw{constructor(t){if(this.scrollStrategy=new KL,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const i of e)void 0!==t[i]&&(this[i]=t[i])}}}class qG{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let QL=(()=>{class n{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const i=this._attachedOverlays.indexOf(e);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(re))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),YG=(()=>{class n extends QL{constructor(e,i){super(e),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let c=s.length-1;c>-1;c--)if(s[c]._keydownEvents.observers.length>0){const d=s[c]._keydownEvents;this._ngZone?this._ngZone.run(()=>d.next(r)):d.next(r);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(re),l.LFG(l.R0b,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),KG=(()=>{class n extends QL{constructor(e,i,r){super(e),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=la(s)},this._clickListener=s=>{const c=la(s),d="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:c;this._pointerDownEventTarget=null;const p=this._attachedOverlays.slice();for(let _=p.length-1;_>-1;_--){const w=p[_];if(w._outsidePointerEvents.observers.length<1||!w.hasAttached())continue;if(w.overlayElement.contains(c)||w.overlayElement.contains(d))break;const I=w._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>I.next(s)):I.next(s)}}}add(e){if(super.add(e),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(re),l.LFG(D),l.LFG(l.R0b,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),BS=(()=>{class n{constructor(e,i){this._platform=i,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||Cp()){const r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(e),Cp()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(re),l.LFG(D))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class sw{constructor(t,e,i,r,s,c,d,p,_,w=!1){this._portalOutlet=t,this._host=e,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=c,this._document=d,this._location=p,this._outsideClickDispatcher=_,this._animationsDisabled=w,this._backdropElement=null,this._backdropClick=new vt.x,this._attachments=new vt.x,this._detachments=new vt.x,this._locationChanges=Qi.w0.EMPTY,this._backdropClickHandler=I=>this._backdropClick.next(I),this._backdropTransitionendHandler=I=>{this._disposeBackdrop(I.target)},this._keydownEvents=new vt.x,this._outsidePointerEvents=new vt.x,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(bn(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof e?.onDestroy&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config={...this._config,...t},this._updateElementSize()}setDirection(t){this._config={...this._config,direction:t},this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=Cr(this._config.width),t.height=Cr(this._config.height),t.minWidth=Cr(this._config.minWidth),t.minHeight=Cr(this._config.minHeight),t.maxWidth=Cr(this._config.maxWidth),t.maxHeight=Cr(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;if(t){if(this._animationsDisabled)return void this._disposeBackdrop(t);t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,i){const r=TS(e||[]).filter(s=>!!s);r.length&&(i?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(dr((0,Pn.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const XL="cdk-overlay-connected-position-bounding-box",ZG=/([A-Za-z%]+)$/;class QG{constructor(t,e,i,r,s){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new vt.x,this._resizeSubscription=Qi.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(XL),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let c;for(let d of this._preferredPositions){let p=this._getOriginPoint(t,r,d),_=this._getOverlayPoint(p,e,d),w=this._getOverlayFit(_,e,i,d);if(w.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(d,p);this._canFitWithFlexibleDimensions(w,_,i)?s.push({position:d,origin:p,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(p,d)}):(!c||c.overlayFit.visibleArea<w.visibleArea)&&(c={overlayFit:w,overlayPoint:_,originPoint:p,position:d,overlayRect:e})}if(s.length){let d=null,p=-1;for(const _ of s){const w=_.boundingBoxRect.width*_.boundingBoxRect.height*(_.position.weight||1);w>p&&(p=w,d=_)}return this._isPushed=!1,void this._applyPosition(d.position,d.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(c.position,c.originPoint);this._applyPosition(c.position,c.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Ap(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(XL),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,i){let r,s;if("center"==i.originX)r=t.left+t.width/2;else{const c=this._isRtl()?t.right:t.left,d=this._isRtl()?t.left:t.right;r="start"==i.originX?c:d}return e.left<0&&(r-=e.left),s="center"==i.originY?t.top+t.height/2:"top"==i.originY?t.top:t.bottom,e.top<0&&(s-=e.top),{x:r,y:s}}_getOverlayPoint(t,e,i){let r,s;return r="center"==i.overlayX?-e.width/2:"start"===i.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,s="center"==i.overlayY?-e.height/2:"top"==i.overlayY?0:-e.height,{x:t.x+r,y:t.y+s}}_getOverlayFit(t,e,i,r){const s=eV(e);let{x:c,y:d}=t,p=this._getOffset(r,"x"),_=this._getOffset(r,"y");p&&(c+=p),_&&(d+=_);let T=0-d,O=d+s.height-i.height,U=this._subtractOverflows(s.width,0-c,c+s.width-i.width),W=this._subtractOverflows(s.height,T,O),ie=U*W;return{visibleArea:ie,isCompletelyWithinViewport:s.width*s.height===ie,fitsInViewportVertically:W===s.height,fitsInViewportHorizontally:U==s.width}}_canFitWithFlexibleDimensions(t,e,i){if(this._hasFlexibleDimensions){const r=i.bottom-e.y,s=i.right-e.x,c=JL(this._overlayRef.getConfig().minHeight),d=JL(this._overlayRef.getConfig().minWidth),_=t.fitsInViewportHorizontally||null!=d&&d<=s;return(t.fitsInViewportVertically||null!=c&&c<=r)&&_}return!1}_pushOverlayOnScreen(t,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const r=eV(e),s=this._viewportRect,c=Math.max(t.x+r.width-s.width,0),d=Math.max(t.y+r.height-s.height,0),p=Math.max(s.top-i.top-t.y,0),_=Math.max(s.left-i.left-t.x,0);let w=0,I=0;return w=r.width<=s.width?_||-c:t.x<this._viewportMargin?s.left-i.left-t.x:0,I=r.height<=s.height?p||-d:t.y<this._viewportMargin?s.top-i.top-t.y:0,this._previousPushAmount={x:w,y:I},{x:t.x+w,y:t.y+I}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new qG(t,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=t.overlayY;i="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let s=0;s<e.length;s++)e[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(t,e){const i=this._viewportRect,r=this._isRtl();let s,c,d,w,I,T;if("top"===e.overlayY)c=t.y,s=i.height-c+this._viewportMargin;else if("bottom"===e.overlayY)d=i.height-t.y+2*this._viewportMargin,s=i.height-d+this._viewportMargin;else{const O=Math.min(i.bottom-t.y+i.top,t.y),U=this._lastBoundingBoxSize.height;s=2*O,c=t.y-O,s>U&&!this._isInitialRender&&!this._growAfterOpen&&(c=t.y-U/2)}if("end"===e.overlayX&&!r||"start"===e.overlayX&&r)T=i.width-t.x+this._viewportMargin,w=t.x-this._viewportMargin;else if("start"===e.overlayX&&!r||"end"===e.overlayX&&r)I=t.x,w=i.right-t.x;else{const O=Math.min(i.right-t.x+i.left,t.x),U=this._lastBoundingBoxSize.width;w=2*O,I=t.x-O,w>U&&!this._isInitialRender&&!this._growAfterOpen&&(I=t.x-U/2)}return{top:c,left:I,bottom:d,right:T,width:w,height:s}}_setBoundingBoxStyles(t,e){const i=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,c=this._overlayRef.getConfig().maxWidth;r.height=Cr(i.height),r.top=Cr(i.top),r.bottom=Cr(i.bottom),r.width=Cr(i.width),r.left=Cr(i.left),r.right=Cr(i.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=Cr(s)),c&&(r.maxWidth=Cr(c))}this._lastBoundingBoxSize=i,Ap(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Ap(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Ap(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,c=this._overlayRef.getConfig();if(r){const w=this._viewportRuler.getViewportScrollPosition();Ap(i,this._getExactOverlayY(e,t,w)),Ap(i,this._getExactOverlayX(e,t,w))}else i.position="static";let d="",p=this._getOffset(e,"x"),_=this._getOffset(e,"y");p&&(d+=`translateX(${p}px) `),_&&(d+=`translateY(${_}px)`),i.transform=d.trim(),c.maxHeight&&(r?i.maxHeight=Cr(c.maxHeight):s&&(i.maxHeight="")),c.maxWidth&&(r?i.maxWidth=Cr(c.maxWidth):s&&(i.maxWidth="")),Ap(this._pane.style,i)}_getExactOverlayY(t,e,i){let r={top:"",bottom:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===t.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=Cr(s.y),r}_getExactOverlayX(t,e,i){let c,r={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),c=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===c?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=Cr(s.x),r}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:ZL(t,i),isOriginOutsideView:kR(t,i),isOverlayClipped:ZL(e,i),isOverlayOutsideView:kR(e,i)}}_subtractOverflows(t,...e){return e.reduce((i,r)=>i-Math.max(r,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+t-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?t.offsetX??this._offsetX:t.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&TS(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof l.SBq)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,i=t.height||0;return{top:t.y,bottom:t.y+i,left:t.x,right:t.x+e,height:i,width:e}}}function Ap(n,t){for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function JL(n){if("number"!=typeof n&&null!=n){const[t,e]=n.split(ZG);return e&&"px"!==e?null:parseFloat(t)}return n||null}function eV(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const tV="cdk-global-overlay-wrapper";class XG{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(tV),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:c,maxHeight:d}=i,p=!("100%"!==r&&"100vw"!==r||c&&"100%"!==c&&"100vw"!==c),_=!("100%"!==s&&"100vh"!==s||d&&"100%"!==d&&"100vh"!==d),w=this._xPosition,I=this._xOffset,T="rtl"===this._overlayRef.getConfig().direction;let O="",U="",W="";p?W="flex-start":"center"===w?(W="center",T?U=I:O=I):T?"left"===w||"end"===w?(W="flex-end",O=I):("right"===w||"start"===w)&&(W="flex-start",U=I):"left"===w||"start"===w?(W="flex-start",O=I):("right"===w||"end"===w)&&(W="flex-end",U=I),t.position=this._cssPosition,t.marginLeft=p?"0":O,t.marginTop=_?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=p?"0":U,e.justifyContent=W,e.alignItems=_?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove(tV),i.justifyContent=i.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let JG=(()=>{class n{constructor(e,i,r,s){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new XG}flexibleConnectedTo(e){return new QG(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(iw),l.LFG(re),l.LFG(D),l.LFG(BS))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),eW=0,Mo=(()=>{class n{constructor(e,i,r,s,c,d,p,_,w,I,T,O){this.scrollStrategies=e,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=c,this._injector=d,this._ngZone=p,this._document=_,this._directionality=w,this._location=I,this._outsideClickDispatcher=T,this._animationsModuleType=O}create(e){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),c=new rw(e);return c.direction=c.direction||this._directionality.value,new sw(s,i,r,c,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(e){const i=this._document.createElement("div");return i.id="cdk-overlay-"+eW++,i.classList.add("cdk-overlay-pane"),e.appendChild(i),i}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(l.z2F)),new NG(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(WG),l.LFG(BS),l.LFG(l._Vd),l.LFG(JG),l.LFG(YG),l.LFG(l.zs3),l.LFG(l.R0b),l.LFG(re),l.LFG(Jd),l.LFG(Fe),l.LFG(KG),l.LFG(l.QbO,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const tW=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],nV=new l.OlP("cdk-connected-overlay-scroll-strategy");let iV=(()=>{class n{constructor(e){this.elementRef=e}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),n})(),rV=(()=>{class n{constructor(e,i,r,s,c){this._overlay=e,this._dir=c,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=Qi.w0.EMPTY,this._attachSubscription=Qi.w0.EMPTY,this._detachSubscription=Qi.w0.EMPTY,this._positionSubscription=Qi.w0.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new l.vpe,this.positionChange=new l.vpe,this.attach=new l.vpe,this.detach=new l.vpe,this.overlayKeydown=new l.vpe,this.overlayOutsideClick=new l.vpe,this._templatePortal=new ew(i,r),this._scrollStrategyFactory=s,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=vi(e)}get lockPosition(){return this._lockPosition}set lockPosition(e){this._lockPosition=vi(e)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(e){this._flexibleDimensions=vi(e)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(e){this._growAfterOpen=vi(e)}get push(){return this._push}set push(e){this._push=vi(e)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=tW);const e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(i=>{this.overlayKeydown.next(i),27===i.keyCode&&!this.disableClose&&!Ao(i)&&(i.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(i=>{this.overlayOutsideClick.next(i)})}_buildConfig(){const e=this._position=this.positionStrategy||this._createPositionStrategy(),i=new rw({direction:this._dir,positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(i.width=this.width),(this.height||0===this.height)&&(i.height=this.height),(this.minWidth||0===this.minWidth)&&(i.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(i.minHeight=this.minHeight),this.backdropClass&&(i.backdropClass=this.backdropClass),this.panelClass&&(i.panelClass=this.panelClass),i}_updatePositionStrategy(e){const i=this.positions.map(r=>({originX:r.originX,originY:r.originY,overlayX:r.overlayX,overlayY:r.overlayY,offsetX:r.offsetX||this.offsetX,offsetY:r.offsetY||this.offsetY,panelClass:r.panelClass||void 0}));return e.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(i).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const e=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(e),e}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof iV?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(tI(()=>this.positionChange.observers.length>0)).subscribe(e=>{this.positionChange.emit(e),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Mo),l.Y36(l.Rgc),l.Y36(l.s_b),l.Y36(nV),l.Y36(Jd,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[l.TTD]}),n})();const iW={provide:nV,deps:[Mo],useFactory:function nW(n){return()=>n.scrollStrategies.reposition()}};let R_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[Mo,iW],imports:[W0,tw,qL,qL]}),n})();const rW=["mat-menu-item",""];function sW(n,t){1&n&&(l.O4$(),l.TgZ(0,"svg",2),l._UZ(1,"polygon",3),l.qZA())}const sV=["*"];function oW(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",0),l.NdJ("keydown",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s._handleKeydown(r))})("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.closed.emit("click"))})("@transformMenu.start",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s._onAnimationStart(r))})("@transformMenu.done",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s._onAnimationDone(r))}),l.TgZ(1,"div",1),l.Hsn(2),l.qZA()()}if(2&n){const e=l.oxw();l.Q6J("id",e.panelId)("ngClass",e._classList)("@transformMenu",e._panelAnimationState),l.uIk("aria-label",e.ariaLabel||null)("aria-labelledby",e.ariaLabelledby||null)("aria-describedby",e.ariaDescribedby||null)}}const US={transformMenu:nh("transformMenu",[zl("void",Li({opacity:0,transform:"scale(0.8)"})),To("void => enter",ca("120ms cubic-bezier(0, 0, 0.2, 1)",Li({opacity:1,transform:"scale(1)"}))),To("* => void",ca("100ms 25ms linear",Li({opacity:0})))]),fadeInItems:nh("fadeInItems",[zl("showing",Li({opacity:1})),To("void => *",[Li({opacity:0}),ca("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},aW=new l.OlP("MatMenuContent"),RR=new l.OlP("MAT_MENU_PANEL"),lW=Y0(uR(class{}));let HS=(()=>{class n extends lW{constructor(e,i,r,s,c){super(),this._elementRef=e,this._document=i,this._focusMonitor=r,this._parentMenu=s,this._changeDetectorRef=c,this.role="menuitem",this._hovered=new vt.x,this._focused=new vt.x,this._highlighted=!1,this._triggersSubmenu=!1,s?.addItem?.(this)}focus(e,i){this._focusMonitor&&e?this._focusMonitor.focusVia(this._getHostElement(),e,i):this._getHostElement().focus(i),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(e){this.disabled&&(e.preventDefault(),e.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){const e=this._elementRef.nativeElement.cloneNode(!0),i=e.querySelectorAll("mat-icon, .material-icons");for(let r=0;r<i.length;r++)i[r].remove();return e.textContent?.trim()||""}_setHighlighted(e){this._highlighted=e,this._changeDetectorRef?.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(re),l.Y36(Ip),l.Y36(RR,8),l.Y36(l.sBO))},n.\u0275cmp=l.Xpm({type:n,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(e,i){1&e&&l.NdJ("click",function(s){return i._checkDisabled(s)})("mouseenter",function(){return i._handleMouseEnter()}),2&e&&(l.uIk("role",i.role)("tabindex",i._getTabIndex())("aria-disabled",i.disabled.toString())("disabled",i.disabled||null),l.ekj("mat-menu-item",!0)("mat-menu-item-highlighted",i._highlighted)("mat-menu-item-submenu-trigger",i._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[l.qOj],attrs:rW,ngContentSelectors:sV,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(e,i){1&e&&(l.F$t(),l.Hsn(0),l._UZ(1,"div",0),l.YNc(2,sW,2,0,"svg",1)),2&e&&(l.xp6(1),l.Q6J("matRippleDisabled",i.disableRipple||i.disabled)("matRippleTrigger",i._getHostElement()),l.xp6(1),l.Q6J("ngIf",i._triggersSubmenu))},dependencies:[Rn,Z0],encapsulation:2,changeDetection:0}),n})();const oV=new l.OlP("mat-menu-default-options",{providedIn:"root",factory:function cW(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let uW=0,ow=(()=>{class n{constructor(e,i,r,s){this._elementRef=e,this._ngZone=i,this._defaultOptions=r,this._changeDetectorRef=s,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new l.n_E,this._tabSubscription=Qi.w0.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new vt.x,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new l.vpe,this.close=this.closed,this.panelId="mat-menu-panel-"+uW++}get xPosition(){return this._xPosition}set xPosition(e){this._xPosition=e,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(e){this._yPosition=e,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(e){this._overlapTrigger=vi(e)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=vi(e)}set panelClass(e){const i=this._previousPanelClass;i&&i.length&&i.split(" ").forEach(r=>{this._classList[r]=!1}),this._previousPanelClass=e,e&&e.length&&(e.split(" ").forEach(r=>{this._classList[r]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(e){this.panelClass=e}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new nL(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(Gi(this._directDescendantItems),_n(e=>(0,Pn.T)(...e.map(i=>i._focused)))).subscribe(e=>this._keyManager.updateActiveItem(e)),this._directDescendantItems.changes.subscribe(e=>{const i=this._keyManager;if("enter"===this._panelAnimationState&&i.activeItem?._hasFocus()){const r=e.toArray(),s=Math.max(0,Math.min(r.length-1,i.activeItemIndex||0));r[s]&&!r[s].disabled?i.setActiveItem(s):i.setNextItemActive()}})}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe(Gi(this._directDescendantItems),_n(i=>(0,Pn.T)(...i.map(r=>r._hovered))))}addItem(e){}removeItem(e){}_handleKeydown(e){const i=e.keyCode,r=this._keyManager;switch(i){case 27:Ao(e)||(e.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(38===i||40===i)&&r.setFocusOrigin("keyboard"),void r.onKeydown(e)}e.stopPropagation()}focusFirstItem(e="program"){this._ngZone.onStable.pipe(bn(1)).subscribe(()=>{let i=null;if(this._directDescendantItems.length&&(i=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!i||!i.contains(document.activeElement)){const r=this._keyManager;r.setFocusOrigin(e).setFirstItemActive(),!r.activeItem&&i&&i.focus()}})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(e){const i=Math.min(this._baseElevation+e,24),r=`${this._elevationPrefix}${i}`,s=Object.keys(this._classList).find(c=>c.startsWith(this._elevationPrefix));(!s||s===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[r]=!0,this._previousElevation=r)}setPositionClasses(e=this.xPosition,i=this.yPosition){const r=this._classList;r["mat-menu-before"]="before"===e,r["mat-menu-after"]="after"===e,r["mat-menu-above"]="above"===i,r["mat-menu-below"]="below"===i,this._changeDetectorRef?.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(e){this._animationDone.next(e),this._isAnimating=!1}_onAnimationStart(e){this._isAnimating=!0,"enter"===e.toState&&0===this._keyManager.activeItemIndex&&(e.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(Gi(this._allItems)).subscribe(e=>{this._directDescendantItems.reset(e.filter(i=>i._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.R0b),l.Y36(oV),l.Y36(l.sBO))},n.\u0275dir=l.lG2({type:n,contentQueries:function(e,i,r){if(1&e&&(l.Suo(r,aW,5),l.Suo(r,HS,5),l.Suo(r,HS,4)),2&e){let s;l.iGM(s=l.CRH())&&(i.lazyContent=s.first),l.iGM(s=l.CRH())&&(i._allItems=s),l.iGM(s=l.CRH())&&(i.items=s)}},viewQuery:function(e,i){if(1&e&&l.Gf(l.Rgc,5),2&e){let r;l.iGM(r=l.CRH())&&(i.templateRef=r.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),n})(),dW=(()=>{class n extends ow{constructor(e,i,r,s){super(e,i,r,s),this._elevationPrefix="mat-elevation-z",this._baseElevation=4}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.R0b),l.Y36(oV),l.Y36(l.sBO))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(e,i){2&e&&l.uIk("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[l._Bn([{provide:RR,useExisting:n}]),l.qOj],ngContentSelectors:sV,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(e,i){1&e&&(l.F$t(),l.YNc(0,oW,3,6,"ng-template"))},dependencies:[Cn],styles:['mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px;position:relative}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}'],encapsulation:2,data:{animation:[US.transformMenu,US.fadeInItems]},changeDetection:0}),n})();const aV=new l.OlP("mat-menu-scroll-strategy"),fW={provide:aV,deps:[Mo],useFactory:function hW(n){return()=>n.scrollStrategies.reposition()}},lV=We({passive:!0});let pW=(()=>{class n{constructor(e,i,r,s,c,d,p,_,w){this._overlay=e,this._element=i,this._viewContainerRef=r,this._menuItemInstance=d,this._dir=p,this._focusMonitor=_,this._ngZone=w,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=Qi.w0.EMPTY,this._hoverSubscription=Qi.w0.EMPTY,this._menuCloseSubscription=Qi.w0.EMPTY,this._handleTouchStart=I=>{lR(I)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new l.vpe,this.onMenuOpen=this.menuOpened,this.menuClosed=new l.vpe,this.onMenuClose=this.menuClosed,this._scrollStrategy=s,this._parentMaterialMenu=c instanceof ow?c:void 0,i.nativeElement.addEventListener("touchstart",this._handleTouchStart,lV),d&&(d._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(e){this.menu=e}get menu(){return this._menu}set menu(e){e!==this._menu&&(this._menu=e,this._menuCloseSubscription.unsubscribe(),e&&(this._menuCloseSubscription=e.close.subscribe(i=>{this._destroyMenu(i),("click"===i||"tab"===i)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(i)})))}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,lV),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){const e=this.menu;if(this._menuOpen||!e)return;const i=this._createOverlay(e),r=i.getConfig(),s=r.positionStrategy;this._setPosition(e,s),r.hasBackdrop=e.hasBackdrop??!this.triggersSubmenu(),i.attach(this._getPortal(e)),e.lazyContent&&e.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(e),e instanceof ow&&(e._startAnimation(),e._directDescendantItems.changes.pipe(dr(e.close)).subscribe(()=>{s.withLockedPosition(!1).reapplyLastPosition(),s.withLockedPosition(!0)}))}closeMenu(){this.menu?.close.emit()}focus(e,i){this._focusMonitor&&e?this._focusMonitor.focusVia(this._element,e,i):this._element.nativeElement.focus(i)}updatePosition(){this._overlayRef?.updatePosition()}_destroyMenu(e){if(!this._overlayRef||!this.menuOpen)return;const i=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===e||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,i instanceof ow?(i._resetAnimation(),i.lazyContent?i._animationDone.pipe(tn(r=>"void"===r.toState),bn(1),dr(i.lazyContent._attached)).subscribe({next:()=>i.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),i?.lazyContent?.detach())}_initMenu(e){e.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,e.direction=this.dir,this._setMenuElevation(e),e.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(e){if(e.setElevation){let i=0,r=e.parentMenu;for(;r;)i++,r=r.parentMenu;e.setElevation(i)}}_setIsMenuOpen(e){this._menuOpen=e,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(e)}_createOverlay(e){if(!this._overlayRef){const i=this._getOverlayConfig(e);this._subscribeToPositions(e,i.positionStrategy),this._overlayRef=this._overlay.create(i),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(e){return new rw({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:e.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:e.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(e,i){e.setPositionClasses&&i.positionChanges.subscribe(r=>{const s="start"===r.connectionPair.overlayX?"after":"before",c="top"===r.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>e.setPositionClasses(s,c)):e.setPositionClasses(s,c)})}_setPosition(e,i){let[r,s]="before"===e.xPosition?["end","start"]:["start","end"],[c,d]="above"===e.yPosition?["bottom","top"]:["top","bottom"],[p,_]=[c,d],[w,I]=[r,s],T=0;if(this.triggersSubmenu()){if(I=r="before"===e.xPosition?"start":"end",s=w="end"===r?"start":"end",this._parentMaterialMenu){if(null==this._parentInnerPadding){const O=this._parentMaterialMenu.items.first;this._parentInnerPadding=O?O._getHostElement().offsetTop:0}T="bottom"===c?this._parentInnerPadding:-this._parentInnerPadding}}else e.overlapTrigger||(p="top"===c?"bottom":"top",_="top"===d?"bottom":"top");i.withPositions([{originX:r,originY:p,overlayX:w,overlayY:c,offsetY:T},{originX:s,originY:p,overlayX:I,overlayY:c,offsetY:T},{originX:r,originY:_,overlayX:w,overlayY:d,offsetY:-T},{originX:s,originY:_,overlayX:I,overlayY:d,offsetY:-T}])}_menuClosingActions(){const e=this._overlayRef.backdropClick(),i=this._overlayRef.detachments(),r=this._parentMaterialMenu?this._parentMaterialMenu.closed:Je(),s=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(tn(c=>c!==this._menuItemInstance),tn(()=>this._menuOpen)):Je();return(0,Pn.T)(e,r,s,i)}_handleMousedown(e){aR(e)||(this._openedBy=0===e.button?"mouse":void 0,this.triggersSubmenu()&&e.preventDefault())}_handleKeydown(e){const i=e.keyCode;(13===i||32===i)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===i&&"ltr"===this.dir||37===i&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(e){this.triggersSubmenu()?(e.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(tn(e=>e===this._menuItemInstance&&!e.disabled),E_(0,ER)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof ow&&this.menu._isAnimating?this.menu._animationDone.pipe(bn(1),E_(0,ER),dr(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(e){return(!this._portal||this._portal.templateRef!==e.templateRef)&&(this._portal=new ew(e.templateRef,this._viewContainerRef)),this._portal}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Mo),l.Y36(l.SBq),l.Y36(l.s_b),l.Y36(aV),l.Y36(RR,8),l.Y36(HS,10),l.Y36(Jd,8),l.Y36(Ip),l.Y36(l.R0b))},n.\u0275dir=l.lG2({type:n,hostVars:3,hostBindings:function(e,i){1&e&&l.NdJ("click",function(s){return i._handleClick(s)})("mousedown",function(s){return i._handleMousedown(s)})("keydown",function(s){return i._handleKeydown(s)}),2&e&&l.uIk("aria-haspopup",i.menu?"menu":null)("aria-expanded",i.menuOpen||null)("aria-controls",i.menuOpen?i.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),n})(),mW=(()=>{class n extends pW{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=l.n5z(n)))(i||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-menu-trigger"],exportAs:["matMenuTrigger"],features:[l.qOj]}),n})(),cV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[fW],imports:[mr,Wn,kS,R_,k_,Wn]}),n})();const gW=["*",[["mat-toolbar-row"]]],_W=["*","mat-toolbar-row"],yW=q0(class{constructor(n){this._elementRef=n}});let vW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),bW=(()=>{class n extends yW{constructor(e,i,r){super(e),this._platform=i,this._document=r}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(D),l.Y36(re))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-toolbar"]],contentQueries:function(e,i,r){if(1&e&&l.Suo(r,vW,5),2&e){let s;l.iGM(s=l.CRH())&&(i._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(e,i){2&e&&l.ekj("mat-toolbar-multiple-rows",i._toolbarRows.length>0)("mat-toolbar-single-row",0===i._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[l.qOj],ngContentSelectors:_W,decls:2,vars:0,template:function(e,i){1&e&&(l.F$t(gW),l.Hsn(0),l.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),n})(),uV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Wn,Wn]}),n})(),OR=(()=>{class n{constructor(e,i,r,s){this.authService=e,this.element=i,this.templateRef=r,this.viewContainer=s,this.authService.isAdmin$.subscribe(c=>{c?this.viewContainer.createEmbeddedView(this.templateRef):this.viewContainer.clear()})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(oa),l.Y36(l.SBq),l.Y36(l.Rgc),l.Y36(l.s_b))},n.\u0275dir=l.lG2({type:n,selectors:[["","obAdminOnly",""]]}),n})(),dV=(()=>{class n{constructor(e,i,r,s){this.authService=e,this.element=i,this.templateRef=r,this.viewContainer=s,this.authService.isAuthorized$.subscribe(c=>{c?this.viewContainer.createEmbeddedView(this.templateRef):this.viewContainer.clear()})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(oa),l.Y36(l.SBq),l.Y36(l.Rgc),l.Y36(l.s_b))},n.\u0275dir=l.lG2({type:n,selectors:[["","obAuthorizedOnly",""]]}),n})();function wW(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"button",8),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.login())}),l._uU(1," Login "),l.qZA()}}function CW(n,t){1&n&&(l.TgZ(0,"a",12),l._uU(1,"Home"),l.qZA())}function EW(n,t){1&n&&(l.TgZ(0,"a",13),l._uU(1,"Badges"),l.qZA())}function DW(n,t){1&n&&(l.TgZ(0,"a",14),l._uU(1,"Users"),l.qZA())}function IW(n,t){if(1&n){const e=l.EpF();l.ynx(0)(1),l.YNc(2,CW,2,0,"a",9),l.YNc(3,EW,2,0,"a",10),l.YNc(4,DW,2,0,"a",11),l._UZ(5,"mat-divider"),l.BQk(),l.TgZ(6,"button",8),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.logout())}),l._uU(7," Logout "),l.TgZ(8,"em"),l._uU(9),l.ALo(10,"async"),l.qZA()(),l.BQk()}if(2&n){const e=l.oxw();l.xp6(9),l.Oqu(l.lcZ(10,1,e.username$))}}let hV=(()=>{class n{constructor(e){this.authService=e,this.version=Ss_appVersion,this.isAuthenticated$=this.authService.isAuthenticated$,this.username$=this.authService.user$.pipe((0,Ye.U)(i=>i?.email))}ngOnInit(){}login(){this.authService.login()}logout(){this.authService.logout()}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(oa))},n.\u0275cmp=l.Xpm({type:n,selectors:[["ob-toolbar"]],decls:19,vars:8,consts:[["color","primary"],["mat-button","","routerLink","/"],[1,"spacer"],["mat-button","",3,"matMenuTriggerFor"],["xPosition","before"],["menu","matMenu"],["mat-menu-item","",3,"click",4,"ngIf"],[4,"ngIf"],["mat-menu-item","",3,"click"],["mat-menu-item","","routerLinkActive","active","routerLink","/home",4,"obAuthorizedOnly"],["mat-menu-item","","routerLinkActive","active","routerLink","/badges",4,"obAuthorizedOnly"],["mat-menu-item","","routerLinkActive","active","routerLink","/users",4,"obAdminOnly"],["mat-menu-item","","routerLinkActive","active","routerLink","/home"],["mat-menu-item","","routerLinkActive","active","routerLink","/badges"],["mat-menu-item","","routerLinkActive","active","routerLink","/users"]],template:function(e,i){if(1&e&&(l.TgZ(0,"mat-toolbar",0)(1,"button",1)(2,"mat-icon"),l._uU(3,"apartment"),l.qZA(),l.TgZ(4,"span"),l._uU(5,"Office Buddy "),l.TgZ(6,"small")(7,"em"),l._uU(8),l.qZA()()()(),l._UZ(9,"span",2),l.TgZ(10,"button",3)(11,"mat-icon"),l._uU(12,"menu"),l.qZA()(),l.TgZ(13,"mat-menu",4,5),l.YNc(15,wW,2,0,"button",6),l.ALo(16,"async"),l.YNc(17,IW,11,3,"ng-container",7),l.ALo(18,"async"),l.qZA()()),2&e){const r=l.MAs(14);l.xp6(8),l.hij("v",i.version||"0",""),l.xp6(2),l.Q6J("matMenuTriggerFor",r),l.xp6(5),l.Q6J("ngIf",!l.lcZ(16,4,i.isAuthenticated$)),l.xp6(2),l.Q6J("ngIf",l.lcZ(18,6,i.isAuthenticated$))}},dependencies:[Rn,x_,sG,wR,dW,HS,mW,bW,Zd,bp,B0,OR,dV,_a],styles:[".spacer[_ngcontent-%COMP%]{flex:1 1 auto}.mat-menu-item.active[_ngcontent-%COMP%]{background-color:#efefef}"]}),n})(),SW=(()=>{class n{constructor(e,i){this.authService=e,this.appCheckUpdateService=i,this.isAuthorized$=this.authService.isAuthorized$,this.isAuthenticated$=this.authService.isAuthenticated$}ngOnInit(){this.appCheckUpdateService.init()}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(oa),l.Y36(v))},n.\u0275cmp=l.Xpm({type:n,selectors:[["ob-root"]],decls:3,vars:0,consts:[["id","app-toolbar"],["id","app-content"]],template:function(e,i){1&e&&(l._UZ(0,"ob-toolbar",0),l.TgZ(1,"div",1),l._UZ(2,"router-outlet"),l.qZA())},dependencies:[hV,S0],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;position:absolute;inset:0}#app-content[_ngcontent-%COMP%]{flex-grow:1;padding:20px;overflow:auto}"]}),n})();function jS(){return(0,Un.e)((n,t)=>{let e,i=!1;n.subscribe((0,Kn.x)(t,r=>{const s=e;e=r,i&&t.next([s,r]),i=!0}))})}var PR=N(655),NR=N(7982);function TW(n){return new Ni.y(function(t){return{unsubscribe:(0,dl.v)(n,t.next.bind(t),t.error.bind(t),t.complete.bind(t))}})}class $S{constructor(t){return t}}class pV{constructor(){return(0,Lt.vb)("auth")}}const OW=(0,Lt.u3)(TW,!0);class aw{constructor(t){return t}}const gV=Lt.nk.async,NW=(0,Lt.u3)(NR.Kz,!0),FW=(0,Lt.u3)(NR.Iv,!0);let _V=(()=>{class n{constructor(e,i,r){let s;this.disposables=[],(0,Ir.KN)("angularfire",Lt.q4.full,"user-tracking"),this.initialized=i.runOutsideAngular(()=>new Promise(c=>{s=c})),gV().then(()=>{const c=r.get(aw);c?this.disposables=[OW(e).subscribe(d=>{FW(c,d?.uid),s()})]:s()})}ngOnDestroy(){this.disposables.forEach(e=>e.unsubscribe())}}return n.\u0275fac=function(e){return new(e||n)(l.LFG($S),l.LFG(l.R0b),l.LFG(l.zs3))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const yV="firebase_screen_id",LR="outlet",lw="screen_class",vV="screen_name";let YW=Math.floor(Math.random()*(Math.pow(2,32)-1))-Math.pow(2,31);const VR={},KW=n=>{const t=[n[lw],n[LR]].join("#");if(VR.hasOwnProperty(t))return VR[t];{const e=YW++;return VR[t]=e,e}},bV=(n,t,e)=>n.events.pipe(tn(r=>r instanceof p0)).pipe(_n(r=>{var s;const d=(null===(s=n.parseUrl(n.url.replace(/(?:\().+(?:\))/g,O=>O.replace("://",":///"))).root.children[r.snapshot.outlet])||void 0===s?void 0:s.toString())||"",p=n.routerState.root.children.map(O=>O).find(O=>O.outlet===r.snapshot.outlet);if(!p)return Je(null);let _=p;for(;_.firstChild;)_=_.firstChild;const w=_.pathFromRoot.map(O=>{var U;return null===(U=O.routeConfig)||void 0===U?void 0:U.path}).filter(O=>O).join("/")||"/",I={[vV]:w,page_path:`/${d}`,firebase_event_origin:"auto",firebase_screen:w,[LR]:r.snapshot.outlet};t&&(I.page_title=t.getTitle());let T=p.component;if(T){if(T===qd){let O=r.snapshot;for(;O.firstChild;)O=O.firstChild;T=O.component}}else T=r.snapshot.component;if("string"==typeof T)return Je(Object.assign(Object.assign({},I),{[lw]:T}));if(T){const O=e.resolveComponentFactory(T);return Je(Object.assign(Object.assign({},I),{[lw]:O.selector}))}return Je(null)}),tn(r=>!!r),(0,Ye.U)(r=>Object.assign({firebase_screen_class:r[lw],[yV]:KW(r)},r)),function AW(n,t,e,i){return(0,Un.e)((r,s)=>{let c;t&&"function"!=typeof t?({duration:e,element:c,connector:i}=t):c=t;const d=new Map,p=U=>{d.forEach(U),U(s)},_=U=>p(W=>W.error(U));let w=0,I=!1;const T=new Kn.Q(s,U=>{try{const W=n(U);let ie=d.get(W);if(!ie){d.set(W,ie=i?i():new vt.x);const ze=function O(U,W){const ie=new Ni.y(ze=>{w++;const nt=W.subscribe(ze);return()=>{nt.unsubscribe(),0==--w&&I&&T.unsubscribe()}});return ie.key=U,ie}(W,ie);if(s.next(ze),e){const nt=(0,Kn.x)(ie,()=>{ie.complete(),nt?.unsubscribe()},void 0,void 0,()=>d.delete(W));T.add((0,cr.Xf)(e(ze)).subscribe(nt))}}ie.next(c?c(U):U)}catch(W){_(W)}},()=>p(U=>U.complete()),_,()=>d.clear(),()=>(I=!0,0===w));r.subscribe(T)})}(r=>r[LR]),(0,br.z)(r=>r.pipe(ed((s,c)=>JSON.stringify(s)===JSON.stringify(c)),Gi(void 0),jS(),(0,Ye.U)(([s,c])=>s?Object.assign({firebase_previous_class:s[lw],firebase_previous_screen:s[vV],firebase_previous_id:s[yV]},c):c))));let ZW=(()=>{class n{constructor(e,i,r,s,c,d){(0,Ir.KN)("angularfire",Lt.q4.full,"screen-tracking"),gV().then(()=>{const p=d.get(aw);!e||!p||s.runOutsideAngular(()=>{this.disposable=bV(e,i,r).pipe(_n(_=>(0,PR.mG)(this,void 0,void 0,function*(){return c&&(yield c.initialized),NW(p,"screen_view",_)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(xi,8),l.LFG(zs,8),l.LFG(l._Vd),l.LFG(l.R0b),l.LFG(_V,8),l.LFG(l.zs3))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function wV(n){return new l.vHH(3e3,!1)}function N6(){return typeof window<"u"&&typeof window.document<"u"}function UR(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function ih(n){switch(n.length){case 0:return new J0;case 1:return n[0];default:return new GL(n)}}function CV(n,t,e,i,r=new Map,s=new Map){const c=[],d=[];let p=-1,_=null;if(i.forEach(w=>{const I=w.get("offset"),T=I==p,O=T&&_||new Map;w.forEach((U,W)=>{let ie=W,ze=U;if("offset"!==W)switch(ie=t.normalizePropertyName(ie,c),ze){case"!":ze=r.get(W);break;case au:ze=s.get(W);break;default:ze=t.normalizeStyleValue(W,ie,ze,c)}O.set(ie,ze)}),T||d.push(O),_=O,p=I}),c.length)throw function E6(n){return new l.vHH(3502,!1)}();return d}function HR(n,t,e,i){switch(t){case"start":n.onStart(()=>i(e&&jR(e,"start",n)));break;case"done":n.onDone(()=>i(e&&jR(e,"done",n)));break;case"destroy":n.onDestroy(()=>i(e&&jR(e,"destroy",n)))}}function jR(n,t,e){const s=$R(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,e.totalTime??n.totalTime,!!e.disabled),c=n._data;return null!=c&&(s._data=c),s}function $R(n,t,e,i,r="",s=0,c){return{element:n,triggerName:t,fromState:e,toState:i,phaseName:r,totalTime:s,disabled:!!c}}function xo(n,t,e){let i=n.get(t);return i||n.set(t,i=e),i}function EV(n){const t=n.indexOf(":");return[n.substring(1,t),n.slice(t+1)]}let zR=(n,t)=>!1,DV=(n,t,e)=>[],IV=null;function GR(n){const t=n.parentNode||n.host;return t===IV?null:t}(UR()||typeof Element<"u")&&(N6()?(IV=(()=>document.documentElement)(),zR=(n,t)=>{for(;t;){if(t===n)return!0;t=GR(t)}return!1}):zR=(n,t)=>n.contains(t),DV=(n,t,e)=>{if(e)return Array.from(n.querySelectorAll(t));const i=n.querySelector(t);return i?[i]:[]});let Tp=null,SV=!1;const AV=zR,TV=DV;let MV=(()=>{class n{validateStyleProperty(e){return function L6(n){Tp||(Tp=function V6(){return typeof document<"u"?document.body:null}()||{},SV=!!Tp.style&&"WebkitAppearance"in Tp.style);let t=!0;return Tp.style&&!function F6(n){return"ebkit"==n.substring(1,6)}(n)&&(t=n in Tp.style,!t&&SV&&(t="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Tp.style)),t}(e)}matchesElement(e,i){return!1}containsElement(e,i){return AV(e,i)}getParentElement(e){return GR(e)}query(e,i,r){return TV(e,i,r)}computeStyle(e,i,r){return r||""}animate(e,i,r,s,c,d=[],p){return new J0(r,s)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),WR=(()=>{class n{}return n.NOOP=new MV,n})();const qR="ng-enter",zS="ng-leave",GS="ng-trigger",WS=".ng-trigger",kV="ng-animating",YR=".ng-animating";function lu(n){if("number"==typeof n)return n;const t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:KR(parseFloat(t[1]),t[2])}function KR(n,t){return"s"===t?1e3*n:n}function qS(n,t,e){return n.hasOwnProperty("duration")?n:function H6(n,t,e){let r,s=0,c="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return t.push(wV()),{duration:0,delay:0,easing:""};r=KR(parseFloat(d[1]),d[2]);const p=d[3];null!=p&&(s=KR(parseFloat(p),d[4]));const _=d[5];_&&(c=_)}else r=n;if(!e){let d=!1,p=t.length;r<0&&(t.push(function e6(){return new l.vHH(3100,!1)}()),d=!0),s<0&&(t.push(function t6(){return new l.vHH(3101,!1)}()),d=!0),d&&t.splice(p,0,wV())}return{duration:r,delay:s,easing:c}}(n,t,e)}function cw(n,t={}){return Object.keys(n).forEach(e=>{t[e]=n[e]}),t}function RV(n){const t=new Map;return Object.keys(n).forEach(e=>{t.set(e,n[e])}),t}function rh(n,t=new Map,e){if(e)for(let[i,r]of e)t.set(i,r);for(let[i,r]of n)t.set(i,r);return t}function PV(n,t,e){return e?t+":"+e+";":""}function NV(n){let t="";for(let e=0;e<n.style.length;e++){const i=n.style.item(e);t+=PV(0,i,n.style.getPropertyValue(i))}for(const e in n.style)n.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=PV(0,G6(e),n.style[e]));n.setAttribute("style",t)}function Gl(n,t,e){n.style&&(t.forEach((i,r)=>{const s=QR(r);e&&!e.has(r)&&e.set(r,n.style[s]),n.style[s]=i}),UR()&&NV(n))}function Mp(n,t){n.style&&(t.forEach((e,i)=>{const r=QR(i);n.style[r]=""}),UR()&&NV(n))}function uw(n){return Array.isArray(n)?1==n.length?n[0]:jL(n):n}const ZR=new RegExp("{{\\s*(.+?)\\s*}}","g");function FV(n){let t=[];if("string"==typeof n){let e;for(;e=ZR.exec(n);)t.push(e[1]);ZR.lastIndex=0}return t}function dw(n,t,e){const i=n.toString(),r=i.replace(ZR,(s,c)=>{let d=t[c];return null==d&&(e.push(function r6(n){return new l.vHH(3003,!1)}()),d=""),d.toString()});return r==i?n:r}function YS(n){const t=[];let e=n.next();for(;!e.done;)t.push(e.value),e=n.next();return t}const z6=/-+([a-z0-9])/g;function QR(n){return n.replace(z6,(...t)=>t[1].toUpperCase())}function G6(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ko(n,t,e){switch(t.type){case 7:return n.visitTrigger(t,e);case 0:return n.visitState(t,e);case 1:return n.visitTransition(t,e);case 2:return n.visitSequence(t,e);case 3:return n.visitGroup(t,e);case 4:return n.visitAnimate(t,e);case 5:return n.visitKeyframes(t,e);case 6:return n.visitStyle(t,e);case 8:return n.visitReference(t,e);case 9:return n.visitAnimateChild(t,e);case 10:return n.visitAnimateRef(t,e);case 11:return n.visitQuery(t,e);case 12:return n.visitStagger(t,e);default:throw function s6(n){return new l.vHH(3004,!1)}()}}function LV(n,t){return window.getComputedStyle(n)[t]}function Q6(n,t){const e=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function X6(n,t,e){if(":"==n[0]){const p=function J6(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return t.push(function v6(n){return new l.vHH(3016,!1)}()),"* => *"}}(n,e);if("function"==typeof p)return void t.push(p);n=p}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return e.push(function y6(n){return new l.vHH(3015,!1)}()),t;const r=i[1],s=i[2],c=i[3];t.push(VV(r,c));"<"==s[0]&&!("*"==r&&"*"==c)&&t.push(VV(c,r))}(i,e,t)):e.push(n),e}const XS=new Set(["true","1"]),JS=new Set(["false","0"]);function VV(n,t){const e=XS.has(n)||JS.has(n),i=XS.has(t)||JS.has(t);return(r,s)=>{let c="*"==n||n==r,d="*"==t||t==s;return!c&&e&&"boolean"==typeof r&&(c=r?XS.has(n):JS.has(n)),!d&&i&&"boolean"==typeof s&&(d=s?XS.has(t):JS.has(t)),c&&d}}const eq=new RegExp("s*:selfs*,?","g");function XR(n,t,e,i){return new tq(n).build(t,e,i)}class tq{constructor(t){this._driver=t}build(t,e,i){const r=new rq(e);return this._resetContextStyleTimingState(r),ko(this,uw(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,e){let i=e.queryCount=0,r=e.depCount=0;const s=[],c=[];return"@"==t.name.charAt(0)&&e.errors.push(function a6(){return new l.vHH(3006,!1)}()),t.definitions.forEach(d=>{if(this._resetContextStyleTimingState(e),0==d.type){const p=d,_=p.name;_.toString().split(/\s*,\s*/).forEach(w=>{p.name=w,s.push(this.visitState(p,e))}),p.name=_}else if(1==d.type){const p=this.visitTransition(d,e);i+=p.queryCount,r+=p.depCount,c.push(p)}else e.errors.push(function l6(){return new l.vHH(3007,!1)}())}),{type:7,name:t.name,states:s,transitions:c,queryCount:i,depCount:r,options:null}}visitState(t,e){const i=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(i.containsDynamicStyles){const s=new Set,c=r||{};i.styles.forEach(d=>{d instanceof Map&&d.forEach(p=>{FV(p).forEach(_=>{c.hasOwnProperty(_)||s.add(_)})})}),s.size&&(YS(s.values()),e.errors.push(function c6(n,t){return new l.vHH(3008,!1)}()))}return{type:0,name:t.name,style:i,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const i=ko(this,uw(t.animation),e);return{type:1,matchers:Q6(t.expr,e.errors),animation:i,queryCount:e.queryCount,depCount:e.depCount,options:xp(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(i=>ko(this,i,e)),options:xp(t.options)}}visitGroup(t,e){const i=e.currentTime;let r=0;const s=t.steps.map(c=>{e.currentTime=i;const d=ko(this,c,e);return r=Math.max(r,e.currentTime),d});return e.currentTime=r,{type:3,steps:s,options:xp(t.options)}}visitAnimate(t,e){const i=function oq(n,t){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return JR(qS(n,t).duration,0,"");const e=n;if(e.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=JR(0,0,"");return s.dynamic=!0,s.strValue=e,s}const r=qS(e,t);return JR(r.duration,r.delay,r.easing)}(t.timings,e.errors);e.currentAnimateTimings=i;let r,s=t.styles?t.styles:Li({});if(5==s.type)r=this.visitKeyframes(s,e);else{let c=t.styles,d=!1;if(!c){d=!0;const _={};i.easing&&(_.easing=i.easing),c=Li(_)}e.currentTime+=i.duration+i.delay;const p=this.visitStyle(c,e);p.isEmptyStep=d,r=p}return e.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(t,e){const i=this._makeStyleAst(t,e);return this._validateStyleAst(i,e),i}_makeStyleAst(t,e){const i=[],r=Array.isArray(t.styles)?t.styles:[t.styles];for(let d of r)"string"==typeof d?d===au?i.push(d):e.errors.push(new l.vHH(3002,!1)):i.push(RV(d));let s=!1,c=null;return i.forEach(d=>{if(d instanceof Map&&(d.has("easing")&&(c=d.get("easing"),d.delete("easing")),!s))for(let p of d.values())if(p.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:i,easing:c,offset:t.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(t,e){const i=e.currentAnimateTimings;let r=e.currentTime,s=e.currentTime;i&&s>0&&(s-=i.duration+i.delay),t.styles.forEach(c=>{"string"!=typeof c&&c.forEach((d,p)=>{const _=e.collectedStyles.get(e.currentQuerySelector),w=_.get(p);let I=!0;w&&(s!=r&&s>=w.startTime&&r<=w.endTime&&(e.errors.push(function d6(n,t,e,i,r){return new l.vHH(3010,!1)}()),I=!1),s=w.startTime),I&&_.set(p,{startTime:s,endTime:r}),e.options&&function $6(n,t,e){const i=t.params||{},r=FV(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||e.push(function n6(n){return new l.vHH(3001,!1)}())})}(d,e.options,e.errors)})})}visitKeyframes(t,e){const i={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function h6(){return new l.vHH(3011,!1)}()),i;let s=0;const c=[];let d=!1,p=!1,_=0;const w=t.steps.map(ze=>{const nt=this._makeStyleAst(ze,e);let ft=null!=nt.offset?nt.offset:function sq(n){if("string"==typeof n)return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(e instanceof Map&&e.has("offset")){const i=e;t=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const e=n;t=parseFloat(e.get("offset")),e.delete("offset")}return t}(nt.styles),bt=0;return null!=ft&&(s++,bt=nt.offset=ft),p=p||bt<0||bt>1,d=d||bt<_,_=bt,c.push(bt),nt});p&&e.errors.push(function f6(){return new l.vHH(3012,!1)}()),d&&e.errors.push(function p6(){return new l.vHH(3200,!1)}());const I=t.steps.length;let T=0;s>0&&s<I?e.errors.push(function m6(){return new l.vHH(3202,!1)}()):0==s&&(T=1/(I-1));const O=I-1,U=e.currentTime,W=e.currentAnimateTimings,ie=W.duration;return w.forEach((ze,nt)=>{const ft=T>0?nt==O?1:T*nt:c[nt],bt=ft*ie;e.currentTime=U+W.delay+bt,W.duration=bt,this._validateStyleAst(ze,e),ze.offset=ft,i.styles.push(ze)}),i}visitReference(t,e){return{type:8,animation:ko(this,uw(t.animation),e),options:xp(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:xp(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:xp(t.options)}}visitQuery(t,e){const i=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[s,c]=function nq(n){const t=!!n.split(/\s*,\s*/).find(e=>":self"==e);return t&&(n=n.replace(eq,"")),n=n.replace(/@\*/g,WS).replace(/@\w+/g,e=>WS+"-"+e.slice(1)).replace(/:animating/g,YR),[n,t]}(t.selector);e.currentQuerySelector=i.length?i+" "+s:s,xo(e.collectedStyles,e.currentQuerySelector,new Map);const d=ko(this,uw(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:c,animation:d,originalSelector:t.selector,options:xp(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function g6(){return new l.vHH(3013,!1)}());const i="full"===t.timings?{duration:0,delay:0,easing:"full"}:qS(t.timings,e.errors,!0);return{type:12,animation:ko(this,uw(t.animation),e),timings:i,options:null}}}class rq{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function xp(n){return n?(n=cw(n)).params&&(n.params=function iq(n){return n?cw(n):null}(n.params)):n={},n}function JR(n,t,e){return{duration:n,delay:t,easing:e}}function eO(n,t,e,i,r,s,c=null,d=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:c,subTimeline:d}}class eA{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const cq=new RegExp(":enter","g"),dq=new RegExp(":leave","g");function tO(n,t,e,i,r,s=new Map,c=new Map,d,p,_=[]){return(new hq).buildKeyframes(n,t,e,i,r,s,c,d,p,_)}class hq{buildKeyframes(t,e,i,r,s,c,d,p,_,w=[]){_=_||new eA;const I=new nO(t,e,_,r,s,w,[]);I.options=p;const T=p.delay?lu(p.delay):0;I.currentTimeline.delayNextStep(T),I.currentTimeline.setStyles([c],null,I.errors,p),ko(this,i,I);const O=I.timelines.filter(U=>U.containsAnimation());if(O.length&&d.size){let U;for(let W=O.length-1;W>=0;W--){const ie=O[W];if(ie.element===e){U=ie;break}}U&&!U.allowOnlyTimelineStyles()&&U.setStyles([d],null,I.errors,p)}return O.length?O.map(U=>U.buildKeyframes()):[eO(e,[],[],[],0,T,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const i=e.subInstructions.get(e.element);if(i){const r=e.createSubContext(t.options),s=e.currentTimeline.currentTime,c=this._visitSubInstructions(i,r,r.options);s!=c&&e.transformIntoNewTimeline(c)}e.previousNode=t}visitAnimateRef(t,e){const i=e.createSubContext(t.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,i),this.visitReference(t.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,i){for(const r of t){const s=r?.delay;if(s){const c="number"==typeof s?s:lu(dw(s,r?.params??{},e.errors));i.delayNextStep(c)}}}_visitSubInstructions(t,e,i){let s=e.currentTimeline.currentTime;const c=null!=i.duration?lu(i.duration):null,d=null!=i.delay?lu(i.delay):null;return 0!==c&&t.forEach(p=>{const _=e.appendInstructionToTimeline(p,c,d);s=Math.max(s,_.duration+_.delay)}),s}visitReference(t,e){e.updateOptions(t.options,!0),ko(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const i=e.subContextCount;let r=e;const s=t.options;if(s&&(s.params||s.delay)&&(r=e.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=tA);const c=lu(s.delay);r.delayNextStep(c)}t.steps.length&&(t.steps.forEach(c=>ko(this,c,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const i=[];let r=e.currentTimeline.currentTime;const s=t.options&&t.options.delay?lu(t.options.delay):0;t.steps.forEach(c=>{const d=e.createSubContext(t.options);s&&d.delayNextStep(s),ko(this,c,d),r=Math.max(r,d.currentTimeline.currentTime),i.push(d.currentTimeline)}),i.forEach(c=>e.currentTimeline.mergeTimelineCollectedStyles(c)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const i=t.strValue;return qS(e.params?dw(i,e.params,e.errors):i,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const i=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),r.snapshotCurrentStyles());const s=t.style;5==s.type?this.visitKeyframes(s,e):(e.incrementTime(i.duration),this.visitStyle(s,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const i=e.currentTimeline,r=e.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const s=r&&r.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(s):i.setStyles(t.styles,s,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const i=e.currentAnimateTimings,r=e.currentTimeline.duration,s=i.duration,d=e.createSubContext().currentTimeline;d.easing=i.easing,t.styles.forEach(p=>{d.forwardTime((p.offset||0)*s),d.setStyles(p.styles,p.easing,e.errors,e.options),d.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(d),e.transformIntoNewTimeline(r+s),e.previousNode=t}visitQuery(t,e){const i=e.currentTimeline.currentTime,r=t.options||{},s=r.delay?lu(r.delay):0;s&&(6===e.previousNode.type||0==i&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=tA);let c=i;const d=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=d.length;let p=null;d.forEach((_,w)=>{e.currentQueryIndex=w;const I=e.createSubContext(t.options,_);s&&I.delayNextStep(s),_===e.element&&(p=I.currentTimeline),ko(this,t.animation,I),I.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,I.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(c),p&&(e.currentTimeline.mergeTimelineCollectedStyles(p),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const i=e.parentContext,r=e.currentTimeline,s=t.timings,c=Math.abs(s.duration),d=c*(e.currentQueryTotal-1);let p=c*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":p=d-p;break;case"full":p=i.currentStaggerTime}const w=e.currentTimeline;p&&w.delayNextStep(p);const I=w.currentTime;ko(this,t.animation,e),e.previousNode=t,i.currentStaggerTime=r.currentTime-I+(r.startTime-i.currentTimeline.startTime)}}const tA={};class nO{constructor(t,e,i,r,s,c,d,p){this._driver=t,this.element=e,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=c,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=tA,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new nA(this._driver,e,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const i=t;let r=this.options;null!=i.duration&&(r.duration=lu(i.duration)),null!=i.delay&&(r.delay=lu(i.delay));const s=i.params;if(s){let c=r.params;c||(c=this.options.params={}),Object.keys(s).forEach(d=>{(!e||!c.hasOwnProperty(d))&&(c[d]=dw(s[d],c,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const i=t.params={};Object.keys(e).forEach(r=>{i[r]=e[r]})}}return t}createSubContext(t=null,e,i){const r=e||this.element,s=new nO(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=tA,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,i){const r={duration:e??t.duration,delay:this.currentTimeline.currentTime+(i??0)+t.delay,easing:""},s=new fq(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,i,r,s,c){let d=[];if(r&&d.push(this.element),t.length>0){t=(t=t.replace(cq,"."+this._enterClassName)).replace(dq,"."+this._leaveClassName);let _=this._driver.query(this.element,t,1!=i);0!==i&&(_=i<0?_.slice(_.length+i,_.length):_.slice(0,i)),d.push(..._)}return!s&&0==d.length&&c.push(function _6(n){return new l.vHH(3014,!1)}()),d}}class nA{constructor(t,e,i,r){this._driver=t,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new nA(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,i]of this._globalTimelineStyles)this._backFill.set(e,i||au),this._currentKeyframe.set(e,au);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,i,r){e&&this._previousKeyframe.set("easing",e);const s=r&&r.params||{},c=function pq(n,t){const e=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||t.keys();for(let s of i)e.set(s,au)}else rh(r,e)}),e}(t,this._globalTimelineStyles);for(let[d,p]of c){const _=dw(p,s,i);this._pendingStyles.set(d,_),this._localTimelineStyles.has(d)||this._backFill.set(d,this._globalTimelineStyles.get(d)??au),this._updateStyle(d,_)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,i)=>{const r=this._styleSummary.get(i);(!r||e.time>r.time)&&this._updateStyle(i,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((d,p)=>{const _=rh(d,new Map,this._backFill);_.forEach((w,I)=>{"!"===w?t.add(I):w===au&&e.add(I)}),i||_.set("offset",p/this.duration),r.push(_)});const s=t.size?YS(t.values()):[],c=e.size?YS(e.values()):[];if(i){const d=r[0],p=new Map(d);d.set("offset",0),p.set("offset",1),r=[d,p]}return eO(this.element,r,s,c,this.duration,this.startTime,this.easing,!1)}}class fq extends nA{constructor(t,e,i,r,s,c,d=!1){super(t,e,c.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=d,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const s=[],c=i+e,d=e/c,p=rh(t[0]);p.set("offset",0),s.push(p);const _=rh(t[0]);_.set("offset",HV(d)),s.push(_);const w=t.length-1;for(let I=1;I<=w;I++){let T=rh(t[I]);const O=T.get("offset");T.set("offset",HV((e+O*i)/c)),s.push(T)}i=c,e=0,r="",t=s}return eO(this.element,t,this.preStyleProps,this.postStyleProps,i,e,r,!0)}}function HV(n,t=3){const e=Math.pow(10,t-1);return Math.round(n*e)/e}class iO{}const mq=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class gq extends iO{normalizePropertyName(t,e){return QR(t)}normalizeStyleValue(t,e,i,r){let s="";const c=i.toString().trim();if(mq.has(e)&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const d=i.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&r.push(function o6(n,t){return new l.vHH(3005,!1)}())}return c+s}}function jV(n,t,e,i,r,s,c,d,p,_,w,I,T){return{type:0,element:n,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:s,toState:i,toStyles:c,timelines:d,queriedElements:p,preStyleProps:_,postStyleProps:w,totalTime:I,errors:T}}const rO={};class $V{constructor(t,e,i){this._triggerName=t,this.ast=e,this._stateStyles=i}match(t,e,i,r){return function _q(n,t,e,i,r){return n.some(s=>s(t,e,i,r))}(this.ast.matchers,t,e,i,r)}buildStyles(t,e,i){let r=this._stateStyles.get("*");return void 0!==t&&(r=this._stateStyles.get(t?.toString())||r),r?r.buildStyles(e,i):new Map}build(t,e,i,r,s,c,d,p,_,w){const I=[],T=this.ast.options&&this.ast.options.params||rO,U=this.buildStyles(i,d&&d.params||rO,I),W=p&&p.params||rO,ie=this.buildStyles(r,W,I),ze=new Set,nt=new Map,ft=new Map,bt="void"===r,Ut={params:yq(W,T),delay:this.ast.options?.delay},zt=w?[]:tO(t,e,this.ast.animation,s,c,U,ie,Ut,_,I);let Mn=0;if(zt.forEach(vu=>{Mn=Math.max(vu.duration+vu.delay,Mn)}),I.length)return jV(e,this._triggerName,i,r,bt,U,ie,[],[],nt,ft,Mn,I);zt.forEach(vu=>{const bu=vu.element,Fz=xo(nt,bu,new Set);vu.preStyleProps.forEach(lm=>Fz.add(lm));const AC=xo(ft,bu,new Set);vu.postStyleProps.forEach(lm=>AC.add(lm)),bu!==e&&ze.add(bu)});const Ls=YS(ze.values());return jV(e,this._triggerName,i,r,bt,U,ie,zt,Ls,nt,ft,Mn)}}function yq(n,t){const e=cw(t);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(e[i]=n[i]);return e}class vq{constructor(t,e,i){this.styles=t,this.defaultParams=e,this.normalizer=i}buildStyles(t,e){const i=new Map,r=cw(this.defaultParams);return Object.keys(t).forEach(s=>{const c=t[s];null!==c&&(r[s]=c)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((c,d)=>{c&&(c=dw(c,r,e));const p=this.normalizer.normalizePropertyName(d,e);c=this.normalizer.normalizeStyleValue(d,p,c,e),i.set(p,c)})}),i}}class wq{constructor(t,e,i){this.name=t,this.ast=e,this._normalizer=i,this.transitionFactories=[],this.states=new Map,e.states.forEach(r=>{this.states.set(r.name,new vq(r.style,r.options&&r.options.params||{},i))}),zV(this.states,"true","1"),zV(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new $V(t,r,this.states))}),this.fallbackTransition=function Cq(n,t,e){return new $V(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,d)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,i,r){return this.transitionFactories.find(c=>c.match(t,e,i,r))||null}matchStyles(t,e,i){return this.fallbackTransition.buildStyles(t,e,i)}}function zV(n,t,e){n.has(t)?n.has(e)||n.set(e,n.get(t)):n.has(e)&&n.set(t,n.get(e))}const Eq=new eA;class Dq{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){const i=[],s=XR(this._driver,e,i,[]);if(i.length)throw function D6(n){return new l.vHH(3503,!1)}();this._animations.set(t,s)}_buildPlayer(t,e,i){const r=t.element,s=CV(0,this._normalizer,0,t.keyframes,e,i);return this._driver.animate(r,s,t.duration,t.delay,t.easing,[],!0)}create(t,e,i={}){const r=[],s=this._animations.get(t);let c;const d=new Map;if(s?(c=tO(this._driver,e,s,qR,zS,new Map,new Map,i,Eq,r),c.forEach(w=>{const I=xo(d,w.element,new Map);w.postStyleProps.forEach(T=>I.set(T,null))})):(r.push(function I6(){return new l.vHH(3300,!1)}()),c=[]),r.length)throw function S6(n){return new l.vHH(3504,!1)}();d.forEach((w,I)=>{w.forEach((T,O)=>{w.set(O,this._driver.computeStyle(I,O,au))})});const _=ih(c.map(w=>{const I=d.get(w.element);return this._buildPlayer(w,new Map,I)}));return this._playersById.set(t,_),_.onDestroy(()=>this.destroy(t)),this.players.push(_),_}destroy(t){const e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);const i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(t){const e=this._playersById.get(t);if(!e)throw function A6(n){return new l.vHH(3301,!1)}();return e}listen(t,e,i,r){const s=$R(e,"","","");return HR(this._getPlayer(t),i,s,r),()=>{}}command(t,e,i,r){if("register"==i)return void this.register(t,r[0]);if("create"==i)return void this.create(t,e,r[0]||{});const s=this._getPlayer(t);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const GV="ng-animate-queued",sO="ng-animate-disabled",Mq=[],WV={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},xq={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ua="__ng_removed";class oO{constructor(t,e=""){this.namespaceId=e;const i=t&&t.hasOwnProperty("value");if(this.value=function Pq(n){return n??null}(i?t.value:t),i){const s=cw(t);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const i=this.options.params;Object.keys(e).forEach(r=>{null==i[r]&&(i[r]=e[r])})}}}const hw="void",aO=new oO(hw);class kq{constructor(t,e,i){this.id=t,this.hostElement=e,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,da(e,this._hostClassName)}listen(t,e,i,r){if(!this._triggers.has(e))throw function T6(n,t){return new l.vHH(3302,!1)}();if(null==i||0==i.length)throw function M6(n){return new l.vHH(3303,!1)}();if(!function Nq(n){return"start"==n||"done"==n}(i))throw function x6(n,t){return new l.vHH(3400,!1)}();const s=xo(this._elementListeners,t,[]),c={name:e,phase:i,callback:r};s.push(c);const d=xo(this._engine.statesByElement,t,new Map);return d.has(e)||(da(t,GS),da(t,GS+"-"+e),d.set(e,aO)),()=>{this._engine.afterFlush(()=>{const p=s.indexOf(c);p>=0&&s.splice(p,1),this._triggers.has(e)||d.delete(e)})}}register(t,e){return!this._triggers.has(t)&&(this._triggers.set(t,e),!0)}_getTrigger(t){const e=this._triggers.get(t);if(!e)throw function k6(n){return new l.vHH(3401,!1)}();return e}trigger(t,e,i,r=!0){const s=this._getTrigger(e),c=new lO(this.id,e,t);let d=this._engine.statesByElement.get(t);d||(da(t,GS),da(t,GS+"-"+e),this._engine.statesByElement.set(t,d=new Map));let p=d.get(e);const _=new oO(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&p&&_.absorbOptions(p.options),d.set(e,_),p||(p=aO),_.value!==hw&&p.value===_.value){if(!function Vq(n,t){const e=Object.keys(n),i=Object.keys(t);if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){const s=e[r];if(!t.hasOwnProperty(s)||n[s]!==t[s])return!1}return!0}(p.params,_.params)){const W=[],ie=s.matchStyles(p.value,p.params,W),ze=s.matchStyles(_.value,_.params,W);W.length?this._engine.reportError(W):this._engine.afterFlush(()=>{Mp(t,ie),Gl(t,ze)})}return}const T=xo(this._engine.playersByElement,t,[]);T.forEach(W=>{W.namespaceId==this.id&&W.triggerName==e&&W.queued&&W.destroy()});let O=s.matchTransition(p.value,_.value,t,_.params),U=!1;if(!O){if(!r)return;O=s.fallbackTransition,U=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:O,fromState:p,toState:_,player:c,isFallbackTransition:U}),U||(da(t,GV),c.onStart(()=>{O_(t,GV)})),c.onDone(()=>{let W=this.players.indexOf(c);W>=0&&this.players.splice(W,1);const ie=this._engine.playersByElement.get(t);if(ie){let ze=ie.indexOf(c);ze>=0&&ie.splice(ze,1)}}),this.players.push(c),T.push(c),c}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const i=this._engine.driver.query(t,WS,!0);i.forEach(r=>{if(r[ua])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(c=>c.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,i,r){const s=this._engine.statesByElement.get(t),c=new Map;if(s){const d=[];if(s.forEach((p,_)=>{if(c.set(_,p.value),this._triggers.has(_)){const w=this.trigger(t,_,hw,r);w&&d.push(w)}}),d.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,c),i&&ih(d).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(e&&i){const r=new Set;e.forEach(s=>{const c=s.name;if(r.has(c))return;r.add(c);const p=this._triggers.get(c).fallbackTransition,_=i.get(c)||aO,w=new oO(hw),I=new lO(this.id,c,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:c,transition:p,fromState:_,toState:w,player:I,isFallbackTransition:!0})})}}removeNode(t,e){const i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(t):[];if(s&&s.length)r=!0;else{let c=t;for(;c=c.parentNode;)if(i.statesByElement.get(c)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)i.markElementAsRemoved(this.id,t,!1,e);else{const s=t[ua];(!s||s===WV)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,e))}}insertNode(t,e){da(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,c=this._elementListeners.get(s);c&&c.forEach(d=>{if(d.name==i.triggerName){const p=$R(s,i.triggerName,i.fromState.value,i.toState.value);p._data=t,HR(i.player,d.phase,p,d.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(i)}),this._queue=[],e.sort((i,r)=>{const s=i.transition.ast.depCount,c=r.transition.ast.depCount;return 0==s||0==c?s-c:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(i=>i.element===t)||e,e}}class Rq{constructor(t,e,i){this.bodyNode=t,this.driver=e,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,e){const i=new kq(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,e){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let c=!1,d=this.driver.getParentElement(e);for(;d;){const p=r.get(d);if(p){const _=i.indexOf(p);i.splice(_+1,0,t),c=!0;break}d=this.driver.getParentElement(d)}c||i.unshift(t)}else i.push(t);return r.set(e,t),t}register(t,e){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,e)),i}registerTrigger(t,e,i){let r=this._namespaceLookup[t];r&&r.register(e,i)&&this.totalAnimations++}destroy(t,e){if(!t)return;const i=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[t];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,i=this.statesByElement.get(t);if(i)for(let r of i.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&e.add(s)}return e}trigger(t,e,i,r){if(iA(e)){const s=this._fetchNamespace(t);if(s)return s.trigger(e,i,r),!0}return!1}insertNode(t,e,i,r){if(!iA(e))return;const s=e[ua];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const c=this.collectedLeaveElements.indexOf(e);c>=0&&this.collectedLeaveElements.splice(c,1)}if(t){const c=this._fetchNamespace(t);c&&c.insertNode(e,i)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),da(t,sO)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),O_(t,sO))}removeNode(t,e,i,r){if(iA(e)){const s=t?this._fetchNamespace(t):null;if(s?s.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),i){const c=this.namespacesByHostElement.get(e);c&&c.id!==t&&c.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,i,r,s){this.collectedLeaveElements.push(e),e[ua]={namespaceId:t,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(t,e,i,r,s){return iA(e)?this._fetchNamespace(t).listen(e,i,r,s):()=>{}}_buildInstruction(t,e,i,r,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,r,t.fromState.options,t.toState.options,e,s)}destroyInnerAnimations(t){let e=this.driver.query(t,WS,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,YR,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return ih(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[ua];if(e&&e.setForRemoval){if(t[ua]=WV,e.namespaceId){this.destroyInnerAnimations(t);const i=this._fetchNamespace(e.namespaceId);i&&i.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(sO)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)da(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{e=this._flushAnimations(i,t)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],e.length?ih(e).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(t){throw function R6(n){return new l.vHH(3402,!1)}()}_flushAnimations(t,e){const i=new eA,r=[],s=new Map,c=[],d=new Map,p=new Map,_=new Map,w=new Set;this.disabledNodes.forEach(At=>{w.add(At);const Ht=this.driver.query(At,".ng-animate-queued",!0);for(let Kt=0;Kt<Ht.length;Kt++)w.add(Ht[Kt])});const I=this.bodyNode,T=Array.from(this.statesByElement.keys()),O=KV(T,this.collectedEnterElements),U=new Map;let W=0;O.forEach((At,Ht)=>{const Kt=qR+W++;U.set(Ht,Kt),At.forEach($n=>da($n,Kt))});const ie=[],ze=new Set,nt=new Set;for(let At=0;At<this.collectedLeaveElements.length;At++){const Ht=this.collectedLeaveElements[At],Kt=Ht[ua];Kt&&Kt.setForRemoval&&(ie.push(Ht),ze.add(Ht),Kt.hasAnimation?this.driver.query(Ht,".ng-star-inserted",!0).forEach($n=>ze.add($n)):nt.add(Ht))}const ft=new Map,bt=KV(T,Array.from(ze));bt.forEach((At,Ht)=>{const Kt=zS+W++;ft.set(Ht,Kt),At.forEach($n=>da($n,Kt))}),t.push(()=>{O.forEach((At,Ht)=>{const Kt=U.get(Ht);At.forEach($n=>O_($n,Kt))}),bt.forEach((At,Ht)=>{const Kt=ft.get(Ht);At.forEach($n=>O_($n,Kt))}),ie.forEach(At=>{this.processLeaveNode(At)})});const Ut=[],zt=[];for(let At=this._namespaceList.length-1;At>=0;At--)this._namespaceList[At].drainQueuedTransitions(e).forEach(Kt=>{const $n=Kt.player,$r=Kt.element;if(Ut.push($n),this.collectedEnterElements.length){const ms=$r[ua];if(ms&&ms.setForMove){if(ms.previousTriggersValues&&ms.previousTriggersValues.has(Kt.triggerName)){const cm=ms.previousTriggersValues.get(Kt.triggerName),fa=this.statesByElement.get(Kt.element);if(fa&&fa.has(Kt.triggerName)){const GT=fa.get(Kt.triggerName);GT.value=cm,fa.set(Kt.triggerName,GT)}}return void $n.destroy()}}const ec=!I||!this.driver.containsElement(I,$r),Fo=ft.get($r),Sh=U.get($r),Wi=this._buildInstruction(Kt,i,Sh,Fo,ec);if(Wi.errors&&Wi.errors.length)return void zt.push(Wi);if(ec)return $n.onStart(()=>Mp($r,Wi.fromStyles)),$n.onDestroy(()=>Gl($r,Wi.toStyles)),void r.push($n);if(Kt.isFallbackTransition)return $n.onStart(()=>Mp($r,Wi.fromStyles)),$n.onDestroy(()=>Gl($r,Wi.toStyles)),void r.push($n);const Bz=[];Wi.timelines.forEach(ms=>{ms.stretchStartingKeyframe=!0,this.disabledNodes.has(ms.element)||Bz.push(ms)}),Wi.timelines=Bz,i.append($r,Wi.timelines),c.push({instruction:Wi,player:$n,element:$r}),Wi.queriedElements.forEach(ms=>xo(d,ms,[]).push($n)),Wi.preStyleProps.forEach((ms,cm)=>{if(ms.size){let fa=p.get(cm);fa||p.set(cm,fa=new Set),ms.forEach((GT,L1)=>fa.add(L1))}}),Wi.postStyleProps.forEach((ms,cm)=>{let fa=_.get(cm);fa||_.set(cm,fa=new Set),ms.forEach((GT,L1)=>fa.add(L1))})});if(zt.length){const At=[];zt.forEach(Ht=>{At.push(function O6(n,t){return new l.vHH(3505,!1)}())}),Ut.forEach(Ht=>Ht.destroy()),this.reportError(At)}const Mn=new Map,Ls=new Map;c.forEach(At=>{const Ht=At.element;i.has(Ht)&&(Ls.set(Ht,Ht),this._beforeAnimationBuild(At.player.namespaceId,At.instruction,Mn))}),r.forEach(At=>{const Ht=At.element;this._getPreviousPlayers(Ht,!1,At.namespaceId,At.triggerName,null).forEach($n=>{xo(Mn,Ht,[]).push($n),$n.destroy()})});const vu=ie.filter(At=>QV(At,p,_)),bu=new Map;YV(bu,this.driver,nt,_,au).forEach(At=>{QV(At,p,_)&&vu.push(At)});const AC=new Map;O.forEach((At,Ht)=>{YV(AC,this.driver,new Set(At),p,"!")}),vu.forEach(At=>{const Ht=bu.get(At),Kt=AC.get(At);bu.set(At,new Map([...Array.from(Ht?.entries()??[]),...Array.from(Kt?.entries()??[])]))});const lm=[],Lz=[],Vz={};c.forEach(At=>{const{element:Ht,player:Kt,instruction:$n}=At;if(i.has(Ht)){if(w.has(Ht))return Kt.onDestroy(()=>Gl(Ht,$n.toStyles)),Kt.disabled=!0,Kt.overrideTotalTime($n.totalTime),void r.push(Kt);let $r=Vz;if(Ls.size>1){let Fo=Ht;const Sh=[];for(;Fo=Fo.parentNode;){const Wi=Ls.get(Fo);if(Wi){$r=Wi;break}Sh.push(Fo)}Sh.forEach(Wi=>Ls.set(Wi,$r))}const ec=this._buildAnimation(Kt.namespaceId,$n,Mn,s,AC,bu);if(Kt.setRealPlayer(ec),$r===Vz)lm.push(Kt);else{const Fo=this.playersByElement.get($r);Fo&&Fo.length&&(Kt.parentPlayer=ih(Fo)),r.push(Kt)}}else Mp(Ht,$n.fromStyles),Kt.onDestroy(()=>Gl(Ht,$n.toStyles)),Lz.push(Kt),w.has(Ht)&&r.push(Kt)}),Lz.forEach(At=>{const Ht=s.get(At.element);if(Ht&&Ht.length){const Kt=ih(Ht);At.setRealPlayer(Kt)}}),r.forEach(At=>{At.parentPlayer?At.syncPlayerEvents(At.parentPlayer):At.destroy()});for(let At=0;At<ie.length;At++){const Ht=ie[At],Kt=Ht[ua];if(O_(Ht,zS),Kt&&Kt.hasAnimation)continue;let $n=[];if(d.size){let ec=d.get(Ht);ec&&ec.length&&$n.push(...ec);let Fo=this.driver.query(Ht,YR,!0);for(let Sh=0;Sh<Fo.length;Sh++){let Wi=d.get(Fo[Sh]);Wi&&Wi.length&&$n.push(...Wi)}}const $r=$n.filter(ec=>!ec.destroyed);$r.length?Fq(this,Ht,$r):this.processLeaveNode(Ht)}return ie.length=0,lm.forEach(At=>{this.players.push(At),At.onDone(()=>{At.destroy();const Ht=this.players.indexOf(At);this.players.splice(Ht,1)}),At.play()}),lm}elementContainsData(t,e){let i=!1;const r=e[ua];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(e)&&(i=!0),this.playersByQueriedElement.has(e)&&(i=!0),this.statesByElement.has(e)&&(i=!0),this._fetchNamespace(t).elementContainsData(e)||i}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,i,r,s){let c=[];if(e){const d=this.playersByQueriedElement.get(t);d&&(c=d)}else{const d=this.playersByElement.get(t);if(d){const p=!s||s==hw;d.forEach(_=>{_.queued||!p&&_.triggerName!=r||c.push(_)})}}return(i||r)&&(c=c.filter(d=>!(i&&i!=d.namespaceId||r&&r!=d.triggerName))),c}_beforeAnimationBuild(t,e,i){const s=e.element,c=e.isRemovalTransition?void 0:t,d=e.isRemovalTransition?void 0:e.triggerName;for(const p of e.timelines){const _=p.element,w=_!==s,I=xo(i,_,[]);this._getPreviousPlayers(_,w,c,d,e.toState).forEach(O=>{const U=O.getRealPlayer();U.beforeDestroy&&U.beforeDestroy(),O.destroy(),I.push(O)})}Mp(s,e.fromStyles)}_buildAnimation(t,e,i,r,s,c){const d=e.triggerName,p=e.element,_=[],w=new Set,I=new Set,T=e.timelines.map(U=>{const W=U.element;w.add(W);const ie=W[ua];if(ie&&ie.removedBeforeQueried)return new J0(U.duration,U.delay);const ze=W!==p,nt=function Lq(n){const t=[];return ZV(n,t),t}((i.get(W)||Mq).map(Mn=>Mn.getRealPlayer())).filter(Mn=>!!Mn.element&&Mn.element===W),ft=s.get(W),bt=c.get(W),Ut=CV(0,this._normalizer,0,U.keyframes,ft,bt),zt=this._buildPlayer(U,Ut,nt);if(U.subTimeline&&r&&I.add(W),ze){const Mn=new lO(t,d,W);Mn.setRealPlayer(zt),_.push(Mn)}return zt});_.forEach(U=>{xo(this.playersByQueriedElement,U.element,[]).push(U),U.onDone(()=>function Oq(n,t,e){let i=n.get(t);if(i){if(i.length){const r=i.indexOf(e);i.splice(r,1)}0==i.length&&n.delete(t)}return i}(this.playersByQueriedElement,U.element,U))}),w.forEach(U=>da(U,kV));const O=ih(T);return O.onDestroy(()=>{w.forEach(U=>O_(U,kV)),Gl(p,e.toStyles)}),I.forEach(U=>{xo(r,U,[]).push(O)}),O}_buildPlayer(t,e,i){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,i):new J0(t.duration,t.delay)}}class lO{constructor(t,e,i){this.namespaceId=t,this.triggerName=e,this.element=i,this._player=new J0,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,i)=>{e.forEach(r=>HR(t,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){xo(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function iA(n){return n&&1===n.nodeType}function qV(n,t){const e=n.style.display;return n.style.display=t??"none",e}function YV(n,t,e,i,r){const s=[];e.forEach(p=>s.push(qV(p)));const c=[];i.forEach((p,_)=>{const w=new Map;p.forEach(I=>{const T=t.computeStyle(_,I,r);w.set(I,T),(!T||0==T.length)&&(_[ua]=xq,c.push(_))}),n.set(_,w)});let d=0;return e.forEach(p=>qV(p,s[d++])),c}function KV(n,t){const e=new Map;if(n.forEach(d=>e.set(d,[])),0==t.length)return e;const r=new Set(t),s=new Map;function c(d){if(!d)return 1;let p=s.get(d);if(p)return p;const _=d.parentNode;return p=e.has(_)?_:r.has(_)?1:c(_),s.set(d,p),p}return t.forEach(d=>{const p=c(d);1!==p&&e.get(p).push(d)}),e}function da(n,t){n.classList?.add(t)}function O_(n,t){n.classList?.remove(t)}function Fq(n,t,e){ih(e).onDone(()=>n.processLeaveNode(t))}function ZV(n,t){for(let e=0;e<n.length;e++){const i=n[e];i instanceof GL?ZV(i.players,t):t.push(i)}}function QV(n,t,e){const i=e.get(n);if(!i)return!1;let r=t.get(n);return r?i.forEach(s=>r.add(s)):t.set(n,i),e.delete(n),!0}class rA{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new Rq(t,e,i),this._timelineEngine=new Dq(t,e,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(t,e,i,r,s){const c=t+"-"+r;let d=this._triggerCache[c];if(!d){const p=[],w=XR(this._driver,s,p,[]);if(p.length)throw function C6(n,t){return new l.vHH(3404,!1)}();d=function bq(n,t,e){return new wq(n,t,e)}(r,w,this._normalizer),this._triggerCache[c]=d}this._transitionEngine.registerTrigger(e,r,d)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,i,r){this._transitionEngine.insertNode(t,e,i,r)}onRemove(t,e,i,r){this._transitionEngine.removeNode(t,e,r||!1,i)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,i,r){if("@"==i.charAt(0)){const[s,c]=EV(i);this._timelineEngine.command(s,e,c,r)}else this._transitionEngine.trigger(t,e,i,r)}listen(t,e,i,r,s){if("@"==i.charAt(0)){const[c,d]=EV(i);return this._timelineEngine.listen(c,e,d,s)}return this._transitionEngine.listen(t,e,i,r,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Uq=(()=>{class n{constructor(e,i,r){this._element=e,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(e);s||n.initialStylesByElement.set(e,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Gl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Gl(this._element,this._initialStyles),this._endStyles&&(Gl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Mp(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Mp(this._element,this._endStyles),this._endStyles=null),Gl(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function cO(n){let t=null;return n.forEach((e,i)=>{(function Hq(n){return"display"===n||"position"===n})(i)&&(t=t||new Map,t.set(i,e))}),t}class XV{constructor(t,e,i,r){this.element=t,this.keyframes=e,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const e=[];return t.forEach(i=>{e.push(Object.fromEntries(i))}),e}_triggerWebAnimation(t,e,i){return t.animate(this._convertKeyframesToObject(e),i)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&t.set(r,this._finished?i:LV(this.element,r))}),this.currentSnapshot=t}triggerCallback(t){const e="start"===t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class jq{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,e){return!1}containsElement(t,e){return AV(t,e)}getParentElement(t){return GR(t)}query(t,e,i){return TV(t,e,i)}computeStyle(t,e,i){return window.getComputedStyle(t)[e]}animate(t,e,i,r,s,c=[]){const p={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(p.easing=s);const _=new Map,w=c.filter(O=>O instanceof XV);(function W6(n,t){return 0===n||0===t})(i,r)&&w.forEach(O=>{O.currentSnapshot.forEach((U,W)=>_.set(W,U))});let I=function j6(n){return n.length?n[0]instanceof Map?n:n.map(t=>RV(t)):[]}(e).map(O=>rh(O));I=function q6(n,t,e){if(e.size&&t.length){let i=t[0],r=[];if(e.forEach((s,c)=>{i.has(c)||r.push(c),i.set(c,s)}),r.length)for(let s=1;s<t.length;s++){let c=t[s];r.forEach(d=>c.set(d,LV(n,d)))}}return t}(t,I,_);const T=function Bq(n,t){let e=null,i=null;return Array.isArray(t)&&t.length?(e=cO(t[0]),t.length>1&&(i=cO(t[t.length-1]))):t instanceof Map&&(e=cO(t)),e||i?new Uq(n,e,i):null}(t,I);return new XV(t,I,p,T)}}let $q=(()=>{class n extends UL{constructor(e,i){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(i.body,{id:"0",encapsulation:l.ifc.None,styles:[],data:{animation:[]}})}build(e){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?jL(e):e;return JV(this._renderer,null,i,"register",[r]),new zq(i,this._renderer)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.FYo),l.LFG(re))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class zq extends class OG{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new Gq(this._id,t,e||{},this._renderer)}}class Gq{constructor(t,e,i,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return JV(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function JV(n,t,e,i,r){return n.setProperty(t,`@@${e}:${i}`,r)}const eB="@.disabled";let Wq=(()=>{class n{constructor(e,i,r){this.delegate=e,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,c)=>{const d=c?.parentNode(s);d&&c.removeChild(d,s)}}createRenderer(e,i){const s=this.delegate.createRenderer(e,i);if(!(e&&i&&i.data&&i.data.animation)){let w=this._rendererCache.get(s);return w||(w=new tB("",s,this.engine),this._rendererCache.set(s,w)),w}const c=i.id,d=i.id+"-"+this._currentId;this._currentId++,this.engine.register(d,e);const p=w=>{Array.isArray(w)?w.forEach(p):this.engine.registerTrigger(c,d,e,w.name,w)};return i.data.animation.forEach(p),new qq(this,d,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,i,r){e>=0&&e<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[c,d]=s;c(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.FYo),l.LFG(rA),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class tB{constructor(t,e,i){this.namespaceId=t,this.delegate=e,this.engine=i,this.destroyNode=this.delegate.destroyNode?r=>e.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,i,r=!0){this.delegate.insertBefore(t,e,i),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,i){this.engine.onRemove(this.namespaceId,e,this.delegate,i)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,r){this.delegate.setAttribute(t,e,i,r)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,r){this.delegate.setStyle(t,e,i,r)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){"@"==e.charAt(0)&&e==eB?this.disableAnimations(t,!!i):this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i){return this.delegate.listen(t,e,i)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class qq extends tB{constructor(t,e,i,r){super(e,i,r),this.factory=t,this.namespaceId=e}setProperty(t,e,i){"@"==e.charAt(0)?"."==e.charAt(1)&&e==eB?this.disableAnimations(t,i=void 0===i||!!i):this.engine.process(this.namespaceId,t,e.slice(1),i):this.delegate.setProperty(t,e,i)}listen(t,e,i){if("@"==e.charAt(0)){const r=function Yq(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(t);let s=e.slice(1),c="";return"@"!=s.charAt(0)&&([s,c]=function Kq(n){const t=n.indexOf(".");return[n.substring(0,t),n.slice(t+1)]}(s)),this.engine.listen(this.namespaceId,r,s,c,d=>{this.factory.scheduleListenerCallback(d._data||-1,i,d)})}return this.delegate.listen(t,e,i)}}let Zq=(()=>{class n extends rA{constructor(e,i,r,s){super(e.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(re),l.LFG(WR),l.LFG(iO),l.LFG(l.z2F))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const nB=[{provide:UL,useClass:$q},{provide:iO,useFactory:function Qq(){return new gq}},{provide:rA,useClass:Zq},{provide:l.FYo,useFactory:function Xq(n,t,e){return new Wq(n,t,e)},deps:[Hh,rA,l.R0b]}],uO=[{provide:WR,useFactory:()=>new jq},{provide:l.QbO,useValue:"BrowserAnimations"},...nB],iB=[{provide:WR,useClass:MV},{provide:l.QbO,useValue:"NoopAnimations"},...nB];let Jq=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?iB:uO}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:uO,imports:[Ma]}),n})();const tY=new l.OlP("angularfire2.analytics.analyticsCollectionEnabled"),nY=new l.OlP("angularfire2.analytics.appVersion"),iY=new l.OlP("angularfire2.analytics.appName"),rY=new l.OlP("angularfire2.analytics.debugMode"),sY=new l.OlP("angularfire2.analytics.config"),oA="dataLayer";let fw=(()=>{class n{constructor(e,i,r,s,c,d,p,_,w){if(this.analyticsInitialized=new Promise(()=>{}),$i(p)){window[oA]=window[oA]||[];const T=(...W)=>"config"===W[0]&&"firebase"===W[2].origin&&(this.measurementId=W[1],!0),O=W=>{window.gtag=(...ie)=>{W&&W(...ie),"event"===ie[0]&&ie[2].send_to===this.measurementId&&(s&&(ie[2].app_name=s),r&&(ie[2].app_version=r)),c&&typeof console<"u"&&console.info(...ie),function(...ze){window[oA].push(arguments)}(...ie)}};window[oA].some(T)?(this.analyticsInitialized=Promise.resolve(),O()):this.analyticsInitialized=new Promise(W=>{O((...ie)=>{T(...ie)&&W()})}),d&&this.updateConfig(d),c&&this.updateConfig({debug_mode:1})}else this.analyticsInitialized=Promise.resolve();const I=Je(void 0).pipe((0,Ra.Q)(w.outsideAngular),_n(NR.Gb),_n(T=>T?_.runOutsideAngular(()=>N.e(643).then(N.bind(N,8643))):Ds.E),(0,Ye.U)(()=>(0,ai.cc)("analytics","AngularFireAnalytics",e.name,()=>{const T=e.analytics();return!1===i&&T.setAnalyticsCollectionEnabled(!1),T},[e,i,d,c])),qh({bufferSize:1,refCount:!1}));return(0,ai.pX)(this,I,_)}updateConfig(e){return(0,PR.mG)(this,void 0,void 0,function*(){yield this.analyticsInitialized,window.gtag("config",this.measurementId,Object.assign(Object.assign({},e),{update:!0}))})}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ai.Ot),l.LFG(tY,8),l.LFG(nY,8),l.LFG(iY,8),l.LFG(rY,8),l.LFG(sY,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(Lt.HU))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),sB=(()=>{class n{constructor(e,i,r,s){if(this.disposables=[],Cf.Z.registerVersion("angularfire",Lt.q4.full,"compat-user-tracking"),Hs(i))this.initialized=Promise.resolve();else{let c;this.initialized=s.runOutsideAngular(()=>new Promise(d=>c=d)),this.disposables=[r.authState.subscribe(d=>{e.setUserId(d?.uid),c()}),r.credential.subscribe(d=>{if(d){const p=d.user.isAnonymous?"anonymous":d.additionalUserInfo.providerId;d.additionalUserInfo.isNewUser&&e.logEvent("sign_up",{method:p}),e.logEvent("login",{method:p})}})]}}ngOnDestroy(){this.disposables.forEach(e=>e.unsubscribe())}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(fw),l.LFG(l.Lbi),l.LFG(Qu),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),hY=(()=>{class n{constructor(e,i,r,s,c,d){if(Cf.Z.registerVersion("angularfire",Lt.q4.full,"compat-screen-tracking"),!i||!e)return this;c.runOutsideAngular(()=>{this.disposable=bV(i,r,s).pipe(_n(p=>(0,PR.mG)(this,void 0,void 0,function*(){return d&&(yield d.initialized),yield e.logEvent("screen_view",p)}))).subscribe()})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(fw),l.LFG(xi,8),l.LFG(zs,8),l.LFG(l._Vd),l.LFG(l.R0b),l.LFG(sB,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),fY=(()=>{class n{constructor(e,i,r){Cf.Z.registerVersion("angularfire",Lt.q4.full,"analytics-compat"),e.app.then(()=>{})}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(fw),l.LFG(hY,8),l.LFG(sB,8))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[fw]}),n})();class dO{constructor(t=!1,e,i=!0,r){this._multiple=t,this._emitChanges=i,this.compareWith=r,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new vt.x,e&&e.length&&(t?e.forEach(s=>this._markSelected(s)):this._markSelected(e[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...t){this._verifyValueAssignment(t),t.forEach(i=>this._markSelected(i));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}deselect(...t){this._verifyValueAssignment(t),t.forEach(i=>this._unmarkSelected(i));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}setSelection(...t){this._verifyValueAssignment(t);const e=this.selected,i=new Set(t);t.forEach(s=>this._markSelected(s)),e.filter(s=>!i.has(s)).forEach(s=>this._unmarkSelected(s));const r=this._hasQueuedChanges();return this._emitChangeEvent(),r}toggle(t){return this.isSelected(t)?this.deselect(t):this.select(t)}clear(t=!0){this._unmarkAll();const e=this._hasQueuedChanges();return t&&this._emitChangeEvent(),e}isSelected(t){if(this.compareWith){for(const e of this._selection)if(this.compareWith(e,t))return!0;return!1}return this._selection.has(t)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){this.isSelected(t)||(this._multiple||this._unmarkAll(),this.isSelected(t)||this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}}let oB=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.Qsj),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n}),n})(),kp=(()=>{class n extends oB{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=l.n5z(n)))(i||n)}}(),n.\u0275dir=l.lG2({type:n,features:[l.qOj]}),n})();const Ro=new l.OlP("NgValueAccessor"),mY={provide:Ro,useExisting:(0,l.Gpc)(()=>aA),multi:!0},_Y=new l.OlP("CompositionEventMode");let aA=(()=>{class n extends oB{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function gY(){const n=F()?F().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.Qsj),l.Y36(l.SBq),l.Y36(_Y,8))},n.\u0275dir=l.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,i){1&e&&l.NdJ("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[l._Bn([mY]),l.qOj]}),n})();function sh(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function lB(n){return null!=n&&"number"==typeof n.length}const Jr=new l.OlP("NgValidators"),oh=new l.OlP("NgAsyncValidators"),vY=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class hO{static min(t){return function cB(n){return t=>{if(sh(t.value)||sh(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}(t)}static max(t){return function uB(n){return t=>{if(sh(t.value)||sh(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}(t)}static required(t){return dB(t)}static requiredTrue(t){return function hB(n){return!0===n.value?null:{required:!0}}(t)}static email(t){return function fB(n){return sh(n.value)||vY.test(n.value)?null:{email:!0}}(t)}static minLength(t){return function pB(n){return t=>sh(t.value)||!lB(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static maxLength(t){return function mB(n){return t=>lB(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static pattern(t){return function gB(n){if(!n)return lA;let t,e;return"string"==typeof n?(e="","^"!==n.charAt(0)&&(e+="^"),e+=n,"$"!==n.charAt(n.length-1)&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),i=>{if(sh(i.value))return null;const r=i.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}(t)}static nullValidator(t){return null}static compose(t){return CB(t)}static composeAsync(t){return EB(t)}}function dB(n){return sh(n.value)?{required:!0}:null}function lA(n){return null}function _B(n){return null!=n}function yB(n){return(0,l.QGY)(n)?(0,On.D)(n):n}function vB(n){let t={};return n.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function bB(n,t){return t.map(e=>e(n))}function wB(n){return n.map(t=>function bY(n){return!n.validate}(t)?t:e=>t.validate(e))}function CB(n){if(!n)return null;const t=n.filter(_B);return 0==t.length?null:function(e){return vB(bB(e,t))}}function fO(n){return null!=n?CB(wB(n)):null}function EB(n){if(!n)return null;const t=n.filter(_B);return 0==t.length?null:function(e){return DL(bB(e,t).map(yB)).pipe((0,Ye.U)(vB))}}function pO(n){return null!=n?EB(wB(n)):null}function DB(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function IB(n){return n._rawValidators}function SB(n){return n._rawAsyncValidators}function mO(n){return n?Array.isArray(n)?n:[n]:[]}function cA(n,t){return Array.isArray(n)?n.includes(t):n===t}function AB(n,t){const e=mO(t);return mO(n).forEach(r=>{cA(e,r)||e.push(r)}),e}function TB(n,t){return mO(t).filter(e=>!cA(n,e))}class MB{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=fO(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=pO(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class ks extends MB{get formDirective(){return null}get path(){return null}}class Wl extends MB{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class xB{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let kB=(()=>{class n extends xB{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Wl,2))},n.\u0275dir=l.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,i){2&e&&l.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[l.qOj]}),n})(),RB=(()=>{class n extends xB{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(ks,10))},n.\u0275dir=l.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,i){2&e&&l.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[l.qOj]}),n})();const pw="VALID",dA="INVALID",P_="PENDING",mw="DISABLED";function vO(n){return(hA(n)?n.validators:n)||null}function PB(n){return Array.isArray(n)?fO(n):n||null}function bO(n,t){return(hA(t)?t.asyncValidators:n)||null}function NB(n){return Array.isArray(n)?pO(n):n||null}function hA(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class VB{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=PB(this._rawValidators),this._composedAsyncValidatorFn=NB(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===pw}get invalid(){return this.status===dA}get pending(){return this.status==P_}get disabled(){return this.status===mw}get enabled(){return this.status!==mw}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=PB(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=NB(t)}addValidators(t){this.setValidators(AB(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(AB(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(TB(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(TB(t,this._rawAsyncValidators))}hasValidator(t){return cA(this._rawValidators,t)}hasAsyncValidator(t){return cA(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=P_,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=mw,this.errors=null,this._forEachChild(i=>{i.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=pw,this._forEachChild(i=>{i.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===pw||this.status===P_)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?mw:pw}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=P_,this._hasOwnPendingAsyncValidator=!0;const e=yB(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new l.vpe,this.statusChanges=new l.vpe}_calculateStatus(){return this._allControlsDisabled()?mw:this.errors?dA:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(P_)?P_:this._anyControlsHaveStatus(dA)?dA:pw}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){hA(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}}class fA extends VB{constructor(t,e,i){super(vO(e),bO(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){(function LB(n,t,e){n._forEachChild((i,r)=>{if(void 0===e[r])throw new l.vHH(1002,"")})})(this,0,t),Object.keys(t).forEach(i=>{(function FB(n,t,e){const i=n.controls;if(!(t?Object.keys(i):i).length)throw new l.vHH(1e3,"");if(!i[e])throw new l.vHH(1001,"")})(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(i=>{const r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,s)=>{i=e(i,r,s)}),i}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}function gw(n,t){wO(n,t),t.valueAccessor.writeValue(n.value),n.disabled&&t.valueAccessor.setDisabledState?.(!0),function MY(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&BB(n,t)})}(n,t),function kY(n,t){const e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function xY(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&BB(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function TY(n,t){if(t.valueAccessor.setDisabledState){const e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function mA(n,t,e=!0){const i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),_A(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function gA(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function wO(n,t){const e=IB(n);null!==t.validator?n.setValidators(DB(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const i=SB(n);null!==t.asyncValidator?n.setAsyncValidators(DB(i,t.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();gA(t._rawValidators,r),gA(t._rawAsyncValidators,r)}function _A(n,t){let e=!1;if(null!==n){if(null!==t.validator){const r=IB(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(c=>c!==t.validator);s.length!==r.length&&(e=!0,n.setValidators(s))}}if(null!==t.asyncValidator){const r=SB(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(c=>c!==t.asyncValidator);s.length!==r.length&&(e=!0,n.setAsyncValidators(s))}}}const i=()=>{};return gA(t._rawValidators,i),gA(t._rawAsyncValidators,i),e}function BB(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function UB(n,t){wO(n,t)}function jB(n,t){n._syncPendingControls(),t.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}const FY={provide:ks,useExisting:(0,l.Gpc)(()=>yw)},_w=(()=>Promise.resolve())();let yw=(()=>{class n extends ks{constructor(e,i){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new l.vpe,this.form=new fA({},fO(e),pO(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){_w.then(()=>{const i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),gw(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){_w.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){_w.then(()=>{const i=this._findContainer(e.path),r=new fA({});UB(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){_w.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){_w.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,jB(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Jr,10),l.Y36(oh,10))},n.\u0275dir=l.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,i){1&e&&l.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[l._Bn([FY]),l.qOj]}),n})();function $B(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}function zB(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const vw=class extends VB{constructor(t=null,e,i){super(vO(e),bO(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),hA(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=zB(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){$B(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){$B(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){zB(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};let KB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),QB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();const DO=new l.OlP("NgModelWithFormControlWarning"),GY={provide:ks,useExisting:(0,l.Gpc)(()=>N_)};let N_=(()=>{class n extends ks{constructor(e,i){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new l.vpe,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(_A(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const i=this.form.get(e.path);return gw(i,e),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){mA(e.control||null,e,!1),function NY(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this.submitted=!0,jB(this.form,this.directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const i=e.control,r=this.form.get(e.path);i!==r&&(mA(i||null,e),(n=>n instanceof vw)(r)&&(gw(r,e),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const i=this.form.get(e.path);UB(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const i=this.form.get(e.path);i&&function RY(n,t){return _A(n,t)}(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){wO(this.form,this),this._oldForm&&_A(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Jr,10),l.Y36(oh,10))},n.\u0275dir=l.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(e,i){1&e&&l.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[l._Bn([GY]),l.qOj,l.TTD]}),n})();const YY={provide:Wl,useExisting:(0,l.Gpc)(()=>AO)};let AO=(()=>{class n extends Wl{constructor(e,i,r,s,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new l.vpe,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function EO(n,t){if(!t)return null;let e,i,r;return Array.isArray(t),t.forEach(s=>{s.constructor===aA?e=s:function PY(n){return Object.getPrototypeOf(n.constructor)===kp}(s)?i=s:r=s}),r||i||e||null}(0,s)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),function CO(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return function pA(n,t){return[...t.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(e){return new(e||n)(l.Y36(ks,13),l.Y36(Jr,10),l.Y36(oh,10),l.Y36(Ro,10),l.Y36(DO,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[l._Bn([YY]),l.qOj,l.TTD]}),n})(),Rp=(()=>{class n{constructor(){this._validator=lA}ngOnChanges(e){if(this.inputName in e){const i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):lA,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return null!=e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n,features:[l.TTD]}),n})();const i4={provide:Jr,useExisting:(0,l.Gpc)(()=>yA),multi:!0};let yA=(()=>{class n extends Rp{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=l.D6c,this.createValidator=e=>dB}enabled(e){return e}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=l.n5z(n)))(i||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,i){2&e&&l.uIk("required",i._enabled?"":null)},inputs:{required:"required"},features:[l._Bn([i4]),l.qOj]}),n})(),p2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[QB]}),n})(),c4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[p2]}),n})(),m2=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:DO,useValue:e.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[p2]}),n})(),_2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[pL,kS,Wn,mR,mr,pL,Wn,mR,yR]}),n})();function D4(n,t){if(1&n&&(l.O4$(),l._UZ(0,"circle",4)),2&n){const e=l.oxw(),i=l.MAs(1);l.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+e._spinnerAnimationLabel)("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%")("transform-origin",e._getCircleTransformOrigin(i)),l.uIk("r",e._getCircleRadius())}}function I4(n,t){if(1&n&&(l.O4$(),l._UZ(0,"circle",4)),2&n){const e=l.oxw(),i=l.MAs(1);l.Udp("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%")("transform-origin",e._getCircleTransformOrigin(i)),l.uIk("r",e._getCircleRadius())}}const A4=q0(class{constructor(n){this._elementRef=n}},"primary"),T4=new l.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function M4(){return{diameter:100}}});class cu extends A4{constructor(t,e,i,r,s,c,d,p){super(t),this._document=i,this._diameter=100,this._value=0,this._resizeSubscription=Qi.w0.EMPTY,this.mode="determinate";const _=cu._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),_.has(i.head)||_.set(i.head,new Set([100])),this._noopAnimations="NoopAnimations"===r&&!!s&&!s._forceAnimations,"mat-spinner"===t.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),s&&(s.color&&(this.color=this.defaultColor=s.color),s.diameter&&(this.diameter=s.diameter),s.strokeWidth&&(this.strokeWidth=s.strokeWidth)),e.isBrowser&&e.SAFARI&&d&&c&&p&&(this._resizeSubscription=d.change(150).subscribe(()=>{"indeterminate"===this.mode&&p.run(()=>c.markForCheck())}))}get diameter(){return this._diameter}set diameter(t){this._diameter=A_(t),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(t){this._strokeWidth=A_(t)}get value(){return"determinate"===this.mode?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,A_(t)))}ngOnInit(){const t=this._elementRef.nativeElement;this._styleRoot=yi(t)||this._document.head,this._attachStyleNode(),t.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const t=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${t} ${t}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(t){const e=50*(t.currentScale??1);return`${e}% ${e}%`}_attachStyleNode(){const t=this._styleRoot,e=this._diameter,i=cu._diameters;let r=i.get(t);if(!r||!r.has(e)){const s=this._document.createElement("style");s.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),s.textContent=this._getAnimationText(),t.appendChild(s),r||(r=new Set,i.set(t,r)),r.add(e)}}_getAnimationText(){const t=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*t).replace(/END_VALUE/g,""+.2*t).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}cu._diameters=new WeakMap,cu.\u0275fac=function(t){return new(t||cu)(l.Y36(l.SBq),l.Y36(D),l.Y36(re,8),l.Y36(l.QbO,8),l.Y36(T4),l.Y36(l.sBO),l.Y36(iw),l.Y36(l.R0b))},cu.\u0275cmp=l.Xpm({type:cu,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(t,e){2&t&&(l.uIk("aria-valuemin","determinate"===e.mode?0:null)("aria-valuemax","determinate"===e.mode?100:null)("aria-valuenow","determinate"===e.mode?e.value:null)("mode",e.mode),l.Udp("width",e.diameter,"px")("height",e.diameter,"px"),l.ekj("_mat-animation-noopable",e._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[l.qOj],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(t,e){1&t&&(l.O4$(),l.TgZ(0,"svg",0,1),l.YNc(2,D4,1,11,"circle",2),l.YNc(3,I4,1,9,"circle",3),l.qZA()),2&t&&(l.Udp("width",e.diameter,"px")("height",e.diameter,"px"),l.Q6J("ngSwitch","indeterminate"===e.mode),l.uIk("viewBox",e._getViewBox()),l.xp6(2),l.Q6J("ngSwitchCase",!0),l.xp6(1),l.Q6J("ngSwitchCase",!1))},dependencies:[zr,ys],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:rgba(0,0,0,0);transition:stroke-dashoffset 225ms linear}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}.mat-progress-spinner[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}.mat-progress-spinner._mat-animation-noopable svg,.mat-progress-spinner._mat-animation-noopable circle{animation:none;transition:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}"],encapsulation:2,changeDetection:0});let y2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Wn,mr,Wn]}),n})();const k4=["connectionContainer"],R4=["inputContainer"],O4=["label"];function P4(n,t){1&n&&(l.ynx(0),l.TgZ(1,"div",14),l._UZ(2,"div",15)(3,"div",16)(4,"div",17),l.qZA(),l.TgZ(5,"div",18),l._UZ(6,"div",15)(7,"div",16)(8,"div",17),l.qZA(),l.BQk())}function N4(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",19),l.NdJ("cdkObserveContent",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.updateOutlineGap())}),l.Hsn(1,1),l.qZA()}if(2&n){const e=l.oxw();l.Q6J("cdkObserveContentDisabled","outline"!=e.appearance)}}function F4(n,t){if(1&n&&(l.ynx(0),l.Hsn(1,2),l.TgZ(2,"span"),l._uU(3),l.qZA(),l.BQk()),2&n){const e=l.oxw(2);l.xp6(3),l.Oqu(e._control.placeholder)}}function L4(n,t){1&n&&l.Hsn(0,3,["*ngSwitchCase","true"])}function V4(n,t){1&n&&(l.TgZ(0,"span",23),l._uU(1," *"),l.qZA())}function B4(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"label",20,21),l.NdJ("cdkObserveContent",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.updateOutlineGap())}),l.YNc(2,F4,4,1,"ng-container",12),l.YNc(3,L4,1,0,"ng-content",12),l.YNc(4,V4,2,0,"span",22),l.qZA()}if(2&n){const e=l.oxw();l.ekj("mat-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-form-field-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-accent","accent"==e.color)("mat-warn","warn"==e.color),l.Q6J("cdkObserveContentDisabled","outline"!=e.appearance)("id",e._labelId)("ngSwitch",e._hasLabel()),l.uIk("for",e._control.id)("aria-owns",e._control.id),l.xp6(2),l.Q6J("ngSwitchCase",!1),l.xp6(1),l.Q6J("ngSwitchCase",!0),l.xp6(1),l.Q6J("ngIf",!e.hideRequiredMarker&&e._control.required&&!e._control.disabled)}}function U4(n,t){1&n&&(l.TgZ(0,"div",24),l.Hsn(1,4),l.qZA())}function H4(n,t){if(1&n&&(l.TgZ(0,"div",25),l._UZ(1,"span",26),l.qZA()),2&n){const e=l.oxw();l.xp6(1),l.ekj("mat-accent","accent"==e.color)("mat-warn","warn"==e.color)}}function j4(n,t){if(1&n&&(l.TgZ(0,"div"),l.Hsn(1,5),l.qZA()),2&n){const e=l.oxw();l.Q6J("@transitionMessages",e._subscriptAnimationState)}}function $4(n,t){if(1&n&&(l.TgZ(0,"div",30),l._uU(1),l.qZA()),2&n){const e=l.oxw(2);l.Q6J("id",e._hintLabelId),l.xp6(1),l.Oqu(e.hintLabel)}}function z4(n,t){if(1&n&&(l.TgZ(0,"div",27),l.YNc(1,$4,2,2,"div",28),l.Hsn(2,6),l._UZ(3,"div",29),l.Hsn(4,7),l.qZA()),2&n){const e=l.oxw();l.Q6J("@transitionMessages",e._subscriptAnimationState),l.xp6(1),l.Q6J("ngIf",e.hintLabel)}}const G4=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],W4=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],q4=new l.OlP("MatError"),Y4={transitionMessages:nh("transitionMessages",[zl("enter",Li({opacity:1,transform:"translateY(0%)"})),To("void => enter",[Li({opacity:0,transform:"translateY(-5px)"}),ca("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let vA=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n}),n})();const K4=new l.OlP("MatHint");let kO=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n,selectors:[["mat-label"]]}),n})(),Z4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n,selectors:[["mat-placeholder"]]}),n})();const Q4=new l.OlP("MatPrefix"),X4=new l.OlP("MatSuffix");let v2=0;const e8=q0(class{constructor(n){this._elementRef=n}},"primary"),t8=new l.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),bw=new l.OlP("MatFormField");let n8=(()=>{class n extends e8{constructor(e,i,r,s,c,d,p){super(e),this._changeDetectorRef=i,this._dir=r,this._defaults=s,this._platform=c,this._ngZone=d,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new vt.x,this._hideRequiredMarker=!1,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+v2++,this._labelId="mat-form-field-label-"+v2++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==p,this.appearance=s?.appearance||"legacy",s&&(this._hideRequiredMarker=Boolean(s.hideRequiredMarker),s.color&&(this.color=this.defaultColor=s.color))}get appearance(){return this._appearance}set appearance(e){const i=this._appearance;this._appearance=e||this._defaults?.appearance||"legacy","outline"===this._appearance&&i!==e&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=vi(e)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(e){this._explicitFormFieldControl=e}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${e.controlType}`),e.stateChanges.pipe(Gi(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(dr(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(dr(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,Pn.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(Gi(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(Gi(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(dr(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(e){const i=this._control?this._control.ngControl:null;return i&&i[e]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,aa(this._label.nativeElement,"transitionend").pipe(bn(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,r=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;i?e.push(i.id):this._hintLabel&&e.push(this._hintLabelId),r&&e.push(r.id)}else this._errorChildren&&e.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(e)}}_validateControlChild(){}updateOutlineGap(){const e=this._label?this._label.nativeElement:null,i=this._connectionContainerRef.nativeElement,r=".mat-form-field-outline-start",s=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!e||!e.children.length||!e.textContent.trim()){const w=i.querySelectorAll(`${r}, ${s}`);for(let I=0;I<w.length;I++)w[I].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let c=0,d=0;const p=i.querySelectorAll(r),_=i.querySelectorAll(s);if(this._label&&this._label.nativeElement.children.length){const w=i.getBoundingClientRect();if(0===w.width&&0===w.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const I=this._getStartEnd(w),T=e.children,O=this._getStartEnd(T[0].getBoundingClientRect());let U=0;for(let W=0;W<T.length;W++)U+=T[W].offsetWidth;c=Math.abs(O-I)-5,d=U>0?.75*U+10:0}for(let w=0;w<p.length;w++)p[w].style.width=`${c}px`;for(let w=0;w<_.length;w++)_[w].style.width=`${d}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(e){return this._dir&&"rtl"===this._dir.value?e.right:e.left}_isAttachedToDOM(){const e=this._elementRef.nativeElement;if(e.getRootNode){const i=e.getRootNode();return i&&i!==e}return document.documentElement.contains(e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.sBO),l.Y36(Jd,8),l.Y36(t8,8),l.Y36(D),l.Y36(l.R0b),l.Y36(l.QbO,8))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-form-field"]],contentQueries:function(e,i,r){if(1&e&&(l.Suo(r,vA,5),l.Suo(r,vA,7),l.Suo(r,kO,5),l.Suo(r,kO,7),l.Suo(r,Z4,5),l.Suo(r,q4,5),l.Suo(r,K4,5),l.Suo(r,Q4,5),l.Suo(r,X4,5)),2&e){let s;l.iGM(s=l.CRH())&&(i._controlNonStatic=s.first),l.iGM(s=l.CRH())&&(i._controlStatic=s.first),l.iGM(s=l.CRH())&&(i._labelChildNonStatic=s.first),l.iGM(s=l.CRH())&&(i._labelChildStatic=s.first),l.iGM(s=l.CRH())&&(i._placeholderChild=s.first),l.iGM(s=l.CRH())&&(i._errorChildren=s),l.iGM(s=l.CRH())&&(i._hintChildren=s),l.iGM(s=l.CRH())&&(i._prefixChildren=s),l.iGM(s=l.CRH())&&(i._suffixChildren=s)}},viewQuery:function(e,i){if(1&e&&(l.Gf(k4,7),l.Gf(R4,5),l.Gf(O4,5)),2&e){let r;l.iGM(r=l.CRH())&&(i._connectionContainerRef=r.first),l.iGM(r=l.CRH())&&(i._inputContainerRef=r.first),l.iGM(r=l.CRH())&&(i._label=r.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(e,i){2&e&&l.ekj("mat-form-field-appearance-standard","standard"==i.appearance)("mat-form-field-appearance-fill","fill"==i.appearance)("mat-form-field-appearance-outline","outline"==i.appearance)("mat-form-field-appearance-legacy","legacy"==i.appearance)("mat-form-field-invalid",i._control.errorState)("mat-form-field-can-float",i._canLabelFloat())("mat-form-field-should-float",i._shouldLabelFloat())("mat-form-field-has-label",i._hasFloatingLabel())("mat-form-field-hide-placeholder",i._hideControlPlaceholder())("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-focused",i._control.focused)("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))("_mat-animation-noopable",!i._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[l._Bn([{provide:bw,useExisting:n}]),l.qOj],ngContentSelectors:W4,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(e,i){1&e&&(l.F$t(G4),l.TgZ(0,"div",0)(1,"div",1,2),l.NdJ("click",function(s){return i._control.onContainerClick&&i._control.onContainerClick(s)}),l.YNc(3,P4,9,0,"ng-container",3),l.YNc(4,N4,2,1,"div",4),l.TgZ(5,"div",5,6),l.Hsn(7),l.TgZ(8,"span",7),l.YNc(9,B4,5,16,"label",8),l.qZA()(),l.YNc(10,U4,2,0,"div",9),l.qZA(),l.YNc(11,H4,2,4,"div",10),l.TgZ(12,"div",11),l.YNc(13,j4,2,1,"div",12),l.YNc(14,z4,5,2,"div",13),l.qZA()()),2&e&&(l.xp6(3),l.Q6J("ngIf","outline"==i.appearance),l.xp6(1),l.Q6J("ngIf",i._prefixChildren.length),l.xp6(5),l.Q6J("ngIf",i._hasFloatingLabel()),l.xp6(1),l.Q6J("ngIf",i._suffixChildren.length),l.xp6(1),l.Q6J("ngIf","outline"!=i.appearance),l.xp6(1),l.Q6J("ngSwitch",i._getDisplayedMessages()),l.xp6(1),l.Q6J("ngSwitchCase","error"),l.xp6(1),l.Q6J("ngSwitchCase","hint"))},dependencies:[Rn,zr,ys,t3],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}','.mat-input-element{font:inherit;background:rgba(0,0,0,0);color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}._mat-animation-noopable .mat-input-element::placeholder{transition:none}._mat-animation-noopable .mat-input-element::-moz-placeholder{transition:none}._mat-animation-noopable .mat-input-element::-webkit-input-placeholder{transition:none}._mat-animation-noopable .mat-input-element:-ms-input-placeholder{transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:rgba(0,0,0,0)}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}"],encapsulation:2,data:{animation:[Y4.transitionMessages]},changeDetection:0}),n})(),ww=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[mr,Wn,ZF,Wn]}),n})();const w2=We({passive:!0});let i8=(()=>{class n{constructor(e,i){this._platform=e,this._ngZone=i,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return Ds.E;const i=ou(e),r=this._monitoredElements.get(i);if(r)return r.subject;const s=new vt.x,c="cdk-text-field-autofilled",d=p=>{"cdk-text-field-autofill-start"!==p.animationName||i.classList.contains(c)?"cdk-text-field-autofill-end"===p.animationName&&i.classList.contains(c)&&(i.classList.remove(c),this._ngZone.run(()=>s.next({target:p.target,isAutofilled:!1}))):(i.classList.add(c),this._ngZone.run(()=>s.next({target:p.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",d,w2),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:s,unlisten:()=>{i.removeEventListener("animationstart",d,w2)}}),s}stopMonitoring(e){const i=ou(e),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((e,i)=>this.stopMonitoring(i))}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(D),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),C2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();const E2=new l.OlP("MAT_INPUT_VALUE_ACCESSOR"),r8=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let s8=0;const o8=hL(class{constructor(n,t,e,i){this._defaultErrorStateMatcher=n,this._parentForm=t,this._parentFormGroup=e,this.ngControl=i,this.stateChanges=new vt.x}});let a8=(()=>{class n extends o8{constructor(e,i,r,s,c,d,p,_,w,I){super(d,s,c,r),this._elementRef=e,this._platform=i,this._autofillMonitor=_,this._formField=I,this._uid="mat-input-"+s8++,this.focused=!1,this.stateChanges=new vt.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(U=>Z().has(U)),this._iOSKeyupListener=U=>{const W=U.target;!W.value&&0===W.selectionStart&&0===W.selectionEnd&&(W.setSelectionRange(1,1),W.setSelectionRange(0,0))};const T=this._elementRef.nativeElement,O=T.nodeName.toLowerCase();this._inputValueAccessor=p||T,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&w.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===O,this._isTextarea="textarea"===O,this._isInFormField=!!I,this._isNativeSelect&&(this.controlType=T.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(e){this._disabled=vi(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(hO.required)??!1}set required(e){this._required=vi(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&Z().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=vi(e)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){const e=this._formField,i=e&&"legacy"===e.appearance&&!e._hasLabel?.()?null:this.placeholder;if(i!==this._previousPlaceholder){const r=this._elementRef.nativeElement;this._previousPlaceholder=i,i?r.setAttribute("placeholder",i):r.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_validateType(){r8.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const e=this._elementRef.nativeElement,i=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(D),l.Y36(Wl,10),l.Y36(yw,8),l.Y36(N_,8),l.Y36(fR),l.Y36(E2,10),l.Y36(i8),l.Y36(l.R0b),l.Y36(bw,8))},n.\u0275dir=l.lG2({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(e,i){1&e&&l.NdJ("focus",function(){return i._focusChanged(!0)})("blur",function(){return i._focusChanged(!1)})("input",function(){return i._onInput()}),2&e&&(l.Ikx("disabled",i.disabled)("required",i.required),l.uIk("id",i.id)("data-placeholder",i.placeholder)("name",i.name||null)("readonly",i.readonly&&!i._isNativeSelect||null)("aria-invalid",i.empty&&i.required?null:i.errorState)("aria-required",i.required),l.ekj("mat-input-server",i._isServer)("mat-native-select-inline",i._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[l._Bn([{provide:vA,useExisting:n}]),l.qOj,l.TTD]}),n})(),D2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[fR],imports:[C2,ww,Wn,C2,ww]}),n})();const d8={provide:new l.OlP("mat-autocomplete-scroll-strategy"),deps:[Mo],useFactory:function u8(n){return()=>n.scrollStrategies.reposition()}};let S2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[d8],imports:[R_,RS,Wn,mr,k_,RS,Wn]}),n})();const m8=["trigger"],g8=["panel"];function _8(n,t){if(1&n&&(l.TgZ(0,"span",8),l._uU(1),l.qZA()),2&n){const e=l.oxw();l.xp6(1),l.Oqu(e.placeholder)}}function y8(n,t){if(1&n&&(l.TgZ(0,"span",12),l._uU(1),l.qZA()),2&n){const e=l.oxw(2);l.xp6(1),l.Oqu(e.triggerValue)}}function v8(n,t){1&n&&l.Hsn(0,0,["*ngSwitchCase","true"])}function b8(n,t){if(1&n&&(l.TgZ(0,"span",9),l.YNc(1,y8,2,1,"span",10),l.YNc(2,v8,1,0,"ng-content",11),l.qZA()),2&n){const e=l.oxw();l.Q6J("ngSwitch",!!e.customTrigger),l.xp6(2),l.Q6J("ngSwitchCase",!0)}}function w8(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",13)(1,"div",14,15),l.NdJ("@transformPanel.done",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s._panelDoneAnimatingStream.next(r.toState))})("keydown",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s._handleKeydown(r))}),l.Hsn(3,1),l.qZA()()}if(2&n){const e=l.oxw();l.Q6J("@transformPanelWrap",void 0),l.xp6(1),l.Gre("mat-select-panel ",e._getPanelTheme(),""),l.Udp("transform-origin",e._transformOrigin)("font-size",e._triggerFontSize,"px"),l.Q6J("ngClass",e.panelClass)("@transformPanel",e.multiple?"showing-multiple":"showing"),l.uIk("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}const C8=[[["mat-select-trigger"]],"*"],E8=["mat-select-trigger","*"],A2={transformPanelWrap:nh("transformPanelWrap",[To("* => void",IR("@transformPanel",[DR()],{optional:!0}))]),transformPanel:nh("transformPanel",[zl("void",Li({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),zl("showing",Li({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),zl("showing-multiple",Li({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),To("void => *",ca("120ms cubic-bezier(0, 0, 0.2, 1)")),To("* => void",ca("100ms 25ms linear",Li({opacity:0})))])};let T2=0;const x2=new l.OlP("mat-select-scroll-strategy"),A8=new l.OlP("MAT_SELECT_CONFIG"),T8={provide:x2,deps:[Mo],useFactory:function S8(n){return()=>n.scrollStrategies.reposition()}};class M8{constructor(t,e){this.source=t,this.value=e}}const x8=Y0(V3(uR(hL(class{constructor(n,t,e,i,r){this._elementRef=n,this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=i,this.ngControl=r,this.stateChanges=new vt.x}})))),k8=new l.OlP("MatSelectTrigger");let R8=(()=>{class n extends x8{constructor(e,i,r,s,c,d,p,_,w,I,T,O,U,W){super(c,s,p,_,I),this._viewportRuler=e,this._changeDetectorRef=i,this._ngZone=r,this._dir=d,this._parentFormField=w,this._liveAnnouncer=U,this._defaultOptions=W,this._panelOpen=!1,this._compareWith=(ie,ze)=>ie===ze,this._uid="mat-select-"+T2++,this._triggerAriaLabelledBy=null,this._destroy=new vt.x,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+T2++,this._panelDoneAnimatingStream=new vt.x,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.optionSelectionChanges=Fl(()=>{const ie=this.options;return ie?ie.changes.pipe(Gi(ie),_n(()=>(0,Pn.T)(...ie.map(ze=>ze.onSelectionChange)))):this._ngZone.onStable.pipe(bn(1),_n(()=>this.optionSelectionChanges))}),this.openedChange=new l.vpe,this._openedStream=this.openedChange.pipe(tn(ie=>ie),(0,Ye.U)(()=>{})),this._closedStream=this.openedChange.pipe(tn(ie=>!ie),(0,Ye.U)(()=>{})),this.selectionChange=new l.vpe,this.valueChange=new l.vpe,this.ngControl&&(this.ngControl.valueAccessor=this),null!=W?.typeaheadDebounceInterval&&(this._typeaheadDebounceInterval=W.typeaheadDebounceInterval),this._scrollStrategyFactory=O,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(T)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(hO.required)??!1}set required(e){this._required=vi(e),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(e){this._multiple=vi(e)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(e){this._disableOptionCentering=vi(e)}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this._assignValue(e)&&this._onChange(e)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(e){this._typeaheadDebounceInterval=A_(e)}get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new dO(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(ed(),dr(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(dr(this._destroy)).subscribe(e=>{e.added.forEach(i=>i.select()),e.removed.forEach(i=>i.deselect())}),this.options.changes.pipe(Gi(null),dr(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const e=this._getTriggerAriaLabelledby(),i=this.ngControl;if(e!==this._triggerAriaLabelledBy){const r=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?r.setAttribute("aria-labelledby",e):r.removeAttribute("aria-labelledby")}i&&(this._previousControl!==i.control&&(void 0!==this._previousControl&&null!==i.disabled&&i.disabled!==this.disabled&&(this.disabled=i.disabled),this._previousControl=i.control),this.updateErrorState())}ngOnChanges(e){(e.disabled||e.userAriaDescribedBy)&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(e){this._assignValue(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const e=this._selectionModel.selected.map(i=>i.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){const i=e.keyCode,r=40===i||38===i||37===i||39===i,s=13===i||32===i,c=this._keyManager;if(!c.isTyping()&&s&&!Ao(e)||(this.multiple||e.altKey)&&r)e.preventDefault(),this.open();else if(!this.multiple){const d=this.selected;c.onKeydown(e);const p=this.selected;p&&d!==p&&this._liveAnnouncer.announce(p.viewValue,1e4)}}_handleOpenKeydown(e){const i=this._keyManager,r=e.keyCode,s=40===r||38===r,c=i.isTyping();if(s&&e.altKey)e.preventDefault(),this.close();else if(c||13!==r&&32!==r||!i.activeItem||Ao(e))if(!c&&this._multiple&&65===r&&e.ctrlKey){e.preventDefault();const d=this.options.some(p=>!p.disabled&&!p.selected);this.options.forEach(p=>{p.disabled||(d?p.select():p.deselect())})}else{const d=i.activeItemIndex;i.onKeydown(e),this._multiple&&s&&e.shiftKey&&i.activeItem&&i.activeItemIndex!==d&&i.activeItem._selectViaInteraction()}else e.preventDefault(),i.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(bn(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this._selectionModel.selected.forEach(i=>i.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(i=>this._selectOptionByValue(i)),this._sortValues();else{const i=this._selectOptionByValue(e);i?this._keyManager.updateActiveItem(i):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(e){const i=this.options.find(r=>{if(this._selectionModel.isSelected(r))return!1;try{return null!=r.value&&this._compareWith(r.value,e)}catch{return!1}});return i&&this._selectionModel.select(i),i}_assignValue(e){return!!(e!==this._value||this._multiple&&Array.isArray(e))&&(this.options&&this._setSelectionByValue(e),this._value=e,!0)}_initKeyManager(){this._keyManager=new c3(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(dr(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe(dr(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const e=(0,Pn.T)(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(dr(e)).subscribe(i=>{this._onSelect(i.source,i.isUserInput),i.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),(0,Pn.T)(...this.options.map(i=>i._stateChanges)).pipe(dr(e)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(e,i){const r=this._selectionModel.isSelected(e);null!=e.value||this._multiple?(r!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),i&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),i&&this.focus())):(e.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(e.value)),r!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const e=this.options.toArray();this._selectionModel.sort((i,r)=>this.sortComparator?this.sortComparator(i,r,e):e.indexOf(i)-e.indexOf(r)),this.stateChanges.next()}}_propagateChanges(e){let i=null;i=this.multiple?this.selected.map(r=>r.value):this.selected?this.selected.value:e,this._value=i,this.valueChange.emit(i),this._onChange(i),this.selectionChange.emit(this._getChangeEvent(i)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;const e=this._parentFormField?.getLabelId();return this.ariaLabelledby?(e?e+" ":"")+this.ariaLabelledby:e}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;const e=this._parentFormField?.getLabelId();let i=(e?e+" ":"")+this._valueId;return this.ariaLabelledby&&(i+=" "+this.ariaLabelledby),i}_panelDoneAnimating(e){this.openedChange.emit(e)}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(iw),l.Y36(l.sBO),l.Y36(l.R0b),l.Y36(fR),l.Y36(l.SBq),l.Y36(Jd,8),l.Y36(yw,8),l.Y36(N_,8),l.Y36(bw,8),l.Y36(Wl,10),l.$8M("tabindex"),l.Y36(x2),l.Y36(A3),l.Y36(A8,8))},n.\u0275dir=l.lG2({type:n,viewQuery:function(e,i){if(1&e&&(l.Gf(m8,5),l.Gf(g8,5),l.Gf(rV,5)),2&e){let r;l.iGM(r=l.CRH())&&(i.trigger=r.first),l.iGM(r=l.CRH())&&(i.panel=r.first),l.iGM(r=l.CRH())&&(i._overlayDir=r.first)}},inputs:{userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[l.qOj,l.TTD]}),n})(),O8=(()=>{class n extends R8{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(e,i,r){const s=this._getItemHeight();return Math.min(Math.max(0,s*e-i+s/2),r)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(dr(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe(bn(1)).subscribe(()=>{this._triggerFontSize&&this._overlayDir.overlayRef&&this._overlayDir.overlayRef.overlayElement&&(this._overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(e){const i=gR(e,this.options,this.optionGroups),r=this._getItemHeight();this.panel.nativeElement.scrollTop=0===e&&1===i?0:function EL(n,t,e,i){return n<e?n:n+t>e+i?Math.max(0,n-i+t):e}((e+i)*r,r,this.panel.nativeElement.scrollTop,256)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(e){this.panelOpen?this._scrollTop=0:(this._overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(e)}_getChangeEvent(e){return new M8(this,e)}_calculateOverlayOffsetX(){const e=this._overlayDir.overlayRef.overlayElement.getBoundingClientRect(),i=this._viewportRuler.getViewportSize(),r=this._isRtl(),s=this.multiple?56:32;let c;if(this.multiple)c=40;else if(this.disableOptionCentering)c=16;else{let _=this._selectionModel.selected[0]||this.options.first;c=_&&_.group?32:16}r||(c*=-1);const d=0-(e.left+c-(r?s:0)),p=e.right+c-i.width+(r?0:s);d>0?c+=d+8:p>0&&(c-=p+8),this._overlayDir.offsetX=Math.round(c),this._overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(e,i,r){const s=this._getItemHeight(),c=(s-this._triggerRect.height)/2,d=Math.floor(256/s);let p;return this.disableOptionCentering?0:(p=0===this._scrollTop?e*s:this._scrollTop===r?(e-(this._getItemCount()-d))*s+(s-(this._getItemCount()*s-256)%s):i-s/2,Math.round(-1*p-c))}_checkOverlayWithinViewport(e){const i=this._getItemHeight(),r=this._viewportRuler.getViewportSize(),s=this._triggerRect.top-8,c=r.height-this._triggerRect.bottom-8,d=Math.abs(this._offsetY),_=Math.min(this._getItemCount()*i,256)-d-this._triggerRect.height;_>c?this._adjustPanelUp(_,c):d>s?this._adjustPanelDown(d,s,e):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(e,i){const r=Math.round(e-i);this._scrollTop-=r,this._offsetY-=r,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(e,i,r){const s=Math.round(e-i);if(this._scrollTop+=s,this._offsetY+=s,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=r)return this._scrollTop=r,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const e=this._getItemHeight(),i=this._getItemCount(),r=Math.min(i*e,256),c=i*e-r;let d;d=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),d+=gR(d,this.options,this.optionGroups);const p=r/2;this._scrollTop=this._calculateOverlayScroll(d,p,c),this._offsetY=this._calculateOverlayOffsetY(d,p,c),this._checkOverlayWithinViewport(c)}_getOriginBasedOnOption(){const e=this._getItemHeight(),i=(e-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-i+e/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=l.n5z(n)))(i||n)}}(),n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-select"]],contentQueries:function(e,i,r){if(1&e&&(l.Suo(r,k8,5),l.Suo(r,CL,5),l.Suo(r,bL,5)),2&e){let s;l.iGM(s=l.CRH())&&(i.customTrigger=s.first),l.iGM(s=l.CRH())&&(i.options=s),l.iGM(s=l.CRH())&&(i.optionGroups=s)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:19,hostBindings:function(e,i){1&e&&l.NdJ("keydown",function(s){return i._handleKeydown(s)})("focus",function(){return i._onFocus()})("blur",function(){return i._onBlur()}),2&e&&(l.uIk("id",i.id)("tabindex",i.tabIndex)("aria-controls",i.panelOpen?i.id+"-panel":null)("aria-expanded",i.panelOpen)("aria-label",i.ariaLabel||null)("aria-required",i.required.toString())("aria-disabled",i.disabled.toString())("aria-invalid",i.errorState)("aria-activedescendant",i._getAriaActiveDescendant()),l.ekj("mat-select-disabled",i.disabled)("mat-select-invalid",i.errorState)("mat-select-required",i.required)("mat-select-empty",i.empty)("mat-select-multiple",i.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[l._Bn([{provide:vA,useExisting:n},{provide:vL,useExisting:n}]),l.qOj],ngContentSelectors:E8,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(e,i){if(1&e&&(l.F$t(C8),l.TgZ(0,"div",0,1),l.NdJ("click",function(){return i.toggle()}),l.TgZ(3,"div",2),l.YNc(4,_8,2,1,"span",3),l.YNc(5,b8,3,2,"span",4),l.qZA(),l.TgZ(6,"div",5),l._UZ(7,"div",6),l.qZA()(),l.YNc(8,w8,4,14,"ng-template",7),l.NdJ("backdropClick",function(){return i.close()})("attach",function(){return i._onAttached()})("detach",function(){return i.close()})),2&e){const r=l.MAs(1);l.uIk("aria-owns",i.panelOpen?i.id+"-panel":null),l.xp6(3),l.Q6J("ngSwitch",i.empty),l.uIk("id",i._valueId),l.xp6(1),l.Q6J("ngSwitchCase",!0),l.xp6(1),l.Q6J("ngSwitchCase",!1),l.xp6(3),l.Q6J("cdkConnectedOverlayPanelClass",i._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",i._scrollStrategy)("cdkConnectedOverlayOrigin",r)("cdkConnectedOverlayOpen",i.panelOpen)("cdkConnectedOverlayPositions",i._positions)("cdkConnectedOverlayMinWidth",null==i._triggerRect?null:i._triggerRect.width)("cdkConnectedOverlayOffsetY",i._offsetY)}},dependencies:[Cn,zr,ys,lo,rV,iV],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{height:16px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;margin:0 4px}.mat-form-field.mat-focused .mat-select-arrow{transform:translateX(0)}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}'],encapsulation:2,data:{animation:[A2.transformPanelWrap,A2.transformPanel]},changeDetection:0}),n})(),k2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[T8],imports:[mr,R_,RS,Wn,k_,ww,RS,Wn]}),n})(),F8=(()=>{class n{constructor(){this.changes=new vt.x,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year",this.startDateLabel="Start date",this.endDateLabel="End date"}formatYearRange(e,i){return`${e} \u2013 ${i}`}formatYearRangeLabel(e,i){return`${e} to ${i}`}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const W8={provide:new l.OlP("mat-datepicker-scroll-strategy"),deps:[Mo],useFactory:function G8(n){return()=>n.scrollStrategies.reposition()}};let N2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[F8,W8],imports:[mr,_R,R_,cL,tw,Wn,k_]}),n})();const Q8=["*",[["mat-card-footer"]]],X8=["*","mat-card-footer"];let RO=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n,selectors:[["mat-card-content"],["","mat-card-content",""],["","matCardContent",""]],hostAttrs:[1,"mat-card-content"]}),n})(),OO=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),n})(),PO=(()=>{class n{constructor(e){this._animationMode=e}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.QbO,8))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(e,i){2&e&&l.ekj("_mat-animation-noopable","NoopAnimations"===i._animationMode)},exportAs:["matCard"],ngContentSelectors:X8,decls:2,vars:0,template:function(e,i){1&e&&(l.F$t(Q8),l.Hsn(0),l.Hsn(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}.mat-card._mat-animation-noopable{transition:none !important;animation:none !important}.mat-card>.mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card>.mat-divider-horizontal{left:auto;right:0}.mat-card>.mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card>.mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px;display:block;overflow:hidden}.mat-card-image img{width:100%}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}"],encapsulation:2,changeDetection:0}),n})(),F2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Wn,Wn]}),n})();function J8(n,t){}class DA{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0}}let L2=(()=>{class n extends MR{constructor(e,i,r,s,c,d,p,_){super(),this._elementRef=e,this._focusTrapFactory=i,this._config=s,this._interactivityChecker=c,this._ngZone=d,this._overlayRef=p,this._focusMonitor=_,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=w=>{this._portalOutlet.hasAttached();const I=this._portalOutlet.attachDomPortal(w);return this._contentAttached(),I},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=r}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(e){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachComponentPortal(e);return this._contentAttached(),i}attachTemplatePortal(e){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachTemplatePortal(e);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,i){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{e.removeEventListener("blur",r),e.removeEventListener("mousedown",r),e.removeAttribute("tabindex")};e.addEventListener("blur",r),e.addEventListener("mousedown",r)})),e.focus(i)}_focusByCssSelector(e,i){let r=this._elementRef.nativeElement.querySelector(e);r&&this._forceFocus(r,i)}_trapFocus(){const e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const e=this._config.restoreFocus;let i=null;if("string"==typeof e?i=this._document.querySelector(e):"boolean"==typeof e?i=e?this._elementFocusedBeforeDialogWasOpened:null:e&&(i=e),this._config.restoreFocus&&i&&"function"==typeof i.focus){const r=tl(),s=this._elementRef.nativeElement;(!r||r===this._document.body||r===s||s.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,i=tl();return e===i||e.contains(i)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=tl())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(oR),l.Y36(re,8),l.Y36(DA),l.Y36(MS),l.Y36(l.R0b),l.Y36(sw),l.Y36(Ip))},n.\u0275cmp=l.Xpm({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(e,i){if(1&e&&l.Gf(xR,7),2&e){let r;l.iGM(r=l.CRH())&&(i._portalOutlet=r.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(e,i){2&e&&l.uIk("id",i._config.id||null)("role",i._config.role)("aria-modal",i._config.ariaModal)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null)},features:[l.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,i){1&e&&l.YNc(0,J8,0,0,"ng-template",0)},dependencies:[xR],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),n})();class NO{constructor(t,e){this.overlayRef=t,this.config=e,this.closed=new vt.x,this.disableClose=e.disableClose,this.backdropClick=t.backdropClick(),this.keydownEvents=t.keydownEvents(),this.outsidePointerEvents=t.outsidePointerEvents(),this.id=e.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!Ao(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})})}close(t,e){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=e?.focusOrigin||"program",this.overlayRef.dispose(),i.next(t),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(t="",e=""){return this.overlayRef.updateSize({width:t,height:e}),this}addPanelClass(t){return this.overlayRef.addPanelClass(t),this}removePanelClass(t){return this.overlayRef.removePanelClass(t),this}}const V2=new l.OlP("DialogScrollStrategy"),e5=new l.OlP("DialogData"),t5=new l.OlP("DefaultDialogConfig"),r5={provide:V2,deps:[Mo],useFactory:function n5(n){return()=>n.scrollStrategies.block()}};let s5=0,B2=(()=>{class n{constructor(e,i,r,s,c,d){this._overlay=e,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=c,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new vt.x,this._afterOpenedAtThisLevel=new vt.x,this._ariaHiddenElements=new Map,this.afterAllClosed=Fl(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Gi(void 0))),this._scrollStrategy=d}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}open(e,i){(i={...this._defaultOptions||new DA,...i}).id=i.id||"cdk-dialog-"+s5++,i.id&&this.getDialogById(i.id);const s=this._getOverlayConfig(i),c=this._overlay.create(s),d=new NO(c,i),p=this._attachContainer(c,d,i);return d.containerInstance=p,this._attachDialogContent(e,d,p,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(d),d.closed.subscribe(()=>this._removeOpenDialog(d,!0)),this.afterOpened.next(d),d}closeAll(){FO(this.openDialogs,e=>e.close())}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){FO(this._openDialogsAtThisLevel,e=>{!1===e.config.closeOnDestroy&&this._removeOpenDialog(e,!1)}),FO(this._openDialogsAtThisLevel,e=>e.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(e){const i=new rw({positionStrategy:e.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,width:e.width,height:e.height,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(i.backdropClass=e.backdropClass),i}_attachContainer(e,i,r){const s=r.injector||r.viewContainerRef?.injector,c=[{provide:DA,useValue:r},{provide:NO,useValue:i},{provide:sw,useValue:e}];let d;r.container?"function"==typeof r.container?d=r.container:(d=r.container.type,c.push(...r.container.providers(r))):d=L2;const p=new TR(d,r.viewContainerRef,l.zs3.create({parent:s||this._injector,providers:c}),r.componentFactoryResolver);return e.attach(p).instance}_attachDialogContent(e,i,r,s){if(e instanceof l.Rgc){const c=this._createInjector(s,i,r,void 0);let d={$implicit:s.data,dialogRef:i};s.templateContext&&(d={...d,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),r.attachTemplatePortal(new ew(e,null,d,c))}else{const c=this._createInjector(s,i,r,this._injector),d=r.attachComponentPortal(new TR(e,s.viewContainerRef,c,s.componentFactoryResolver));i.componentInstance=d.instance}}_createInjector(e,i,r,s){const c=e.injector||e.viewContainerRef?.injector,d=[{provide:e5,useValue:e.data},{provide:NO,useValue:i}];return e.providers&&("function"==typeof e.providers?d.push(...e.providers(i,e,r)):d.push(...e.providers)),e.direction&&(!c||!c.get(Jd,null,l.XFs.Optional))&&d.push({provide:Jd,useValue:{value:e.direction,change:Je()}}),l.zs3.create({parent:c||s,providers:d})}_removeOpenDialog(e,i){const r=this.openDialogs.indexOf(e);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,c)=>{s?c.setAttribute("aria-hidden",s):c.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const i=e.parentElement.children;for(let r=i.length-1;r>-1;r--){const s=i[r];s!==e&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Mo),l.LFG(l.zs3),l.LFG(t5,8),l.LFG(n,12),l.LFG(BS),l.LFG(V2))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function FO(n,t){let e=n.length;for(;e--;)t(n[e])}let o5=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[B2,r5],imports:[R_,tw,cL,tw]}),n})();function a5(n,t){}const V_={params:{enterAnimationDuration:"150ms",exitAnimationDuration:"75ms"}},l5={dialogContainer:nh("dialogContainer",[zl("void, exit",Li({opacity:0,transform:"scale(0.7)"})),zl("enter",Li({transform:"none"})),To("* => enter",HL([ca("{{enterAnimationDuration}} cubic-bezier(0, 0, 0.2, 1)",Li({transform:"none",opacity:1})),IR("@*",DR(),{optional:!0})]),V_),To("* => void, * => exit",HL([ca("{{exitAnimationDuration}} cubic-bezier(0.4, 0.0, 0.2, 1)",Li({opacity:0})),IR("@*",DR(),{optional:!0})]),V_)])};class IA{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0,this.enterAnimationDuration=V_.params.enterAnimationDuration,this.exitAnimationDuration=V_.params.exitAnimationDuration}}let c5=(()=>{class n extends L2{constructor(e,i,r,s,c,d,p,_){super(e,i,r,s,c,d,p,_),this._animationStateChanged=new l.vpe}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(e){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:e})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(oR),l.Y36(re,8),l.Y36(IA),l.Y36(MS),l.Y36(l.R0b),l.Y36(sw),l.Y36(Ip))},n.\u0275cmp=l.Xpm({type:n,selectors:[["ng-component"]],features:[l.qOj],decls:0,vars:0,template:function(e,i){},encapsulation:2}),n})(),u5=(()=>{class n extends c5{constructor(e,i,r,s,c,d,p,_,w){super(e,i,r,s,c,d,p,w),this._changeDetectorRef=_,this._state="enter"}_onAnimationDone({toState:e,totalTime:i}){"enter"===e?this._openAnimationDone(i):"exit"===e&&this._animationStateChanged.next({state:"closed",totalTime:i})}_onAnimationStart({toState:e,totalTime:i}){"enter"===e?this._animationStateChanged.next({state:"opening",totalTime:i}):("exit"===e||"void"===e)&&this._animationStateChanged.next({state:"closing",totalTime:i})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_getAnimationState(){return{value:this._state,params:{enterAnimationDuration:this._config.enterAnimationDuration||V_.params.enterAnimationDuration,exitAnimationDuration:this._config.exitAnimationDuration||V_.params.exitAnimationDuration}}}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(oR),l.Y36(re,8),l.Y36(IA),l.Y36(MS),l.Y36(l.R0b),l.Y36(sw),l.Y36(l.sBO),l.Y36(Ip))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-dialog-container"],hostVars:7,hostBindings:function(e,i){1&e&&l.WFA("@dialogContainer.start",function(s){return i._onAnimationStart(s)})("@dialogContainer.done",function(s){return i._onAnimationDone(s)}),2&e&&(l.Ikx("id",i._config.id),l.uIk("aria-modal",i._config.ariaModal)("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),l.d8E("@dialogContainer",i._getAnimationState()))},features:[l.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,i){1&e&&l.YNc(0,a5,0,0,"ng-template",0)},dependencies:[xR],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions.mat-dialog-actions-align-center,.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions.mat-dialog-actions-align-end,.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}"],encapsulation:2,data:{animation:[l5.dialogContainer]}}),n})();class LO{constructor(t,e,i){this._ref=t,this._containerInstance=i,this._afterOpened=new vt.x,this._beforeClosed=new vt.x,this._state=0,this.disableClose=e.disableClose,this.id=t.id,i._animationStateChanged.pipe(tn(r=>"opened"===r.state),bn(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(tn(r=>"closed"===r.state),bn(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),(0,Pn.T)(this.backdropClick(),this.keydownEvents().pipe(tn(r=>27===r.keyCode&&!this.disableClose&&!Ao(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),function d5(n,t,e){n._closeInteractionType=t,n.close(e)}(this,"keydown"===r.type?"keyboard":"mouse"))})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(tn(e=>"closing"===e.state),bn(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(t){let e=this._ref.config.positionStrategy;return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._ref.updatePosition(),this}updateSize(t="",e=""){return this._ref.updateSize(t,e),this}addPanelClass(t){return this._ref.addPanelClass(t),this}removePanelClass(t){return this._ref.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const U2=new l.OlP("MatDialogData"),h5=new l.OlP("mat-dialog-default-options"),H2=new l.OlP("mat-dialog-scroll-strategy"),p5={provide:H2,deps:[Mo],useFactory:function f5(n){return()=>n.scrollStrategies.block()}};let m5=0,g5=(()=>{class n{constructor(e,i,r,s,c,d,p,_,w,I){this._overlay=e,this._defaultOptions=r,this._parentDialog=s,this._dialogRefConstructor=p,this._dialogContainerType=_,this._dialogDataToken=w,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new vt.x,this._afterOpenedAtThisLevel=new vt.x,this._idPrefix="mat-dialog-",this.afterAllClosed=Fl(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Gi(void 0))),this._scrollStrategy=d,this._dialog=i.get(B2)}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(e,i){let r;(i={...this._defaultOptions||new IA,...i}).id=i.id||`${this._idPrefix}${m5++}`,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(e,{...i,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:IA,useValue:i},{provide:DA,useValue:i}]},templateContext:()=>({dialogRef:r}),providers:(c,d,p)=>(r=new this._dialogRefConstructor(c,i,p),r.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:p},{provide:this._dialogDataToken,useValue:d.data},{provide:this._dialogRefConstructor,useValue:r}])});return r.componentInstance=s.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{const c=this.openDialogs.indexOf(r);c>-1&&(this.openDialogs.splice(c,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(e){let i=e.length;for(;i--;)e[i].close()}}return n.\u0275fac=function(e){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),SA=(()=>{class n extends g5{constructor(e,i,r,s,c,d,p,_){super(e,i,s,d,p,c,LO,u5,U2,_)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Mo),l.LFG(l.zs3),l.LFG(Fe,8),l.LFG(h5,8),l.LFG(H2),l.LFG(n,12),l.LFG(BS),l.LFG(l.QbO,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),_5=0,j2=(()=>{class n{constructor(e,i,r){this._dialogRef=e,this._elementRef=i,this._dialog=r,this.id="mat-dialog-title-"+_5++}ngOnInit(){this._dialogRef||(this._dialogRef=function v5(n,t){let e=n.nativeElement.parentElement;for(;e&&!e.classList.contains("mat-dialog-container");)e=e.parentElement;return e?t.find(i=>i.id===e.id):null}(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const e=this._dialogRef._containerInstance;e&&!e._ariaLabelledBy&&(e._ariaLabelledBy=this.id)})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(LO,8),l.Y36(l.SBq),l.Y36(SA))},n.\u0275dir=l.lG2({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-dialog-title"],hostVars:1,hostBindings:function(e,i){2&e&&l.Ikx("id",i.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),n})(),$2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-dialog-content"]}),n})(),y5=(()=>{class n{constructor(){this.align="start"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-dialog-actions"],hostVars:4,hostBindings:function(e,i){2&e&&l.ekj("mat-dialog-actions-align-center","center"===i.align)("mat-dialog-actions-align-end","end"===i.align)},inputs:{align:"align"}}),n})(),z2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[SA,p5],imports:[o5,R_,tw,Wn,Wn]}),n})();const b5=[S2,_R,F2,N2,z2,yR,ww,FL,D2,_2,cV,fL,y2,k2,uV];let VO=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[b5,S2,_R,F2,N2,z2,yR,ww,FL,D2,_2,cV,fL,y2,k2,uV]}),n})();function w5(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"button",2),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.logout())}),l._uU(1,"Logout"),l.qZA()}if(2&n){const e=l.oxw();l.Q6J("color",e.color)}}function C5(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"button",2),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.login())}),l._uU(1,"Login"),l.qZA()}if(2&n){const e=l.oxw();l.Q6J("color",e.color)}}let G2=(()=>{class n{constructor(e){this.authService=e,this.user$=this.authService.user$}ngOnInit(){}login(){this.authService.login()}logout(){this.authService.logout()}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(oa))},n.\u0275cmp=l.Xpm({type:n,selectors:[["ob-login-with-google"]],inputs:{color:"color"},decls:4,vars:4,consts:[["mat-raised-button","",3,"color","click",4,"ngIf","ngIfElse"],["showLogin",""],["mat-raised-button","",3,"color","click"]],template:function(e,i){if(1&e&&(l.YNc(0,w5,2,1,"button",0),l.ALo(1,"async"),l.YNc(2,C5,2,1,"ng-template",null,1,l.W1O)),2&e){const r=l.MAs(3);l.Q6J("ngIf",l.lcZ(1,2,i.user$))("ngIfElse",r)}},dependencies:[Rn,x_,_a]}),n})(),E5=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[mr,VO,zm,VO]}),n})(),W2=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["ob-spinner"]],decls:2,vars:1,consts:[[1,"spinner-container"],["mode","indeterminate",3,"diameter"]],template:function(e,i){1&e&&(l.TgZ(0,"div",0),l._UZ(1,"mat-progress-spinner",1),l.qZA()),2&e&&(l.xp6(1),l.Q6J("diameter",50))},dependencies:[cu],styles:[".spinner-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}"]}),n})(),AA=(()=>{class n{constructor(e){this.datePipe=e}jsToHtmlDate(e){return this.datePipe.transform(e,Ss_formatter.badgeIsoDateTime)||void 0}isoToHumanDate(e){return this.datePipe.transform(e,Ss_formatter.badgeHumanDateTime)||void 0}isoToHtmlDate(e){if(e)return this.datePipe.transform(new Date(e),Ss_formatter.badgeIsoDateTime)||void 0}isoToJsDate(e){if(!e)return;const i=this.datePipe.transform(new Date(e),Ss_formatter.badgeIsoDateTime)||void 0;return i?new Date(i):void 0}htmlToIso(e){return new Date(e+":00.000").toISOString()}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ya))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function D5(n,t){if(1&n&&(l.TgZ(0,"mat-option",11),l._uU(1),l.qZA()),2&n){const e=t.$implicit;l.Q6J("value",e),l.xp6(1),l.hij(" ",e," ")}}const I5=function(){return["in","out"]};let BO=(()=>{class n{constructor(e){this.dateService=e,this.badge={clock:"in",timestamp:this.dateService.jsToHtmlDate(new Date)},this.formSubmitted=new l.vpe,this.badgeForm=new fA({clock:new vw(this.badge?.clock),timestamp:new vw(this.badge?.timestamp),userId:new vw({value:this.badge?.userId,disabled:!0})})}ngOnInit(){}ngOnChanges(e){e?.badge?.currentValue&&this.badgeForm.patchValue({...e?.badge?.currentValue})}submit(){if(this.badgeForm.invalid)return;const e={...this.badgeForm.getRawValue(),timestamp:this.dateService.htmlToIso(this.badgeForm.value.timestamp)};this.formSubmitted.emit(e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(AA))},n.\u0275cmp=l.Xpm({type:n,selectors:[["ob-badge-form"]],inputs:{badge:"badge"},outputs:{formSubmitted:"formSubmitted"},features:[l.TTD],decls:18,vars:3,consts:[[3,"formGroup","submit"],[1,"fields"],["appearance","outline",1,"field-user-uid"],["matInput","","formControlName","userId","required",""],["appearance","outline",1,"field-clock"],["formControlName","clock","required",""],[3,"value",4,"ngFor","ngForOf"],["appearance","outline",1,"field-timestamp"],["matInput","","type","datetime-local","formControlName","timestamp","required",""],[1,"buttons"],["mat-raised-button","","color","primary","type","submit"],[3,"value"]],template:function(e,i){1&e&&(l.TgZ(0,"form",0),l.NdJ("submit",function(){return i.submit()}),l.TgZ(1,"div",1)(2,"mat-form-field",2)(3,"mat-label"),l._uU(4,"user id"),l.qZA(),l._UZ(5,"input",3),l.qZA(),l.TgZ(6,"mat-form-field",4)(7,"mat-label"),l._uU(8,"clock"),l.qZA(),l.TgZ(9,"mat-select",5),l.YNc(10,D5,2,2,"mat-option",6),l.qZA()(),l.TgZ(11,"mat-form-field",7)(12,"mat-label"),l._uU(13,"timestamp"),l.qZA(),l._UZ(14,"input",8),l.qZA()(),l.TgZ(15,"div",9)(16,"button",10),l._uU(17,"Save"),l.qZA()()()),2&e&&(l.Q6J("formGroup",i.badgeForm),l.xp6(10),l.Q6J("ngForOf",l.DdM(2,I5)))},dependencies:[ss,CL,x_,n8,kO,a8,O8,KB,aA,kB,RB,yA,N_,AO],styles:[".fields[_ngcontent-%COMP%]{display:flex;flex-direction:column}.buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"]}),n})(),q2=(()=>{class n{constructor(){this.formSubmitted=new l.vpe}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["ob-badge-edit-dialog"]],inputs:{badgeForm:"badgeForm"},outputs:{formSubmitted:"formSubmitted"},decls:4,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"badge","formSubmitted"]],template:function(e,i){1&e&&(l.TgZ(0,"h1",0),l._uU(1,"Edit Badge"),l.qZA(),l.TgZ(2,"div",1)(3,"ob-badge-form",2),l.NdJ("formSubmitted",function(s){return i.formSubmitted.emit(s)}),l.qZA()()),2&e&&(l.xp6(3),l.Q6J("badge",i.badgeForm))},dependencies:[j2,$2,BO]}),n})();function S5(n,t){if(1&n&&(l.TgZ(0,"h1",6),l._uU(1),l.qZA()),2&n){const e=l.oxw();l.xp6(1),l.Oqu(e.data.title)}}function A5(n,t){if(1&n&&(l.TgZ(0,"p"),l._uU(1),l.qZA()),2&n){const e=l.oxw();l.xp6(1),l.Oqu(e.data.message)}}function T5(n,t){if(1&n&&l._UZ(0,"div",7),2&n){const e=l.oxw();l.Q6J("innerHTML",e.data.html,l.oJD)}}function M5(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"button",8),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.onCancel())}),l._uU(1),l.qZA()}if(2&n){const e=l.oxw();l.xp6(1),l.Oqu(e.data.cancelText)}}let Y2=(()=>{class n{constructor(e,i){this.data=e,this.dialogRef=i}onEsc(){this.close(!1)}ngOnInit(){}onCancel(){this.close(!1)}onConfirm(){this.close(!0)}close(e){this.dialogRef.close(e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(U2),l.Y36(LO))},n.\u0275cmp=l.Xpm({type:n,selectors:[["ob-dialog"]],hostBindings:function(e,i){1&e&&l.NdJ("keydown.esc",function(){return i.onEsc()})},decls:8,vars:5,consts:[["mat-dialog-title","",4,"ngIf"],[4,"ngIf"],[3,"innerHTML",4,"ngIf"],["align","end"],["mat-flat-button","",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],["mat-dialog-title",""],[3,"innerHTML"],["mat-flat-button","",3,"click"]],template:function(e,i){1&e&&(l.YNc(0,S5,2,1,"h1",0),l.TgZ(1,"mat-dialog-content"),l.YNc(2,A5,2,1,"p",1),l.YNc(3,T5,1,1,"div",2),l.qZA(),l.TgZ(4,"mat-dialog-actions",3),l.YNc(5,M5,2,1,"button",4),l.TgZ(6,"button",5),l.NdJ("click",function(){return i.onConfirm()}),l._uU(7),l.qZA()()),2&e&&(l.Q6J("ngIf",!!i.data.title),l.xp6(2),l.Q6J("ngIf",!!i.data.message),l.xp6(1),l.Q6J("ngIf",!!i.data.html),l.xp6(2),l.Q6J("ngIf",!!i.data.cancelText),l.xp6(2),l.Oqu(i.data.confirmText))},dependencies:[Rn,x_,j2,$2,y5]}),n})(),K2=(()=>{class n{constructor(e){this.dialog=e}open(e){this.dialogRef=this.dialog.open(Y2,{data:{title:e.title,message:e.message,html:e.html,cancelText:e.cancelText,confirmText:e.confirmText}})}confirmed(){return this.dialogRef?this.dialogRef.afterClosed().pipe(bn(1),(0,Ye.U)(e=>e)):Je(!1)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(SA))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const x5=[K2];let k5=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[...x5],imports:[mr,VO,m2]}),n})(),Z2=(()=>{class n{constructor(){this.abortController=new AbortController,this.hasNfcCapability$=new Pi(!1),this.permissionState$=new Pi("denied"),this.readRunningState$=new Pi("stopped"),this.writeRunningState$=new Pi("stopped"),this.messages$=new vt.x}init(){var e=this;return(0,we.Z)(function*(){if("NDEFReader"in window){console.debug("[NfcService] This browser has NFC capability! <3"),e.hasNfcCapability$.next(!0);const i=yield navigator.permissions.query({name:"nfc"});e.permissionState$.next(i.state),i.onchange=()=>{console.debug("[NfcService] The user decided to change his settings. New permission: "+i.state),e.permissionState$.next(i.state),"denied"===i.state&&e.stopRead()},"granted"===i.state?(console.debug("[NfcService] The user has granted the NFC permission"),e.startRead()):"prompt"===i.state?console.debug("[NfcService] The user should be asked to grant the NFC permission"):console.debug("[NfcService] The user didn't grant the NFC permission")}else console.debug("[NfcService] No NFC capability :(")})()}startRead(){var e=this;return(0,we.Z)(function*(){e.stopWrite(),e.abortController=new AbortController,e.ndef=new NDEFReader;try{const i=yield e.ndef.scan({signal:e.abortController.signal});e.readRunningState$.next("started"),console.debug("[NfcService] Scan started successfully.",i),e.ndef.onreadingerror=()=>{console.debug("[NfcService] Cannot read data from the NFC tag. Try another one?")},e.ndef.onreading=r=>{console.debug("[NfcService] NDEF message read.",r);const s=new TextDecoder;for(const c of r.message.records)e.messages$.next({recordType:c.recordType,mediaType:c.mediaType,data:s.decode(c.data)})}}catch(i){console.error(`[NfcService] Error! Scan failed to start: ${i}.`)}})()}stopRead(){this.abortController.abort(),this.readRunningState$.next("stopped")}startWrite(e){var i=this;return(0,we.Z)(function*(){if(e){i.stopRead(),i.abortController=new AbortController,i.ndef=new NDEFReader;try{const r=yield i.ndef.write(e,{signal:i.abortController.signal});console.debug(`[NfcService] NDEF message "${e}" written!`,r),i.writeRunningState$.next("started")}catch(r){i.writeRunningState$.next("stopped"),console.error("[NfcService] Error on NDEF message  writing!",r)}}else console.error("[NfcService] cannot write an empty text")})()}stopWrite(){this.abortController.abort(),this.writeRunningState$.next("stopped")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var kt,R5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},uu={},UO=UO||{},rn=R5||self;function TA(){}function MA(n){var t=typeof n;return"array"==(t="object"!=t?t:n?Array.isArray(n)?"array":t:"null")||"object"==t&&"number"==typeof n.length}function Ew(n){var t=typeof n;return"object"==t&&null!=n||"function"==t}var HO="closure_uid_"+(1e9*Math.random()>>>0),P5=0;function N5(n,t,e){return n.call.apply(n.bind,arguments)}function F5(n,t,e){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(t,r)}}return function(){return n.apply(t,arguments)}}function hs(n,t,e){return(hs=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?N5:F5).apply(null,arguments)}function xA(n,t){var e=Array.prototype.slice.call(arguments,1);return function(){var i=e.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function es(n,t){function e(){}e.prototype=t.prototype,n.X=t.prototype,n.prototype=new e,n.prototype.constructor=n,n.Wb=function(i,r,s){for(var c=Array(arguments.length-2),d=2;d<arguments.length;d++)c[d-2]=arguments[d];return t.prototype[r].apply(i,c)}}function ah(){this.s=this.s,this.o=this.o}var V5={};ah.prototype.s=!1,ah.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function O5(n){return Object.prototype.hasOwnProperty.call(n,HO)&&n[HO]||(n[HO]=++P5)}(this);delete V5[n]}},ah.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Q2=Array.prototype.indexOf?function(n,t){return Array.prototype.indexOf.call(n,t,void 0)}:function(n,t){if("string"==typeof n)return"string"!=typeof t||1!=t.length?-1:n.indexOf(t,0);for(let e=0;e<n.length;e++)if(e in n&&n[e]===t)return e;return-1};function jO(n){const t=n.length;if(0<t){const e=Array(t);for(let i=0;i<t;i++)e[i]=n[i];return e}return[]}function X2(n,t){for(let e=1;e<arguments.length;e++){const i=arguments[e];if(MA(i)){const r=n.length||0,s=i.length||0;n.length=r+s;for(let c=0;c<s;c++)n[r+c]=i[c]}else n.push(i)}}function fs(n,t){this.type=n,this.g=this.target=t,this.defaultPrevented=!1}fs.prototype.h=function(){this.defaultPrevented=!0};var B5=function(){if(!rn.addEventListener||!Object.defineProperty)return!1;var n=!1,t=Object.defineProperty({},"passive",{get:function(){n=!0}});try{rn.addEventListener("test",TA,t),rn.removeEventListener("test",TA,t)}catch{}return n}();function kA(n){return/^[\s\xa0]*$/.test(n)}var J2=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function $O(n,t){return n<t?-1:n>t?1:0}function RA(){var n=rn.navigator;return n&&(n=n.userAgent)?n:""}function ql(n){return-1!=RA().indexOf(n)}function zO(n){return zO[" "](n),n}zO[" "]=TA;var OA,n,H5=ql("Opera"),B_=ql("Trident")||ql("MSIE"),eU=ql("Edge"),GO=eU||B_,tU=ql("Gecko")&&!(-1!=RA().toLowerCase().indexOf("webkit")&&!ql("Edge"))&&!(ql("Trident")||ql("MSIE"))&&!ql("Edge"),j5=-1!=RA().toLowerCase().indexOf("webkit")&&!ql("Edge");function nU(){var n=rn.document;return n?n.documentMode:void 0}e:{var WO="",qO=(n=RA(),tU?/rv:([^\);]+)(\)|;)/.exec(n):eU?/Edge\/([\d\.]+)/.exec(n):B_?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):j5?/WebKit\/(\S+)/.exec(n):H5?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(qO&&(WO=qO?qO[1]:""),B_){var YO=nU();if(null!=YO&&YO>parseFloat(WO)){OA=String(YO);break e}}OA=WO}var $5={};var G5=rn.document&&B_&&(nU()||parseInt(OA,10))||void 0;function Dw(n,t){if(fs.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var e=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=t,t=n.relatedTarget){if(tU){e:{try{zO(t.nodeName);var r=!0;break e}catch{}r=!1}r||(t=null)}}else"mouseover"==e?t=n.fromElement:"mouseout"==e&&(t=n.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:W5[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Dw.X.h.call(this)}}es(Dw,fs);var W5={2:"touch",3:"pen",4:"mouse"};Dw.prototype.h=function(){Dw.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Iw="closure_listenable_"+(1e6*Math.random()|0),q5=0;function Y5(n,t,e,i,r){this.listener=n,this.proxy=null,this.src=t,this.type=e,this.capture=!!i,this.ha=r,this.key=++q5,this.ba=this.ea=!1}function PA(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function ZO(n,t,e){for(const i in n)t.call(e,n[i],i,n)}function rU(n){const t={};for(const e in n)t[e]=n[e];return t}const sU="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oU(n,t){let e,i;for(let r=1;r<arguments.length;r++){for(e in i=arguments[r],i)n[e]=i[e];for(let s=0;s<sU.length;s++)e=sU[s],Object.prototype.hasOwnProperty.call(i,e)&&(n[e]=i[e])}}function NA(n){this.src=n,this.g={},this.h=0}function QO(n,t){var e=t.type;if(e in n.g){var s,i=n.g[e],r=Q2(i,t);(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(PA(t),0==n.g[e].length&&(delete n.g[e],n.h--))}}function XO(n,t,e,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.ba&&s.listener==t&&s.capture==!!e&&s.ha==i)return r}return-1}NA.prototype.add=function(n,t,e,i,r){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var c=XO(n,t,i,r);return-1<c?(t=n[c],e||(t.ea=!1)):((t=new Y5(t,this.src,s,!!i,r)).ea=e,n.push(t)),t};var JO="closure_lm_"+(1e6*Math.random()|0),eP={};function aU(n,t,e,i,r){if(i&&i.once)return cU(n,t,e,i,r);if(Array.isArray(t)){for(var s=0;s<t.length;s++)aU(n,t[s],e,i,r);return null}return e=rP(e),n&&n[Iw]?n.N(t,e,Ew(i)?!!i.capture:!!i,r):lU(n,t,e,!1,i,r)}function lU(n,t,e,i,r,s){if(!t)throw Error("Invalid event type");var c=Ew(r)?!!r.capture:!!r,d=nP(n);if(d||(n[JO]=d=new NA(n)),(e=d.add(t,e,i,c,s)).proxy)return e;if(i=function K5(){const t=Z5;return function n(e){return t.call(n.src,n.listener,e)}}(),e.proxy=i,i.src=n,i.listener=e,n.addEventListener)B5||(r=c),void 0===r&&(r=!1),n.addEventListener(t.toString(),i,r);else if(n.attachEvent)n.attachEvent(dU(t.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return e}function cU(n,t,e,i,r){if(Array.isArray(t)){for(var s=0;s<t.length;s++)cU(n,t[s],e,i,r);return null}return e=rP(e),n&&n[Iw]?n.O(t,e,Ew(i)?!!i.capture:!!i,r):lU(n,t,e,!0,i,r)}function uU(n,t,e,i,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)uU(n,t[s],e,i,r);else i=Ew(i)?!!i.capture:!!i,e=rP(e),n&&n[Iw]?(n=n.i,(t=String(t).toString())in n.g&&-1<(e=XO(s=n.g[t],e,i,r))&&(PA(s[e]),Array.prototype.splice.call(s,e,1),0==s.length&&(delete n.g[t],n.h--))):n&&(n=nP(n))&&(t=n.g[t.toString()],n=-1,t&&(n=XO(t,e,i,r)),(e=-1<n?t[n]:null)&&tP(e))}function tP(n){if("number"!=typeof n&&n&&!n.ba){var t=n.src;if(t&&t[Iw])QO(t.i,n);else{var e=n.type,i=n.proxy;t.removeEventListener?t.removeEventListener(e,i,n.capture):t.detachEvent?t.detachEvent(dU(e),i):t.addListener&&t.removeListener&&t.removeListener(i),(e=nP(t))?(QO(e,n),0==e.h&&(e.src=null,t[JO]=null)):PA(n)}}}function dU(n){return n in eP?eP[n]:eP[n]="on"+n}function Z5(n,t){if(n.ba)n=!0;else{t=new Dw(t,this);var e=n.listener,i=n.ha||n.src;n.ea&&tP(n),n=e.call(i,t)}return n}function nP(n){return(n=n[JO])instanceof NA?n:null}var iP="__closure_events_fn_"+(1e9*Math.random()>>>0);function rP(n){return"function"==typeof n?n:(n[iP]||(n[iP]=function(t){return n.handleEvent(t)}),n[iP])}function Vr(){ah.call(this),this.i=new NA(this),this.P=this,this.I=null}function ts(n,t){var e,i=n.I;if(i)for(e=[];i;i=i.I)e.push(i);if(n=n.P,i=t.type||t,"string"==typeof t)t=new fs(t,n);else if(t instanceof fs)t.target=t.target||n;else{var r=t;oU(t=new fs(i,n),r)}if(r=!0,e)for(var s=e.length-1;0<=s;s--){var c=t.g=e[s];r=FA(c,i,!0,t)&&r}if(r=FA(c=t.g=n,i,!0,t)&&r,r=FA(c,i,!1,t)&&r,e)for(s=0;s<e.length;s++)r=FA(c=t.g=e[s],i,!1,t)&&r}function FA(n,t,e,i){if(!(t=n.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,s=0;s<t.length;++s){var c=t[s];if(c&&!c.ba&&c.capture==e){var d=c.listener,p=c.ha||c.src;c.ea&&QO(n.i,c),r=!1!==d.call(p,i)&&r}}return r&&!i.defaultPrevented}es(Vr,ah),Vr.prototype[Iw]=!0,Vr.prototype.removeEventListener=function(n,t,e,i){uU(this,n,t,e,i)},Vr.prototype.M=function(){if(Vr.X.M.call(this),this.i){var t,n=this.i;for(t in n.g){for(var e=n.g[t],i=0;i<e.length;i++)PA(e[i]);delete n.g[t],n.h--}}this.I=null},Vr.prototype.N=function(n,t,e,i){return this.i.add(String(n),t,!1,e,i)},Vr.prototype.O=function(n,t,e,i){return this.i.add(String(n),t,!0,e,i)};var sP=rn.JSON.stringify;function Q5(){var n=pU;let t=null;return n.g&&(t=n.g,n.g=n.g.next,n.g||(n.h=null),t.next=null),t}var oP,hU=new class{constructor(n,t){this.i=n,this.j=t,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new J5,n=>n.reset());class J5{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function eK(n){rn.setTimeout(()=>{throw n},0)}function fU(n,t){oP||function tK(){var n=rn.Promise.resolve(void 0);oP=function(){n.then(nK)}}(),aP||(oP(),aP=!0),pU.add(n,t)}var aP=!1,pU=new class X5{constructor(){this.h=this.g=null}add(t,e){const i=hU.get();i.set(t,e),this.h?this.h.next=i:this.g=i,this.h=i}};function nK(){for(var n;n=Q5();){try{n.h.call(n.g)}catch(e){eK(e)}var t=hU;t.j(n),100>t.h&&(t.h++,n.next=t.g,t.g=n)}aP=!1}function LA(n,t){Vr.call(this),this.h=n||1,this.g=t||rn,this.j=hs(this.lb,this),this.l=Date.now()}function lP(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function cP(n,t,e){if("function"==typeof n)e&&(n=hs(n,e));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=hs(n.handleEvent,n)}return 2147483647<Number(t)?-1:rn.setTimeout(n,t||0)}function mU(n){n.g=cP(()=>{n.g=null,n.i&&(n.i=!1,mU(n))},n.j);const t=n.h;n.h=null,n.m.apply(null,t)}es(LA,Vr),(kt=LA.prototype).ca=!1,kt.R=null,kt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),ts(this,"tick"),this.ca&&(lP(this),this.start()))}},kt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},kt.M=function(){LA.X.M.call(this),lP(this),delete this.g};class iK extends ah{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:mU(this)}M(){super.M(),this.g&&(rn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sw(n){ah.call(this),this.h=n,this.g={}}es(Sw,ah);var gU=[];function _U(n,t,e,i){Array.isArray(e)||(e&&(gU[0]=e.toString()),e=gU);for(var r=0;r<e.length;r++){var s=aU(t,e[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function yU(n){ZO(n.g,function(t,e){this.g.hasOwnProperty(e)&&tP(t)},n),n.g={}}function VA(){this.g=!0}function U_(n,t,e,i){n.info(function(){return"XMLHTTP TEXT ("+t+"): "+function aK(n,t){if(!n.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(n=0;n<e.length;n++)if(Array.isArray(e[n])){var i=e[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var c=1;c<r.length;c++)r[c]=""}}}return sP(e)}catch{return t}}(n,e)+(i?" "+i:"")})}Sw.prototype.M=function(){Sw.X.M.call(this),yU(this)},Sw.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},VA.prototype.Aa=function(){this.g=!1},VA.prototype.info=function(){};var Op={},vU=null;function BA(){return vU=vU||new Vr}function bU(n){fs.call(this,Op.Pa,n)}function Aw(n){const t=BA();ts(t,new bU(t,n))}function wU(n,t){fs.call(this,Op.STAT_EVENT,n),this.stat=t}function Rs(n){const t=BA();ts(t,new wU(t,n))}function CU(n,t){fs.call(this,Op.Qa,n),this.size=t}function Tw(n,t){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return rn.setTimeout(function(){n()},t)}Op.Pa="serverreachability",es(bU,fs),Op.STAT_EVENT="statevent",es(wU,fs),Op.Qa="timingevent",es(CU,fs);var UA={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},EU={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function uP(){}function IU(){}uP.prototype.h=null;var fP,Mw={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function dP(){fs.call(this,"d")}function hP(){fs.call(this,"c")}function HA(){}function xw(n,t,e,i){this.l=n,this.j=t,this.m=e,this.U=i||1,this.S=new Sw(this),this.O=lK,this.T=new LA(n=GO?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new SU}function SU(){this.i=null,this.g="",this.h=!1}es(dP,fs),es(hP,fs),es(HA,uP),HA.prototype.g=function(){return new XMLHttpRequest},HA.prototype.i=function(){return{}},fP=new HA;var lK=45e3,pP={},jA={};function mP(n,t,e){n.K=1,n.v=WA(du(t)),n.s=e,n.P=!0,AU(n,null)}function AU(n,t){n.F=Date.now(),kw(n),n.A=du(n.v);var e=n.A,i=n.U;Array.isArray(i)||(i=[String(i)]),LU(e.i,"t",i),n.C=0,e=n.l.H,n.h=new SU,n.g=aH(n.l,e?t:null,!n.s),0<n.N&&(n.L=new iK(hs(n.La,n,n.g),n.N)),_U(n.S,n.g,"readystatechange",n.ib),t=n.H?rU(n.H):{},n.s?(n.u||(n.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,t)):(n.u="GET",n.g.da(n.A,n.u,null,t)),Aw(1),function rK(n,t,e,i,r,s){n.info(function(){if(n.g)if(s)for(var c="",d=s.split("&"),p=0;p<d.length;p++){var _=d[p].split("=");if(1<_.length){var w=_[0];_=_[1];var I=w.split("_");c=2<=I.length&&"type"==I[1]?c+(w+"=")+_+"&":c+(w+"=redacted&")}}else c=null;else c=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+e+"\n"+c})}(n.j,n.u,n.A,n.m,n.U,n.s)}function TU(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function MU(n,t,e){let r,i=!0;for(;!n.I&&n.C<e.length;){if(r=cK(n,e),r==jA){4==t&&(n.o=4,Rs(14),i=!1),U_(n.j,n.m,null,"[Incomplete Response]");break}if(r==pP){n.o=4,Rs(15),U_(n.j,n.m,e,"[Invalid Chunk]"),i=!1;break}U_(n.j,n.m,r,null),gP(n,r)}TU(n)&&r!=jA&&r!=pP&&(n.h.g="",n.C=0),4!=t||0!=e.length||n.h.h||(n.o=1,Rs(16),i=!1),n.i=n.i&&i,i?0<e.length&&!n.$&&(n.$=!0,(t=n.l).g==n&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+e.length),DP(t),t.K=!0,Rs(11))):(U_(n.j,n.m,e,"[Invalid Chunked Response]"),Pp(n),Rw(n))}function cK(n,t){var e=n.C,i=t.indexOf("\n",e);return-1==i?jA:(e=Number(t.substring(e,i)),isNaN(e)?pP:(i+=1)+e>t.length?jA:(t=t.substr(i,e),n.C=i+e,t))}function kw(n){n.V=Date.now()+n.O,xU(n,n.O)}function xU(n,t){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Tw(hs(n.gb,n),t)}function $A(n){n.B&&(rn.clearTimeout(n.B),n.B=null)}function Rw(n){0==n.l.G||n.I||iH(n.l,n)}function Pp(n){$A(n);var t=n.L;t&&"function"==typeof t.na&&t.na(),n.L=null,lP(n.T),yU(n.S),n.g&&(t=n.g,n.g=null,t.abort(),t.na())}function gP(n,t){try{var e=n.l;if(0!=e.G&&(e.g==n||_P(e.h,n)))if(!n.J&&_P(e.h,n)&&3==e.G){try{var i=e.Fa.g.parse(t)}catch{i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!e.u){if(e.g){if(!(e.g.F+3e3<n.F))break e;XA(e),ZA(e)}EP(e),Rs(18)}}else e.Ba=r[1],0<e.Ba-e.T&&37500>r[2]&&e.L&&0==e.A&&!e.v&&(e.v=Tw(hs(e.cb,e),6e3));if(1>=UU(e.h)&&e.ja){try{e.ja()}catch{}e.ja=void 0}}else Fp(e,11)}else if((n.J||e.g==n)&&XA(e),!kA(t))for(r=e.Fa.g.parse(t),t=0;t<r.length;t++){let _=r[t];if(e.T=_[0],_=_[1],2==e.G)if("c"==_[0]){e.I=_[1],e.ka=_[2];const w=_[3];null!=w&&(e.ma=w,e.j.info("VER="+e.ma));const I=_[4];null!=I&&(e.Ca=I,e.j.info("SVER="+e.Ca));const T=_[5];null!=T&&"number"==typeof T&&0<T&&(e.J=i=1.5*T,e.j.info("backChannelRequestTimeoutMs_="+i)),i=e;const O=n.g;if(O){const U=O.g?O.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(U){var s=i.h;s.g||-1==U.indexOf("spdy")&&-1==U.indexOf("quic")&&-1==U.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(yP(s,s.h),s.h=null))}if(i.D){const W=O.g?O.g.getResponseHeader("X-HTTP-Session-Id"):null;W&&(i.za=W,Vi(i.F,i.D,W))}}e.G=3,e.l&&e.l.xa(),e.$&&(e.P=Date.now()-n.F,e.j.info("Handshake RTT: "+e.P+"ms"));var c=n;if((i=e).sa=oH(i,i.H?i.ka:null,i.V),c.J){HU(i.h,c);var d=c,p=i.J;p&&d.setTimeout(p),d.B&&($A(d),kw(d)),i.g=c}else tH(i);0<e.i.length&&QA(e)}else"stop"!=_[0]&&"close"!=_[0]||Fp(e,7);else 3==e.G&&("stop"==_[0]||"close"==_[0]?"stop"==_[0]?Fp(e,7):CP(e):"noop"!=_[0]&&e.l&&e.l.wa(_),e.A=0)}Aw(4)}catch{}}function kU(n,t){if(n.forEach&&"function"==typeof n.forEach)n.forEach(t,void 0);else if(MA(n)||"string"==typeof n)Array.prototype.forEach.call(n,t,void 0);else for(var e=function dK(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(MA(n)||"string"==typeof n){var t=[];n=n.length;for(var e=0;e<n;e++)t.push(e);return t}t=[],e=0;for(const i in n)t[e++]=i;return t}}}(n),i=function uK(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(MA(n)){for(var t=[],e=n.length,i=0;i<e;i++)t.push(n[i]);return t}for(i in t=[],e=0,n)t[e++]=n[i];return t}(n),r=i.length,s=0;s<r;s++)t.call(void 0,i[s],e&&e[s],n)}(kt=xw.prototype).setTimeout=function(n){this.O=n},kt.ib=function(n){n=n.target;const t=this.L;t&&3==hu(n)?t.l():this.La(n)},kt.La=function(n){try{if(n==this.g)e:{const w=hu(this.g);var t=this.g.Ea();const I=this.g.aa();if(!(3>w)&&(3!=w||GO||this.g&&(this.h.h||this.g.fa()||KU(this.g)))){this.I||4!=w||7==t||Aw(8==t||0>=I?3:2),$A(this);var e=this.g.aa();this.Y=e;t:if(TU(this)){var i=KU(this.g);n="";var r=i.length,s=4==hu(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Pp(this),Rw(this);var c="";break t}this.h.i=new rn.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,n+=this.h.i.decode(i[t],{stream:s&&t==r-1});i.splice(0,r),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.fa();if(this.i=200==e,function sK(n,t,e,i,r,s,c){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+e+"\n"+s+" "+c})}(this.j,this.u,this.A,this.m,this.U,w,e),this.i){if(this.Z&&!this.J){t:{if(this.g){var d,p=this.g;if((d=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!kA(d)){var _=d;break t}}_=null}if(!(e=_)){this.i=!1,this.o=3,Rs(12),Pp(this),Rw(this);break e}U_(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,gP(this,e)}this.P?(MU(this,w,c),GO&&this.i&&3==w&&(_U(this.S,this.T,"tick",this.hb),this.T.start())):(U_(this.j,this.m,c,null),gP(this,c)),4==w&&Pp(this),this.i&&!this.I&&(4==w?iH(this.l,this):(this.i=!1,kw(this)))}else 400==e&&0<c.indexOf("Unknown SID")?(this.o=3,Rs(12)):(this.o=0,Rs(13)),Pp(this),Rw(this)}}}catch{}},kt.hb=function(){if(this.g){var n=hu(this.g),t=this.g.fa();this.C<t.length&&($A(this),MU(this,n,t),this.i&&4!=n&&kw(this))}},kt.cancel=function(){this.I=!0,Pp(this)},kt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function oK(n,t){n.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(Aw(3),Rs(17)),Pp(this),this.o=2,Rw(this)):xU(this,this.V-n)};var RU=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Np(n,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Np){this.h=void 0!==t?t:n.h,zA(this,n.j),this.s=n.s,this.g=n.g,GA(this,n.m),this.l=n.l,t=n.i;var e=new Nw;e.i=t.i,t.g&&(e.g=new Map(t.g),e.h=t.h),OU(this,e),this.o=n.o}else n&&(e=String(n).match(RU))?(this.h=!!t,zA(this,e[1]||"",!0),this.s=Ow(e[2]||""),this.g=Ow(e[3]||"",!0),GA(this,e[4]),this.l=Ow(e[5]||"",!0),OU(this,e[6]||"",!0),this.o=Ow(e[7]||"")):(this.h=!!t,this.i=new Nw(null,this.h))}function du(n){return new Np(n)}function zA(n,t,e){n.j=e?Ow(t,!0):t,n.j&&(n.j=n.j.replace(/:$/,""))}function GA(n,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);n.m=t}else n.m=null}function OU(n,t,e){t instanceof Nw?(n.i=t,function yK(n,t){t&&!n.j&&(lh(n),n.i=null,n.g.forEach(function(e,i){var r=i.toLowerCase();i!=r&&(NU(this,i),LU(this,r,e))},n)),n.j=t}(n.i,n.h)):(e||(t=Pw(t,gK)),n.i=new Nw(t,n.h))}function Vi(n,t,e){n.i.set(t,e)}function WA(n){return Vi(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Ow(n,t){return n?t?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Pw(n,t,e){return"string"==typeof n?(n=encodeURI(n).replace(t,fK),e&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function fK(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Np.prototype.toString=function(){var n=[],t=this.j;t&&n.push(Pw(t,PU,!0),":");var e=this.g;return(e||"file"==t)&&(n.push("//"),(t=this.s)&&n.push(Pw(t,PU,!0),"@"),n.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&n.push(":",String(e))),(e=this.l)&&(this.g&&"/"!=e.charAt(0)&&n.push("/"),n.push(Pw(e,"/"==e.charAt(0)?mK:pK,!0))),(e=this.i.toString())&&n.push("?",e),(e=this.o)&&n.push("#",Pw(e,_K)),n.join("")};var PU=/[#\/\?@]/g,pK=/[#\?:]/g,mK=/[#\?]/g,gK=/[#\?@]/g,_K=/#/g;function Nw(n,t){this.h=this.g=null,this.i=n||null,this.j=!!t}function lh(n){n.g||(n.g=new Map,n.h=0,n.i&&function hK(n,t){if(n){n=n.split("&");for(var e=0;e<n.length;e++){var i=n[e].indexOf("="),r=null;if(0<=i){var s=n[e].substring(0,i);r=n[e].substring(i+1)}else s=n[e];t(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function NU(n,t){lh(n),t=H_(n,t),n.g.has(t)&&(n.i=null,n.h-=n.g.get(t).length,n.g.delete(t))}function FU(n,t){return lh(n),t=H_(n,t),n.g.has(t)}function LU(n,t,e){NU(n,t),0<e.length&&(n.i=null,n.g.set(H_(n,t),jO(e)),n.h+=e.length)}function H_(n,t){return t=String(t),n.j&&(t=t.toLowerCase()),t}function VU(n){this.l=n||bK,n=rn.PerformanceNavigationTiming?0<(n=rn.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(rn.g&&rn.g.Ga&&rn.g.Ga()&&rn.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(kt=Nw.prototype).add=function(n,t){lh(this),this.i=null,n=H_(this,n);var e=this.g.get(n);return e||this.g.set(n,e=[]),e.push(t),this.h+=1,this},kt.forEach=function(n,t){lh(this),this.g.forEach(function(e,i){e.forEach(function(r){n.call(t,r,i,this)},this)},this)},kt.oa=function(){lh(this);const n=Array.from(this.g.values()),t=Array.from(this.g.keys()),e=[];for(let i=0;i<t.length;i++){const r=n[i];for(let s=0;s<r.length;s++)e.push(t[i])}return e},kt.W=function(n){lh(this);let t=[];if("string"==typeof n)FU(this,n)&&(t=t.concat(this.g.get(H_(this,n))));else{n=Array.from(this.g.values());for(let e=0;e<n.length;e++)t=t.concat(n[e])}return t},kt.set=function(n,t){return lh(this),this.i=null,FU(this,n=H_(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[t]),this.h+=1,this},kt.get=function(n,t){return n&&0<(n=this.W(n)).length?String(n[0]):t},kt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],t=Array.from(this.g.keys());for(var e=0;e<t.length;e++){var i=t[e];const s=encodeURIComponent(String(i)),c=this.W(i);for(i=0;i<c.length;i++){var r=s;""!==c[i]&&(r+="="+encodeURIComponent(String(c[i]))),n.push(r)}}return this.i=n.join("&")};var bK=10;function BU(n){return!!n.h||!!n.g&&n.g.size>=n.j}function UU(n){return n.h?1:n.g?n.g.size:0}function _P(n,t){return n.h?n.h==t:!!n.g&&n.g.has(t)}function yP(n,t){n.g?n.g.add(t):n.h=t}function HU(n,t){n.h&&n.h==t?n.h=null:n.g&&n.g.has(t)&&n.g.delete(t)}function jU(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let t=n.i;for(const e of n.g.values())t=t.concat(e.D);return t}return jO(n.i)}function vP(){}function wK(){this.g=new vP}function CK(n,t,e){const i=e||"";try{kU(n,function(r,s){let c=r;Ew(r)&&(c=sP(r)),t.push(i+s+"="+encodeURIComponent(c))})}catch(r){throw t.push(i+"type="+encodeURIComponent("_badmap")),r}}function qA(n,t,e,i,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(i)}catch{}}function Fw(n){this.l=n.ac||null,this.j=n.jb||!1}function YA(n,t){Vr.call(this),this.D=n,this.u=t,this.m=void 0,this.readyState=bP,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}VU.prototype.cancel=function(){if(this.i=jU(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},vP.prototype.stringify=function(n){return rn.JSON.stringify(n,void 0)},vP.prototype.parse=function(n){return rn.JSON.parse(n,void 0)},es(Fw,uP),Fw.prototype.g=function(){return new YA(this.l,this.j)},Fw.prototype.i=function(n){return function(){return n}}({}),es(YA,Vr);var bP=0;function $U(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Lw(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Vw(n)}function Vw(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(kt=YA.prototype).open=function(n,t){if(this.readyState!=bP)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=t,this.readyState=1,Vw(this)},kt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(t.body=n),(this.D||rn).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},kt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Lw(this)),this.readyState=bP},kt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Vw(this)),this.g&&(this.readyState=3,Vw(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof rn.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;$U(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},kt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var t=n.value?n.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!n.done}))&&(this.response=this.responseText+=t)}n.done?Lw(this):Vw(this),3==this.readyState&&$U(this)}},kt.Va=function(n){this.g&&(this.response=this.responseText=n,Lw(this))},kt.Ua=function(n){this.g&&(this.response=n,Lw(this))},kt.ga=function(){this.g&&Lw(this)},kt.setRequestHeader=function(n,t){this.v.append(n,t)},kt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},kt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],t=this.h.entries();for(var e=t.next();!e.done;)n.push((e=e.value)[0]+": "+e[1]),e=t.next();return n.join("\r\n")},Object.defineProperty(YA.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var DK=rn.JSON.parse;function Xi(n){Vr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=zU,this.K=this.L=!1}es(Xi,Vr);var zU="",IK=/^https?$/i,SK=["POST","PUT"];function GU(n,t){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=t,n.m=5,WU(n),KA(n)}function WU(n){n.D||(n.D=!0,ts(n,"complete"),ts(n,"error"))}function qU(n){if(n.h&&typeof UO<"u"&&(!n.C[1]||4!=hu(n)||2!=n.aa()))if(n.v&&4==hu(n))cP(n.Ha,0,n);else if(ts(n,"readystatechange"),4==hu(n)){n.h=!1;try{const d=n.aa();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var e;if(!(e=t)){var i;if(i=0===d){var r=String(n.H).match(RU)[1]||null;if(!r&&rn.self&&rn.self.location){var s=rn.self.location.protocol;r=s.substr(0,s.length-1)}i=!IK.test(r?r.toLowerCase():"")}e=i}if(e)ts(n,"complete"),ts(n,"success");else{n.m=6;try{var c=2<hu(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.aa()+"]",WU(n)}}finally{KA(n)}}}function KA(n,t){if(n.g){YU(n);const e=n.g,i=n.C[0]?TA:null;n.g=null,n.C=null,t||ts(n,"ready");try{e.onreadystatechange=i}catch{}}}function YU(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(rn.clearTimeout(n.A),n.A=null)}function hu(n){return n.g?n.g.readyState:0}function KU(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case zU:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function ZU(n){let t="";return ZO(n,function(e,i){t+=i,t+=":",t+=e,t+="\r\n"}),t}function wP(n,t,e){e:{for(i in e){var i=!1;break e}i=!0}i||(e=ZU(e),"string"==typeof n?null!=e&&encodeURIComponent(String(e)):Vi(n,t,e))}function Bw(n,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[n]||t}function QU(n){this.Ca=0,this.i=[],this.j=new VA,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Bw("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Bw("baseRetryDelayMs",5e3,n),this.bb=Bw("retryDelaySeedMs",1e4,n),this.$a=Bw("forwardChannelMaxRetries",2,n),this.ta=Bw("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new VU(n&&n.concurrentRequestLimit),this.Fa=new wK,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function CP(n){if(XU(n),3==n.G){var t=n.U++,e=du(n.F);Vi(e,"SID",n.I),Vi(e,"RID",t),Vi(e,"TYPE","terminate"),Uw(n,e),(t=new xw(n,n.j,t,void 0)).K=2,t.v=WA(du(e)),e=!1,rn.navigator&&rn.navigator.sendBeacon&&(e=rn.navigator.sendBeacon(t.v.toString(),"")),!e&&rn.Image&&((new Image).src=t.v,e=!0),e||(t.g=aH(t.l,null),t.g.da(t.v)),t.F=Date.now(),kw(t)}sH(n)}function ZA(n){n.g&&(DP(n),n.g.cancel(),n.g=null)}function XU(n){ZA(n),n.u&&(rn.clearTimeout(n.u),n.u=null),XA(n),n.h.cancel(),n.m&&("number"==typeof n.m&&rn.clearTimeout(n.m),n.m=null)}function QA(n){BU(n.h)||n.m||(n.m=!0,fU(n.Ja,n),n.C=0)}function JU(n,t){var e;e=t?t.m:n.U++;const i=du(n.F);Vi(i,"SID",n.I),Vi(i,"RID",e),Vi(i,"AID",n.T),Uw(n,i),n.o&&n.s&&wP(i,n.o,n.s),e=new xw(n,n.j,e,n.C+1),null===n.o&&(e.H=n.s),t&&(n.i=t.D.concat(n.i)),t=eH(n,e,1e3),e.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),yP(n.h,e),mP(e,i,t)}function Uw(n,t){n.ia&&ZO(n.ia,function(e,i){Vi(t,i,e)}),n.l&&kU({},function(e,i){Vi(t,i,e)})}function eH(n,t,e){e=Math.min(n.i.length,e);var i=n.l?hs(n.l.Ra,n.l,n):null;e:{var r=n.i;let s=-1;for(;;){const c=["count="+e];-1==s?0<e?(s=r[0].h,c.push("ofs="+s)):s=0:c.push("ofs="+s);let d=!0;for(let p=0;p<e;p++){let _=r[p].h;const w=r[p].g;if(_-=s,0>_)s=Math.max(0,r[p].h-100),d=!1;else try{CK(w,c,"req"+_+"_")}catch{i&&i(w)}}if(d){i=c.join("&");break e}}}return n=n.i.splice(0,e),t.D=n,i}function tH(n){n.g||n.u||(n.Z=1,fU(n.Ia,n),n.A=0)}function EP(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Tw(hs(n.Ia,n),rH(n,n.A)),n.A++,0))}function DP(n){null!=n.B&&(rn.clearTimeout(n.B),n.B=null)}function nH(n){n.g=new xw(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var t=du(n.sa);Vi(t,"RID","rpc"),Vi(t,"SID",n.I),Vi(t,"CI",n.L?"0":"1"),Vi(t,"AID",n.T),Vi(t,"TYPE","xmlhttp"),Uw(n,t),n.o&&n.s&&wP(t,n.o,n.s),n.J&&n.g.setTimeout(n.J);var e=n.g;n=n.ka,e.K=1,e.v=WA(du(t)),e.s=null,e.P=!0,AU(e,n)}function XA(n){null!=n.v&&(rn.clearTimeout(n.v),n.v=null)}function iH(n,t){var e=null;if(n.g==t){XA(n),DP(n),n.g=null;var i=2}else{if(!_P(n.h,t))return;e=t.D,HU(n.h,t),i=1}if(0!=n.G)if(n.pa=t.Y,t.i)if(1==i){e=t.s?t.s.length:0,t=Date.now()-t.F;var r=n.C;ts(i=BA(),new CU(i,e,t,r)),QA(n)}else tH(n);else if(3==(r=t.o)||0==r&&0<n.pa||!(1==i&&function TK(n,t){return!(UU(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=t.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Tw(hs(n.Ja,n,t),rH(n,n.C)),n.C++,0)))}(n,t)||2==i&&EP(n)))switch(e&&0<e.length&&(t=n.h,t.i=t.i.concat(e)),r){case 1:Fp(n,5);break;case 4:Fp(n,10);break;case 3:Fp(n,6);break;default:Fp(n,2)}}function rH(n,t){let e=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(e*=2),e*t}function Fp(n,t){if(n.j.info("Error code "+t),2==t){var e=null;n.l&&(e=null);var i=hs(n.kb,n);e||(e=new Np("//www.google.com/images/cleardot.gif"),rn.location&&"http"==rn.location.protocol||zA(e,"https"),WA(e)),function EK(n,t){const e=new VA;if(rn.Image){const i=new Image;i.onload=xA(qA,e,i,"TestLoadImage: loaded",!0,t),i.onerror=xA(qA,e,i,"TestLoadImage: error",!1,t),i.onabort=xA(qA,e,i,"TestLoadImage: abort",!1,t),i.ontimeout=xA(qA,e,i,"TestLoadImage: timeout",!1,t),rn.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else t(!1)}(e.toString(),i)}else Rs(2);n.G=0,n.l&&n.l.va(t),sH(n),XU(n)}function sH(n){if(n.G=0,n.la=[],n.l){const t=jU(n.h);(0!=t.length||0!=n.i.length)&&(X2(n.la,t),X2(n.la,n.i),n.h.i.length=0,jO(n.i),n.i.length=0),n.l.ua()}}function oH(n,t,e){var i=e instanceof Np?du(e):new Np(e,void 0);if(""!=i.g)t&&(i.g=t+"."+i.g),GA(i,i.m);else{var r=rn.location;i=r.protocol,t=t?t+"."+r.hostname:r.hostname,r=+r.port;var s=new Np(null,void 0);i&&zA(s,i),t&&(s.g=t),r&&GA(s,r),e&&(s.l=e),i=s}return t=n.za,(e=n.D)&&t&&Vi(i,e,t),Vi(i,"VER",n.ma),Uw(n,i),i}function aH(n,t,e){if(t&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new Xi(e&&n.Da&&!n.ra?new Fw({jb:!0}):n.ra)).Ka(n.H),t}function lH(){}function JA(){if(B_&&!(10<=Number(G5)))throw Error("Environmental error: no available transport.")}function Oo(n,t){Vr.call(this),this.g=new QU(t),this.l=n,this.h=t&&t.messageUrlParams||null,n=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(n?n["X-WebChannel-Content-Type"]=t.messageContentType:n={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(n?n["X-WebChannel-Client-Profile"]=t.ya:n={"X-WebChannel-Client-Profile":t.ya}),this.g.S=n,(n=t&&t.Yb)&&!kA(n)&&(this.g.o=n),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!kA(t)&&(this.g.D=t,null!==(n=this.h)&&t in n&&t in(n=this.h)&&delete n[t]),this.j=new j_(this)}function cH(n){dP.call(this);var t=n.__sm__;if(t){e:{for(const e in t){n=e;break e}n=void 0}(this.i=n)&&(n=this.i,t=null!==t&&n in t?t[n]:void 0),this.data=t}else this.data=n}function uH(){hP.call(this),this.status=1}function j_(n){this.g=n}(kt=Xi.prototype).Ka=function(n){this.L=n},kt.da=function(n,t,e,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);t=t?t.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():fP.g(),this.C=function DU(n){return n.h||(n.h=n.i())}(this.u?this.u:fP),this.g.onreadystatechange=hs(this.Ha,this);try{this.F=!0,this.g.open(t,String(n),!0),this.F=!1}catch(s){return void GU(this,s)}if(n=e||"",e=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)e.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const s of i.keys())e.set(s,i.get(s))}i=Array.from(e.keys()).find(s=>"content-type"==s.toLowerCase()),r=rn.FormData&&n instanceof rn.FormData,!(0<=Q2(SK,t))||i||r||e.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,c]of e)this.g.setRequestHeader(s,c);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{YU(this),0<this.B&&((this.K=function AK(n){return B_&&function z5(){return function U5(n){var t=$5;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=n(9)}(function(){let n=0;const t=J2(String(OA)).split("."),e=J2("9").split("."),i=Math.max(t.length,e.length);for(let c=0;0==n&&c<i;c++){var r=t[c]||"",s=e[c]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==r[0].length&&0==s[0].length)break;n=$O(0==r[1].length?0:parseInt(r[1],10),0==s[1].length?0:parseInt(s[1],10))||$O(0==r[2].length,0==s[2].length)||$O(r[2],s[2]),r=r[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=hs(this.qa,this)):this.A=cP(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){GU(this,s)}},kt.qa=function(){typeof UO<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ts(this,"timeout"),this.abort(8))},kt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ts(this,"complete"),ts(this,"abort"),KA(this))},kt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),KA(this,!0)),Xi.X.M.call(this)},kt.Ha=function(){this.s||(this.F||this.v||this.l?qU(this):this.fb())},kt.fb=function(){qU(this)},kt.aa=function(){try{return 2<hu(this)?this.g.status:-1}catch{return-1}},kt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},kt.Sa=function(n){if(this.g){var t=this.g.responseText;return n&&0==t.indexOf(n)&&(t=t.substring(n.length)),DK(t)}},kt.Ea=function(){return this.m},kt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(kt=QU.prototype).ma=8,kt.G=1,kt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const r=new xw(this,this.j,n,void 0);let s=this.s;if(this.S&&(s?(s=rU(s),oU(s,this.S)):s=this.S),null!==this.o||this.N||(r.H=s,s=null),this.O)e:{for(var t=0,e=0;e<this.i.length;e++){var i=this.i[e];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=e;break e}if(4096===t||e===this.i.length-1){t=e+1;break e}}t=1e3}else t=1e3;t=eH(this,r,t),Vi(e=du(this.F),"RID",n),Vi(e,"CVER",22),this.D&&Vi(e,"X-HTTP-Session-Id",this.D),Uw(this,e),s&&(this.N?t="headers="+encodeURIComponent(String(ZU(s)))+"&"+t:this.o&&wP(e,this.o,s)),yP(this.h,r),this.Ya&&Vi(e,"TYPE","init"),this.O?(Vi(e,"$req",t),Vi(e,"SID","null"),r.Z=!0,mP(r,e,null)):mP(r,e,t),this.G=2}}else 3==this.G&&(n?JU(this,n):0==this.i.length||BU(this.h)||JU(this))},kt.Ia=function(){if(this.u=null,nH(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Tw(hs(this.eb,this),n)}},kt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Rs(10),ZA(this),nH(this))},kt.cb=function(){null!=this.v&&(this.v=null,ZA(this),EP(this),Rs(19))},kt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Rs(2)):(this.j.info("Failed to ping google.com"),Rs(1))},(kt=lH.prototype).xa=function(){},kt.wa=function(){},kt.va=function(){},kt.ua=function(){},kt.Ra=function(){},JA.prototype.g=function(n,t){return new Oo(n,t)},es(Oo,Vr),Oo.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,t=this.l,e=this.h||void 0;Rs(0),n.V=t,n.ia=e||{},n.L=n.Y,n.F=oH(n,null,n.V),QA(n)},Oo.prototype.close=function(){CP(this.g)},Oo.prototype.u=function(n){var t=this.g;if("string"==typeof n){var e={};e.__data__=n,n=e}else this.v&&((e={}).__data__=sP(n),n=e);t.i.push(new class{constructor(n,t){this.h=n,this.g=t}}(t.ab++,n)),3==t.G&&QA(t)},Oo.prototype.M=function(){this.g.l=null,delete this.j,CP(this.g),delete this.g,Oo.X.M.call(this)},es(cH,dP),es(uH,hP),es(j_,lH),j_.prototype.xa=function(){ts(this.g,"a")},j_.prototype.wa=function(n){ts(this.g,new cH(n))},j_.prototype.va=function(n){ts(this.g,new uH(n))},j_.prototype.ua=function(){ts(this.g,"b")},JA.prototype.createWebChannel=JA.prototype.g,Oo.prototype.send=Oo.prototype.u,Oo.prototype.open=Oo.prototype.m,Oo.prototype.close=Oo.prototype.close,UA.NO_ERROR=0,UA.TIMEOUT=8,UA.HTTP_ERROR=6,EU.COMPLETE="complete",IU.EventType=Mw,Mw.OPEN="a",Mw.CLOSE="b",Mw.ERROR="c",Mw.MESSAGE="d",Vr.prototype.listen=Vr.prototype.N,Xi.prototype.listenOnce=Xi.prototype.O,Xi.prototype.getLastError=Xi.prototype.Oa,Xi.prototype.getLastErrorCode=Xi.prototype.Ea,Xi.prototype.getStatus=Xi.prototype.aa,Xi.prototype.getResponseJson=Xi.prototype.Sa,Xi.prototype.getResponseText=Xi.prototype.fa,Xi.prototype.send=Xi.prototype.da,Xi.prototype.setWithCredentials=Xi.prototype.Ka;var MK=uu.createWebChannelTransport=function(){return new JA},xK=uu.getStatEventTarget=function(){return BA()},IP=uu.ErrorCode=UA,kK=uu.EventType=EU,RK=uu.Event=Op,dH=uu.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},OK=uu.FetchXmlHttpFactory=Fw,eT=uu.WebChannel=IU,PK=uu.XhrIo=Xi;const hH="@firebase/firestore";class Br{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Br.UNAUTHENTICATED=new Br(null),Br.GOOGLE_CREDENTIALS=new Br("google-credentials-uid"),Br.FIRST_PARTY=new Br("first-party-uid"),Br.MOCK_USER=new Br("mock-user");let $_="9.12.0";const ch=new Es.Yd("@firebase/firestore");function SP(){return ch.logLevel}function qe(n,...t){if(ch.logLevel<=Es.in.DEBUG){const e=t.map(AP);ch.debug(`Firestore (${$_}): ${n}`,...e)}}function hr(n,...t){if(ch.logLevel<=Es.in.ERROR){const e=t.map(AP);ch.error(`Firestore (${$_}): ${n}`,...e)}}function Lp(n,...t){if(ch.logLevel<=Es.in.WARN){const e=t.map(AP);ch.warn(`Firestore (${$_}): ${n}`,...e)}}function AP(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Et(n="Unexpected state"){const t=`FIRESTORE (${$_}) INTERNAL ASSERTION FAILED: `+n;throw hr(t),new Error(t)}function Wt(n,t){n||Et()}function at(n,t){return n}const be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class He extends V.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class xr{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class fH{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class LK{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Br.UNAUTHENTICATED))}shutdown(){}}class VK{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class BK{constructor(t){this.t=t,this.currentUser=Br.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var i=this;let r=this.i;const s=_=>this.i!==r?(r=this.i,e(_)):Promise.resolve();let c=new xr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new xr,t.enqueueRetryable(()=>s(this.currentUser))};const d=()=>{const _=c;t.enqueueRetryable((0,we.Z)(function*(){yield _.promise,yield s(i.currentUser)}))},p=_=>{qe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(_=>p(_)),setTimeout(()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?p(_):(qe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new xr)}},0),d()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(qe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Wt("string"==typeof i.accessToken),new fH(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Wt(null===t||"string"==typeof t),new Br(t)}}class UK{constructor(t,e,i,r){this.h=t,this.l=e,this.m=i,this.g=r,this.type="FirstParty",this.user=Br.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Wt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.p.set("Authorization",t),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class HK{constructor(t,e,i,r){this.h=t,this.l=e,this.m=i,this.g=r}getToken(){return Promise.resolve(new UK(this.h,this.l,this.m,this.g))}start(t,e){t.enqueueRetryable(()=>e(Br.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class pH{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jK{constructor(t){this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(t,e){const i=s=>{null!=s.error&&qe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const c=s.token!==this.A;return this.A=s.token,qe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{qe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.T.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.T.getImmediate({optional:!0});s?r(s):qe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Wt("string"==typeof e.token),this.A=e.token,new pH(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function $K(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}class mH{static R(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let i="";for(;i.length<20;){const r=$K(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<e&&(i+=t.charAt(r[s]%t.length))}return i}}function sn(n,t){return n<t?-1:n>t?1:0}function z_(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}function gH(n){return n+"\0"}class Bi{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new He(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new He(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new He(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new He(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Bi.fromMillis(Date.now())}static fromDate(t){return Bi.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new Bi(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?sn(this.nanoseconds,t.nanoseconds):sn(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class qt{constructor(t){this.timestamp=t}static fromTimestamp(t){return new qt(t)}static min(){return new qt(new Bi(0,0))}static max(){return new qt(new Bi(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Hw{constructor(t,e,i){void 0===e?e=0:e>t.length&&Et(),void 0===i?i=t.length-e:i>t.length-e&&Et(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return 0===Hw.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Hw?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++){const s=t.get(r),c=e.get(r);if(s<c)return-1;if(s>c)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Nn extends Hw{construct(t,e,i){return new Nn(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new He(be.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new Nn(e)}static emptyPath(){return new Nn([])}}const zK=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ji extends Hw{construct(t,e,i){return new Ji(t,e,i)}static isValidIdentifier(t){return zK.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ji.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ji(["__name__"])}static fromServerFormat(t){const e=[];let i="",r=0;const s=()=>{if(0===i.length)throw new He(be.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let c=!1;for(;r<t.length;){const d=t[r];if("\\"===d){if(r+1===t.length)throw new He(be.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const p=t[r+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new He(be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=p,r+=2}else"`"===d?(c=!c,r++):"."!==d||c?(i+=d,r++):(s(),r++)}if(s(),c)throw new He(be.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ji(e)}static emptyPath(){return new Ji([])}}class ot{constructor(t){this.path=t}static fromPath(t){return new ot(Nn.fromString(t))}static fromName(t){return new ot(Nn.fromString(t).popFirst(5))}static empty(){return new ot(Nn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===Nn.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return Nn.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ot(new Nn(t.slice()))}}class tT{constructor(t,e,i,r){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=r}}function TP(n){return n.fields.find(t=>2===t.kind)}function Vp(n){return n.fields.filter(t=>2!==t.kind)}tT.UNKNOWN_ID=-1;class nT{constructor(t,e){this.fieldPath=t,this.kind=e}}class jw{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new jw(0,Po.min())}}function _H(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=qt.fromTimestamp(1e9===i?new Bi(e+1,0):new Bi(e,i));return new Po(r,ot.empty(),t)}function yH(n){return new Po(n.readTime,n.key,-1)}class Po{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new Po(qt.min(),ot.empty(),-1)}static max(){return new Po(qt.max(),ot.empty(),-1)}}function MP(n,t){let e=n.readTime.compareTo(t.readTime);return 0!==e?e:(e=ot.comparator(n.documentKey,t.documentKey),0!==e?e:sn(n.largestBatchId,t.largestBatchId))}const vH="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class bH{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}function uh(n){return xP.apply(this,arguments)}function xP(){return xP=(0,we.Z)(function*(n){if(n.code!==be.FAILED_PRECONDITION||n.message!==vH)throw n;qe("LocalStore","Unexpectedly lost primary lease")}),xP.apply(this,arguments)}class fe{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Et(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new fe((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(e,s).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof fe?e:fe.resolve(e)}catch(e){return fe.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):fe.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):fe.reject(e)}static resolve(t){return new fe((e,i)=>{e(t)})}static reject(t){return new fe((e,i)=>{i(t)})}static waitFor(t){return new fe((e,i)=>{let r=0,s=0,c=!1;t.forEach(d=>{++r,d.next(()=>{++s,c&&s===r&&e()},p=>i(p))}),c=!0,s===r&&e()})}static or(t){let e=fe.resolve(!1);for(const i of t)e=e.next(r=>r?fe.resolve(r):i());return e}static forEach(t,e){const i=[];return t.forEach((r,s)=>{i.push(e.call(this,r,s))}),this.waitFor(i)}static mapArray(t,e){return new fe((i,r)=>{const s=t.length,c=new Array(s);let d=0;for(let p=0;p<s;p++){const _=p;e(t[_]).next(w=>{c[_]=w,++d,d===s&&i(c)},w=>r(w))}})}static doWhile(t,e){return new fe((i,r)=>{const s=()=>{!0===t()?e().next(()=>{s()},r):i()};s()})}}class iT{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.P=new xr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{e.error?this.P.reject(new $w(t,e.error)):this.P.resolve()},this.transaction.onerror=i=>{const r=kP(i.target.error);this.P.reject(new $w(t,r))}}static open(t,e,i,r){try{return new iT(e,t.transaction(r,i))}catch(s){throw new $w(e,s)}}get v(){return this.P.promise}abort(t){t&&this.P.reject(t),this.aborted||(qe("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new YK(e)}}class nl{constructor(t,e,i){this.name=t,this.version=e,this.S=i,12.2===nl.D((0,V.z$)())&&hr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return qe("SimpleDb","Removing database:",t),Bp(window.indexedDB.deleteDatabase(t)).toPromise()}static C(){if(!(0,V.hl)())return!1;if(nl.N())return!0;const t=(0,V.z$)(),e=nl.D(t),i=0<e&&e<10,r=nl.k(t),s=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||s)}static N(){var t;return typeof process<"u"&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.O)}static M(t,e){return t.store(e)}static D(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static k(t){const e=t.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}F(t){var e=this;return(0,we.Z)(function*(){return e.db||(qe("SimpleDb","Opening database:",e.name),e.db=yield new Promise((i,r)=>{const s=indexedDB.open(e.name,e.version);s.onsuccess=c=>{i(c.target.result)},s.onblocked=()=>{r(new $w(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=c=>{const d=c.target.error;r("VersionError"===d.name?new He(be.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new He(be.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new $w(t,d))},s.onupgradeneeded=c=>{qe("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',c.oldVersion),e.S.$(c.target.result,s.transaction,c.oldVersion,e.version).next(()=>{qe("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.B&&(e.db.onversionchange=i=>e.B(i)),e.db})()}L(t){this.B=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,i,r){var s=this;return(0,we.Z)(function*(){const c="readonly"===e;let d=0;for(;;){++d;try{s.db=yield s.F(t);const p=iT.open(s.db,t,c?"readonly":"readwrite",i),_=r(p).next(w=>(p.V(),w)).catch(w=>(p.abort(w),fe.reject(w))).toPromise();return _.catch(()=>{}),yield p.v,_}catch(p){const _=p,w="FirebaseError"!==_.name&&d<3;if(qe("SimpleDb","Transaction failed with error:",_.message,"Retrying:",w),s.close(),!w)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class qK{constructor(t){this.U=t,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(t){this.U=t}done(){this.q=!0}j(t){this.K=t}delete(){return Bp(this.U.delete())}}class $w extends He{constructor(t,e){super(be.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function dh(n){return"IndexedDbTransactionError"===n.name}class YK{constructor(t){this.store=t}put(t,e){let i;return void 0!==e?(qe("SimpleDb","PUT",this.store.name,t,e),i=this.store.put(e,t)):(qe("SimpleDb","PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),Bp(i)}add(t){return qe("SimpleDb","ADD",this.store.name,t,t),Bp(this.store.add(t))}get(t){return Bp(this.store.get(t)).next(e=>(void 0===e&&(e=null),qe("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return qe("SimpleDb","DELETE",this.store.name,t),Bp(this.store.delete(t))}count(){return qe("SimpleDb","COUNT",this.store.name),Bp(this.store.count())}W(t,e){const i=this.options(t,e);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),s=[];return this.H(r,(c,d)=>{s.push(d)}).next(()=>s)}{const r=this.store.getAll(i.range);return new fe((s,c)=>{r.onerror=d=>{c(d.target.error)},r.onsuccess=d=>{s(d.target.result)}})}}J(t,e){const i=this.store.getAll(t,null===e?void 0:e);return new fe((r,s)=>{i.onerror=c=>{s(c.target.error)},i.onsuccess=c=>{r(c.target.result)}})}Y(t,e){qe("SimpleDb","DELETE ALL",this.store.name);const i=this.options(t,e);i.X=!1;const r=this.cursor(i);return this.H(r,(s,c,d)=>d.delete())}Z(t,e){let i;e?i=t:(i={},e=t);const r=this.cursor(i);return this.H(r,e)}tt(t){const e=this.cursor({});return new fe((i,r)=>{e.onerror=s=>{const c=kP(s.target.error);r(c)},e.onsuccess=s=>{const c=s.target.result;c?t(c.primaryKey,c.value).next(d=>{d?c.continue():i()}):i()}})}H(t,e){const i=[];return new fe((r,s)=>{t.onerror=c=>{s(c.target.error)},t.onsuccess=c=>{const d=c.target.result;if(!d)return void r();const p=new qK(d),_=e(d.primaryKey,d.value,p);if(_ instanceof fe){const w=_.catch(I=>(p.done(),fe.reject(I)));i.push(w)}p.isDone?r():null===p.G?d.continue():d.continue(p.G)}}).next(()=>fe.waitFor(i))}options(t,e){let i;return void 0!==t&&("string"==typeof t?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const i=this.store.index(t.index);return t.X?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Bp(n){return new fe((t,e)=>{n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{const r=kP(i.target.error);e(r)}})}let wH=!1;function kP(n){const t=nl.D((0,V.z$)());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const i=new He("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return wH||(wH=!0,setTimeout(()=>{throw i},0)),i}}return n}class KK{constructor(t,e){this.asyncQueue=t,this.et=e,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(t){var e=this;qe("IndexBackiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(0,we.Z)(function*(){e.task=null;try{qe("IndexBackiller",`Documents written: ${yield e.et.st()}`)}catch(i){dh(i)?qe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield uh(i)}yield e.nt(6e4)}))}}class ZK{constructor(t,e){this.localStore=t,this.persistence=e}st(t=50){var e=this;return(0,we.Z)(function*(){return e.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>e.it(i,t))})()}it(t,e){const i=new Set;let r=e,s=!0;return fe.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(c=>{if(null!==c&&!i.has(c))return qe("IndexBackiller",`Processing collection: ${c}`),this.rt(t,c,r).next(d=>{r-=d,i.add(c)});s=!1})).next(()=>e-r)}rt(t,e,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(r=>this.localStore.localDocuments.getNextDocuments(t,e,r,i).next(s=>{const c=s.changes;return this.localStore.indexManager.updateIndexEntries(t,c).next(()=>this.ot(r,s)).next(d=>(qe("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(t,e,d))).next(()=>c.size)}))}ot(t,e){let i=t;return e.changes.forEach((r,s)=>{const c=yH(s);MP(c,i)>0&&(i=c)}),new Po(i.readTime,i.documentKey,Math.max(e.batchId,t.largestBatchId))}}class ro{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>e.writeSequenceNumber(i))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}function CH(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Up(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function EH(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}ro.at=-1;class er{constructor(t,e){this.comparator=t,this.root=e||ns.EMPTY}insert(t,e){return new er(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,ns.BLACK,null,null))}remove(t){return new er(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ns.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(0===i)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(0===r)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new rT(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new rT(this.root,t,this.comparator,!1)}getReverseIterator(){return new rT(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new rT(this.root,t,this.comparator,!0)}}class rT{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?i(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(0===s){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ns{constructor(t,e,i,r,s){this.key=t,this.value=e,this.color=i??ns.RED,this.left=r??ns.EMPTY,this.right=s??ns.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,s){return new ns(t??this.key,e??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,i),null):0===s?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ns.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return ns.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ns.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ns.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Et();const t=this.left.check();if(t!==this.right.check())throw Et();return t+(this.isRed()?0:1)}}ns.EMPTY=null,ns.RED=!0,ns.BLACK=!1,ns.EMPTY=new class{constructor(){this.size=0}get key(){throw Et()}get value(){throw Et()}get color(){throw Et()}get left(){throw Et()}get right(){throw Et()}copy(n,t,e,i,r){return this}insert(n,t,e){return new ns(n,t)}remove(n,t){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class hi{constructor(t){this.comparator=t,this.data=new er(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new DH(this.data.getIterator())}getIteratorFrom(t){return new DH(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof hi)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new hi(this.comparator);return e.data=t,e}}class DH{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function G_(n){return n.hasNext()?n.getNext():void 0}class No{constructor(t){this.fields=t,t.sort(Ji.comparator)}static empty(){return new No([])}unionWith(t){let e=new hi(Ji.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new No(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return z_(this.fields,t.fields,(e,i)=>e.isEqual(i))}}class kr{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new kr(e)}static fromUint8Array(t){const e=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(t);return new kr(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return sn(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}kr.EMPTY_BYTE_STRING=new kr("");const XK=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hh(n){if(Wt(!!n),"string"==typeof n){let t=0;const e=XK.exec(n);if(Wt(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:tr(n.seconds),nanos:tr(n.nanos)}}function tr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Hp(n){return"string"==typeof n?kr.fromBase64String(n):kr.fromUint8Array(n)}function RP(n){var t,e;return"server_timestamp"===(null===(e=((null===(t=n?.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function IH(n){const t=n.mapValue.fields.__previous_value__;return RP(t)?IH(t):t}function zw(n){const t=hh(n.mapValue.fields.__local_write_time__.timestampValue);return new Bi(t.seconds,t.nanos)}class JK{constructor(t,e,i,r,s,c,d,p){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.useFetchStreams=p}}class fh{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new fh("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof fh&&t.projectId===this.projectId&&t.database===this.database}}function Gw(n){return null==n}function Ww(n){return 0===n&&1/n==-1/0}function SH(n){return"number"==typeof n&&Number.isInteger(n)&&!Ww(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const ph={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},sT={nullValue:"NULL_VALUE"};function jp(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?RP(n)?4:xH(n)?9007199254740991:10:Et()}function Yl(n,t){if(n===t)return!0;const e=jp(n);if(e!==jp(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return zw(n).isEqual(zw(t));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=hh(i.timestampValue),c=hh(r.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return r=t,Hp(n.bytesValue).isEqual(Hp(r.bytesValue));case 7:return n.referenceValue===t.referenceValue;case 8:return function(i,r){return tr(i.geoPointValue.latitude)===tr(r.geoPointValue.latitude)&&tr(i.geoPointValue.longitude)===tr(r.geoPointValue.longitude)}(n,t);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return tr(i.integerValue)===tr(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=tr(i.doubleValue),c=tr(r.doubleValue);return s===c?Ww(s)===Ww(c):isNaN(s)&&isNaN(c)}return!1}(n,t);case 9:return z_(n.arrayValue.values||[],t.arrayValue.values||[],Yl);case 10:return function(i,r){const s=i.mapValue.fields||{},c=r.mapValue.fields||{};if(CH(s)!==CH(c))return!1;for(const d in s)if(s.hasOwnProperty(d)&&(void 0===c[d]||!Yl(s[d],c[d])))return!1;return!0}(n,t);default:return Et()}var r}function qw(n,t){return void 0!==(n.values||[]).find(e=>Yl(e,t))}function mh(n,t){if(n===t)return 0;const e=jp(n),i=jp(t);if(e!==i)return sn(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return sn(n.booleanValue,t.booleanValue);case 2:return function(r,s){const c=tr(r.integerValue||r.doubleValue),d=tr(s.integerValue||s.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(n,t);case 3:return AH(n.timestampValue,t.timestampValue);case 4:return AH(zw(n),zw(t));case 5:return sn(n.stringValue,t.stringValue);case 6:return function(r,s){const c=Hp(r),d=Hp(s);return c.compareTo(d)}(n.bytesValue,t.bytesValue);case 7:return function(r,s){const c=r.split("/"),d=s.split("/");for(let p=0;p<c.length&&p<d.length;p++){const _=sn(c[p],d[p]);if(0!==_)return _}return sn(c.length,d.length)}(n.referenceValue,t.referenceValue);case 8:return function(r,s){const c=sn(tr(r.latitude),tr(s.latitude));return 0!==c?c:sn(tr(r.longitude),tr(s.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(r,s){const c=r.values||[],d=s.values||[];for(let p=0;p<c.length&&p<d.length;++p){const _=mh(c[p],d[p]);if(_)return _}return sn(c.length,d.length)}(n.arrayValue,t.arrayValue);case 10:return function(r,s){if(r===ph.mapValue&&s===ph.mapValue)return 0;if(r===ph.mapValue)return 1;if(s===ph.mapValue)return-1;const c=r.fields||{},d=Object.keys(c),p=s.fields||{},_=Object.keys(p);d.sort(),_.sort();for(let w=0;w<d.length&&w<_.length;++w){const I=sn(d[w],_[w]);if(0!==I)return I;const T=mh(c[d[w]],p[_[w]]);if(0!==T)return T}return sn(d.length,_.length)}(n.mapValue,t.mapValue);default:throw Et()}}function AH(n,t){if("string"==typeof n&&"string"==typeof t&&n.length===t.length)return sn(n,t);const e=hh(n),i=hh(t),r=sn(e.seconds,i.seconds);return 0!==r?r:sn(e.nanos,i.nanos)}function W_(n){return OP(n)}function OP(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=hh(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Hp(n.bytesValue).toBase64():"referenceValue"in n?ot.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(t=n.geoPointValue).latitude},${t.longitude})`:"arrayValue"in n?function(i){let r="[",s=!0;for(const c of i.values||[])s?s=!1:r+=",",r+=OP(c);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",c=!0;for(const d of r)c?c=!1:s+=",",s+=`${d}:${OP(i.fields[d])}`;return s+"}"}(n.mapValue):Et();var t}function $p(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function PP(n){return!!n&&"integerValue"in n}function Yw(n){return!!n&&"arrayValue"in n}function TH(n){return!!n&&"nullValue"in n}function MH(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function oT(n){return!!n&&"mapValue"in n}function Kw(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return Up(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=Kw(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Kw(n.arrayValue.values[e]);return t}return Object.assign({},n)}function xH(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function eZ(n){return"nullValue"in n?sT:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?$p(fh.empty(),ot.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Et()}function tZ(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?$p(fh.empty(),ot.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?ph:Et()}function kH(n,t){const e=mh(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function RH(n,t){const e=mh(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}class is{constructor(t){this.value=t}static empty(){return new is({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!oT(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Kw(e)}setAll(t){let e=Ji.emptyPath(),i={},r=[];t.forEach((c,d)=>{if(!e.isImmediateParentOf(d)){const p=this.getFieldsMap(e);this.applyChanges(p,i,r),i={},r=[],e=d.popLast()}c?i[d.lastSegment()]=Kw(c):r.push(d.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,i,r)}delete(t){const e=this.field(t.popLast());oT(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Yl(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];oT(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){Up(e,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new is(Kw(this.value))}}function OH(n){const t=[];return Up(n.fields,(e,i)=>{const r=new Ji([e]);if(oT(i)){const s=OH(i.mapValue).fields;if(0===s.length)t.push(r);else for(const c of s)t.push(r.child(c))}else t.push(r)}),new No(t)}class Si{constructor(t,e,i,r,s,c){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.data=s,this.documentState=c}static newInvalidDocument(t){return new Si(t,0,qt.min(),qt.min(),is.empty(),0)}static newFoundDocument(t,e,i){return new Si(t,1,e,qt.min(),i,0)}static newNoDocument(t,e){return new Si(t,2,e,qt.min(),is.empty(),0)}static newUnknownDocument(t,e){return new Si(t,3,e,qt.min(),is.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=is.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=is.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=qt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof Si&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Si(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class nZ{constructor(t,e=null,i=[],r=[],s=null,c=null,d=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=c,this.endAt=d,this.ht=null}}function PH(n,t=null,e=[],i=[],r=null,s=null,c=null){return new nZ(n,t,e,i,r,s,c)}function zp(n){const t=at(n);if(null===t.ht){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>{return(r=i).field.canonicalString()+r.op.toString()+W_(r.value);var r}).join(","),e+="|ob:",e+=t.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),Gw(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>W_(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>W_(i)).join(",")),t.ht=e}return t.ht}function Zw(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<n.orderBy.length;r++)if(!dZ(n.orderBy[r],t.orderBy[r]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let r=0;r<n.filters.length;r++)if((e=n.filters[r]).op!==(i=t.filters[r]).op||!e.field.isEqual(i.field)||!Yl(e.value,i.value))return!1;var e,i;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!BH(n.startAt,t.startAt)&&BH(n.endAt,t.endAt)}function aT(n){return ot.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function lT(n,t){return n.filters.filter(e=>e instanceof rs&&e.field.isEqual(t))}function NH(n,t,e){let i=sT,r=!0;for(const s of lT(n,t)){let c=sT,d=!0;switch(s.op){case"<":case"<=":c=eZ(s.value);break;case"==":case"in":case">=":c=s.value;break;case">":c=s.value,d=!1;break;case"!=":case"not-in":c=sT}kH({value:i,inclusive:r},{value:c,inclusive:d})<0&&(i=c,r=d)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const c=e.position[s];kH({value:i,inclusive:r},{value:c,inclusive:e.inclusive})<0&&(i=c,r=e.inclusive);break}return{value:i,inclusive:r}}function FH(n,t,e){let i=ph,r=!0;for(const s of lT(n,t)){let c=ph,d=!0;switch(s.op){case">=":case">":c=tZ(s.value),d=!1;break;case"==":case"in":case"<=":c=s.value;break;case"<":c=s.value,d=!1;break;case"!=":case"not-in":c=ph}RH({value:i,inclusive:r},{value:c,inclusive:d})>0&&(i=c,r=d)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const c=e.position[s];RH({value:i,inclusive:r},{value:c,inclusive:e.inclusive})>0&&(i=c,r=e.inclusive);break}return{value:i,inclusive:r}}class rs extends class{}{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?"in"===e||"not-in"===e?this.lt(t,e,i):new rZ(t,e,i):"array-contains"===e?new aZ(t,i):"in"===e?new lZ(t,i):"not-in"===e?new cZ(t,i):"array-contains-any"===e?new uZ(t,i):new rs(t,e,i)}static lt(t,e,i){return"in"===e?new sZ(t,i):new oZ(t,i)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.ft(mh(e,this.value)):null!==e&&jp(this.value)===jp(e)&&this.ft(mh(e,this.value))}ft(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Et()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class rZ extends rs{constructor(t,e,i){super(t,e,i),this.key=ot.fromName(i.referenceValue)}matches(t){const e=ot.comparator(t.key,this.key);return this.ft(e)}}class sZ extends rs{constructor(t,e){super(t,"in",e),this.keys=LH(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class oZ extends rs{constructor(t,e){super(t,"not-in",e),this.keys=LH(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function LH(n,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(i=>ot.fromName(i.referenceValue))}class aZ extends rs{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Yw(e)&&qw(e.arrayValue,this.value)}}class lZ extends rs{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&qw(this.value.arrayValue,e)}}class cZ extends rs{constructor(t,e){super(t,"not-in",e)}matches(t){if(qw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!qw(this.value.arrayValue,e)}}class uZ extends rs{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Yw(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>qw(this.value.arrayValue,i))}}class gh{constructor(t,e){this.position=t,this.inclusive=e}}class q_{constructor(t,e="asc"){this.field=t,this.dir=e}}function dZ(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}function VH(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){const s=t[r],c=n.position[r];if(i=s.field.isKeyField()?ot.comparator(ot.fromName(c.referenceValue),e.key):mh(c,e.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function BH(n,t){if(null===n)return null===t;if(null===t||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Yl(n.position[e],t.position[e]))return!1;return!0}class fu{constructor(t,e=null,i=[],r=[],s=null,c="F",d=null,p=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=c,this.startAt=d,this.endAt=p,this._t=null,this.wt=null}}function UH(n,t,e,i,r,s,c,d){return new fu(n,t,e,i,r,s,c,d)}function Y_(n){return new fu(n)}function HH(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function NP(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function FP(n){for(const t of n.filters)if(t.dt())return t.field;return null}function LP(n){return null!==n.collectionGroup}function K_(n){const t=at(n);if(null===t._t){t._t=[];const e=FP(t),i=NP(t);if(null!==e&&null===i)e.isKeyField()||t._t.push(new q_(e)),t._t.push(new q_(Ji.keyField(),"asc"));else{let r=!1;for(const s of t.explicitOrderBy)t._t.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t._t.push(new q_(Ji.keyField(),s))}}}return t._t}function Os(n){const t=at(n);if(!t.wt)if("F"===t.limitType)t.wt=PH(t.path,t.collectionGroup,K_(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const s of K_(t))e.push(new q_(s.field,"desc"===s.dir?"asc":"desc"));const i=t.endAt?new gh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new gh(t.startAt.position,t.startAt.inclusive):null;t.wt=PH(t.path,t.collectionGroup,e,t.filters,t.limit,i,r)}return t.wt}function cT(n,t,e){return new fu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function Qw(n,t){return Zw(Os(n),Os(t))&&n.limitType===t.limitType}function jH(n){return`${zp(Os(n))}|lt:${n.limitType}`}function VP(n){return`Query(target=${function iZ(n){let t=n.path.canonicalString();return null!==n.collectionGroup&&(t+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(t+=`, filters: [${n.filters.map(e=>{return`${(i=e).field.canonicalString()} ${i.op} ${W_(i.value)}`;var i}).join(", ")}]`),Gw(n.limit)||(t+=", limit: "+n.limit),n.orderBy.length>0&&(t+=`, orderBy: [${n.orderBy.map(e=>{return`${(i=e).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),n.startAt&&(t+=", startAt: ",t+=n.startAt.inclusive?"b:":"a:",t+=n.startAt.position.map(e=>W_(e)).join(",")),n.endAt&&(t+=", endAt: ",t+=n.endAt.inclusive?"a:":"b:",t+=n.endAt.position.map(e=>W_(e)).join(",")),`Target(${t})`}(Os(n))}; limitType=${n.limitType})`}function BP(n,t){return t.isFoundDocument()&&function(e,i){const r=i.key.path;return null!==e.collectionGroup?i.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(r):ot.isDocumentKey(e.path)?e.path.isEqual(r):e.path.isImmediateParentOf(r)}(n,t)&&function(e,i){for(const r of e.explicitOrderBy)if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,t)&&function(e,i){for(const r of e.filters)if(!r.matches(i))return!1;return!0}(n,t)&&(i=t,!((e=n).startAt&&!function(r,s,c){const d=VH(r,s,c);return r.inclusive?d<=0:d<0}(e.startAt,K_(e),i)||e.endAt&&!function(r,s,c){const d=VH(r,s,c);return r.inclusive?d>=0:d>0}(e.endAt,K_(e),i)));var e,i}function $H(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function zH(n){return(t,e)=>{let i=!1;for(const r of K_(n)){const s=hZ(r,t,e);if(0!==s)return s;i=i||r.field.isKeyField()}return 0}}function hZ(n,t,e){const i=n.field.isKeyField()?ot.comparator(t.key,e.key):function(r,s,c){const d=s.data.field(r),p=c.data.field(r);return null!==d&&null!==p?mh(d,p):Et()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Et()}}function GH(n,t){if(n.gt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ww(t)?"-0":t}}function WH(n){return{integerValue:""+n}}function qH(n,t){return SH(t)?WH(t):GH(n,t)}class uT{constructor(){this._=void 0}}function fZ(n,t,e){return n instanceof Z_?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&(s.fields.__previous_value__=r),{mapValue:s}}(e,t):n instanceof Gp?KH(n,t):n instanceof Wp?ZH(n,t):function(i,r){const s=YH(i,r),c=QH(s)+QH(i.yt);return PP(s)&&PP(i.yt)?WH(c):GH(i.It,c)}(n,t)}function pZ(n,t,e){return n instanceof Gp?KH(n,t):n instanceof Wp?ZH(n,t):e}function YH(n,t){return n instanceof Q_?PP(e=t)||(i=e)&&"doubleValue"in i?t:{integerValue:0}:null;var i,e}class Z_ extends uT{}class Gp extends uT{constructor(t){super(),this.elements=t}}function KH(n,t){const e=XH(t);for(const i of n.elements)e.some(r=>Yl(r,i))||e.push(i);return{arrayValue:{values:e}}}class Wp extends uT{constructor(t){super(),this.elements=t}}function ZH(n,t){let e=XH(t);for(const i of n.elements)e=e.filter(r=>!Yl(r,i));return{arrayValue:{values:e}}}class Q_ extends uT{constructor(t,e){super(),this.It=t,this.yt=e}}function QH(n){return tr(n.integerValue||n.doubleValue)}function XH(n){return Yw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Xw{constructor(t,e){this.field=t,this.transform=e}}class gZ{constructor(t,e){this.version=t,this.transformResults=e}}class Ui{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Ui}static exists(t){return new Ui(void 0,t)}static updateTime(t){return new Ui(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function dT(n,t){return void 0!==n.updateTime?t.isFoundDocument()&&t.version.isEqual(n.updateTime):void 0===n.exists||n.exists===t.isFoundDocument()}class hT{}function JH(n,t){if(!n.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return n.isNoDocument()?new J_(n.key,Ui.none()):new X_(n.key,n.data,Ui.none());{const e=n.data,i=is.empty();let r=new hi(Ji.comparator);for(let s of t.fields)if(!r.has(s)){let c=e.field(s);null===c&&s.length>1&&(s=s.popLast(),c=e.field(s)),null===c?i.delete(s):i.set(s,c),r=r.add(s)}return new pu(n.key,i,new No(r.toArray()),Ui.none())}}function _Z(n,t,e){n instanceof X_?function(i,r,s){const c=i.value.clone(),d=nj(i.fieldTransforms,r,s.transformResults);c.setAll(d),r.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,t,e):n instanceof pu?function(i,r,s){if(!dT(i.precondition,r))return void r.convertToUnknownDocument(s.version);const c=nj(i.fieldTransforms,r,s.transformResults),d=r.data;d.setAll(tj(i)),d.setAll(c),r.convertToFoundDocument(s.version,d).setHasCommittedMutations()}(n,t,e):t.convertToNoDocument(e.version).setHasCommittedMutations()}function Jw(n,t,e,i){return n instanceof X_?function(r,s,c,d){if(!dT(r.precondition,s))return c;const p=r.value.clone(),_=ij(r.fieldTransforms,d,s);return p.setAll(_),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),null}(n,t,e,i):n instanceof pu?function(r,s,c,d){if(!dT(r.precondition,s))return c;const p=ij(r.fieldTransforms,d,s),_=s.data;return _.setAll(tj(r)),_.setAll(p),s.convertToFoundDocument(s.version,_).setHasLocalMutations(),null===c?null:c.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(w=>w.field))}(n,t,e,i):(c=e,dT(n.precondition,s=t)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c);var s,c}function yZ(n,t){let e=null;for(const i of n.fieldTransforms){const r=t.data.field(i.field),s=YH(i.transform,r||null);null!=s&&(null===e&&(e=is.empty()),e.set(i.field,s))}return e||null}function ej(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&(i=t.fieldTransforms,!!(void 0===(e=n.fieldTransforms)&&void 0===i||e&&i&&z_(e,i,(r,s)=>function mZ(n,t){return n.field.isEqual(t.field)&&(i=t.transform,(e=n.transform)instanceof Gp&&i instanceof Gp||e instanceof Wp&&i instanceof Wp?z_(e.elements,i.elements,Yl):e instanceof Q_&&i instanceof Q_?Yl(e.yt,i.yt):e instanceof Z_&&i instanceof Z_);var e,i}(r,s))))&&(0===n.type?n.value.isEqual(t.value):1!==n.type||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask));var e,i}class X_ extends hT{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class pu extends hT{constructor(t,e,i,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function tj(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function nj(n,t,e){const i=new Map;Wt(n.length===e.length);for(let r=0;r<e.length;r++){const s=n[r],c=s.transform,d=t.data.field(s.field);i.set(s.field,pZ(c,d,e[r]))}return i}function ij(n,t,e){const i=new Map;for(const r of n){const s=r.transform,c=e.data.field(r.field);i.set(r.field,fZ(s,c,t))}return i}class J_ extends hT{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class UP extends hT{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class vZ{constructor(t){this.count=t}}var Er,Fn;function rj(n){switch(n){default:return Et();case be.CANCELLED:case be.UNKNOWN:case be.DEADLINE_EXCEEDED:case be.RESOURCE_EXHAUSTED:case be.INTERNAL:case be.UNAVAILABLE:case be.UNAUTHENTICATED:return!1;case be.INVALID_ARGUMENT:case be.NOT_FOUND:case be.ALREADY_EXISTS:case be.PERMISSION_DENIED:case be.FAILED_PRECONDITION:case be.ABORTED:case be.OUT_OF_RANGE:case be.UNIMPLEMENTED:case be.DATA_LOSS:return!0}}function sj(n){if(void 0===n)return hr("GRPC error has no .code"),be.UNKNOWN;switch(n){case Er.OK:return be.OK;case Er.CANCELLED:return be.CANCELLED;case Er.UNKNOWN:return be.UNKNOWN;case Er.DEADLINE_EXCEEDED:return be.DEADLINE_EXCEEDED;case Er.RESOURCE_EXHAUSTED:return be.RESOURCE_EXHAUSTED;case Er.INTERNAL:return be.INTERNAL;case Er.UNAVAILABLE:return be.UNAVAILABLE;case Er.UNAUTHENTICATED:return be.UNAUTHENTICATED;case Er.INVALID_ARGUMENT:return be.INVALID_ARGUMENT;case Er.NOT_FOUND:return be.NOT_FOUND;case Er.ALREADY_EXISTS:return be.ALREADY_EXISTS;case Er.PERMISSION_DENIED:return be.PERMISSION_DENIED;case Er.FAILED_PRECONDITION:return be.FAILED_PRECONDITION;case Er.ABORTED:return be.ABORTED;case Er.OUT_OF_RANGE:return be.OUT_OF_RANGE;case Er.UNIMPLEMENTED:return be.UNIMPLEMENTED;case Er.DATA_LOSS:return be.DATA_LOSS;default:return Et()}}(Fn=Er||(Er={}))[Fn.OK=0]="OK",Fn[Fn.CANCELLED=1]="CANCELLED",Fn[Fn.UNKNOWN=2]="UNKNOWN",Fn[Fn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fn[Fn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fn[Fn.NOT_FOUND=5]="NOT_FOUND",Fn[Fn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fn[Fn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fn[Fn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fn[Fn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fn[Fn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fn[Fn.ABORTED=10]="ABORTED",Fn[Fn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fn[Fn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fn[Fn.INTERNAL=13]="INTERNAL",Fn[Fn.UNAVAILABLE=14]="UNAVAILABLE",Fn[Fn.DATA_LOSS=15]="DATA_LOSS";class _h{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0!==i)for(const[r,s]of i)if(this.equalsFn(r,t))return s}has(t){return void 0!==this.get(t)}set(t,e){const i=this.mapKeyFn(t),r=this.inner[i];if(void 0===r)return this.inner[i]=[[t,e]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return 1===i.length?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Up(this.inner,(e,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return EH(this.inner)}size(){return this.innerSize}}const bZ=new er(ot.comparator);function so(){return bZ}const oj=new er(ot.comparator);function eC(...n){let t=oj;for(const e of n)t=t.insert(e.key,e);return t}function aj(n){let t=oj;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function Kl(){return tC()}function lj(){return tC()}function tC(){return new _h(n=>n.toString(),(n,t)=>n.isEqual(t))}const wZ=new er(ot.comparator),CZ=new hi(ot.comparator);function fn(...n){let t=CZ;for(const e of n)t=t.add(e);return t}const EZ=new hi(sn);function fT(){return EZ}class nC{constructor(t,e,i,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const r=new Map;return r.set(t,iC.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new nC(qt.min(),r,fT(),so(),fn())}}class iC{constructor(t,e,i,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new iC(i,e,fn(),fn(),fn())}}class pT{constructor(t,e,i,r){this.Tt=t,this.removedTargetIds=e,this.key=i,this.Et=r}}class cj{constructor(t,e){this.targetId=t,this.At=e}}class uj{constructor(t,e,i=kr.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}}class dj{constructor(){this.Rt=0,this.bt=fj(),this.Pt=kr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(t){t.approximateByteSize()>0&&(this.Vt=!0,this.Pt=t)}xt(){let t=fn(),e=fn(),i=fn();return this.bt.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:Et()}}),new iC(this.Pt,this.vt,t,e,i)}Nt(){this.Vt=!1,this.bt=fj()}kt(t,e){this.Vt=!0,this.bt=this.bt.insert(t,e)}Ot(t){this.Vt=!0,this.bt=this.bt.remove(t)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class DZ{constructor(t){this.Bt=t,this.Lt=new Map,this.Ut=so(),this.qt=hj(),this.Kt=new hi(sn)}Gt(t){for(const e of t.Tt)t.Et&&t.Et.isFoundDocument()?this.Qt(e,t.Et):this.jt(e,t.key,t.Et);for(const e of t.removedTargetIds)this.jt(e,t.key,t.Et)}Wt(t){this.forEachTarget(t,e=>{const i=this.zt(e);switch(t.state){case 0:this.Ht(e)&&i.Ct(t.resumeToken);break;case 1:i.Ft(),i.St||i.Nt(),i.Ct(t.resumeToken);break;case 2:i.Ft(),i.St||this.removeTarget(e);break;case 3:this.Ht(e)&&(i.$t(),i.Ct(t.resumeToken));break;case 4:this.Ht(e)&&(this.Jt(e),i.Ct(t.resumeToken));break;default:Et()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Lt.forEach((i,r)=>{this.Ht(r)&&e(r)})}Yt(t){const e=t.targetId,i=t.At.count,r=this.Xt(e);if(r){const s=r.target;if(aT(s))if(0===i){const c=new ot(s.path);this.jt(e,c,Si.newNoDocument(c,qt.min()))}else Wt(1===i);else this.Zt(e)!==i&&(this.Jt(e),this.Kt=this.Kt.add(e))}}te(t){const e=new Map;this.Lt.forEach((s,c)=>{const d=this.Xt(c);if(d){if(s.current&&aT(d.target)){const p=new ot(d.target.path);null!==this.Ut.get(p)||this.ee(c,p)||this.jt(c,p,Si.newNoDocument(p,t))}s.Dt&&(e.set(c,s.xt()),s.Nt())}});let i=fn();this.qt.forEach((s,c)=>{let d=!0;c.forEachWhile(p=>{const _=this.Xt(p);return!_||2===_.purpose||(d=!1,!1)}),d&&(i=i.add(s))}),this.Ut.forEach((s,c)=>c.setReadTime(t));const r=new nC(t,e,this.Kt,this.Ut,i);return this.Ut=so(),this.qt=hj(),this.Kt=new hi(sn),r}Qt(t,e){if(!this.Ht(t))return;const i=this.ee(t,e.key)?2:0;this.zt(t).kt(e.key,i),this.Ut=this.Ut.insert(e.key,e),this.qt=this.qt.insert(e.key,this.ne(e.key).add(t))}jt(t,e,i){if(!this.Ht(t))return;const r=this.zt(t);this.ee(t,e)?r.kt(e,1):r.Ot(e),this.qt=this.qt.insert(e,this.ne(e).delete(t)),i&&(this.Ut=this.Ut.insert(e,i))}removeTarget(t){this.Lt.delete(t)}Zt(t){const e=this.zt(t).xt();return this.Bt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Mt(t){this.zt(t).Mt()}zt(t){let e=this.Lt.get(t);return e||(e=new dj,this.Lt.set(t,e)),e}ne(t){let e=this.qt.get(t);return e||(e=new hi(sn),this.qt=this.qt.insert(t,e)),e}Ht(t){const e=null!==this.Xt(t);return e||qe("WatchChangeAggregator","Detected inactive target",t),e}Xt(t){const e=this.Lt.get(t);return e&&e.St?null:this.Bt.se(t)}Jt(t){this.Lt.set(t,new dj),this.Bt.getRemoteKeysForTarget(t).forEach(e=>{this.jt(t,e,null)})}ee(t,e){return this.Bt.getRemoteKeysForTarget(t).has(e)}}function hj(){return new er(ot.comparator)}function fj(){return new er(ot.comparator)}const IZ={asc:"ASCENDING",desc:"DESCENDING"},SZ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class AZ{constructor(t,e){this.databaseId=t,this.gt=e}}function rC(n,t){return n.gt?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function pj(n,t){return n.gt?t.toBase64():t.toUint8Array()}function TZ(n,t){return rC(n,t.toTimestamp())}function Ur(n){return Wt(!!n),qt.fromTimestamp(function(t){const e=hh(t);return new Bi(e.seconds,e.nanos)}(n))}function HP(n,t){return(e=n,new Nn(["projects",e.projectId,"databases",e.database])).child("documents").child(t).canonicalString();var e}function mj(n){const t=Nn.fromString(n);return Wt(Ej(t)),t}function sC(n,t){return HP(n.databaseId,t.path)}function Zl(n,t){const e=mj(t);if(e.get(1)!==n.databaseId.projectId)throw new He(be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new He(be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new ot(_j(e))}function jP(n,t){return HP(n.databaseId,t)}function gj(n){const t=mj(n);return 4===t.length?Nn.emptyPath():_j(t)}function oC(n){return new Nn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function _j(n){return Wt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function yj(n,t,e){return{name:sC(n,t),fields:e.value.mapValue.fields}}function vj(n,t,e){const i=Zl(n,t.name),r=Ur(t.updateTime),s=new is({mapValue:{fields:t.fields}}),c=Si.newFoundDocument(i,r,s);return e&&c.setHasCommittedMutations(),e?c.setHasCommittedMutations():c}function aC(n,t){let e;if(t instanceof X_)e={update:yj(n,t.key,t.value)};else if(t instanceof J_)e={delete:sC(n,t.key)};else if(t instanceof pu)e={update:yj(n,t.key,t.data),updateMask:LZ(t.fieldMask)};else{if(!(t instanceof UP))return Et();e={verify:sC(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(r,s){const c=s.transform;if(c instanceof Z_)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Gp)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Wp)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Q_)return{fieldPath:s.field.canonicalString(),increment:c.yt};throw Et()}(0,i))),t.precondition.isNone||(e.currentDocument=void 0!==(r=t.precondition).updateTime?{updateTime:TZ(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:Et()),e;var r}function $P(n,t){const e=t.currentDocument?void 0!==(r=t.currentDocument).updateTime?Ui.updateTime(Ur(r.updateTime)):void 0!==r.exists?Ui.exists(r.exists):Ui.none():Ui.none(),i=t.updateTransforms?t.updateTransforms.map(r=>function(s,c){let d=null;"setToServerValue"in c?(Wt("REQUEST_TIME"===c.setToServerValue),d=new Z_):"appendMissingElements"in c?d=new Gp(c.appendMissingElements.values||[]):"removeAllFromArray"in c?d=new Wp(c.removeAllFromArray.values||[]):"increment"in c?d=new Q_(s,c.increment):Et();const p=Ji.fromServerFormat(c.fieldPath);return new Xw(p,d)}(n,r)):[];var r;if(t.update){const r=Zl(n,t.update.name),s=new is({mapValue:{fields:t.update.fields}});if(t.updateMask){const c=new No((t.updateMask.fieldPaths||[]).map(_=>Ji.fromServerFormat(_)));return new pu(r,s,c,e,i)}return new X_(r,s,e,i)}if(t.delete){const r=Zl(n,t.delete);return new J_(r,e)}if(t.verify){const r=Zl(n,t.verify);return new UP(r,e)}return Et()}function bj(n,t){return{documents:[jP(n,t.path)]}}function zP(n,t){const e={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(e.parent=jP(n,i),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=jP(n,i.popLast()),e.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(p){if(0===p.length)return;const _=p.map(w=>function(I){if("=="===I.op){if(MH(I.value))return{unaryFilter:{field:ey(I.field),op:"IS_NAN"}};if(TH(I.value))return{unaryFilter:{field:ey(I.field),op:"IS_NULL"}}}else if("!="===I.op){if(MH(I.value))return{unaryFilter:{field:ey(I.field),op:"IS_NOT_NAN"}};if(TH(I.value))return{unaryFilter:{field:ey(I.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ey(I.field),op:PZ(I.op),value:I.value}}}(w));return 1===_.length?_[0]:{compositeFilter:{op:"AND",filters:_}}}(t.filters);r&&(e.structuredQuery.where=r);const s=function(p){if(0!==p.length)return p.map(_=>{return{field:ey((w=_).field),direction:OZ(w.dir)};var w})}(t.orderBy);s&&(e.structuredQuery.orderBy=s);const c=(_=t.limit,n.gt||Gw(_)?_:{value:_});var _,d,p;return null!==c&&(e.structuredQuery.limit=c),t.startAt&&(e.structuredQuery.startAt={before:(d=t.startAt).inclusive,values:d.position}),t.endAt&&(e.structuredQuery.endAt={before:!(p=t.endAt).inclusive,values:p.position}),e}function wj(n){let t=gj(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let r=null;if(i>0){Wt(1===i);const w=e.from[0];w.allDescendants?r=w.collectionId:t=t.child(w.collectionId)}let s=[];e.where&&(s=Cj(e.where));let c=[];e.orderBy&&(c=e.orderBy.map(w=>{return new q_(ty((I=w).field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction));var I}));let d=null;e.limit&&(d=function(w){let I;return I="object"==typeof w?w.value:w,Gw(I)?null:I}(e.limit));let p=null;var w;e.startAt&&(p=new gh((w=e.startAt).values||[],!!w.before));let _=null;return e.endAt&&(_=function(w){return new gh(w.values||[],!w.before)}(e.endAt)),UH(t,r,c,s,d,"F",p,_)}function Cj(n){return n?void 0!==n.unaryFilter?[FZ(n)]:void 0!==n.fieldFilter?[NZ(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(t=>Cj(t)).reduce((t,e)=>t.concat(e)):Et():[]}function OZ(n){return IZ[n]}function PZ(n){return SZ[n]}function ey(n){return{fieldPath:n.canonicalString()}}function ty(n){return Ji.fromServerFormat(n.fieldPath)}function NZ(n){return rs.create(ty(n.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Et()}}(n.fieldFilter.op),n.fieldFilter.value)}function FZ(n){switch(n.unaryFilter.op){case"IS_NAN":const t=ty(n.unaryFilter.field);return rs.create(t,"==",{doubleValue:NaN});case"IS_NULL":const e=ty(n.unaryFilter.field);return rs.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ty(n.unaryFilter.field);return rs.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=ty(n.unaryFilter.field);return rs.create(r,"!=",{nullValue:"NULL_VALUE"});default:return Et()}}function LZ(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Ej(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ps(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=Dj(t)),t=VZ(n.get(e),t);return Dj(t)}function VZ(n,t){let e=t;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=s}}return e}function Dj(n){return n+"\x01\x01"}function Ql(n){const t=n.length;if(Wt(t>=2),2===t)return Wt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Nn.emptyPath();const e=t-2,i=[];let r="";for(let s=0;s<t;){const c=n.indexOf("\x01",s);switch((c<0||c>e)&&Et(),n.charAt(c+1)){case"\x01":const d=n.substring(s,c);let p;0===r.length?p=d:(r+=d,p=r,r=""),i.push(p);break;case"\x10":r+=n.substring(s,c),r+="\0";break;case"\x11":r+=n.substring(s,c+1);break;default:Et()}s=c+2}return new Nn(i)}const Ij=["userId","batchId"];function mT(n,t){return[n,Ps(t)]}function Sj(n,t,e){return[n,Ps(t),e]}const BZ={},UZ=["prefixPath","collectionGroup","readTime","documentId"],HZ=["prefixPath","collectionGroup","documentId"],jZ=["collectionGroup","readTime","prefixPath","documentId"],$Z=["canonicalId","targetId"],zZ=["targetId","path"],GZ=["path","targetId"],WZ=["collectionId","parent"],qZ=["indexId","uid"],YZ=["uid","sequenceNumber"],KZ=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ZZ=["indexId","uid","orderedDocumentKey"],QZ=["userId","collectionPath","documentId"],XZ=["userId","collectionPath","largestBatchId"],JZ=["userId","collectionGroup","largestBatchId"],Aj=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],e7=[...Aj,"documentOverlays"],Tj=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Mj=Tj,t7=[...Mj,"indexConfiguration","indexState","indexEntries"];class GP extends bH{constructor(t,e){super(),this.ie=t,this.currentSequenceNumber=e}}function Hr(n,t){const e=at(n);return nl.M(e.ie,t)}class WP{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&_Z(s,t,i[r])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=Jw(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=Jw(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=lj();return this.mutations.forEach(r=>{const s=t.get(r.key),c=s.overlayedDocument;let d=this.applyToLocalView(c,s.mutatedFields);d=e.has(r.key)?null:d;const p=JH(c,d);null!==p&&i.set(r.key,p),c.isValidDocument()||c.convertToNoDocument(qt.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),fn())}isEqual(t){return this.batchId===t.batchId&&z_(this.mutations,t.mutations,(e,i)=>ej(e,i))&&z_(this.baseMutations,t.baseMutations,(e,i)=>ej(e,i))}}class qP{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){Wt(t.mutations.length===i.length);let r=wZ;const s=t.mutations;for(let c=0;c<s.length;c++)r=r.insert(s[c].key,i[c].version);return new qP(t,e,i,r)}}class YP{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class yh{constructor(t,e,i,r,s=qt.min(),c=qt.min(),d=kr.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d}withSequenceNumber(t){return new yh(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new yh(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new yh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class xj{constructor(t){this.re=t}}function kj(n,t){const e=t.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:gT(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document={name:sC(r=n.re,(s=t).key),fields:s.data.value.mapValue.fields,updateTime:rC(r,s.version.toTimestamp())};else if(t.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:qp(t.version)};else{if(!t.isUnknownDocument())return Et();i.unknownDocument={path:e.path.toArray(),version:qp(t.version)}}var r,s;return i}function gT(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function qp(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Yp(n){const t=new Bi(n.seconds,n.nanoseconds);return qt.fromTimestamp(t)}function Kp(n,t){const e=(t.baseMutations||[]).map(s=>$P(n.re,s));for(let s=0;s<t.mutations.length-1;++s){const c=t.mutations[s];s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform&&(c.updateTransforms=t.mutations[s+1].transform.fieldTransforms,t.mutations.splice(s+1,1),++s)}const i=t.mutations.map(s=>$P(n.re,s)),r=Bi.fromMillis(t.localWriteTimeMs);return new WP(t.batchId,r,e,i)}function lC(n){const t=Yp(n.readTime),e=void 0!==n.lastLimboFreeSnapshotVersion?Yp(n.lastLimboFreeSnapshotVersion):qt.min();let i;var r;return void 0!==n.query.documents?(Wt(1===(r=n.query).documents.length),i=Os(Y_(gj(r.documents[0])))):i=Os(wj(n.query)),new yh(i,n.targetId,0,n.lastListenSequenceNumber,t,e,kr.fromBase64String(n.resumeToken))}function Rj(n,t){const e=qp(t.snapshotVersion),i=qp(t.lastLimboFreeSnapshotVersion);let r;r=aT(t.target)?bj(n.re,t.target):zP(n.re,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:zp(t.target),readTime:e,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function KP(n){const t=wj({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?cT(t,t.limit,"L"):t}function ZP(n,t){return new YP(t.largestBatchId,$P(n.re,t.overlayMutation))}function Oj(n,t){const e=t.path.lastSegment();return[n,Ps(t.path.popLast()),e]}function Pj(n,t,e,i){return{indexId:n,uid:t.uid||"",sequenceNumber:e,readTime:qp(i.readTime),documentKey:Ps(i.documentKey.path),largestBatchId:i.largestBatchId}}class i7{getBundleMetadata(t,e){return Nj(t).get(e).next(i=>{if(i)return{id:(r=i).bundleId,createTime:Yp(r.createTime),version:r.version};var r})}saveBundleMetadata(t,e){return Nj(t).put({bundleId:(i=e).id,createTime:qp(Ur(i.createTime)),version:i.version});var i}getNamedQuery(t,e){return Fj(t).get(e).next(i=>{if(i)return{name:(r=i).name,query:KP(r.bundledQuery),readTime:Yp(r.readTime)};var r})}saveNamedQuery(t,e){return Fj(t).put({name:(i=e).name,readTime:qp(Ur(i.readTime)),bundledQuery:i.bundledQuery});var i}}function Nj(n){return Hr(n,"bundles")}function Fj(n){return Hr(n,"namedQueries")}class _T{constructor(t,e){this.It=t,this.userId=e}static oe(t,e){return new _T(t,e.uid||"")}getOverlay(t,e){return cC(t).get(Oj(this.userId,e)).next(i=>i?ZP(this.It,i):null)}getOverlays(t,e){const i=Kl();return fe.forEach(e,r=>this.getOverlay(t,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){const r=[];return i.forEach((s,c)=>{const d=new YP(e,c);r.push(this.ue(t,d))}),fe.waitFor(r)}removeOverlaysForBatchId(t,e,i){const r=new Set;e.forEach(c=>r.add(Ps(c.getCollectionPath())));const s=[];return r.forEach(c=>{const d=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);s.push(cC(t).Y("collectionPathOverlayIndex",d))}),fe.waitFor(s)}getOverlaysForCollection(t,e,i){const r=Kl(),s=Ps(e),c=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return cC(t).W("collectionPathOverlayIndex",c).next(d=>{for(const p of d){const _=ZP(this.It,p);r.set(_.getKey(),_)}return r})}getOverlaysForCollectionGroup(t,e,i,r){const s=Kl();let c;const d=IDBKeyRange.bound([this.userId,e,i],[this.userId,e,Number.POSITIVE_INFINITY],!0);return cC(t).Z({index:"collectionGroupOverlayIndex",range:d},(p,_,w)=>{const I=ZP(this.It,_);s.size()<r||I.largestBatchId===c?(s.set(I.getKey(),I),c=I.largestBatchId):w.done()}).next(()=>s)}ue(t,e){return cC(t).put(function(i,r,s){const[c,d,p]=Oj(r,s.mutation.key);return{userId:r,collectionPath:d,documentId:p,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:aC(i.re,s.mutation)}}(this.It,this.userId,e))}}function cC(n){return Hr(n,"documentOverlays")}class Zp{constructor(){}ce(t,e){this.ae(t,e),e.he()}ae(t,e){if("nullValue"in t)this.le(e,5);else if("booleanValue"in t)this.le(e,10),e.fe(t.booleanValue?1:0);else if("integerValue"in t)this.le(e,15),e.fe(tr(t.integerValue));else if("doubleValue"in t){const i=tr(t.doubleValue);isNaN(i)?this.le(e,13):(this.le(e,15),Ww(i)?e.fe(0):e.fe(i))}else if("timestampValue"in t){const i=t.timestampValue;this.le(e,20),"string"==typeof i?e.de(i):(e.de(`${i.seconds||""}`),e.fe(i.nanos||0))}else if("stringValue"in t)this._e(t.stringValue,e),this.we(e);else if("bytesValue"in t)this.le(e,30),e.me(Hp(t.bytesValue)),this.we(e);else if("referenceValue"in t)this.ge(t.referenceValue,e);else if("geoPointValue"in t){const i=t.geoPointValue;this.le(e,45),e.fe(i.latitude||0),e.fe(i.longitude||0)}else"mapValue"in t?xH(t)?this.le(e,Number.MAX_SAFE_INTEGER):(this.ye(t.mapValue,e),this.we(e)):"arrayValue"in t?(this.pe(t.arrayValue,e),this.we(e)):Et()}_e(t,e){this.le(e,25),this.Ie(t,e)}Ie(t,e){e.de(t)}ye(t,e){const i=t.fields||{};this.le(e,55);for(const r of Object.keys(i))this._e(r,e),this.ae(i[r],e)}pe(t,e){const i=t.values||[];this.le(e,50);for(const r of i)this.ae(r,e)}ge(t,e){this.le(e,37),ot.fromName(t).path.forEach(i=>{this.le(e,60),this.Ie(i,e)})}le(t,e){t.fe(e)}we(t){t.fe(2)}}function r7(n){if(0===n)return 8;let t=0;return n>>4==0&&(t+=4,n<<=4),n>>6==0&&(t+=2,n<<=2),n>>7==0&&(t+=1),t}function Lj(n){const t=64-function(e){let i=0;for(let r=0;r<8;++r){const s=r7(255&e[r]);if(i+=s,8!==s)break}return i}(n);return Math.ceil(t/8)}Zp.Te=new Zp;class s7{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Ae(i.value),i=e.next();this.Re()}be(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Pe(i.value),i=e.next();this.ve()}Ve(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{const r=e.codePointAt(0);this.Ae(240|r>>>18),this.Ae(128|63&r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r)}}this.Re()}Se(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Pe(i);else if(i<2048)this.Pe(960|i>>>6),this.Pe(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.Pe(480|i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i);else{const r=e.codePointAt(0);this.Pe(240|r>>>18),this.Pe(128|63&r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r)}}this.ve()}De(t){const e=this.Ce(t),i=Lj(e);this.xe(1+i),this.buffer[this.position++]=255&i;for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=255&e[r]}Ne(t){const e=this.Ce(t),i=Lj(e);this.xe(1+i),this.buffer[this.position++]=~(255&i);for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=~(255&e[r])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(t){this.xe(t.length),this.buffer.set(t,this.position),this.position+=t.length}$e(){return this.buffer.slice(0,this.position)}Ce(t){const e=function(r){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,r,!1),new Uint8Array(s.buffer)}(t),i=0!=(128&e[0]);e[0]^=i?255:128;for(let r=1;r<e.length;++r)e[r]^=i?255:0;return e}Ae(t){const e=255&t;0===e?(this.Oe(0),this.Oe(255)):255===e?(this.Oe(255),this.Oe(0)):this.Oe(e)}Pe(t){const e=255&t;0===e?(this.Fe(0),this.Fe(255)):255===e?(this.Fe(255),this.Fe(0)):this.Fe(t)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(t){this.xe(1),this.buffer[this.position++]=t}Fe(t){this.xe(1),this.buffer[this.position++]=~t}xe(t){const e=t+this.position;if(e<=this.buffer.length)return;let i=2*this.buffer.length;i<e&&(i=e);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class o7{constructor(t){this.Be=t}me(t){this.Be.Ee(t)}de(t){this.Be.Ve(t)}fe(t){this.Be.De(t)}he(){this.Be.ke()}}class a7{constructor(t){this.Be=t}me(t){this.Be.be(t)}de(t){this.Be.Se(t)}fe(t){this.Be.Ne(t)}he(){this.Be.Me()}}class uC{constructor(){this.Be=new s7,this.Le=new o7(this.Be),this.Ue=new a7(this.Be)}seed(t){this.Be.seed(t)}qe(t){return 0===t?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Qp{constructor(t,e,i,r){this.indexId=t,this.documentKey=e,this.arrayValue=i,this.directionalValue=r}Ke(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,i=new Uint8Array(e);return i.set(this.directionalValue,0),e!==t?i.set([0],this.directionalValue.length):++i[i.length-1],new Qp(this.indexId,this.documentKey,this.arrayValue,i)}}function Xp(n,t){let e=n.indexId-t.indexId;return 0!==e?e:(e=Vj(n.arrayValue,t.arrayValue),0!==e?e:(e=Vj(n.directionalValue,t.directionalValue),0!==e?e:ot.comparator(n.documentKey,t.documentKey)))}function Vj(n,t){for(let e=0;e<n.length&&e<t.length;++e){const i=n[e]-t[e];if(0!==i)return i}return n.length-t.length}class l7{constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ge=t.orderBy,this.Qe=[];for(const e of t.filters){const i=e;i.dt()?this.je=i:this.Qe.push(i)}}We(t){const e=TP(t);if(void 0!==e&&!this.ze(e))return!1;const i=Vp(t);let r=0,s=0;for(;r<i.length&&this.ze(i[r]);++r);if(r===i.length)return!0;if(void 0!==this.je){const c=i[r];if(!this.He(this.je,c)||!this.Je(this.Ge[s++],c))return!1;++r}for(;r<i.length;++r){const c=i[r];if(s>=this.Ge.length||!this.Je(this.Ge[s++],c))return!1}return!0}ze(t){for(const e of this.Qe)if(this.He(e,t))return!0;return!1}He(t,e){return!(void 0===t||!t.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===t.op||"array-contains-any"===t.op)}Je(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}class c7{constructor(){this.Ye=new QP}addToCollectionParentIndex(t,e){return this.Ye.add(e),fe.resolve()}getCollectionParents(t,e){return fe.resolve(this.Ye.getEntries(e))}addFieldIndex(t,e){return fe.resolve()}deleteFieldIndex(t,e){return fe.resolve()}getDocumentsMatchingTarget(t,e){return fe.resolve(null)}getIndexType(t,e){return fe.resolve(0)}getFieldIndexes(t,e){return fe.resolve([])}getNextCollectionGroupToUpdate(t){return fe.resolve(null)}getMinOffset(t,e){return fe.resolve(Po.min())}getMinOffsetFromCollectionGroup(t,e){return fe.resolve(Po.min())}updateCollectionGroup(t,e,i){return fe.resolve()}updateIndexEntries(t,e){return fe.resolve()}}class QP{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new hi(Nn.comparator),s=!r.has(i);return this.index[e]=r.add(i),s}has(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new hi(Nn.comparator)).toArray()}}const yT=new Uint8Array(0);class u7{constructor(t,e){this.user=t,this.databaseId=e,this.Xe=new QP,this.Ze=new _h(i=>zp(i),(i,r)=>Zw(i,r)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.Xe.has(e)){const i=e.lastSegment(),r=e.popLast();t.addOnCommittedListener(()=>{this.Xe.add(e)});const s={collectionId:i,parent:Ps(r)};return Bj(t).put(s)}return fe.resolve()}getCollectionParents(t,e){const i=[],r=IDBKeyRange.bound([e,""],[gH(e),""],!1,!0);return Bj(t).W(r).next(s=>{for(const c of s){if(c.collectionId!==e)break;i.push(Ql(c.parent))}return i})}addFieldIndex(t,e){const i=vT(t),r={indexId:(c=e).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var c;delete r.indexId;const s=i.add(r);if(e.indexState){const c=hC(t);return s.next(d=>{c.put(Pj(d,this.user,e.indexState.sequenceNumber,e.indexState.offset))})}return s.next()}deleteFieldIndex(t,e){const i=vT(t),r=hC(t),s=dC(t);return i.delete(e.indexId).next(()=>r.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}getDocumentsMatchingTarget(t,e){const i=dC(t);let r=!0;const s=new Map;return fe.forEach(this.tn(e),c=>this.en(t,c).next(d=>{r&&(r=!!d),s.set(c,d)})).next(()=>{if(r){let c=fn();const d=[];return fe.forEach(s,(p,_)=>{var w;qe("IndexedDbIndexManager",`Using index ${w=p,`id=${w.indexId}|cg=${w.collectionGroup}|f=${w.fields.map(ft=>`${ft.fieldPath}:${ft.kind}`).join(",")}`} to execute ${zp(e)}`);const I=function(ft,bt){const Ut=TP(bt);if(void 0===Ut)return null;for(const zt of lT(ft,Ut.fieldPath))switch(zt.op){case"array-contains-any":return zt.value.arrayValue.values||[];case"array-contains":return[zt.value]}return null}(_,p),T=function(ft,bt){const Ut=new Map;for(const zt of Vp(bt))for(const Mn of lT(ft,zt.fieldPath))switch(Mn.op){case"==":case"in":Ut.set(zt.fieldPath.canonicalString(),Mn.value);break;case"not-in":case"!=":return Ut.set(zt.fieldPath.canonicalString(),Mn.value),Array.from(Ut.values())}return null}(_,p),O=function(ft,bt){const Ut=[];let zt=!0;for(const Mn of Vp(bt)){const Ls=0===Mn.kind?NH(ft,Mn.fieldPath,ft.startAt):FH(ft,Mn.fieldPath,ft.startAt);Ut.push(Ls.value),zt&&(zt=Ls.inclusive)}return new gh(Ut,zt)}(_,p),U=function(ft,bt){const Ut=[];let zt=!0;for(const Mn of Vp(bt)){const Ls=0===Mn.kind?FH(ft,Mn.fieldPath,ft.endAt):NH(ft,Mn.fieldPath,ft.endAt);Ut.push(Ls.value),zt&&(zt=Ls.inclusive)}return new gh(Ut,zt)}(_,p),W=this.nn(p,_,O),ie=this.nn(p,_,U),ze=this.sn(p,_,T),nt=this.rn(p.indexId,I,W,O.inclusive,ie,U.inclusive,ze);return fe.forEach(nt,ft=>i.J(ft,e.limit).next(bt=>{bt.forEach(Ut=>{const zt=ot.fromSegments(Ut.documentKey);c.has(zt)||(c=c.add(zt),d.push(zt))})}))}).next(()=>d)}return fe.resolve(null)})}tn(t){let e=this.Ze.get(t);return e||(e=[t],this.Ze.set(t,e),e)}rn(t,e,i,r,s,c,d){const p=(null!=e?e.length:1)*Math.max(i.length,s.length),_=p/(null!=e?e.length:1),w=[];for(let I=0;I<p;++I){const T=e?this.on(e[I/_]):yT,O=this.un(t,T,i[I%_],r),U=this.cn(t,T,s[I%_],c),W=d.map(ie=>this.un(t,T,ie,!0));w.push(...this.createRange(O,U,W))}return w}un(t,e,i,r){const s=new Qp(t,ot.empty(),e,i);return r?s:s.Ke()}cn(t,e,i,r){const s=new Qp(t,ot.empty(),e,i);return r?s.Ke():s}en(t,e){const i=new l7(e),r=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,r).next(s=>{let c=null;for(const d of s)i.We(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c})}getIndexType(t,e){let i=2;return fe.forEach(this.tn(e),r=>this.en(t,r).next(s=>{s?0!==i&&s.fields.length<function(c){let d=new hi(Ji.comparator),p=!1;for(const _ of c.filters){const w=_;w.field.isKeyField()||("array-contains"===w.op||"array-contains-any"===w.op?p=!0:d=d.add(w.field))}for(const _ of c.orderBy)_.field.isKeyField()||(d=d.add(_.field));return d.size+(p?1:0)}(r)&&(i=1):i=0})).next(()=>i)}an(t,e){const i=new uC;for(const r of Vp(t)){const s=e.data.field(r.fieldPath);if(null==s)return null;const c=i.qe(r.kind);Zp.Te.ce(s,c)}return i.$e()}on(t){const e=new uC;return Zp.Te.ce(t,e.qe(0)),e.$e()}hn(t,e){const i=new uC;return Zp.Te.ce($p(this.databaseId,e),i.qe(function(r){const s=Vp(r);return 0===s.length?0:s[s.length-1].kind}(t))),i.$e()}sn(t,e,i){if(null===i)return[];let r=[];r.push(new uC);let s=0;for(const c of Vp(t)){const d=i[s++];for(const p of r)if(this.ln(e,c.fieldPath)&&Yw(d))r=this.fn(r,c,d);else{const _=p.qe(c.kind);Zp.Te.ce(d,_)}}return this.dn(r)}nn(t,e,i){return this.sn(t,e,i.position)}dn(t){const e=[];for(let i=0;i<t.length;++i)e[i]=t[i].$e();return e}fn(t,e,i){const r=[...t],s=[];for(const c of i.arrayValue.values||[])for(const d of r){const p=new uC;p.seed(d.$e()),Zp.Te.ce(c,p.qe(e.kind)),s.push(p)}return s}ln(t,e){return!!t.filters.find(i=>i instanceof rs&&i.field.isEqual(e)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(t,e){const i=vT(t),r=hC(t);return(e?i.W("collectionGroupIndex",IDBKeyRange.bound(e,e)):i.W()).next(s=>{const c=[];return fe.forEach(s,d=>r.get([d.indexId,this.uid]).next(p=>{c.push(function(_,w){const I=w?new jw(w.sequenceNumber,new Po(Yp(w.readTime),new ot(Ql(w.documentKey)),w.largestBatchId)):jw.empty(),T=_.fields.map(([O,U])=>new nT(Ji.fromServerFormat(O),U));return new tT(_.indexId,_.collectionGroup,T,I)}(d,p))})).next(()=>c)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>0===e.length?null:(e.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==s?s:sn(i.collectionGroup,r.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,i){const r=vT(t),s=hC(t);return this._n(t).next(c=>r.W("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(d=>fe.forEach(d,p=>s.put(Pj(p.indexId,this.user,c,i)))))}updateIndexEntries(t,e){const i=new Map;return fe.forEach(e,(r,s)=>{const c=i.get(r.collectionGroup);return(c?fe.resolve(c):this.getFieldIndexes(t,r.collectionGroup)).next(d=>(i.set(r.collectionGroup,d),fe.forEach(d,p=>this.wn(t,r,p).next(_=>{const w=this.mn(s,p);return _.isEqual(w)?fe.resolve():this.gn(t,s,p,_,w)}))))})}yn(t,e,i,r){return dC(t).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.hn(i,e.key),documentKey:e.key.path.toArray()})}pn(t,e,i,r){return dC(t).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.hn(i,e.key),e.key.path.toArray()])}wn(t,e,i){const r=dC(t);let s=new hi(Xp);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.hn(i,e)])},(c,d)=>{s=s.add(new Qp(i.indexId,e,d.arrayValue,d.directionalValue))}).next(()=>s)}mn(t,e){let i=new hi(Xp);const r=this.an(e,t);if(null==r)return i;const s=TP(e);if(null!=s){const c=t.data.field(s.fieldPath);if(Yw(c))for(const d of c.arrayValue.values||[])i=i.add(new Qp(e.indexId,t.key,this.on(d),r))}else i=i.add(new Qp(e.indexId,t.key,yT,r));return i}gn(t,e,i,r,s){qe("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const c=[];return function(d,p,_,w,I){const T=d.getIterator(),O=p.getIterator();let U=G_(T),W=G_(O);for(;U||W;){let ie=!1,ze=!1;if(U&&W){const nt=_(U,W);nt<0?ze=!0:nt>0&&(ie=!0)}else null!=U?ze=!0:ie=!0;ie?(w(W),W=G_(O)):ze?(I(U),U=G_(T)):(U=G_(T),W=G_(O))}}(r,s,Xp,d=>{c.push(this.yn(t,e,i,d))},d=>{c.push(this.pn(t,e,i,d))}),fe.waitFor(c)}_n(t){let e=1;return hC(t).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),e=r.sequenceNumber+1}).next(()=>e)}createRange(t,e,i){i=i.sort((c,d)=>Xp(c,d)).filter((c,d,p)=>!d||0!==Xp(c,p[d-1]));const r=[];r.push(t);for(const c of i){const d=Xp(c,t),p=Xp(c,e);if(0===d)r[0]=t.Ke();else if(d>0&&p<0)r.push(c),r.push(c.Ke());else if(p>0)break}r.push(e);const s=[];for(let c=0;c<r.length;c+=2)s.push(IDBKeyRange.bound([r[c].indexId,this.uid,r[c].arrayValue,r[c].directionalValue,yT,[]],[r[c+1].indexId,this.uid,r[c+1].arrayValue,r[c+1].directionalValue,yT,[]]));return s}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(Uj)}getMinOffset(t,e){return fe.mapArray(this.tn(e),i=>this.en(t,i).next(r=>r||Et())).next(Uj)}}function Bj(n){return Hr(n,"collectionParents")}function dC(n){return Hr(n,"indexEntries")}function vT(n){return Hr(n,"indexConfiguration")}function hC(n){return Hr(n,"indexState")}function Uj(n){Wt(0!==n.length);let t=n[0].indexState.offset,e=t.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;MP(r,t)<0&&(t=r),e<r.largestBatchId&&(e=r.largestBatchId)}return new Po(t.readTime,t.documentKey,e)}const Hj={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class oo{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new oo(t,oo.DEFAULT_COLLECTION_PERCENTILE,oo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function jj(n,t,e){const i=n.store("mutations"),r=n.store("documentMutations"),s=[],c=IDBKeyRange.only(e.batchId);let d=0;const p=i.Z({range:c},(w,I,T)=>(d++,T.delete()));s.push(p.next(()=>{Wt(1===d)}));const _=[];for(const w of e.mutations){const I=Sj(t,w.key.path,e.batchId);s.push(r.delete(I)),_.push(w.key)}return fe.waitFor(s).next(()=>_)}function bT(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw Et();t=n.noDocument}return JSON.stringify(t).length}oo.DEFAULT_COLLECTION_PERCENTILE=10,oo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,oo.DEFAULT=new oo(41943040,oo.DEFAULT_COLLECTION_PERCENTILE,oo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),oo.DISABLED=new oo(-1,0,0);class wT{constructor(t,e,i,r){this.userId=t,this.It=e,this.indexManager=i,this.referenceDelegate=r,this.In={}}static oe(t,e,i,r){Wt(""!==t.uid);const s=t.isAuthenticated()?t.uid:"";return new wT(s,e,i,r)}checkEmpty(t){let e=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return vh(t).Z({index:"userMutationsIndex",range:i},(r,s,c)=>{e=!1,c.done()}).next(()=>e)}addMutationBatch(t,e,i,r){const s=ny(t),c=vh(t);return c.add({}).next(d=>{Wt("number"==typeof d);const p=new WP(d,e,i,r),_=function(T,O,U){const W=U.baseMutations.map(ze=>aC(T.re,ze)),ie=U.mutations.map(ze=>aC(T.re,ze));return{userId:O,batchId:U.batchId,localWriteTimeMs:U.localWriteTime.toMillis(),baseMutations:W,mutations:ie}}(this.It,this.userId,p),w=[];let I=new hi((T,O)=>sn(T.canonicalString(),O.canonicalString()));for(const T of r){const O=Sj(this.userId,T.key.path,d);I=I.add(T.key.path.popLast()),w.push(c.put(_)),w.push(s.put(O,BZ))}return I.forEach(T=>{w.push(this.indexManager.addToCollectionParentIndex(t,T))}),t.addOnCommittedListener(()=>{this.In[d]=p.keys()}),fe.waitFor(w).next(()=>p)})}lookupMutationBatch(t,e){return vh(t).get(e).next(i=>i?(Wt(i.userId===this.userId),Kp(this.It,i)):null)}Tn(t,e){return this.In[e]?fe.resolve(this.In[e]):this.lookupMutationBatch(t,e).next(i=>{if(i){const r=i.keys();return this.In[e]=r,r}return null})}getNextMutationBatchAfterBatchId(t,e){const i=e+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return vh(t).Z({index:"userMutationsIndex",range:r},(c,d,p)=>{d.userId===this.userId&&(Wt(d.batchId>=i),s=Kp(this.It,d)),p.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return vh(t).Z({index:"userMutationsIndex",range:e,reverse:!0},(r,s,c)=>{i=s.batchId,c.done()}).next(()=>i)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return vh(t).W("userMutationsIndex",e).next(i=>i.map(r=>Kp(this.It,r)))}getAllMutationBatchesAffectingDocumentKey(t,e){const i=mT(this.userId,e.path),r=IDBKeyRange.lowerBound(i),s=[];return ny(t).Z({range:r},(c,d,p)=>{const[_,w,I]=c,T=Ql(w);if(_===this.userId&&e.path.isEqual(T))return vh(t).get(I).next(O=>{if(!O)throw Et();Wt(O.userId===this.userId),s.push(Kp(this.It,O))});p.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new hi(sn);const r=[];return e.forEach(s=>{const c=mT(this.userId,s.path),d=IDBKeyRange.lowerBound(c),p=ny(t).Z({range:d},(_,w,I)=>{const[T,O,U]=_,W=Ql(O);T===this.userId&&s.path.isEqual(W)?i=i.add(U):I.done()});r.push(p)}),fe.waitFor(r).next(()=>this.En(t,i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1,s=mT(this.userId,i),c=IDBKeyRange.lowerBound(s);let d=new hi(sn);return ny(t).Z({range:c},(p,_,w)=>{const[I,T,O]=p,U=Ql(T);I===this.userId&&i.isPrefixOf(U)?U.length===r&&(d=d.add(O)):w.done()}).next(()=>this.En(t,d))}En(t,e){const i=[],r=[];return e.forEach(s=>{r.push(vh(t).get(s).next(c=>{if(null===c)throw Et();Wt(c.userId===this.userId),i.push(Kp(this.It,c))}))}),fe.waitFor(r).next(()=>i)}removeMutationBatch(t,e){return jj(t.ie,this.userId,e).next(i=>(t.addOnCommittedListener(()=>{this.An(e.batchId)}),fe.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(t,r))))}An(t){delete this.In[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return fe.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return ny(t).Z({range:i},(s,c,d)=>{if(s[0]===this.userId){const p=Ql(s[1]);r.push(p)}else d.done()}).next(()=>{Wt(0===r.length)})})}containsKey(t,e){return $j(t,this.userId,e)}Rn(t){return zj(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function $j(n,t,e){const i=mT(t,e.path),r=i[1],s=IDBKeyRange.lowerBound(i);let c=!1;return ny(n).Z({range:s,X:!0},(d,p,_)=>{const[w,I,T]=d;w===t&&I===r&&(c=!0),_.done()}).next(()=>c)}function vh(n){return Hr(n,"mutations")}function ny(n){return Hr(n,"documentMutations")}function zj(n){return Hr(n,"mutationQueues")}class Jp{constructor(t){this.bn=t}next(){return this.bn+=2,this.bn}static Pn(){return new Jp(0)}static vn(){return new Jp(-1)}}class d7{constructor(t,e){this.referenceDelegate=t,this.It=e}allocateTargetId(t){return this.Vn(t).next(e=>{const i=new Jp(e.highestTargetId);return e.highestTargetId=i.next(),this.Sn(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.Vn(t).next(e=>qt.fromTimestamp(new Bi(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.Vn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,i){return this.Vn(t).next(r=>(r.highestListenSequenceNumber=e,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),this.Sn(t,r)))}addTargetData(t,e){return this.Dn(t,e).next(()=>this.Vn(t).next(i=>(i.targetCount+=1,this.Cn(e,i),this.Sn(t,i))))}updateTargetData(t,e){return this.Dn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>iy(t).delete(e.targetId)).next(()=>this.Vn(t)).next(i=>(Wt(i.targetCount>0),i.targetCount-=1,this.Sn(t,i)))}removeTargets(t,e,i){let r=0;const s=[];return iy(t).Z((c,d)=>{const p=lC(d);p.sequenceNumber<=e&&null===i.get(p.targetId)&&(r++,s.push(this.removeTargetData(t,p)))}).next(()=>fe.waitFor(s)).next(()=>r)}forEachTarget(t,e){return iy(t).Z((i,r)=>{const s=lC(r);e(s)})}Vn(t){return Gj(t).get("targetGlobalKey").next(e=>(Wt(null!==e),e))}Sn(t,e){return Gj(t).put("targetGlobalKey",e)}Dn(t,e){return iy(t).put(Rj(this.It,e))}Cn(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.Vn(t).next(e=>e.targetCount)}getTargetData(t,e){const i=zp(e),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return iy(t).Z({range:r,index:"queryTargetsIndex"},(c,d,p)=>{const _=lC(d);Zw(e,_.target)&&(s=_,p.done())}).next(()=>s)}addMatchingKeys(t,e,i){const r=[],s=bh(t);return e.forEach(c=>{const d=Ps(c.path);r.push(s.put({targetId:i,path:d})),r.push(this.referenceDelegate.addReference(t,i,c))}),fe.waitFor(r)}removeMatchingKeys(t,e,i){const r=bh(t);return fe.forEach(e,s=>{const c=Ps(s.path);return fe.waitFor([r.delete([i,c]),this.referenceDelegate.removeReference(t,i,s)])})}removeMatchingKeysForTargetId(t,e){const i=bh(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(t,e){const i=IDBKeyRange.bound([e],[e+1],!1,!0),r=bh(t);let s=fn();return r.Z({range:i,X:!0},(c,d,p)=>{const _=Ql(c[1]),w=new ot(_);s=s.add(w)}).next(()=>s)}containsKey(t,e){const i=Ps(e.path),r=IDBKeyRange.bound([i],[gH(i)],!1,!0);let s=0;return bh(t).Z({index:"documentTargetsIndex",X:!0,range:r},([c,d],p,_)=>{0!==c&&(s++,_.done())}).next(()=>s>0)}se(t,e){return iy(t).get(e).next(i=>i?lC(i):null)}}function iy(n){return Hr(n,"targets")}function Gj(n){return Hr(n,"targetGlobal")}function bh(n){return Hr(n,"targetDocuments")}function Wj([n,t],[e,i]){const r=sn(n,e);return 0===r?sn(t,i):r}class h7{constructor(t){this.xn=t,this.buffer=new hi(Wj),this.Nn=0}kn(){return++this.Nn}On(t){const e=[t,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();Wj(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class f7{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(t){var e=this;qe("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(0,we.Z)(function*(){e.Mn=null;try{yield e.localStore.collectGarbage(e.garbageCollector)}catch(i){dh(i)?qe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield uh(i)}yield e.Fn(3e5)}))}}class p7{constructor(t,e){this.$n=t,this.params=e}calculateTargetCount(t,e){return this.$n.Bn(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(0===e)return fe.resolve(ro.at);const i=new h7(e);return this.$n.forEachTarget(t,r=>i.On(r.sequenceNumber)).next(()=>this.$n.Ln(t,r=>i.On(r))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.$n.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.$n.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(qe("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(Hj)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(qe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Hj):this.Un(t,e))}getCacheSize(t){return this.$n.getCacheSize(t)}Un(t,e){let i,r,s,c,d,p,_;const w=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(I=>(I>this.params.maximumSequenceNumbersToCollect?(qe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),r=this.params.maximumSequenceNumbersToCollect):r=I,c=Date.now(),this.nthSequenceNumber(t,r))).next(I=>(i=I,d=Date.now(),this.removeTargets(t,i,e))).next(I=>(s=I,p=Date.now(),this.removeOrphanedDocuments(t,i))).next(I=>(_=Date.now(),SP()<=Es.in.DEBUG&&qe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-w}ms\n\tDetermined least recently used ${r} in `+(d-c)+`ms\n\tRemoved ${s} targets in `+(p-d)+`ms\n\tRemoved ${I} documents in `+(_-p)+`ms\nTotal Duration: ${_-w}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:I})))}}class m7{constructor(t,e){this.db=t,this.garbageCollector=new p7(this,e)}Bn(t){const e=this.qn(t);return this.db.getTargetCache().getTargetCount(t).next(i=>e.next(r=>i+r))}qn(t){let e=0;return this.Ln(t,i=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}Ln(t,e){return this.Kn(t,(i,r)=>e(r))}addReference(t,e,i){return CT(t,i)}removeReference(t,e,i){return CT(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return CT(t,e)}Gn(t,e){return function(i,r){let s=!1;return zj(i).tt(c=>$j(i,c,r).next(d=>(d&&(s=!0),fe.resolve(!d)))).next(()=>s)}(t,e)}removeOrphanedDocuments(t,e){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Kn(t,(c,d)=>{if(d<=e){const p=this.Gn(t,c).next(_=>{if(!_)return s++,i.getEntry(t,c).next(()=>(i.removeEntry(c,qt.min()),bh(t).delete([0,Ps(c.path)])))});r.push(p)}}).next(()=>fe.waitFor(r)).next(()=>i.apply(t)).next(()=>s)}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return CT(t,e)}Kn(t,e){const i=bh(t);let r,s=ro.at;return i.Z({index:"documentTargetsIndex"},([c,d],{path:p,sequenceNumber:_})=>{0===c?(s!==ro.at&&e(new ot(Ql(r)),s),s=_,r=p):s=ro.at}).next(()=>{s!==ro.at&&e(new ot(Ql(r)),s)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function CT(n,t){return bh(n).put((i=n.currentSequenceNumber,{targetId:0,path:Ps(t.path),sequenceNumber:i}));var i}class qj{constructor(){this.changes=new _h(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Si.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return void 0!==i?fe.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class g7{constructor(t){this.It=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,i){return em(t).put(i)}removeEntry(t,e,i){return em(t).delete(function(r,s){const c=r.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],gT(s),c[c.length-1]]}(e,i))}updateMetadata(t,e){return this.getMetadata(t).next(i=>(i.byteSize+=e,this.Qn(t,i)))}getEntry(t,e){let i=Si.newInvalidDocument(e);return em(t).Z({index:"documentKeyIndex",range:IDBKeyRange.only(fC(e))},(r,s)=>{i=this.jn(e,s)}).next(()=>i)}Wn(t,e){let i={size:0,document:Si.newInvalidDocument(e)};return em(t).Z({index:"documentKeyIndex",range:IDBKeyRange.only(fC(e))},(r,s)=>{i={document:this.jn(e,s),size:bT(s)}}).next(()=>i)}getEntries(t,e){let i=so();return this.zn(t,e,(r,s)=>{const c=this.jn(r,s);i=i.insert(r,c)}).next(()=>i)}Hn(t,e){let i=so(),r=new er(ot.comparator);return this.zn(t,e,(s,c)=>{const d=this.jn(s,c);i=i.insert(s,d),r=r.insert(s,bT(c))}).next(()=>({documents:i,Jn:r}))}zn(t,e,i){if(e.isEmpty())return fe.resolve();let r=new hi(Qj);e.forEach(p=>r=r.add(p));const s=IDBKeyRange.bound(fC(r.first()),fC(r.last())),c=r.getIterator();let d=c.getNext();return em(t).Z({index:"documentKeyIndex",range:s},(p,_,w)=>{const I=ot.fromSegments([..._.prefixPath,_.collectionGroup,_.documentId]);for(;d&&Qj(d,I)<0;)i(d,null),d=c.getNext();d&&d.isEqual(I)&&(i(d,_),d=c.hasNext()?c.getNext():null),d?w.j(fC(d)):w.done()}).next(()=>{for(;d;)i(d,null),d=c.hasNext()?c.getNext():null})}getAllFromCollection(t,e,i){const r=[e.popLast().toArray(),e.lastSegment(),gT(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],s=[e.popLast().toArray(),e.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return em(t).W(IDBKeyRange.bound(r,s,!0)).next(c=>{let d=so();for(const p of c){const _=this.jn(ot.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);d=d.insert(_.key,_)}return d})}getAllFromCollectionGroup(t,e,i,r){let s=so();const c=Zj(e,i),d=Zj(e,Po.max());return em(t).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,d,!0)},(p,_,w)=>{const I=this.jn(ot.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);s=s.insert(I.key,I),s.size===r&&w.done()}).next(()=>s)}newChangeBuffer(t){return new _7(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return Kj(t).get("remoteDocumentGlobalKey").next(e=>(Wt(!!e),e))}Qn(t,e){return Kj(t).put("remoteDocumentGlobalKey",e)}jn(t,e){if(e){const i=function n7(n,t){let e;if(t.document)e=vj(n.re,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const i=ot.fromSegments(t.noDocument.path),r=Yp(t.noDocument.readTime);e=Si.newNoDocument(i,r),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return Et();{const i=ot.fromSegments(t.unknownDocument.path),r=Yp(t.unknownDocument.version);e=Si.newUnknownDocument(i,r)}}return t.readTime&&e.setReadTime(function(i){const r=new Bi(i[0],i[1]);return qt.fromTimestamp(r)}(t.readTime)),e}(this.It,e);if(!i.isNoDocument()||!i.version.isEqual(qt.min()))return i}return Si.newInvalidDocument(t)}}function Yj(n){return new g7(n)}class _7 extends qj{constructor(t,e){super(),this.Yn=t,this.trackRemovals=e,this.Xn=new _h(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(t){const e=[];let i=0,r=new hi((s,c)=>sn(s.canonicalString(),c.canonicalString()));return this.changes.forEach((s,c)=>{const d=this.Xn.get(s);if(e.push(this.Yn.removeEntry(t,s,d.readTime)),c.isValidDocument()){const p=kj(this.Yn.It,c);r=r.add(s.path.popLast()),i+=bT(p)-d.size,e.push(this.Yn.addEntry(t,s,p))}else if(i-=d.size,this.trackRemovals){const p=kj(this.Yn.It,c.convertToNoDocument(qt.min()));e.push(this.Yn.addEntry(t,s,p))}}),r.forEach(s=>{e.push(this.Yn.indexManager.addToCollectionParentIndex(t,s))}),e.push(this.Yn.updateMetadata(t,i)),fe.waitFor(e)}getFromCache(t,e){return this.Yn.Wn(t,e).next(i=>(this.Xn.set(e,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(t,e){return this.Yn.Hn(t,e).next(({documents:i,Jn:r})=>(r.forEach((s,c)=>{this.Xn.set(s,{size:c,readTime:i.get(s).readTime})}),i))}}function Kj(n){return Hr(n,"remoteDocumentGlobal")}function em(n){return Hr(n,"remoteDocumentsV14")}function fC(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Zj(n,t){const e=t.documentKey.path.toArray();return[n,gT(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function Qj(n,t){const e=n.path.toArray(),i=t.path.toArray();let r=0;for(let s=0;s<e.length-2&&s<i.length-2;++s)if(r=sn(e[s],i[s]),r)return r;return r=sn(e.length,i.length),r||(r=sn(e[e.length-2],i[i.length-2]),r||sn(e[e.length-1],i[i.length-1]))}class y7{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class Xj{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.getBaseDocument(t,e,i))).next(r=>(null!==i&&Jw(i.mutation,r,No.empty(),Bi.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,fn()).next(()=>i))}getLocalViewOfDocuments(t,e,i=fn()){const r=Kl();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(s=>{let c=eC();return s.forEach((d,p)=>{c=c.insert(d,p.overlayedDocument)}),c}))}getOverlayedDocuments(t,e){const i=Kl();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,fn()))}populateOverlays(t,e,i){const r=[];return i.forEach(s=>{e.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((c,d)=>{e.set(c,d)})})}computeViews(t,e,i,r){let s=so();const c=tC(),d=tC();return e.forEach((p,_)=>{const w=i.get(_.key);r.has(_.key)&&(void 0===w||w.mutation instanceof pu)?s=s.insert(_.key,_):void 0!==w&&(c.set(_.key,w.mutation.getFieldMask()),Jw(w.mutation,_,w.mutation.getFieldMask(),Bi.now()))}),this.recalculateAndSaveOverlays(t,s).next(p=>(p.forEach((_,w)=>c.set(_,w)),e.forEach((_,w)=>{var I;return d.set(_,new y7(w,null!==(I=c.get(_))&&void 0!==I?I:null))}),d))}recalculateAndSaveOverlays(t,e){const i=tC();let r=new er((c,d)=>c-d),s=fn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(c=>{for(const d of c)d.keys().forEach(p=>{const _=e.get(p);if(null===_)return;let w=i.get(p)||No.empty();w=d.applyToLocalView(_,w),i.set(p,w);const I=(r.get(d.batchId)||fn()).add(p);r=r.insert(d.batchId,I)})}).next(()=>{const c=[],d=r.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),_=p.key,w=p.value,I=lj();w.forEach(T=>{if(!s.has(T)){const O=JH(e.get(T),i.get(T));null!==O&&I.set(T,O),s=s.add(T)}}),c.push(this.documentOverlayCache.saveOverlays(t,_,I))}return fe.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i){return ot.isDocumentKey((r=e).path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(t,e.path):LP(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i):this.getDocumentsMatchingCollectionQuery(t,e,i);var r}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(s=>{const c=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-s.size):fe.resolve(Kl());let d=-1,p=s;return c.next(_=>fe.forEach(_,(w,I)=>(d<I.largestBatchId&&(d=I.largestBatchId),s.get(w)?fe.resolve():this.getBaseDocument(t,w,I).next(T=>{p=p.insert(w,T)}))).next(()=>this.populateOverlays(t,_,s)).next(()=>this.computeViews(t,p,_,fn())).next(w=>({batchId:d,changes:aj(w)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new ot(e)).next(i=>{let r=eC();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i){const r=e.collectionGroup;let s=eC();return this.indexManager.getCollectionParents(t,r).next(c=>fe.forEach(c,d=>{const p=(_=e,w=d.child(r),new fu(w,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt));var _,w;return this.getDocumentsMatchingCollectionQuery(t,p,i).next(_=>{_.forEach((w,I)=>{s=s.insert(w,I)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(t,e,i){let r;return this.remoteDocumentCache.getAllFromCollection(t,e.path,i).next(s=>(r=s,this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId))).next(s=>{s.forEach((d,p)=>{const _=p.getKey();null===r.get(_)&&(r=r.insert(_,Si.newInvalidDocument(_)))});let c=eC();return r.forEach((d,p)=>{const _=s.get(d);void 0!==_&&Jw(_.mutation,p,No.empty(),Bi.now()),BP(e,p)&&(c=c.insert(d,p))}),c})}getBaseDocument(t,e,i){return null===i||1===i.mutation.type?this.remoteDocumentCache.getEntry(t,e):fe.resolve(Si.newInvalidDocument(e))}}class v7{constructor(t){this.It=t,this.Zn=new Map,this.ts=new Map}getBundleMetadata(t,e){return fe.resolve(this.Zn.get(e))}saveBundleMetadata(t,e){var i;return this.Zn.set(e.id,{id:(i=e).id,version:i.version,createTime:Ur(i.createTime)}),fe.resolve()}getNamedQuery(t,e){return fe.resolve(this.ts.get(e))}saveNamedQuery(t,e){return this.ts.set(e.name,{name:(i=e).name,query:KP(i.bundledQuery),readTime:Ur(i.readTime)}),fe.resolve();var i}}class b7{constructor(){this.overlays=new er(ot.comparator),this.es=new Map}getOverlay(t,e){return fe.resolve(this.overlays.get(e))}getOverlays(t,e){const i=Kl();return fe.forEach(e,r=>this.getOverlay(t,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,s)=>{this.ue(t,e,s)}),fe.resolve()}removeOverlaysForBatchId(t,e,i){const r=this.es.get(i);return void 0!==r&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.es.delete(i)),fe.resolve()}getOverlaysForCollection(t,e,i){const r=Kl(),s=e.length+1,c=new ot(e.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,_=p.getKey();if(!e.isPrefixOf(_.path))break;_.path.length===s&&p.largestBatchId>i&&r.set(p.getKey(),p)}return fe.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let s=new er((_,w)=>_-w);const c=this.overlays.getIterator();for(;c.hasNext();){const _=c.getNext().value;if(_.getKey().getCollectionGroup()===e&&_.largestBatchId>i){let w=s.get(_.largestBatchId);null===w&&(w=Kl(),s=s.insert(_.largestBatchId,w)),w.set(_.getKey(),_)}}const d=Kl(),p=s.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((_,w)=>d.set(_,w)),!(d.size()>=r)););return fe.resolve(d)}ue(t,e,i){const r=this.overlays.get(i.key);if(null!==r){const c=this.es.get(r.largestBatchId).delete(i.key);this.es.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new YP(e,i));let s=this.es.get(e);void 0===s&&(s=fn(),this.es.set(e,s)),this.es.set(e,s.add(i.key))}}class XP{constructor(){this.ns=new hi(jr.ss),this.rs=new hi(jr.os)}isEmpty(){return this.ns.isEmpty()}addReference(t,e){const i=new jr(t,e);this.ns=this.ns.add(i),this.rs=this.rs.add(i)}us(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.cs(new jr(t,e))}hs(t,e){t.forEach(i=>this.removeReference(i,e))}ls(t){const e=new ot(new Nn([])),i=new jr(e,t),r=new jr(e,t+1),s=[];return this.rs.forEachInRange([i,r],c=>{this.cs(c),s.push(c.key)}),s}fs(){this.ns.forEach(t=>this.cs(t))}cs(t){this.ns=this.ns.delete(t),this.rs=this.rs.delete(t)}ds(t){const e=new ot(new Nn([])),i=new jr(e,t),r=new jr(e,t+1);let s=fn();return this.rs.forEachInRange([i,r],c=>{s=s.add(c.key)}),s}containsKey(t){const e=new jr(t,0),i=this.ns.firstAfterOrEqual(e);return null!==i&&t.isEqual(i.key)}}class jr{constructor(t,e){this.key=t,this._s=e}static ss(t,e){return ot.comparator(t.key,e.key)||sn(t._s,e._s)}static os(t,e){return sn(t._s,e._s)||ot.comparator(t.key,e.key)}}class w7{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.ws=1,this.gs=new hi(jr.ss)}checkEmpty(t){return fe.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,i,r){const s=this.ws;this.ws++;const c=new WP(s,e,i,r);this.mutationQueue.push(c);for(const d of r)this.gs=this.gs.add(new jr(d.key,s)),this.indexManager.addToCollectionParentIndex(t,d.key.path.popLast());return fe.resolve(c)}lookupMutationBatch(t,e){return fe.resolve(this.ys(e))}getNextMutationBatchAfterBatchId(t,e){const r=this.ps(e+1),s=r<0?0:r;return fe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(t){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new jr(e,0),r=new jr(e,Number.POSITIVE_INFINITY),s=[];return this.gs.forEachInRange([i,r],c=>{const d=this.ys(c._s);s.push(d)}),fe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new hi(sn);return e.forEach(r=>{const s=new jr(r,0),c=new jr(r,Number.POSITIVE_INFINITY);this.gs.forEachInRange([s,c],d=>{i=i.add(d._s)})}),fe.resolve(this.Is(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1;let s=i;ot.isDocumentKey(s)||(s=s.child(""));const c=new jr(new ot(s),0);let d=new hi(sn);return this.gs.forEachWhile(p=>{const _=p.key.path;return!!i.isPrefixOf(_)&&(_.length===r&&(d=d.add(p._s)),!0)},c),fe.resolve(this.Is(d))}Is(t){const e=[];return t.forEach(i=>{const r=this.ys(i);null!==r&&e.push(r)}),e}removeMutationBatch(t,e){Wt(0===this.Ts(e.batchId,"removed")),this.mutationQueue.shift();let i=this.gs;return fe.forEach(e.mutations,r=>{const s=new jr(r.key,e.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.gs=i})}An(t){}containsKey(t,e){const i=new jr(e,0),r=this.gs.firstAfterOrEqual(i);return fe.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return fe.resolve()}Ts(t,e){return this.ps(t)}ps(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}ys(t){const e=this.ps(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class C7{constructor(t){this.Es=t,this.docs=new er(ot.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,r=this.docs.get(i),s=r?r.size:0,c=this.Es(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:c}),this.size+=c-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return fe.resolve(i?i.document.mutableCopy():Si.newInvalidDocument(e))}getEntries(t,e){let i=so();return e.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Si.newInvalidDocument(r))}),fe.resolve(i)}getAllFromCollection(t,e,i){let r=so();const s=new ot(e.child("")),c=this.docs.getIteratorFrom(s);for(;c.hasNext();){const{key:d,value:{document:p}}=c.getNext();if(!e.isPrefixOf(d.path))break;d.path.length>e.length+1||MP(yH(p),i)<=0||(r=r.insert(p.key,p.mutableCopy()))}return fe.resolve(r)}getAllFromCollectionGroup(t,e,i,r){Et()}As(t,e){return fe.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new E7(this)}getSize(t){return fe.resolve(this.size)}}class E7 extends qj{constructor(t){super(),this.Yn=t}applyChanges(t){const e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.Yn.addEntry(t,r)):this.Yn.removeEntry(i)}),fe.waitFor(e)}getFromCache(t,e){return this.Yn.getEntry(t,e)}getAllFromCache(t,e){return this.Yn.getEntries(t,e)}}class D7{constructor(t){this.persistence=t,this.Rs=new _h(e=>zp(e),Zw),this.lastRemoteSnapshotVersion=qt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new XP,this.targetCount=0,this.vs=Jp.Pn()}forEachTarget(t,e){return this.Rs.forEach((i,r)=>e(r)),fe.resolve()}getLastRemoteSnapshotVersion(t){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return fe.resolve(this.bs)}allocateTargetId(t){return this.highestTargetId=this.vs.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.bs&&(this.bs=e),fe.resolve()}Dn(t){this.Rs.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.vs=new Jp(e),this.highestTargetId=e),t.sequenceNumber>this.bs&&(this.bs=t.sequenceNumber)}addTargetData(t,e){return this.Dn(e),this.targetCount+=1,fe.resolve()}updateTargetData(t,e){return this.Dn(e),fe.resolve()}removeTargetData(t,e){return this.Rs.delete(e.target),this.Ps.ls(e.targetId),this.targetCount-=1,fe.resolve()}removeTargets(t,e,i){let r=0;const s=[];return this.Rs.forEach((c,d)=>{d.sequenceNumber<=e&&null===i.get(d.targetId)&&(this.Rs.delete(c),s.push(this.removeMatchingKeysForTargetId(t,d.targetId)),r++)}),fe.waitFor(s).next(()=>r)}getTargetCount(t){return fe.resolve(this.targetCount)}getTargetData(t,e){const i=this.Rs.get(e)||null;return fe.resolve(i)}addMatchingKeys(t,e,i){return this.Ps.us(e,i),fe.resolve()}removeMatchingKeys(t,e,i){this.Ps.hs(e,i);const r=this.persistence.referenceDelegate,s=[];return r&&e.forEach(c=>{s.push(r.markPotentiallyOrphaned(t,c))}),fe.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.Ps.ls(e),fe.resolve()}getMatchingKeysForTargetId(t,e){const i=this.Ps.ds(e);return fe.resolve(i)}containsKey(t,e){return fe.resolve(this.Ps.containsKey(e))}}class Jj{constructor(t,e){this.Vs={},this.overlays={},this.Ss=new ro(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=t(this),this.Cs=new D7(this),this.indexManager=new c7,this.remoteDocumentCache=new C7(i=>this.referenceDelegate.xs(i)),this.It=new xj(e),this.Ns=new v7(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new b7,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.Vs[t.toKey()];return i||(i=new w7(e,this.referenceDelegate),this.Vs[t.toKey()]=i),i}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(t,e,i){qe("MemoryPersistence","Starting transaction:",t);const r=new I7(this.Ss.next());return this.referenceDelegate.ks(),i(r).next(s=>this.referenceDelegate.Os(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ms(t,e){return fe.or(Object.values(this.Vs).map(i=>()=>i.containsKey(t,e)))}}class I7 extends bH{constructor(t){super(),this.currentSequenceNumber=t}}class ET{constructor(t){this.persistence=t,this.Fs=new XP,this.$s=null}static Bs(t){return new ET(t)}get Ls(){if(this.$s)return this.$s;throw Et()}addReference(t,e,i){return this.Fs.addReference(i,e),this.Ls.delete(i.toString()),fe.resolve()}removeReference(t,e,i){return this.Fs.removeReference(i,e),this.Ls.add(i.toString()),fe.resolve()}markPotentiallyOrphaned(t,e){return this.Ls.add(e.toString()),fe.resolve()}removeTarget(t,e){this.Fs.ls(e.targetId).forEach(r=>this.Ls.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(s=>this.Ls.add(s.toString()))}).next(()=>i.removeTargetData(t,e))}ks(){this.$s=new Set}Os(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.Ls,i=>{const r=ot.fromPath(i);return this.Us(t,r).next(s=>{s||e.removeEntry(r,qt.min())})}).next(()=>(this.$s=null,e.apply(t)))}updateLimboDocument(t,e){return this.Us(t,e).next(i=>{i?this.Ls.delete(e.toString()):this.Ls.add(e.toString())})}xs(t){return 0}Us(t,e){return fe.or([()=>fe.resolve(this.Fs.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ms(t,e)])}}class S7{constructor(t){this.It=t}$(t,e,i,r){const s=new iT("createOrUpgrade",e);var d;i<1&&r>=1&&(t.createObjectStore("owner"),(d=t).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ij,{unique:!0}),d.createObjectStore("documentMutations"),e$(t),function(d){d.createObjectStore("remoteDocuments")}(t));let c=fe.resolve();return i<3&&r>=3&&(0!==i&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(t),e$(t)),c=c.next(()=>function(d){const p=d.store("targetGlobal"),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:qt.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",_)}(s))),i<4&&r>=4&&(0!==i&&(c=c.next(()=>function(d,p){return p.store("mutations").W().next(_=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ij,{unique:!0});const w=p.store("mutations"),I=_.map(T=>w.put(T));return fe.waitFor(I)})}(t,s))),c=c.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),i<5&&r>=5&&(c=c.next(()=>this.qs(s))),i<6&&r>=6&&(c=c.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(t),this.Ks(s)))),i<7&&r>=7&&(c=c.next(()=>this.Gs(s))),i<8&&r>=8&&(c=c.next(()=>this.Qs(t,s))),i<9&&r>=9&&(c=c.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(t)})),i<10&&r>=10&&(c=c.next(()=>this.js(s))),i<11&&r>=11&&(c=c.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),i<12&&r>=12&&(c=c.next(()=>{!function(d){const p=d.createObjectStore("documentOverlays",{keyPath:QZ});p.createIndex("collectionPathOverlayIndex",XZ,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",JZ,{unique:!1})}(t)})),i<13&&r>=13&&(c=c.next(()=>function(d){const p=d.createObjectStore("remoteDocumentsV14",{keyPath:UZ});p.createIndex("documentKeyIndex",HZ),p.createIndex("collectionGroupIndex",jZ)}(t)).next(()=>this.Ws(t,s)).next(()=>t.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(c=c.next(()=>this.zs(t,s))),i<15&&r>=15&&(c=c.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:qZ}).createIndex("sequenceNumberIndex",YZ,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:KZ}).createIndex("documentKeyIndex",ZZ,{unique:!1})}(t))),c}Ks(t){let e=0;return t.store("remoteDocuments").Z((i,r)=>{e+=bT(r)}).next(()=>{const i={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}qs(t){const e=t.store("mutationQueues"),i=t.store("mutations");return e.W().next(r=>fe.forEach(r,s=>{const c=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.W("userMutationsIndex",c).next(d=>fe.forEach(d,p=>{Wt(p.userId===s.userId);const _=Kp(this.It,p);return jj(t,s.userId,_).next(()=>{})}))}))}Gs(t){const e=t.store("targetDocuments"),i=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.Z((c,d)=>{const p=new Nn(c),_=[0,Ps(p)];s.push(e.get(_).next(w=>w?fe.resolve():e.put({targetId:0,path:Ps(p),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>fe.waitFor(s))})}Qs(t,e){t.createObjectStore("collectionParents",{keyPath:WZ});const i=e.store("collectionParents"),r=new QP,s=c=>{if(r.add(c)){const d=c.lastSegment(),p=c.popLast();return i.put({collectionId:d,parent:Ps(p)})}};return e.store("remoteDocuments").Z({X:!0},(c,d)=>{const p=new Nn(c);return s(p.popLast())}).next(()=>e.store("documentMutations").Z({X:!0},([c,d,p],_)=>{const w=Ql(d);return s(w.popLast())}))}js(t){const e=t.store("targets");return e.Z((i,r)=>{const s=lC(r),c=Rj(this.It,s);return e.put(c)})}Ws(t,e){const i=e.store("remoteDocuments"),r=[];return i.Z((s,c)=>{const d=e.store("remoteDocumentsV14"),p=(_=c,_.document?new ot(Nn.fromString(_.document.name).popFirst(5)):_.noDocument?ot.fromSegments(_.noDocument.path):_.unknownDocument?ot.fromSegments(_.unknownDocument.path):Et()).path.toArray();var _;const w={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};r.push(d.put(w))}).next(()=>fe.waitFor(r))}zs(t,e){const i=e.store("mutations"),r=Yj(this.It),s=new Jj(ET.Bs,this.It.re);return i.W().next(c=>{const d=new Map;return c.forEach(p=>{var _;let w=null!==(_=d.get(p.userId))&&void 0!==_?_:fn();Kp(this.It,p).keys().forEach(I=>w=w.add(I)),d.set(p.userId,w)}),fe.forEach(d,(p,_)=>{const w=new Br(_),I=_T.oe(this.It,w),T=s.getIndexManager(w),O=wT.oe(w,this.It,T,s.referenceDelegate);return new Xj(r,O,I,T).recalculateAndSaveOverlaysForDocumentKeys(new GP(e,ro.at),p).next()})})}}function e$(n){n.createObjectStore("targetDocuments",{keyPath:zZ}).createIndex("documentTargetsIndex",GZ,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",$Z,{unique:!0}),n.createObjectStore("targetGlobal")}const JP="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class eN{constructor(t,e,i,r,s,c,d,p,_,w,I=15){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.Hs=s,this.window=c,this.document=d,this.Js=_,this.Ys=w,this.Xs=I,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=T=>Promise.resolve(),!eN.C())throw new He(be.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new m7(this,r),this.ii=e+"main",this.It=new xj(p),this.ri=new nl(this.ii,this.Xs,new S7(this.It)),this.Cs=new d7(this.referenceDelegate,this.It),this.remoteDocumentCache=Yj(this.It),this.Ns=new i7,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===w&&hr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new He(be.FAILED_PRECONDITION,JP);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Cs.getHighestSequenceNumber(t))}).then(t=>{this.Ss=new ro(t,this.Js)}).then(()=>{this.Ds=!0}).catch(t=>(this.ri&&this.ri.close(),Promise.reject(t)))}li(t){var e=this;return this.si=function(){var i=(0,we.Z)(function*(r){if(e.started)return t(r)});return function(r){return i.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.ri.L(function(){var e=(0,we.Z)(function*(i){null===i.newVersion&&(yield t())});return function(i){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Hs.enqueueAndForget((0,we.Z)(function*(){e.started&&(yield e.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>DT(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(t).next(e=>{e||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(t)).next(e=>this.isPrimary&&!e?this._i(t).next(()=>!1):!!e&&this.wi(t).next(()=>!0))).catch(t=>{if(dh(t))return qe("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return qe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Hs.enqueueRetryable(()=>this.si(t)),this.isPrimary=t})}fi(t){return pC(t).get("owner").next(e=>fe.resolve(this.mi(e)))}gi(t){return DT(t).delete(this.clientId)}yi(){var t=this;return(0,we.Z)(function*(){if(t.isPrimary&&!t.pi(t.ni,18e5)){t.ni=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=Hr(i,"clientMetadata");return r.W().next(s=>{const c=t.Ii(s,18e5),d=s.filter(p=>-1===c.indexOf(p));return fe.forEach(d,p=>r.delete(p.clientId)).next(()=>d)})}).catch(()=>[]);if(t.oi)for(const i of e)t.oi.removeItem(t.Ti(i.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(t){return!!t&&t.ownerId===this.clientId}di(t){return this.Ys?fe.resolve(!0):pC(t).get("owner").next(e=>{if(null!==e&&this.pi(e.leaseTimestampMs,5e3)&&!this.Ei(e.ownerId)){if(this.mi(e)&&this.networkEnabled)return!0;if(!this.mi(e)){if(!e.allowTabSynchronization)throw new He(be.FAILED_PRECONDITION,JP);return!1}}return!(!this.networkEnabled||!this.inForeground)||DT(t).W().next(i=>void 0===this.Ii(i,5e3).find(r=>{if(this.clientId!==r.clientId){const c=!this.inForeground&&r.inForeground,d=this.networkEnabled===r.networkEnabled;if(!this.networkEnabled&&r.networkEnabled||c&&d)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&qe("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var t=this;return(0,we.Z)(function*(){t.Ds=!1,t.Ai(),t.ei&&(t.ei.cancel(),t.ei=null),t.Ri(),t.bi(),yield t.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const i=new GP(e,ro.at);return t._i(i).next(()=>t.gi(i))}),t.ri.close(),t.Pi()})()}Ii(t,e){return t.filter(i=>this.pi(i.updateTimeMs,e)&&!this.Ei(i.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",t=>DT(t).W().next(e=>this.Ii(e,18e5).map(i=>i.clientId)))}get started(){return this.Ds}getMutationQueue(t,e){return wT.oe(t,this.It,e,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new u7(t,this.It.re.databaseId)}getDocumentOverlayCache(t){return _T.oe(this.It,t)}getBundleCache(){return this.Ns}runTransaction(t,e,i){qe("IndexedDbPersistence","Starting transaction:",t);const r="readonly"===e?"readonly":"readwrite",s=15===(c=this.Xs)?t7:14===c?Mj:13===c?Tj:12===c?e7:11===c?Aj:void Et();var c;let d;return this.ri.runTransaction(t,r,s,p=>(d=new GP(p,this.Ss?this.Ss.next():ro.at),"readwrite-primary"===e?this.fi(d).next(_=>!!_||this.di(d)).next(_=>{if(!_)throw hr(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new He(be.FAILED_PRECONDITION,vH);return i(d)}).next(_=>this.wi(d).next(()=>_)):this.Vi(d).next(()=>i(d)))).then(p=>(d.raiseOnCommittedEvent(),p))}Vi(t){return pC(t).get("owner").next(e=>{if(null!==e&&this.pi(e.leaseTimestampMs,5e3)&&!this.Ei(e.ownerId)&&!this.mi(e)&&!(this.Ys||this.allowTabSynchronization&&e.allowTabSynchronization))throw new He(be.FAILED_PRECONDITION,JP)})}wi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return pC(t).put("owner",e)}static C(){return nl.C()}_i(t){const e=pC(t);return e.get("owner").next(i=>this.mi(i)?(qe("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):fe.resolve())}pi(t,e){const i=Date.now();return!(t<i-e||t>i&&(hr(`Detected an update time that is in the future: ${t} > ${i}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,V.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(t){var e;try{const i=null!==(null===(e=this.oi)||void 0===e?void 0:e.getItem(this.Ti(t)));return qe("IndexedDbPersistence",`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return hr("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(t){hr("Failed to set zombie client id.",t)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function pC(n){return Hr(n,"owner")}function DT(n){return Hr(n,"clientMetadata")}function tN(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}class nN{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.Si=i,this.Di=r}static Ci(t,e){let i=fn(),r=fn();for(const s of e.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new nN(t,e.fromCache,i,r)}}class t${constructor(){this.xi=!1}initialize(t,e){this.Ni=t,this.indexManager=e,this.xi=!0}getDocumentsMatchingQuery(t,e,i,r){return this.ki(t,e).next(s=>s||this.Oi(t,e,r,i)).next(s=>s||this.Mi(t,e))}ki(t,e){if(HH(e))return fe.resolve(null);let i=Os(e);return this.indexManager.getIndexType(t,i).next(r=>0===r?null:(null!==e.limit&&1===r&&(e=cT(e,null,"F"),i=Os(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const c=fn(...s);return this.Ni.getDocuments(t,c).next(d=>this.indexManager.getMinOffset(t,i).next(p=>{const _=this.Fi(e,d);return this.$i(e,_,c,p.readTime)?this.ki(t,cT(e,null,"F")):this.Bi(t,_,e,p)}))})))}Oi(t,e,i,r){return HH(e)||r.isEqual(qt.min())?this.Mi(t,e):this.Ni.getDocuments(t,i).next(s=>{const c=this.Fi(e,s);return this.$i(e,c,i,r)?this.Mi(t,e):(SP()<=Es.in.DEBUG&&qe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),VP(e)),this.Bi(t,c,e,_H(r,-1)))})}Fi(t,e){let i=new hi(zH(t));return e.forEach((r,s)=>{BP(t,s)&&(i=i.add(s))}),i}$i(t,e,i,r){if(null===t.limit)return!1;if(i.size!==e.size)return!0;const s="F"===t.limitType?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Mi(t,e){return SP()<=Es.in.DEBUG&&qe("QueryEngine","Using full collection scan to execute query:",VP(e)),this.Ni.getDocumentsMatchingQuery(t,e,Po.min())}Bi(t,e,i,r){return this.Ni.getDocumentsMatchingQuery(t,i,r).next(s=>(e.forEach(c=>{s=s.insert(c.key,c)}),s))}}class A7{constructor(t,e,i,r){this.persistence=t,this.Li=e,this.It=r,this.Ui=new er(sn),this.qi=new _h(s=>zp(s),Zw),this.Ki=new Map,this.Gi=t.getRemoteDocumentCache(),this.Cs=t.getTargetCache(),this.Ns=t.getBundleCache(),this.Qi(i)}Qi(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Xj(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Ui))}}function n$(n,t,e,i){return new A7(n,t,e,i)}function i$(n,t){return iN.apply(this,arguments)}function iN(){return iN=(0,we.Z)(function*(n,t){const e=at(n);return yield e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,e.Qi(t),e.mutationQueue.getAllMutationBatches(i))).next(s=>{const c=[],d=[];let p=fn();for(const _ of r){c.push(_.batchId);for(const w of _.mutations)p=p.add(w.key)}for(const _ of s){d.push(_.batchId);for(const w of _.mutations)p=p.add(w.key)}return e.localDocuments.getDocuments(i,p).next(_=>({ji:_,removedBatchIds:c,addedBatchIds:d}))})})}),iN.apply(this,arguments)}function T7(n,t){const e=at(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),s=e.Gi.newChangeBuffer({trackRemovals:!0});return function(c,d,p,_){const w=p.batch,I=w.keys();let T=fe.resolve();return I.forEach(O=>{T=T.next(()=>_.getEntry(d,O)).next(U=>{const W=p.docVersions.get(O);Wt(null!==W),U.version.compareTo(W)<0&&(w.applyToRemoteDocument(U,p),U.isValidDocument()&&(U.setReadTime(p.commitVersion),_.addEntry(U)))})}),T.next(()=>c.mutationQueue.removeMutationBatch(d,w))}(e,i,t,s).next(()=>s.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(c){let d=fn();for(let p=0;p<c.mutationResults.length;++p)c.mutationResults[p].transformResults.length>0&&(d=d.add(c.batch.mutations[p].key));return d}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}function r$(n){const t=at(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Cs.getLastRemoteSnapshotVersion(e))}function M7(n,t){const e=at(n),i=t.snapshotVersion;let r=e.Ui;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const c=e.Gi.newChangeBuffer({trackRemovals:!0});r=e.Ui;const d=[];t.targetChanges.forEach((w,I)=>{const T=r.get(I);if(!T)return;d.push(e.Cs.removeMatchingKeys(s,w.removedDocuments,I).next(()=>e.Cs.addMatchingKeys(s,w.addedDocuments,I)));let O=T.withSequenceNumber(s.currentSequenceNumber);var U,W,ie;t.targetMismatches.has(I)?O=O.withResumeToken(kr.EMPTY_BYTE_STRING,qt.min()).withLastLimboFreeSnapshotVersion(qt.min()):w.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(w.resumeToken,i)),r=r.insert(I,O),W=O,ie=w,(0===(U=T).resumeToken.approximateByteSize()||W.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=3e8||ie.addedDocuments.size+ie.modifiedDocuments.size+ie.removedDocuments.size>0)&&d.push(e.Cs.updateTargetData(s,O))});let p=so(),_=fn();if(t.documentUpdates.forEach(w=>{t.resolvedLimboDocuments.has(w)&&d.push(e.persistence.referenceDelegate.updateLimboDocument(s,w))}),d.push(s$(s,c,t.documentUpdates).next(w=>{p=w.Wi,_=w.zi})),!i.isEqual(qt.min())){const w=e.Cs.getLastRemoteSnapshotVersion(s).next(I=>e.Cs.setTargetsMetadata(s,s.currentSequenceNumber,i));d.push(w)}return fe.waitFor(d).next(()=>c.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,p,_)).next(()=>p)}).then(s=>(e.Ui=r,s))}function s$(n,t,e){let i=fn(),r=fn();return e.forEach(s=>i=i.add(s)),t.getEntries(n,i).next(s=>{let c=so();return e.forEach((d,p)=>{const _=s.get(d);p.isFoundDocument()!==_.isFoundDocument()&&(r=r.add(d)),p.isNoDocument()&&p.version.isEqual(qt.min())?(t.removeEntry(d,p.readTime),c=c.insert(d,p)):!_.isValidDocument()||p.version.compareTo(_.version)>0||0===p.version.compareTo(_.version)&&_.hasPendingWrites?(t.addEntry(p),c=c.insert(d,p)):qe("LocalStore","Ignoring outdated watch update for ",d,". Current version:",_.version," Watch version:",p.version)}),{Wi:c,zi:r}})}function x7(n,t){const e=at(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function ry(n,t){const e=at(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.Cs.getTargetData(i,t).next(s=>s?(r=s,fe.resolve(r)):e.Cs.allocateTargetId(i).next(c=>(r=new yh(t,c,0,i.currentSequenceNumber),e.Cs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=e.Ui.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.Ui=e.Ui.insert(i.targetId,i),e.qi.set(t,i.targetId)),i})}function sy(n,t,e){return rN.apply(this,arguments)}function rN(){return rN=(0,we.Z)(function*(n,t,e){const i=at(n),r=i.Ui.get(t),s=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",s,c=>i.persistence.referenceDelegate.removeTarget(c,r)))}catch(c){if(!dh(c))throw c;qe("LocalStore",`Failed to update sequence numbers for target ${t}: ${c}`)}i.Ui=i.Ui.remove(t),i.qi.delete(r.target)}),rN.apply(this,arguments)}function IT(n,t,e){const i=at(n);let r=qt.min(),s=fn();return i.persistence.runTransaction("Execute query","readonly",c=>function(d,p,_){const w=at(d),I=w.qi.get(_);return void 0!==I?fe.resolve(w.Ui.get(I)):w.Cs.getTargetData(p,_)}(i,c,Os(t)).next(d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,i.Cs.getMatchingKeysForTargetId(c,d.targetId).next(p=>{s=p})}).next(()=>i.Li.getDocumentsMatchingQuery(c,t,e?r:qt.min(),e?s:fn())).next(d=>(l$(i,$H(t),d),{documents:d,Hi:s})))}function o$(n,t){const e=at(n),i=at(e.Cs),r=e.Ui.get(t);return r?Promise.resolve(r.target):e.persistence.runTransaction("Get target data","readonly",s=>i.se(s,t).next(c=>c?c.target:null))}function a$(n,t){const e=at(n),i=e.Ki.get(t)||qt.min();return e.persistence.runTransaction("Get new document changes","readonly",r=>e.Gi.getAllFromCollectionGroup(r,t,_H(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(l$(e,t,r),r))}function l$(n,t,e){let i=n.Ki.get(t)||qt.min();e.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.Ki.set(t,i)}function sN(){return sN=(0,we.Z)(function*(n,t,e,i){const r=at(n);let s=fn(),c=so();for(const _ of e){const w=t.Ji(_.metadata.name);_.document&&(s=s.add(w));const I=t.Yi(_);I.setReadTime(t.Xi(_.metadata.readTime)),c=c.insert(w,I)}const d=r.Gi.newChangeBuffer({trackRemovals:!0}),p=yield ry(r,(_=i,Os(Y_(Nn.fromString(`__bundle__/docs/${_}`)))));var _;return r.persistence.runTransaction("Apply bundle documents","readwrite",_=>s$(_,d,c).next(w=>(d.apply(_),w)).next(w=>r.Cs.removeMatchingKeysForTargetId(_,p.targetId).next(()=>r.Cs.addMatchingKeys(_,s,p.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(_,w.Wi,w.zi)).next(()=>w.Wi)))}),sN.apply(this,arguments)}function R7(n,t){return oN.apply(this,arguments)}function oN(){return oN=(0,we.Z)(function*(n,t,e=fn()){const i=yield ry(n,Os(KP(t.bundledQuery))),r=at(n);return r.persistence.runTransaction("Save named query","readwrite",s=>{const c=Ur(t.readTime);if(i.snapshotVersion.compareTo(c)>=0)return r.Ns.saveNamedQuery(s,t);const d=i.withResumeToken(kr.EMPTY_BYTE_STRING,c);return r.Ui=r.Ui.insert(d.targetId,d),r.Cs.updateTargetData(s,d).next(()=>r.Cs.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.Cs.addMatchingKeys(s,e,i.targetId)).next(()=>r.Ns.saveNamedQuery(s,t))})}),oN.apply(this,arguments)}function c$(n,t){return`firestore_clients_${n}_${t}`}function u$(n,t,e){let i=`firestore_mutations_${n}_${e}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}function aN(n,t){return`firestore_targets_${n}_${t}`}class ST{constructor(t,e,i,r){this.user=t,this.batchId=e,this.state=i,this.error=r}static Zi(t,e,i){const r=JSON.parse(i);let s,c="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return c&&r.error&&(c="string"==typeof r.error.message&&"string"==typeof r.error.code,c&&(s=new He(r.error.code,r.error.message))),c?new ST(t,e,r.state,s):(hr("SharedClientState",`Failed to parse mutation state for ID '${e}': ${i}`),null)}tr(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class mC{constructor(t,e,i){this.targetId=t,this.state=e,this.error=i}static Zi(t,e){const i=JSON.parse(e);let r,s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new He(i.error.code,i.error.message))),s?new mC(t,i.state,r):(hr("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}tr(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class AT{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Zi(t,e){const i=JSON.parse(e);let r="object"==typeof i&&i.activeTargetIds instanceof Array,s=fT();for(let c=0;r&&c<i.activeTargetIds.length;++c)r=SH(i.activeTargetIds[c]),s=s.add(i.activeTargetIds[c]);return r?new AT(t,s):(hr("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class lN{constructor(t,e){this.clientId=t,this.onlineState=e}static Zi(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new lN(e.clientId,e.onlineState):(hr("SharedClientState",`Failed to parse online state: ${t}`),null)}}class cN{constructor(){this.activeTargetIds=fT()}er(t){this.activeTargetIds=this.activeTargetIds.add(t)}nr(t){this.activeTargetIds=this.activeTargetIds.delete(t)}tr(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class uN{constructor(t,e,i,r,s){this.window=t,this.Hs=e,this.persistenceKey=i,this.sr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new er(sn),this.started=!1,this.cr=[];const c=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ar=c$(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new cN),this.lr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,we.Z)(function*(){const e=yield t.syncEngine.vi();for(const r of e){if(r===t.sr)continue;const s=t.getItem(c$(t.persistenceKey,r));if(s){const c=AT.Zi(r,s);c&&(t.ur=t.ur.insert(c.clientId,c))}}t.gr();const i=t.storage.getItem(t.wr);if(i){const r=t.yr(i);r&&t.pr(r)}for(const r of t.cr)t.rr(r);t.cr=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.hr,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(t){let e=!1;return this.ur.forEach((i,r)=>{r.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.Tr(t,"pending")}updateMutationState(t,e,i){this.Tr(t,e,i),this.Er(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const i=this.storage.getItem(aN(this.persistenceKey,t));if(i){const r=mC.Zi(t,i);r&&(e=r.state)}}return this.Ar.er(t),this.gr(),e}removeLocalQueryTarget(t){this.Ar.nr(t),this.gr()}isLocalQueryTarget(t){return this.Ar.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(aN(this.persistenceKey,t))}updateQueryState(t,e,i){this.Rr(t,e,i)}handleUserChange(t,e,i){e.forEach(r=>{this.Er(r)}),this.currentUser=t,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(t){this.br(t)}notifyBundleLoaded(t){this.Pr(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return qe("SharedClientState","READ",t,e),e}setItem(t,e){qe("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){qe("SharedClientState","REMOVE",t),this.storage.removeItem(t)}rr(t){var e=this;const i=t;if(i.storageArea===this.storage){if(qe("SharedClientState","EVENT",i.key,i.newValue),i.key===this.ar)return void hr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,we.Z)(function*(){if(e.started){if(null!==i.key)if(e.lr.test(i.key)){if(null==i.newValue){const r=e.vr(i.key);return e.Vr(r,null)}{const r=e.Sr(i.key,i.newValue);if(r)return e.Vr(r.clientId,r)}}else if(e.dr.test(i.key)){if(null!==i.newValue){const r=e.Dr(i.key,i.newValue);if(r)return e.Cr(r)}}else if(e._r.test(i.key)){if(null!==i.newValue){const r=e.Nr(i.key,i.newValue);if(r)return e.kr(r)}}else if(i.key===e.wr){if(null!==i.newValue){const r=e.yr(i.newValue);if(r)return e.pr(r)}}else if(i.key===e.hr){const r=function(s){let c=ro.at;if(null!=s)try{const d=JSON.parse(s);Wt("number"==typeof d),c=d}catch(d){hr("SharedClientState","Failed to read sequence number from WebStorage",d)}return c}(i.newValue);r!==ro.at&&e.sequenceNumberHandler(r)}else if(i.key===e.mr){const r=e.Or(i.newValue);yield Promise.all(r.map(s=>e.syncEngine.Mr(s)))}}else e.cr.push(i)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(t,e,i){const r=new ST(this.currentUser,t,e,i),s=u$(this.persistenceKey,this.currentUser,t);this.setItem(s,r.tr())}Er(t){const e=u$(this.persistenceKey,this.currentUser,t);this.removeItem(e)}br(t){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:t}))}Rr(t,e,i){const r=aN(this.persistenceKey,t),s=new mC(t,e,i);this.setItem(r,s.tr())}Pr(t){const e=JSON.stringify(Array.from(t));this.setItem(this.mr,e)}vr(t){const e=this.lr.exec(t);return e?e[1]:null}Sr(t,e){const i=this.vr(t);return AT.Zi(i,e)}Dr(t,e){const i=this.dr.exec(t),r=Number(i[1]);return ST.Zi(new Br(void 0!==i[2]?i[2]:null),r,e)}Nr(t,e){const i=this._r.exec(t),r=Number(i[1]);return mC.Zi(r,e)}yr(t){return lN.Zi(t)}Or(t){return JSON.parse(t)}Cr(t){var e=this;return(0,we.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.Fr(t.batchId,t.state,t.error);qe("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}kr(t){return this.syncEngine.$r(t.targetId,t.state,t.error)}Vr(t,e){const i=e?this.ur.insert(t,e):this.ur.remove(t),r=this.Ir(this.ur),s=this.Ir(i),c=[],d=[];return s.forEach(p=>{r.has(p)||c.push(p)}),r.forEach(p=>{s.has(p)||d.push(p)}),this.syncEngine.Br(c,d).then(()=>{this.ur=i})}pr(t){this.ur.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Ir(t){let e=fT();return t.forEach((i,r)=>{e=e.unionWith(r.activeTargetIds)}),e}}class d${constructor(){this.Lr=new cN,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t){return this.Lr.er(t),this.Ur[t]||"not-current"}updateQueryState(t,e,i){this.Ur[t]=e}removeLocalQueryTarget(t){this.Lr.nr(t)}isLocalQueryTarget(t){return this.Lr.activeTargetIds.has(t)}clearQueryState(t){delete this.Ur[t]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(t){return this.Lr.activeTargetIds.has(t)}start(){return this.Lr=new cN,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class O7{qr(t){}shutdown(){}}class h${constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(t){this.Wr.push(t)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){qe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.Wr)t(0)}jr(){qe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.Wr)t(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const P7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class N7{constructor(t){this.Hr=t.Hr,this.Jr=t.Jr}Yr(t){this.Xr=t}Zr(t){this.eo=t}onMessage(t){this.no=t}close(){this.Jr()}send(t){this.Hr(t)}so(){this.Xr()}io(t){this.eo(t)}ro(t){this.no(t)}}class F7 extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.oo=(t.ssl?"https":"http")+"://"+t.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(t,e,i,r,s){const c=this.ho(t,e);qe("RestConnection","Sending: ",c,i);const d={};return this.lo(d,r,s),this.fo(t,c,d,i).then(p=>(qe("RestConnection","Received: ",p),p),p=>{throw Lp("RestConnection",`${t} failed with error: `,p,"url: ",c,"request:",i),p})}_o(t,e,i,r,s,c){return this.ao(t,e,i,r,s)}lo(t,e,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+$_,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((r,s)=>t[s]=r),i&&i.headers.forEach((r,s)=>t[s]=r)}ho(t,e){return`${this.oo}/v1/${e}:${P7[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}fo(t,e,i,r){return new Promise((s,c)=>{const d=new PK;d.setWithCredentials(!0),d.listenOnce(kK.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case IP.NO_ERROR:const _=d.getResponseJson();qe("Connection","XHR received:",JSON.stringify(_)),s(_);break;case IP.TIMEOUT:qe("Connection",'RPC "'+t+'" timed out'),c(new He(be.DEADLINE_EXCEEDED,"Request time out"));break;case IP.HTTP_ERROR:const w=d.getStatus();if(qe("Connection",'RPC "'+t+'" failed with status:',w,"response text:",d.getResponseText()),w>0){const I=d.getResponseJson().error;if(I&&I.status&&I.message){const T=function(O){const U=O.toLowerCase().replace(/_/g,"-");return Object.values(be).indexOf(U)>=0?U:be.UNKNOWN}(I.status);c(new He(T,I.message))}else c(new He(be.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new He(be.UNAVAILABLE,"Connection failed."));break;default:Et()}}finally{qe("Connection",'RPC "'+t+'" completed.')}});const p=JSON.stringify(r);d.send(e,"POST",p,i,15)})}wo(t,e,i){const r=[this.oo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=MK(),c=xK(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new OK({})),this.lo(d.initMessageHeaders,e,i),d.encodeInitMessageHeaders=!0;const p=r.join("");qe("Connection","Creating WebChannel: "+p,d);const _=s.createWebChannel(p,d);let w=!1,I=!1;const T=new N7({Hr:U=>{I?qe("Connection","Not sending because WebChannel is closed:",U):(w||(qe("Connection","Opening WebChannel transport."),_.open(),w=!0),qe("Connection","WebChannel sending:",U),_.send(U))},Jr:()=>_.close()}),O=(U,W,ie)=>{U.listen(W,ze=>{try{ie(ze)}catch(nt){setTimeout(()=>{throw nt},0)}})};return O(_,eT.EventType.OPEN,()=>{I||qe("Connection","WebChannel transport opened.")}),O(_,eT.EventType.CLOSE,()=>{I||(I=!0,qe("Connection","WebChannel transport closed"),T.io())}),O(_,eT.EventType.ERROR,U=>{I||(I=!0,Lp("Connection","WebChannel transport errored:",U),T.io(new He(be.UNAVAILABLE,"The operation could not be completed")))}),O(_,eT.EventType.MESSAGE,U=>{var W;if(!I){const ie=U.data[0];Wt(!!ie);const ze=ie,nt=ze.error||(null===(W=ze[0])||void 0===W?void 0:W.error);if(nt){qe("Connection","WebChannel received error:",nt);const ft=nt.status;let bt=function(zt){const Mn=Er[zt];if(void 0!==Mn)return sj(Mn)}(ft),Ut=nt.message;void 0===bt&&(bt=be.INTERNAL,Ut="Unknown error status: "+ft+" with message "+nt.message),I=!0,T.io(new He(bt,Ut)),_.close()}else qe("Connection","WebChannel received:",ie),T.ro(ie)}}),O(c,RK.STAT_EVENT,U=>{U.stat===dH.PROXY?qe("Connection","Detected buffering proxy"):U.stat===dH.NOPROXY&&qe("Connection","Detected no buffering proxy")}),setTimeout(()=>{T.so()},0),T}}function f$(){return typeof window<"u"?window:null}function TT(){return typeof document<"u"?document:null}function gC(n){return new AZ(n,!0)}class dN{constructor(t,e,i=1e3,r=1.5,s=6e4){this.Hs=t,this.timerId=e,this.mo=i,this.yo=r,this.po=s,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(t){this.cancel();const e=Math.floor(this.Io+this.bo()),i=Math.max(0,Date.now()-this.Eo),r=Math.max(0,e-i);r>0&&qe("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Io} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,r,()=>(this.Eo=Date.now(),t())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class p${constructor(t,e,i,r,s,c,d,p){this.Hs=t,this.vo=i,this.Vo=r,this.So=s,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new dN(t,e)}ko(){return 1===this.state||5===this.state||this.Oo()}Oo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var t=this;return(0,we.Z)(function*(){t.ko()&&(yield t.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Oo()&&null===this.Co&&(this.Co=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.Bo()))}Lo(t){this.Uo(),this.stream.send(t)}Bo(){var t=this;return(0,we.Z)(function*(){if(t.Oo())return t.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(t,e){var i=this;return(0,we.Z)(function*(){i.Uo(),i.qo(),i.No.cancel(),i.Do++,4!==t?i.No.reset():e&&e.code===be.RESOURCE_EXHAUSTED?(hr(e.toString()),hr("Using maximum backoff delay to prevent overloading the backend."),i.No.Ao()):e&&e.code===be.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Ko(),i.stream.close(),i.stream=null),i.state=t,yield i.listener.Zr(e)})()}Ko(){}auth(){this.state=1;const t=this.Go(this.Do),e=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Do===e&&this.Qo(i,r)},i=>{t(()=>{const r=new He(be.UNKNOWN,"Fetching auth token failed: "+i.message);return this.jo(r)})})}Qo(t,e){const i=this.Go(this.Do);this.stream=this.Wo(t,e),this.stream.Yr(()=>{i(()=>(this.state=2,this.xo=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.Oo()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(r=>{i(()=>this.jo(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Mo(){var t=this;this.state=5,this.No.Ro((0,we.Z)(function*(){t.state=0,t.start()}))}jo(t){return qe("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Go(t){return e=>{this.Hs.enqueueAndForget(()=>this.Do===t?e():(qe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class L7 extends p${constructor(t,e,i,r,s,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,c),this.It=s}Wo(t,e){return this.So.wo("Listen",t,e)}onMessage(t){this.No.reset();const e=function xZ(n,t){let e;if("targetChange"in t){const i="NO_CHANGE"===(p=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:Et(),r=t.targetChange.targetIds||[],s=function(p,_){return p.gt?(Wt(void 0===_||"string"==typeof _),kr.fromBase64String(_||"")):(Wt(void 0===_||_ instanceof Uint8Array),kr.fromUint8Array(_||new Uint8Array))}(n,t.targetChange.resumeToken),c=t.targetChange.cause,d=c&&function(p){const _=void 0===p.code?be.UNKNOWN:sj(p.code);return new He(_,p.message||"")}(c);e=new uj(i,r,s,d||null)}else if("documentChange"in t){const i=t.documentChange,r=Zl(n,i.document.name),s=Ur(i.document.updateTime),c=new is({mapValue:{fields:i.document.fields}}),d=Si.newFoundDocument(r,s,c);e=new pT(i.targetIds||[],i.removedTargetIds||[],d.key,d)}else if("documentDelete"in t){const i=t.documentDelete,r=Zl(n,i.document),s=i.readTime?Ur(i.readTime):qt.min(),c=Si.newNoDocument(r,s);e=new pT([],i.removedTargetIds||[],c.key,c)}else if("documentRemove"in t){const i=t.documentRemove,r=Zl(n,i.document);e=new pT([],i.removedTargetIds||[],r,null)}else{if(!("filter"in t))return Et();{const i=t.filter,s=new vZ(i.count||0);e=new cj(i.targetId,s)}}var p;return e}(this.It,t),i=function(r){if(!("targetChange"in r))return qt.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?qt.min():s.readTime?Ur(s.readTime):qt.min()}(t);return this.listener.zo(e,i)}Ho(t){const e={};e.database=oC(this.It),e.addTarget=function(r,s){let c;const d=s.target;return c=aT(d)?{documents:bj(r,d)}:{query:zP(r,d)},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?c.resumeToken=pj(r,s.resumeToken):s.snapshotVersion.compareTo(qt.min())>0&&(c.readTime=rC(r,s.snapshotVersion.toTimestamp())),c}(this.It,t);const i=function RZ(n,t){const e=function(i,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Et()}}(0,t.purpose);return null==e?null:{"goog-listen-tags":e}}(0,t);i&&(e.labels=i),this.Lo(e)}Jo(t){const e={};e.database=oC(this.It),e.removeTarget=t,this.Lo(e)}}class V7 extends p${constructor(t,e,i,r,s,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,c),this.It=s,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(t,e){return this.So.wo("Write",t,e)}onMessage(t){if(Wt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Yo){this.No.reset();const e=function kZ(n,t){return n&&n.length>0?(Wt(void 0!==t),n.map(e=>function(i,r){let s=Ur(i.updateTime?i.updateTime:r);return s.isEqual(qt.min())&&(s=Ur(r)),new gZ(s,i.transformResults||[])}(e,t))):[]}(t.writeResults,t.commitTime),i=Ur(t.commitTime);return this.listener.tu(i,e)}return Wt(!t.writeResults||0===t.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const t={};t.database=oC(this.It),this.Lo(t)}Zo(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>aC(this.It,i))};this.Lo(e)}}class B7 extends class{}{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.So=i,this.It=r,this.su=!1}iu(){if(this.su)throw new He(be.FAILED_PRECONDITION,"The client has already been terminated.")}ao(t,e,i){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.So.ao(t,e,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new He(be.UNKNOWN,r.toString())})}_o(t,e,i,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.So._o(t,e,i,s,c,r)).catch(s=>{throw"FirebaseError"===s.name?(s.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new He(be.UNKNOWN,s.toString())})}terminate(){this.su=!0}}class H7{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}cu(){0===this.ru&&(this.au("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.au("Offline"),Promise.resolve())))}lu(t){"Online"===this.state?this.au("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.au("Offline")))}set(t){this.fu(),this.ru=0,"Online"===t&&(this.uu=!1),this.au(t)}au(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}hu(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(hr(e),this.uu=!1):qe("OnlineStateTracker",e)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class j7{constructor(t,e,i,r,s){var c=this;this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=s,this.gu.qr(d=>{i.enqueueAndForget((0,we.Z)(function*(){var p;mu(c)&&(qe("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,we.Z)(function*(_){const w=at(_);w.wu.add(4),yield oy(w),w.yu.set("Unknown"),w.wu.delete(4),yield _C(w)}),function(_){return p.apply(this,arguments)})(c))}))}),this.yu=new H7(i,r)}}function _C(n){return fN.apply(this,arguments)}function fN(){return fN=(0,we.Z)(function*(n){if(mu(n))for(const t of n.mu)yield t(!0)}),fN.apply(this,arguments)}function oy(n){return pN.apply(this,arguments)}function pN(){return pN=(0,we.Z)(function*(n){for(const t of n.mu)yield t(!1)}),pN.apply(this,arguments)}function MT(n,t){const e=at(n);e._u.has(t.targetId)||(e._u.set(t.targetId,t),_N(e)?gN(e):ly(e).Oo()&&mN(e,t))}function yC(n,t){const e=at(n),i=ly(e);e._u.delete(t),i.Oo()&&m$(e,t),0===e._u.size&&(i.Oo()?i.$o():mu(e)&&e.yu.set("Unknown"))}function mN(n,t){n.pu.Mt(t.targetId),ly(n).Ho(t)}function m$(n,t){n.pu.Mt(t),ly(n).Jo(t)}function gN(n){n.pu=new DZ({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),se:t=>n._u.get(t)||null}),ly(n).start(),n.yu.cu()}function _N(n){return mu(n)&&!ly(n).ko()&&n._u.size>0}function mu(n){return 0===at(n).wu.size}function g$(n){n.pu=void 0}function $7(n){return yN.apply(this,arguments)}function yN(){return yN=(0,we.Z)(function*(n){n._u.forEach((t,e)=>{mN(n,t)})}),yN.apply(this,arguments)}function z7(n,t){return vN.apply(this,arguments)}function vN(){return vN=(0,we.Z)(function*(n,t){g$(n),_N(n)?(n.yu.lu(t),gN(n)):n.yu.set("Unknown")}),vN.apply(this,arguments)}function G7(n,t,e){return bN.apply(this,arguments)}function bN(){return bN=(0,we.Z)(function*(n,t,e){if(n.yu.set("Online"),t instanceof uj&&2===t.state&&t.cause)try{yield(i=(0,we.Z)(function*(r,s){const c=s.cause;for(const d of s.targetIds)r._u.has(d)&&(yield r.remoteSyncer.rejectListen(d,c),r._u.delete(d),r.pu.removeTarget(d))}),function(r,s){return i.apply(this,arguments)})(n,t)}catch(i){qe("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield xT(n,i)}else if(t instanceof pT?n.pu.Gt(t):t instanceof cj?n.pu.Yt(t):n.pu.Wt(t),!e.isEqual(qt.min()))try{const i=yield r$(n.localStore);e.compareTo(i)>=0&&(yield function(r,s){const c=r.pu.te(s);return c.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const _=r._u.get(p);_&&r._u.set(p,_.withResumeToken(d.resumeToken,s))}}),c.targetMismatches.forEach(d=>{const p=r._u.get(d);if(!p)return;r._u.set(d,p.withResumeToken(kr.EMPTY_BYTE_STRING,p.snapshotVersion)),m$(r,d);const _=new yh(p.target,d,1,p.sequenceNumber);mN(r,_)}),r.remoteSyncer.applyRemoteEvent(c)}(n,e))}catch(i){qe("RemoteStore","Failed to raise snapshot:",i),yield xT(n,i)}var i}),bN.apply(this,arguments)}function xT(n,t,e){return wN.apply(this,arguments)}function wN(){return wN=(0,we.Z)(function*(n,t,e){if(!dh(t))throw t;n.wu.add(1),yield oy(n),n.yu.set("Offline"),e||(e=()=>r$(n.localStore)),n.asyncQueue.enqueueRetryable((0,we.Z)(function*(){qe("RemoteStore","Retrying IndexedDB access"),yield e(),n.wu.delete(1),yield _C(n)}))}),wN.apply(this,arguments)}function _$(n,t){return t().catch(e=>xT(n,e,t))}function ay(n){return CN.apply(this,arguments)}function CN(){return CN=(0,we.Z)(function*(n){const t=at(n),e=wh(t);let i=t.du.length>0?t.du[t.du.length-1].batchId:-1;for(;W7(t);)try{const r=yield x7(t.localStore,i);if(null===r){0===t.du.length&&e.$o();break}i=r.batchId,q7(t,r)}catch(r){yield xT(t,r)}y$(t)&&v$(t)}),CN.apply(this,arguments)}function W7(n){return mu(n)&&n.du.length<10}function q7(n,t){n.du.push(t);const e=wh(n);e.Oo()&&e.Xo&&e.Zo(t.mutations)}function y$(n){return mu(n)&&!wh(n).ko()&&n.du.length>0}function v$(n){wh(n).start()}function Y7(n){return EN.apply(this,arguments)}function EN(){return EN=(0,we.Z)(function*(n){wh(n).nu()}),EN.apply(this,arguments)}function K7(n){return DN.apply(this,arguments)}function DN(){return DN=(0,we.Z)(function*(n){const t=wh(n);for(const e of n.du)t.Zo(e.mutations)}),DN.apply(this,arguments)}function Z7(n,t,e){return IN.apply(this,arguments)}function IN(){return IN=(0,we.Z)(function*(n,t,e){const i=n.du.shift(),r=qP.from(i,t,e);yield _$(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield ay(n)}),IN.apply(this,arguments)}function Q7(n,t){return SN.apply(this,arguments)}function SN(){return SN=(0,we.Z)(function*(n,t){var e;t&&wh(n).Xo&&(yield(e=(0,we.Z)(function*(i,r){if(rj(s=r.code)&&s!==be.ABORTED){const c=i.du.shift();wh(i).Fo(),yield _$(i,()=>i.remoteSyncer.rejectFailedWrite(c.batchId,r)),yield ay(i)}var s}),function(i,r){return e.apply(this,arguments)})(n,t)),y$(n)&&v$(n)}),SN.apply(this,arguments)}function b$(n,t){return AN.apply(this,arguments)}function AN(){return AN=(0,we.Z)(function*(n,t){const e=at(n);e.asyncQueue.verifyOperationInProgress(),qe("RemoteStore","RemoteStore received new credentials");const i=mu(e);e.wu.add(3),yield oy(e),i&&e.yu.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.wu.delete(3),yield _C(e)}),AN.apply(this,arguments)}function TN(n,t){return MN.apply(this,arguments)}function MN(){return MN=(0,we.Z)(function*(n,t){const e=at(n);t?(e.wu.delete(2),yield _C(e)):t||(e.wu.add(2),yield oy(e),e.yu.set("Unknown"))}),MN.apply(this,arguments)}function ly(n){return n.Iu||(n.Iu=function(t,e,i){const r=at(t);return r.iu(),new L7(e,r.So,r.authCredentials,r.appCheckCredentials,r.It,i)}(n.datastore,n.asyncQueue,{Yr:$7.bind(null,n),Zr:z7.bind(null,n),zo:G7.bind(null,n)}),n.mu.push(function(){var t=(0,we.Z)(function*(e){e?(n.Iu.Fo(),_N(n)?gN(n):n.yu.set("Unknown")):(yield n.Iu.stop(),g$(n))});return function(e){return t.apply(this,arguments)}}())),n.Iu}function wh(n){return n.Tu||(n.Tu=function(t,e,i){const r=at(t);return r.iu(),new V7(e,r.So,r.authCredentials,r.appCheckCredentials,r.It,i)}(n.datastore,n.asyncQueue,{Yr:Y7.bind(null,n),Zr:Q7.bind(null,n),eu:K7.bind(null,n),tu:Z7.bind(null,n)}),n.mu.push(function(){var t=(0,we.Z)(function*(e){e?(n.Tu.Fo(),yield ay(n)):(yield n.Tu.stop(),n.du.length>0&&(qe("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(e){return t.apply(this,arguments)}}())),n.Tu}class xN{constructor(t,e,i,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(t,e,i,r,s){const c=Date.now()+i,d=new xN(t,e,c,r,s);return d.start(i),d}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new He(be.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cy(n,t){if(hr("AsyncQueue",`${t}: ${n}`),dh(n))return new He(be.UNAVAILABLE,`${t}: ${n}`);throw n}class uy{constructor(t){this.comparator=t?(e,i)=>t(e,i)||ot.comparator(e.key,i.key):(e,i)=>ot.comparator(e.key,i.key),this.keyedMap=eC(),this.sortedSet=new er(this.comparator)}static emptySet(t){return new uy(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof uy)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const i=new uy;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}class w${constructor(){this.Eu=new er(ot.comparator)}track(t){const e=t.doc.key,i=this.Eu.get(e);i?0!==t.type&&3===i.type?this.Eu=this.Eu.insert(e,t):3===t.type&&1!==i.type?this.Eu=this.Eu.insert(e,{type:i.type,doc:t.doc}):2===t.type&&2===i.type?this.Eu=this.Eu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===i.type?this.Eu=this.Eu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===i.type?this.Eu=this.Eu.remove(e):1===t.type&&2===i.type?this.Eu=this.Eu.insert(e,{type:1,doc:i.doc}):0===t.type&&1===i.type?this.Eu=this.Eu.insert(e,{type:2,doc:t.doc}):Et():this.Eu=this.Eu.insert(e,t)}Au(){const t=[];return this.Eu.inorderTraversal((e,i)=>{t.push(i)}),t}}class dy{constructor(t,e,i,r,s,c,d,p,_){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=_}static fromInitialDocuments(t,e,i,r,s){const c=[];return e.forEach(d=>{c.push({type:0,doc:d})}),new dy(t,e,uy.emptySet(e),c,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Qw(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}}class X7{constructor(){this.Ru=void 0,this.listeners=[]}}class J7{constructor(){this.queries=new _h(t=>jH(t),Qw),this.onlineState="Unknown",this.bu=new Set}}function kN(n,t){return RN.apply(this,arguments)}function RN(){return RN=(0,we.Z)(function*(n,t){const e=at(n),i=t.query;let r=!1,s=e.queries.get(i);if(s||(r=!0,s=new X7),r)try{s.Ru=yield e.onListen(i)}catch(c){const d=cy(c,`Initialization of query '${VP(t.query)}' failed`);return void t.onError(d)}e.queries.set(i,s),s.listeners.push(t),t.Pu(e.onlineState),s.Ru&&t.vu(s.Ru)&&NN(e)}),RN.apply(this,arguments)}function ON(n,t){return PN.apply(this,arguments)}function PN(){return PN=(0,we.Z)(function*(n,t){const e=at(n),i=t.query;let r=!1;const s=e.queries.get(i);if(s){const c=s.listeners.indexOf(t);c>=0&&(s.listeners.splice(c,1),r=0===s.listeners.length)}if(r)return e.queries.delete(i),e.onUnlisten(i)}),PN.apply(this,arguments)}function eQ(n,t){const e=at(n);let i=!1;for(const r of t){const c=e.queries.get(r.query);if(c){for(const d of c.listeners)d.vu(r)&&(i=!0);c.Ru=r}}i&&NN(e)}function tQ(n,t,e){const i=at(n),r=i.queries.get(t);if(r)for(const s of r.listeners)s.onError(e);i.queries.delete(t)}function NN(n){n.bu.forEach(t=>{t.next()})}class FN{constructor(t,e,i){this.query=t,this.Vu=e,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=i||{}}vu(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)3!==r.type&&i.push(r);t=new dy(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Su?this.Cu(t)&&(this.Vu.next(t),e=!0):this.xu(t,this.onlineState)&&(this.Nu(t),e=!0),this.Du=t,e}onError(t){this.Vu.error(t)}Pu(t){this.onlineState=t;let e=!1;return this.Du&&!this.Su&&this.xu(this.Du,t)&&(this.Nu(this.Du),e=!0),e}xu(t,e){return!t.fromCache||(!this.options.ku||!("Offline"!==e))&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}Cu(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(t){t=dy.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Su=!0,this.Vu.next(t)}}class nQ{constructor(t,e){this.payload=t,this.byteLength=e}Ou(){return"metadata"in this.payload}}class C${constructor(t){this.It=t}Ji(t){return Zl(this.It,t)}Yi(t){return t.metadata.exists?vj(this.It,t.document,!1):Si.newNoDocument(this.Ji(t.metadata.name),this.Xi(t.metadata.readTime))}Xi(t){return Ur(t)}}class iQ{constructor(t,e,i){this.Mu=t,this.localStore=e,this.It=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=E$(t)}Fu(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.payload.namedQuery)this.queries.push(t.payload.namedQuery);else if(t.payload.documentMetadata){this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e;const i=Nn.fromString(t.payload.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}$u(t){const e=new Map,i=new C$(this.It);for(const r of t)if(r.metadata.queries){const s=i.Ji(r.metadata.name);for(const c of r.metadata.queries){const d=(e.get(c)||fn()).add(s);e.set(c,d)}}return e}complete(){var t=this;return(0,we.Z)(function*(){const e=yield function k7(n,t,e,i){return sN.apply(this,arguments)}(t.localStore,new C$(t.It),t.documents,t.Mu.id),i=t.$u(t.documents);for(const r of t.queries)yield R7(t.localStore,r,i.get(r.name));return t.progress.taskState="Success",{progress:t.progress,Bu:t.collectionGroups,Lu:e}})()}}function E$(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class D${constructor(t){this.key=t}}class I${constructor(t){this.key=t}}class S${constructor(t,e){this.query=t,this.Uu=e,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=fn(),this.mutatedKeys=fn(),this.Gu=zH(t),this.Qu=new uy(this.Gu)}get ju(){return this.Uu}Wu(t,e){const i=e?e.zu:new w$,r=e?e.Qu:this.Qu;let s=e?e.mutatedKeys:this.mutatedKeys,c=r,d=!1;const p="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,_="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((w,I)=>{const T=r.get(w),O=BP(this.query,I)?I:null,U=!!T&&this.mutatedKeys.has(T.key),W=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let ie=!1;T&&O?T.data.isEqual(O.data)?U!==W&&(i.track({type:3,doc:O}),ie=!0):this.Hu(T,O)||(i.track({type:2,doc:O}),ie=!0,(p&&this.Gu(O,p)>0||_&&this.Gu(O,_)<0)&&(d=!0)):!T&&O?(i.track({type:0,doc:O}),ie=!0):T&&!O&&(i.track({type:1,doc:T}),ie=!0,(p||_)&&(d=!0)),ie&&(O?(c=c.add(O),s=W?s.add(w):s.delete(w)):(c=c.delete(w),s=s.delete(w)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const w="F"===this.query.limitType?c.last():c.first();c=c.delete(w.key),s=s.delete(w.key),i.track({type:1,doc:w})}return{Qu:c,zu:i,$i:d,mutatedKeys:s}}Hu(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i){const r=this.Qu;this.Qu=t.Qu,this.mutatedKeys=t.mutatedKeys;const s=t.zu.Au();s.sort((_,w)=>function(I,T){const O=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Et()}};return O(I)-O(T)}(_.type,w.type)||this.Gu(_.doc,w.doc)),this.Ju(i);const c=e?this.Yu():[],d=0===this.Ku.size&&this.current?1:0,p=d!==this.qu;return this.qu=d,0!==s.length||p?{snapshot:new dy(this.query,t.Qu,r,s,t.mutatedKeys,0===d,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),Xu:c}:{Xu:c}}Pu(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new w$,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(t){return!this.Uu.has(t)&&!!this.Qu.has(t)&&!this.Qu.get(t).hasLocalMutations}Ju(t){t&&(t.addedDocuments.forEach(e=>this.Uu=this.Uu.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Uu=this.Uu.delete(e)),this.current=t.current)}Yu(){if(!this.current)return[];const t=this.Ku;this.Ku=fn(),this.Qu.forEach(i=>{this.Zu(i.key)&&(this.Ku=this.Ku.add(i.key))});const e=[];return t.forEach(i=>{this.Ku.has(i)||e.push(new I$(i))}),this.Ku.forEach(i=>{t.has(i)||e.push(new D$(i))}),e}tc(t){this.Uu=t.Hi,this.Ku=fn();const e=this.Wu(t.documents);return this.applyChanges(e,!0)}ec(){return dy.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class rQ{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class sQ{constructor(t){this.key=t,this.nc=!1}}class oQ{constructor(t,e,i,r,s,c){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=c,this.sc={},this.ic=new _h(d=>jH(d),Qw),this.rc=new Map,this.oc=new Set,this.uc=new er(ot.comparator),this.cc=new Map,this.ac=new XP,this.hc={},this.lc=new Map,this.fc=Jp.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function aQ(n,t){return LN.apply(this,arguments)}function LN(){return LN=(0,we.Z)(function*(n,t){const e=a1(n);let i,r;const s=e.ic.get(t);if(s)i=s.targetId,e.sharedClientState.addLocalQueryTarget(i),r=s.view.ec();else{const c=yield ry(e.localStore,Os(t));e.isPrimaryClient&&MT(e.remoteStore,c);const d=e.sharedClientState.addLocalQueryTarget(c.targetId);i=c.targetId,r=yield VN(e,t,i,"current"===d,c.resumeToken)}return r}),LN.apply(this,arguments)}function VN(n,t,e,i,r){return BN.apply(this,arguments)}function BN(){return BN=(0,we.Z)(function*(n,t,e,i,r){n._c=(I,T,O)=>{return(U=(0,we.Z)(function*(W,ie,ze,nt){let ft=ie.view.Wu(ze);ft.$i&&(ft=yield IT(W.localStore,ie.query,!1).then(({documents:zt})=>ie.view.Wu(zt,ft)));const bt=nt&&nt.targetChanges.get(ie.targetId),Ut=ie.view.applyChanges(ft,W.isPrimaryClient,bt);return KN(W,ie.targetId,Ut.Xu),Ut.snapshot}),function(W,ie,ze,nt){return U.apply(this,arguments)})(n,I,T,O);var U};const s=yield IT(n.localStore,t,!0),c=new S$(t,s.Hi),d=c.Wu(s.documents),p=iC.createSynthesizedTargetChangeForCurrentChange(e,i&&"Offline"!==n.onlineState,r),_=c.applyChanges(d,n.isPrimaryClient,p);KN(n,e,_.Xu);const w=new rQ(t,e,c);return n.ic.set(t,w),n.rc.has(e)?n.rc.get(e).push(t):n.rc.set(e,[t]),_.snapshot}),BN.apply(this,arguments)}function lQ(n,t){return UN.apply(this,arguments)}function UN(){return UN=(0,we.Z)(function*(n,t){const e=at(n),i=e.ic.get(t),r=e.rc.get(i.targetId);if(r.length>1)return e.rc.set(i.targetId,r.filter(s=>!Qw(s,t))),void e.ic.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(i.targetId),e.sharedClientState.isActiveQueryTarget(i.targetId)||(yield sy(e.localStore,i.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(i.targetId),yC(e.remoteStore,i.targetId),hy(e,i.targetId)}).catch(uh))):(hy(e,i.targetId),yield sy(e.localStore,i.targetId,!0))}),UN.apply(this,arguments)}function HN(){return HN=(0,we.Z)(function*(n,t,e){const i=l1(n);try{const r=yield function(s,c){const d=at(s),p=Bi.now(),_=c.reduce((T,O)=>T.add(O.key),fn());let w,I;return d.persistence.runTransaction("Locally write mutations","readwrite",T=>{let O=so(),U=fn();return d.Gi.getEntries(T,_).next(W=>{O=W,O.forEach((ie,ze)=>{ze.isValidDocument()||(U=U.add(ie))})}).next(()=>d.localDocuments.getOverlayedDocuments(T,O)).next(W=>{w=W;const ie=[];for(const ze of c){const nt=yZ(ze,w.get(ze.key).overlayedDocument);null!=nt&&ie.push(new pu(ze.key,nt,OH(nt.value.mapValue),Ui.exists(!0)))}return d.mutationQueue.addMutationBatch(T,p,ie,c)}).next(W=>{I=W;const ie=W.applyToLocalDocumentSet(w,U);return d.documentOverlayCache.saveOverlays(T,W.batchId,ie)})}).then(()=>({batchId:I.batchId,changes:aj(w)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(s,c,d){let p=s.hc[s.currentUser.toKey()];p||(p=new er(sn)),p=p.insert(c,d),s.hc[s.currentUser.toKey()]=p}(i,r.batchId,e),yield gu(i,r.changes),yield ay(i.remoteStore)}catch(r){const s=cy(r,"Failed to persist write");e.reject(s)}}),HN.apply(this,arguments)}function A$(n,t){return jN.apply(this,arguments)}function jN(){return jN=(0,we.Z)(function*(n,t){const e=at(n);try{const i=yield M7(e.localStore,t);t.targetChanges.forEach((r,s)=>{const c=e.cc.get(s);c&&(Wt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?c.nc=!0:r.modifiedDocuments.size>0?Wt(c.nc):r.removedDocuments.size>0&&(Wt(c.nc),c.nc=!1))}),yield gu(e,i,t)}catch(i){yield uh(i)}}),jN.apply(this,arguments)}function T$(n,t,e){const i=at(n);if(i.isPrimaryClient&&0===e||!i.isPrimaryClient&&1===e){const r=[];i.ic.forEach((s,c)=>{const d=c.view.Pu(t);d.snapshot&&r.push(d.snapshot)}),function(s,c){const d=at(s);d.onlineState=c;let p=!1;d.queries.forEach((_,w)=>{for(const I of w.listeners)I.Pu(c)&&(p=!0)}),p&&NN(d)}(i.eventManager,t),r.length&&i.sc.zo(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function uQ(n,t,e){return $N.apply(this,arguments)}function $N(){return $N=(0,we.Z)(function*(n,t,e){const i=at(n);i.sharedClientState.updateQueryState(t,"rejected",e);const r=i.cc.get(t),s=r&&r.key;if(s){let c=new er(ot.comparator);c=c.insert(s,Si.newNoDocument(s,qt.min()));const d=fn().add(s),p=new nC(qt.min(),new Map,new hi(sn),c,d);yield A$(i,p),i.uc=i.uc.remove(s),i.cc.delete(t),ZN(i)}else yield sy(i.localStore,t,!1).then(()=>hy(i,t,e)).catch(uh)}),$N.apply(this,arguments)}function dQ(n,t){return zN.apply(this,arguments)}function zN(){return zN=(0,we.Z)(function*(n,t){const e=at(n),i=t.batch.batchId;try{const r=yield T7(e.localStore,t);YN(e,i,null),qN(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield gu(e,r)}catch(r){yield uh(r)}}),zN.apply(this,arguments)}function hQ(n,t,e){return GN.apply(this,arguments)}function GN(){return GN=(0,we.Z)(function*(n,t,e){const i=at(n);try{const r=yield function(s,c){const d=at(s);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let _;return d.mutationQueue.lookupMutationBatch(p,c).next(w=>(Wt(null!==w),_=w.keys(),d.mutationQueue.removeMutationBatch(p,w))).next(()=>d.mutationQueue.performConsistencyCheck(p)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(p,_,c)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_)).next(()=>d.localDocuments.getDocuments(p,_))})}(i.localStore,t);YN(i,t,e),qN(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield gu(i,r)}catch(r){yield uh(r)}}),GN.apply(this,arguments)}function WN(){return WN=(0,we.Z)(function*(n,t){const e=at(n);mu(e.remoteStore)||qe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(s){const c=at(s);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>c.mutationQueue.getHighestUnacknowledgedBatchId(d))}(e.localStore);if(-1===i)return void t.resolve();const r=e.lc.get(i)||[];r.push(t),e.lc.set(i,r)}catch(i){const r=cy(i,"Initialization of waitForPendingWrites() operation failed");t.reject(r)}}),WN.apply(this,arguments)}function qN(n,t){(n.lc.get(t)||[]).forEach(e=>{e.resolve()}),n.lc.delete(t)}function YN(n,t,e){const i=at(n);let r=i.hc[i.currentUser.toKey()];if(r){const s=r.get(t);s&&(e?s.reject(e):s.resolve(),r=r.remove(t)),i.hc[i.currentUser.toKey()]=r}}function hy(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.rc.get(t))n.ic.delete(i),e&&n.sc.wc(i,e);n.rc.delete(t),n.isPrimaryClient&&n.ac.ls(t).forEach(i=>{n.ac.containsKey(i)||M$(n,i)})}function M$(n,t){n.oc.delete(t.path.canonicalString());const e=n.uc.get(t);null!==e&&(yC(n.remoteStore,e),n.uc=n.uc.remove(t),n.cc.delete(e),ZN(n))}function KN(n,t,e){for(const i of e)i instanceof D$?(n.ac.addReference(i.key,t),pQ(n,i)):i instanceof I$?(qe("SyncEngine","Document no longer in limbo: "+i.key),n.ac.removeReference(i.key,t),n.ac.containsKey(i.key)||M$(n,i.key)):Et()}function pQ(n,t){const e=t.key,i=e.path.canonicalString();n.uc.get(e)||n.oc.has(i)||(qe("SyncEngine","New document in limbo: "+e),n.oc.add(i),ZN(n))}function ZN(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const t=n.oc.values().next().value;n.oc.delete(t);const e=new ot(Nn.fromString(t)),i=n.fc.next();n.cc.set(i,new sQ(e)),n.uc=n.uc.insert(e,i),MT(n.remoteStore,new yh(Os(Y_(e.path)),i,2,ro.at))}}function gu(n,t,e){return QN.apply(this,arguments)}function QN(){return QN=(0,we.Z)(function*(n,t,e){const i=at(n),r=[],s=[],c=[];var d;i.ic.isEmpty()||(i.ic.forEach((d,p)=>{c.push(i._c(p,t,e).then(_=>{if((_||e)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(p.targetId,_?.fromCache?"not-current":"current"),_){r.push(_);const w=nN.Ci(p.targetId,_);s.push(w)}}))}),yield Promise.all(c),i.sc.zo(r),yield(d=(0,we.Z)(function*(p,_){const w=at(p);try{yield w.persistence.runTransaction("notifyLocalViewChanges","readwrite",I=>fe.forEach(_,T=>fe.forEach(T.Si,O=>w.persistence.referenceDelegate.addReference(I,T.targetId,O)).next(()=>fe.forEach(T.Di,O=>w.persistence.referenceDelegate.removeReference(I,T.targetId,O)))))}catch(I){if(!dh(I))throw I;qe("LocalStore","Failed to update sequence numbers: "+I)}for(const I of _){const T=I.targetId;if(!I.fromCache){const O=w.Ui.get(T),W=O.withLastLimboFreeSnapshotVersion(O.snapshotVersion);w.Ui=w.Ui.insert(T,W)}}}),function(p,_){return d.apply(this,arguments)})(i.localStore,s))}),QN.apply(this,arguments)}function mQ(n,t){return XN.apply(this,arguments)}function XN(){return XN=(0,we.Z)(function*(n,t){const e=at(n);if(!e.currentUser.isEqual(t)){qe("SyncEngine","User change. New user:",t.toKey());const i=yield i$(e.localStore,t);e.currentUser=t,(r=e).lc.forEach(c=>{c.forEach(d=>{d.reject(new He(be.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.lc.clear(),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield gu(e,i.ji)}var r}),XN.apply(this,arguments)}function gQ(n,t){const e=at(n),i=e.cc.get(t);if(i&&i.nc)return fn().add(i.key);{let r=fn();const s=e.rc.get(t);if(!s)return r;for(const c of s){const d=e.ic.get(c);r=r.unionWith(d.view.ju)}return r}}function _Q(n,t){return JN.apply(this,arguments)}function JN(){return JN=(0,we.Z)(function*(n,t){const e=at(n),i=yield IT(e.localStore,t.query,!0),r=t.view.tc(i);return e.isPrimaryClient&&KN(e,t.targetId,r.Xu),r}),JN.apply(this,arguments)}function yQ(n,t){return e1.apply(this,arguments)}function e1(){return e1=(0,we.Z)(function*(n,t){const e=at(n);return a$(e.localStore,t).then(i=>gu(e,i))}),e1.apply(this,arguments)}function vQ(n,t,e,i){return t1.apply(this,arguments)}function t1(){return t1=(0,we.Z)(function*(n,t,e,i){const r=at(n),s=yield function(c,d){const p=at(c),_=at(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",w=>_.Tn(w,d).next(I=>I?p.localDocuments.getDocuments(w,I):fe.resolve(null)))}(r.localStore,t);var d;null!==s?("pending"===e?yield ay(r.remoteStore):"acknowledged"===e||"rejected"===e?(YN(r,t,i||null),qN(r,t),d=t,at(at(r.localStore).mutationQueue).An(d)):Et(),yield gu(r,s)):qe("SyncEngine","Cannot apply mutation batch with id: "+t)}),t1.apply(this,arguments)}function n1(){return n1=(0,we.Z)(function*(n,t){const e=at(n);if(a1(e),l1(e),!0===t&&!0!==e.dc){const i=e.sharedClientState.getAllActiveQueryTargets(),r=yield x$(e,i.toArray());e.dc=!0,yield TN(e.remoteStore,!0);for(const s of r)MT(e.remoteStore,s)}else if(!1===t&&!1!==e.dc){const i=[];let r=Promise.resolve();e.rc.forEach((s,c)=>{e.sharedClientState.isLocalQueryTarget(c)?i.push(c):r=r.then(()=>(hy(e,c),sy(e.localStore,c,!0))),yC(e.remoteStore,c)}),yield r,yield x$(e,i),function(s){const c=at(s);c.cc.forEach((d,p)=>{yC(c.remoteStore,p)}),c.ac.fs(),c.cc=new Map,c.uc=new er(ot.comparator)}(e),e.dc=!1,yield TN(e.remoteStore,!1)}}),n1.apply(this,arguments)}function x$(n,t,e){return r1.apply(this,arguments)}function r1(){return r1=(0,we.Z)(function*(n,t,e){const i=at(n),r=[],s=[];for(const c of t){let d;const p=i.rc.get(c);if(p&&0!==p.length){d=yield ry(i.localStore,Os(p[0]));for(const _ of p){const w=i.ic.get(_),I=yield _Q(i,w);I.snapshot&&s.push(I.snapshot)}}else{const _=yield o$(i.localStore,c);d=yield ry(i.localStore,_),yield VN(i,k$(_),c,!1,d.resumeToken)}r.push(d)}return i.sc.zo(s),r}),r1.apply(this,arguments)}function k$(n){return UH(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function wQ(n){const t=at(n);return at(at(t.localStore).persistence).vi()}function CQ(n,t,e,i){return s1.apply(this,arguments)}function s1(){return s1=(0,we.Z)(function*(n,t,e,i){const r=at(n);if(r.dc)return void qe("SyncEngine","Ignoring unexpected query state notification.");const s=r.rc.get(t);if(s&&s.length>0)switch(e){case"current":case"not-current":{const c=yield a$(r.localStore,$H(s[0])),d=nC.createSynthesizedRemoteEventForCurrentChange(t,"current"===e,kr.EMPTY_BYTE_STRING);yield gu(r,c,d);break}case"rejected":yield sy(r.localStore,t,!0),hy(r,t,i);break;default:Et()}}),s1.apply(this,arguments)}function EQ(n,t,e){return o1.apply(this,arguments)}function o1(){return o1=(0,we.Z)(function*(n,t,e){const i=a1(n);if(i.dc){for(const r of t){if(i.rc.has(r)){qe("SyncEngine","Adding an already active target "+r);continue}const s=yield o$(i.localStore,r),c=yield ry(i.localStore,s);yield VN(i,k$(s),c.targetId,!1,c.resumeToken),MT(i.remoteStore,c)}for(const r of e)i.rc.has(r)&&(yield sy(i.localStore,r,!1).then(()=>{yC(i.remoteStore,r),hy(i,r)}).catch(uh))}}),o1.apply(this,arguments)}function a1(n){const t=at(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=A$.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=gQ.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=uQ.bind(null,t),t.sc.zo=eQ.bind(null,t.eventManager),t.sc.wc=tQ.bind(null,t.eventManager),t}function l1(n){const t=at(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=dQ.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=hQ.bind(null,t),t}class R${constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,we.Z)(function*(){e.It=gC(t.databaseInfo.databaseId),e.sharedClientState=e.gc(t),e.persistence=e.yc(t),yield e.persistence.start(),e.localStore=e.Ic(t),e.gcScheduler=e.Tc(t,e.localStore),e.indexBackfillerScheduler=e.Ec(t,e.localStore)})()}Tc(t,e){return null}Ec(t,e){return null}Ic(t){return n$(this.persistence,new t$,t.initialUser,this.It)}yc(t){return new Jj(ET.Bs,this.It)}gc(t){return new d$}terminate(){var t=this;return(0,we.Z)(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class O$ extends R${constructor(t,e,i){super(),this.Ac=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,i=this;return(0,we.Z)(function*(){yield e().call(i,t),yield i.Ac.initialize(i,t),yield l1(i.Ac.syncEngine),yield ay(i.Ac.remoteStore),yield i.persistence.li(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(t){return n$(this.persistence,new t$,t.initialUser,this.It)}Tc(t,e){return new f7(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue,e)}Ec(t,e){const i=new ZK(e,this.persistence);return new KK(t.asyncQueue,i)}yc(t){const e=tN(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?oo.withCacheSize(this.cacheSizeBytes):oo.DEFAULT;return new eN(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,f$(),TT(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(t){return new d$}}class IQ extends O${constructor(t,e){super(t,e,!1),this.Ac=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,i=this;return(0,we.Z)(function*(){yield e().call(i,t);const r=i.Ac.syncEngine;i.sharedClientState instanceof uN&&(i.sharedClientState.syncEngine={Fr:vQ.bind(null,r),$r:CQ.bind(null,r),Br:EQ.bind(null,r),vi:wQ.bind(null,r),Mr:yQ.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.li(function(){var s=(0,we.Z)(function*(c){yield function bQ(n,t){return n1.apply(this,arguments)}(i.Ac.syncEngine,c),i.gcScheduler&&(c&&!i.gcScheduler.started?i.gcScheduler.start():c||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(c&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():c||i.indexBackfillerScheduler.stop())});return function(c){return s.apply(this,arguments)}}())})()}gc(t){const e=f$();if(!uN.C(e))throw new He(be.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=tN(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new uN(e,t.asyncQueue,i,t.clientId,t.initialUser)}}class c1{initialize(t,e){var i=this;return(0,we.Z)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(e),i.remoteStore=i.createRemoteStore(e),i.eventManager=i.createEventManager(e),i.syncEngine=i.createSyncEngine(e,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>T$(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=mQ.bind(null,i.syncEngine),yield TN(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new J7}createDatastore(t){const e=gC(t.databaseInfo.databaseId),i=new F7(t.databaseInfo);return new B7(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return e=this.localStore,i=this.datastore,r=t.asyncQueue,s=d=>T$(this.syncEngine,d,0),c=h$.C()?new h$:new O7,new j7(e,i,r,s,c);var e,i,r,s,c}createSyncEngine(t,e){return function(i,r,s,c,d,p,_){const w=new oQ(i,r,s,c,d,p);return _&&(w.dc=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return(t=(0,we.Z)(function*(e){const i=at(e);qe("RemoteStore","RemoteStore shutting down."),i.wu.add(5),yield oy(i),i.gu.shutdown(),i.yu.set("Unknown")}),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}function u1(n,t,e){if(!e)throw new He(be.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function P$(n,t,e,i){if(!0===t&&!0===i)throw new He(be.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function N$(n){if(!ot.isDocumentKey(n))throw new He(be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function F$(n){if(ot.isDocumentKey(n))throw new He(be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function kT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const t=(e=n).constructor?e.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var e;return"function"==typeof n?"a function":Et()}function Sn(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new He(be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=kT(n);throw new He(be.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function L$(n,t){if(t<=0)throw new He(be.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}const V$=new Map;class B${constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new He(be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new He(be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,P$("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class vC{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new B$({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new He(be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new He(be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new B$(t),void 0!==t.credentials&&(this._authCredentials=function(e){if(!e)return new LK;switch(e.type){case"gapi":return new HK(e.client,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new He(be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=V$.get(t);e&&(qe("ComponentProvider","Removing Datastore"),V$.delete(t),e.terminate())}(this),Promise.resolve()}}function U$(n,t,e,i={}){var r;const s=(n=Sn(n,vC))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&Lp("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${e}`,ssl:!1})),i.mockUserToken){let c,d;if("string"==typeof i.mockUserToken)c=i.mockUserToken,d=Br.MOCK_USER;else{c=(0,V.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new He(be.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Br(p)}n._authCredentials=new VK(new fH(c,d))}}class ki{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xl(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ki(this.firestore,t,this._key)}}class ps{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new ps(this.firestore,t,this._query)}}class Xl extends ps{constructor(t,e,i){super(t,e,Y_(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ki(this.firestore,null,new ot(t))}withConverter(t){return new Xl(this.firestore,t,this._path)}}function H$(n,t,...e){if(n=(0,V.m9)(n),u1("collection","path",t),n instanceof vC){const i=Nn.fromString(t,...e);return F$(i),new Xl(n,null,i)}{if(!(n instanceof ki||n instanceof Xl))throw new He(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Nn.fromString(t,...e));return F$(i),new Xl(n.firestore,null,i)}}function RT(n,t,...e){if(n=(0,V.m9)(n),1===arguments.length&&(t=mH.R()),u1("doc","path",t),n instanceof vC){const i=Nn.fromString(t,...e);return N$(i),new ki(n,null,new ot(i))}{if(!(n instanceof ki||n instanceof Xl))throw new He(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Nn.fromString(t,...e));return N$(i),new ki(n.firestore,n instanceof Xl?n.converter:null,new ot(i))}}function j$(n,t){return n=(0,V.m9)(n),t=(0,V.m9)(t),(n instanceof ki||n instanceof Xl)&&(t instanceof ki||t instanceof Xl)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function d1(n,t){return n=(0,V.m9)(n),t=(0,V.m9)(t),n instanceof ps&&t instanceof ps&&n.firestore===t.firestore&&Qw(n._query,t._query)&&n.converter===t.converter}function $$(n,t=10240){let e=0;return{read:()=>(0,we.Z)(function*(){if(e<n.byteLength){const i={value:n.slice(e,e+t),done:!1};return e+=t,i}return{done:!0}})(),cancel:()=>(0,we.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class OT{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Rc(this.observer.next,t)}error(t){this.observer.error?this.Rc(this.observer.error,t):hr("Uncaught Error in snapshot listener:",t)}bc(){this.muted=!0}Rc(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class AQ{constructor(t,e){this.Pc=t,this.It=e,this.metadata=new xr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(i=>{i&&i.Ou()?this.metadata.resolve(i.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.payload)}`))},i=>this.metadata.reject(i))}close(){return this.Pc.cancel()}getMetadata(){var t=this;return(0,we.Z)(function*(){return t.metadata.promise})()}mc(){var t=this;return(0,we.Z)(function*(){return yield t.getMetadata(),t.Vc()})()}Vc(){var t=this;return(0,we.Z)(function*(){const e=yield t.Sc();if(null===e)return null;const i=t.vc.decode(e),r=Number(i);isNaN(r)&&t.Dc(`length string (${i}) is not valid number`);const s=yield t.Cc(r);return new nQ(JSON.parse(s),e.length+r)})()}xc(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}Sc(){var t=this;return(0,we.Z)(function*(){for(;t.xc()<0&&!(yield t.Nc()););if(0===t.buffer.length)return null;const e=t.xc();e<0&&t.Dc("Reached the end of bundle when a length string is expected.");const i=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),i})()}Cc(t){var e=this;return(0,we.Z)(function*(){for(;e.buffer.length<t;)(yield e.Nc())&&e.Dc("Reached the end of bundle when more is expected.");const i=e.vc.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),i})()}Dc(t){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${t}`)}Nc(){var t=this;return(0,we.Z)(function*(){const e=yield t.Pc.read();if(!e.done){const i=new Uint8Array(t.buffer.length+e.value.length);i.set(t.buffer),i.set(e.value,t.buffer.length),t.buffer=i}return e.done})()}}class xQ{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,we.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new He(be.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,we.Z)(function*(s,c){const d=at(s),p=oC(d.It)+"/documents",_={documents:c.map(O=>sC(d.It,O))},w=yield d._o("BatchGetDocuments",p,_,c.length),I=new Map;w.forEach(O=>{const U=function MZ(n,t){return"found"in t?function(e,i){Wt(!!i.found);const r=Zl(e,i.found.name),s=Ur(i.found.updateTime),c=new is({mapValue:{fields:i.found.fields}});return Si.newFoundDocument(r,s,c)}(n,t):"missing"in t?function(e,i){Wt(!!i.missing),Wt(!!i.readTime);const r=Zl(e,i.missing),s=Ur(i.readTime);return Si.newNoDocument(r,s)}(n,t):Et()}(d.It,O);I.set(U.key.toString(),U)});const T=[];return c.forEach(O=>{const U=I.get(O.toString());Wt(!!U),T.push(U)}),T}),function(s,c){return r.apply(this,arguments)})(e.datastore,t);var r;return i.forEach(r=>e.recordVersion(r)),i})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new J_(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,we.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var i;t.mutations.forEach(i=>{e.delete(i.key.toString())}),e.forEach((i,r)=>{const s=ot.fromPath(r);t.mutations.push(new UP(s,t.precondition(s)))}),yield(i=(0,we.Z)(function*(r,s){const c=at(r),d=oC(c.It)+"/documents",p={writes:s.map(_=>aC(c.It,_))};yield c.ao("Commit",d,p)}),function(r,s){return i.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Et();e=qt.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!e.isEqual(i))throw new He(be.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual(qt.min())?Ui.exists(!1):Ui.updateTime(e):Ui.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(qt.min()))throw new He(be.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ui.updateTime(e)}return Ui.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class kQ{constructor(t,e,i,r,s){this.asyncQueue=t,this.datastore=e,this.options=i,this.updateFunction=r,this.deferred=s,this.kc=i.maxAttempts,this.No=new dN(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var t=this;this.No.Ro((0,we.Z)(function*(){const e=new xQ(t.datastore),i=t.Mc(e);i&&i.then(r=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(r)}).catch(s=>{t.Fc(s)}))}).catch(r=>{t.Fc(r)})}))}Mc(t){try{const e=this.updateFunction(t);return!Gw(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Fc(t){this.kc>0&&this.$c(t)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(t)}$c(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||!rj(e)}return!1}}class RQ{constructor(t,e,i,r){var s=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=Br.UNAUTHENTICATED,this.clientId=mH.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var c=(0,we.Z)(function*(d){qe("FirestoreClient","Received user=",d.uid),yield s.authCredentialListener(d),s.user=d});return function(d){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(i,c=>(qe("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var t=this;return(0,we.Z)(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new He(be.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new xr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{t.onlineComponents&&(yield t.onlineComponents.terminate()),t.offlineComponents&&(yield t.offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(i){const r=cy(i,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}function z$(n,t){return h1.apply(this,arguments)}function h1(){return h1=(0,we.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress(),qe("FirestoreClient","Initializing OfflineComponentProvider");const e=yield n.getConfiguration();yield t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(function(){var r=(0,we.Z)(function*(s){i.isEqual(s)||(yield i$(t.localStore,s),i=s)});return function(s){return r.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=t}),h1.apply(this,arguments)}function G$(n,t){return f1.apply(this,arguments)}function f1(){return f1=(0,we.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress();const e=yield p1(n);qe("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield t.initialize(e,i),n.setCredentialChangeListener(r=>b$(t.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>b$(t.remoteStore,s)),n.onlineComponents=t}),f1.apply(this,arguments)}function p1(n){return m1.apply(this,arguments)}function m1(){return m1=(0,we.Z)(function*(n){return n.offlineComponents||(qe("FirestoreClient","Using default OfflineComponentProvider"),yield z$(n,new R$)),n.offlineComponents}),m1.apply(this,arguments)}function PT(n){return g1.apply(this,arguments)}function g1(){return g1=(0,we.Z)(function*(n){return n.onlineComponents||(qe("FirestoreClient","Using default OnlineComponentProvider"),yield G$(n,new c1)),n.onlineComponents}),g1.apply(this,arguments)}function W$(n){return p1(n).then(t=>t.persistence)}function NT(n){return p1(n).then(t=>t.localStore)}function _1(n){return PT(n).then(t=>t.remoteStore)}function y1(n){return PT(n).then(t=>t.syncEngine)}function fy(n){return v1.apply(this,arguments)}function v1(){return v1=(0,we.Z)(function*(n){const t=yield PT(n),e=t.eventManager;return e.onListen=aQ.bind(null,t.syncEngine),e.onUnlisten=lQ.bind(null,t.syncEngine),e}),v1.apply(this,arguments)}function Y$(n,t,e={}){const i=new xr;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(r,s,c,d,p){const _=new OT({next:I=>{s.enqueueAndForget(()=>ON(r,w));const T=I.docs.has(c);!T&&I.fromCache?p.reject(new He(be.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&I.fromCache&&d&&"server"===d.source?p.reject(new He(be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(I)},error:I=>p.reject(I)}),w=new FN(Y_(c.path),_,{includeMetadataChanges:!0,ku:!0});return kN(r,w)}(yield fy(n),n.asyncQueue,t,e,i)})),i.promise}function K$(n,t,e={}){const i=new xr;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(r,s,c,d,p){const _=new OT({next:I=>{s.enqueueAndForget(()=>ON(r,w)),I.fromCache&&"server"===d.source?p.reject(new He(be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(I)},error:I=>p.reject(I)}),w=new FN(c,_,{includeMetadataChanges:!0,ku:!0});return kN(r,w)}(yield fy(n),n.asyncQueue,t,e,i)})),i.promise}class UQ{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.No=new dN(this,"async_queue_retry"),this.Wc=()=>{const e=TT();e&&qe("AsyncQueue","Visibility state changed to "+e.visibilityState),this.No.Po()};const t=TT();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.zc(),this.Hc(t)}enterRestrictedMode(t){if(!this.Uc){this.Uc=!0,this.Qc=t||!1;const e=TT();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Wc)}}enqueue(t){if(this.zc(),this.Uc)return new Promise(()=>{});const e=new xr;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Lc.push(t),this.Jc()))}Jc(){var t=this;return(0,we.Z)(function*(){if(0!==t.Lc.length){try{yield t.Lc[0](),t.Lc.shift(),t.No.reset()}catch(e){if(!dh(e))throw e;qe("AsyncQueue","Operation failed with retryable error: "+e)}t.Lc.length>0&&t.No.Ro(()=>t.Jc())}})()}Hc(t){const e=this.Bc.then(()=>(this.Gc=!0,t().catch(i=>{throw this.Kc=i,this.Gc=!1,hr("INTERNAL UNHANDLED ERROR: ",function(s){let c=s.message||"";return s.stack&&(c=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),c}(i)),i}).then(i=>(this.Gc=!1,i))));return this.Bc=e,e}enqueueAfterDelay(t,e,i){this.zc(),this.jc.indexOf(t)>-1&&(e=0);const r=xN.createAndSchedule(this,t,e,i,s=>this.Yc(s));return this.qc.push(r),r}zc(){this.Kc&&Et()}verifyOperationInProgress(){}Xc(){var t=this;return(0,we.Z)(function*(){let e;do{e=t.Bc,yield e}while(e!==t.Bc)})()}Zc(t){for(const e of this.qc)if(e.timerId===t)return!0;return!1}ta(t){return this.Xc().then(()=>{this.qc.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.qc)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Xc()})}ea(t){this.jc.push(t)}Yc(t){const e=this.qc.indexOf(t);this.qc.splice(e,1)}}function b1(n){return function(t,e){if("object"!=typeof t||null===t)return!1;const i=t;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class HQ{constructor(){this._progressObserver={},this._taskCompletionResolver=new xr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,i){this._progressObserver={next:t,error:e,complete:i}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class Ri extends vC{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=new UQ,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Z$(this),this._firestoreClient.terminate()}}function $Q(n,t){const e="object"==typeof n?n:(0,Pr.getApp)(),i="string"==typeof n?n:t||"(default)",r=(0,Pr._getProvider)(e,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=(0,V.P0)("firestore");s&&U$(r,...s)}return r}function fr(n){return n._firestoreClient||Z$(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Z$(n){var t;const e=n._freezeSettings(),i=(s=(null===(t=n._app)||void 0===t?void 0:t.options.appId)||"",new JK(n._databaseId,s,n._persistenceKey,(d=e).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams));var s,d;n._firestoreClient=new RQ(n._authCredentials,n._appCheckCredentials,n._queue,i)}function Q$(n,t,e){const i=new xr;return n.asyncQueue.enqueue((0,we.Z)(function*(){try{yield z$(n,e),yield G$(n,t),i.resolve()}catch(r){const s=r;if(!("FirebaseError"===(c=s).name?c.code===be.FAILED_PRECONDITION||c.code===be.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw s;Lp("Error enabling offline persistence. Falling back to persistence disabled: "+s),i.reject(s)}var c})).then(()=>i.promise)}function X$(n){if(n._initialized||n._terminated)throw new He(be.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Jl{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Jl(kr.fromBase64String(t))}catch(e){throw new He(be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Jl(kr.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class _u{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new He(be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ji(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class tm{constructor(t){this._methodName=t}}class FT{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new He(be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new He(be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return sn(this._lat,t._lat)||sn(this._long,t._long)}}const XQ=/^__.*__$/;class JQ{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return null!==this.fieldMask?new pu(t,this.data,this.fieldMask,e,this.fieldTransforms):new X_(t,this.data,e,this.fieldTransforms)}}class J${constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new pu(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function ez(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Et()}}class LT{constructor(t,e,i,r,s,c){this.settings=t,this.databaseId=e,this.It=i,this.ignoreUndefinedProperties=r,void 0===s&&this.na(),this.fieldTransforms=s||[],this.fieldMask=c||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(t){return new LT(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.ia({path:i,oa:!1});return r.ua(t),r}ca(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.ia({path:i,oa:!1});return r.na(),r}aa(t){return this.ia({path:void 0,oa:!0})}ha(t){return UT(t,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}na(){if(this.path)for(let t=0;t<this.path.length;t++)this.ua(this.path.get(t))}ua(t){if(0===t.length)throw this.ha("Document fields must not be empty");if(ez(this.sa)&&XQ.test(t))throw this.ha('Document fields cannot begin and end with "__"')}}class e9{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.It=i||gC(t)}da(t,e,i,r=!1){return new LT({sa:t,methodName:e,fa:i,path:Ji.emptyPath(),oa:!1,la:r},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function nm(n){const t=n._freezeSettings(),e=gC(n._databaseId);return new e9(n._databaseId,!!t.ignoreUndefinedProperties,e)}function VT(n,t,e,i,r,s={}){const c=n.da(s.merge||s.mergeFields?2:0,t,e,r);D1("Data must be an object, but it was:",c,i);const d=iz(i,c);let p,_;if(s.merge)p=new No(c.fieldMask),_=c.fieldTransforms;else if(s.mergeFields){const w=[];for(const I of s.mergeFields){const T=I1(t,I,e);if(!c.contains(T))throw new He(be.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);sz(w,T)||w.push(T)}p=new No(w),_=c.fieldTransforms.filter(I=>p.covers(I.field))}else p=null,_=c.fieldTransforms;return new JQ(new is(d),p,_)}class bC extends tm{_toFieldTransform(t){if(2!==t.sa)throw t.ha(1===t.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof bC}}function tz(n,t,e){return new LT({sa:3,fa:t.settings.fa,methodName:n._methodName,oa:e},t.databaseId,t.It,t.ignoreUndefinedProperties)}class w1 extends tm{_toFieldTransform(t){return new Xw(t.path,new Z_)}isEqual(t){return t instanceof w1}}class t9 extends tm{constructor(t,e){super(t),this._a=e}_toFieldTransform(t){const e=tz(this,t,!0),i=this._a.map(s=>im(s,e)),r=new Gp(i);return new Xw(t.path,r)}isEqual(t){return this===t}}class n9 extends tm{constructor(t,e){super(t),this._a=e}_toFieldTransform(t){const e=tz(this,t,!0),i=this._a.map(s=>im(s,e)),r=new Wp(i);return new Xw(t.path,r)}isEqual(t){return this===t}}class r9 extends tm{constructor(t,e){super(t),this.wa=e}_toFieldTransform(t){const e=new Q_(t.It,qH(t.It,this.wa));return new Xw(t.path,e)}isEqual(t){return this===t}}function C1(n,t,e,i){const r=n.da(1,t,e);D1("Data must be an object, but it was:",r,i);const s=[],c=is.empty();Up(i,(p,_)=>{const w=BT(t,p,e);_=(0,V.m9)(_);const I=r.ca(w);if(_ instanceof bC)s.push(w);else{const T=im(_,I);null!=T&&(s.push(w),c.set(w,T))}});const d=new No(s);return new J$(c,d,r.fieldTransforms)}function E1(n,t,e,i,r,s){const c=n.da(1,t,e),d=[I1(t,i,e)],p=[r];if(s.length%2!=0)throw new He(be.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<s.length;T+=2)d.push(I1(t,s[T])),p.push(s[T+1]);const _=[],w=is.empty();for(let T=d.length-1;T>=0;--T)if(!sz(_,d[T])){const O=d[T];let U=p[T];U=(0,V.m9)(U);const W=c.ca(O);if(U instanceof bC)_.push(O);else{const ie=im(U,W);null!=ie&&(_.push(O),w.set(O,ie))}}const I=new No(_);return new J$(w,I,c.fieldTransforms)}function nz(n,t,e,i=!1){return im(e,n.da(i?4:3,t))}function im(n,t){if(rz(n=(0,V.m9)(n)))return D1("Unsupported field value:",t,n),iz(n,t);if(n instanceof tm)return function(e,i){if(!ez(i.sa))throw i.ha(`${e._methodName}() can only be used with update() and set()`);if(!i.path)throw i.ha(`${e._methodName}() is not currently supported inside arrays`);const r=e._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,t),null;if(void 0===n&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.oa&&4!==t.sa)throw t.ha("Nested arrays are not supported");return function(e,i){const r=[];let s=0;for(const c of e){let d=im(c,i.aa(s));null==d&&(d={nullValue:"NULL_VALUE"}),r.push(d),s++}return{arrayValue:{values:r}}}(n,t)}return function(e,i){if(null===(e=(0,V.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return qH(i.It,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const r=Bi.fromDate(e);return{timestampValue:rC(i.It,r)}}if(e instanceof Bi){const r=new Bi(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:rC(i.It,r)}}if(e instanceof FT)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Jl)return{bytesValue:pj(i.It,e._byteString)};if(e instanceof ki){const r=i.databaseId,s=e.firestore._databaseId;if(!s.isEqual(r))throw i.ha(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:HP(e.firestore._databaseId||i.databaseId,e._key.path)}}throw i.ha(`Unsupported field value: ${kT(e)}`)}(n,t)}function iz(n,t){const e={};return EH(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Up(n,(i,r)=>{const s=im(r,t.ra(i));null!=s&&(e[i]=s)}),{mapValue:{fields:e}}}function rz(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Bi||n instanceof FT||n instanceof Jl||n instanceof ki||n instanceof tm)}function D1(n,t,e){if(!rz(e)||"object"!=typeof(i=e)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=kT(e);throw t.ha("an object"===i?n+" a custom object":n+" "+i)}var i}function I1(n,t,e){if((t=(0,V.m9)(t))instanceof _u)return t._internalPath;if("string"==typeof t)return BT(n,t);throw UT("Field path arguments must be of type string or ",n,!1,void 0,e)}const s9=new RegExp("[~\\*/\\[\\]]");function BT(n,t,e){if(t.search(s9)>=0)throw UT(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new _u(...t.split("."))._internalPath}catch{throw UT(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function UT(n,t,e,i,r){const s=i&&!i.isEmpty(),c=void 0!==r;let d=`Function ${t}() called with invalid data`;e&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(s||c)&&(p+=" (found",s&&(p+=` in field ${i}`),c&&(p+=` in document ${r}`),p+=")"),new He(be.INVALID_ARGUMENT,d+n+p)}function sz(n,t){return n.some(e=>e.isEqual(t))}class wC{constructor(t,e,i,r,s){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ki(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new o9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(HT("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class o9 extends wC{data(){return super.data()}}function HT(n,t){return"string"==typeof t?BT(n,t):t instanceof _u?t._internalPath:t._delegate._internalPath}function oz(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new He(be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class CC{}function Ch(n,...t){for(const e of t)n=e._apply(n);return n}class a9 extends CC{constructor(t,e,i){super(),this.ma=t,this.ga=e,this.ya=i,this.type="where"}_apply(t){const e=nm(t.firestore),i=function(r,s,c,d,p,_,w){let I;if(p.isKeyField()){if("array-contains"===_||"array-contains-any"===_)throw new He(be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if("in"===_||"not-in"===_){hz(w,_);const O=[];for(const U of w)O.push(dz(d,r,U));I={arrayValue:{values:O}}}else I=dz(d,r,w)}else"in"!==_&&"not-in"!==_&&"array-contains-any"!==_||hz(w,_),I=nz(c,"where",w,"in"===_||"not-in"===_);const T=rs.create(p,_,I);return function(O,U){if(U.dt()){const ie=FP(O);if(null!==ie&&!ie.isEqual(U.field))throw new He(be.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ie.toString()}' and '${U.field.toString()}'`);const ze=NP(O);null!==ze&&fz(0,U.field,ze)}const W=function(ie,ze){for(const nt of ie.filters)if(ze.indexOf(nt.op)>=0)return nt.op;return null}(O,function(ie){switch(ie){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(U.op));if(null!==W)throw new He(be.INVALID_ARGUMENT,W===U.op?`Invalid query. You cannot use more than one '${U.op.toString()}' filter.`:`Invalid query. You cannot use '${U.op.toString()}' filters with '${W.toString()}' filters.`)}(r,T),T}(t._query,0,e,t.firestore._databaseId,this.ma,this.ga,this.ya);return new ps(t.firestore,t.converter,function(r,s){const c=r.filters.concat([s]);return new fu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),c,r.limit,r.limitType,r.startAt,r.endAt)}(t._query,i))}}class c9 extends CC{constructor(t,e){super(),this.ma=t,this.pa=e,this.type="orderBy"}_apply(t){const e=function(i,r,s){if(null!==i.startAt)throw new He(be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new He(be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new q_(r,s);return function(d,p){if(null===NP(d)){const _=FP(d);null!==_&&fz(0,_,p.field)}}(i,c),c}(t._query,this.ma,this.pa);return new ps(t.firestore,t.converter,function(i,r){const s=i.explicitOrderBy.concat([r]);return new fu(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,e))}}class az extends CC{constructor(t,e,i){super(),this.type=t,this.Ia=e,this.Ta=i}_apply(t){return new ps(t.firestore,t.converter,cT(t._query,this.Ia,this.Ta))}}class lz extends CC{constructor(t,e,i){super(),this.type=t,this.Ea=e,this.Aa=i}_apply(t){const e=uz(t,this.type,this.Ea,this.Aa);return new ps(t.firestore,t.converter,(r=e,new fu((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class cz extends CC{constructor(t,e,i){super(),this.type=t,this.Ea=e,this.Aa=i}_apply(t){const e=uz(t,this.type,this.Ea,this.Aa);return new ps(t.firestore,t.converter,(r=e,new fu((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function uz(n,t,e,i){if(e[0]=(0,V.m9)(e[0]),e[0]instanceof wC)return function(r,s,c,d,p){if(!d)throw new He(be.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const _=[];for(const w of K_(r))if(w.field.isKeyField())_.push($p(s,d.key));else{const I=d.data.field(w.field);if(RP(I))throw new He(be.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+w.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===I){const T=w.field.canonicalString();throw new He(be.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${T}' (used as the orderBy) does not exist.`)}_.push(I)}return new gh(_,p)}(n._query,n.firestore._databaseId,t,e[0]._document,i);{const r=nm(n.firestore);return function(s,c,d,p,_,w){const I=s.explicitOrderBy;if(_.length>I.length)throw new He(be.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const T=[];for(let O=0;O<_.length;O++){const U=_[O];if(I[O].field.isKeyField()){if("string"!=typeof U)throw new He(be.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof U}`);if(!LP(s)&&-1!==U.indexOf("/"))throw new He(be.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${U}' contains a slash.`);const W=s.path.child(Nn.fromString(U));if(!ot.isDocumentKey(W))throw new He(be.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${W}' is not because it contains an odd number of segments.`);const ie=new ot(W);T.push($p(c,ie))}else{const W=nz(d,p,U);T.push(W)}}return new gh(T,w)}(n._query,n.firestore._databaseId,r,t,e,i)}}function dz(n,t,e){if("string"==typeof(e=(0,V.m9)(e))){if(""===e)throw new He(be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!LP(t)&&-1!==e.indexOf("/"))throw new He(be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(Nn.fromString(e));if(!ot.isDocumentKey(i))throw new He(be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return $p(n,new ot(i))}if(e instanceof ki)return $p(n,e._key);throw new He(be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kT(e)}.`)}function hz(n,t){if(!Array.isArray(n)||0===n.length)throw new He(be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(n.length>10)throw new He(be.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function fz(n,t,e){if(!e.isEqual(t))throw new He(be.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${e.toString()}' instead.`)}class S1{convertValue(t,e="none"){switch(jp(t)){case 0:return null;case 1:return t.booleanValue;case 2:return tr(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Hp(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Et()}}convertObject(t,e){const i={};return Up(t.fields,(r,s)=>{i[r]=this.convertValue(s,e)}),i}convertGeoPoint(t){return new FT(tr(t.latitude),tr(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=IH(t);return null==i?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(zw(t));default:return null}}convertTimestamp(t){const e=hh(t);return new Bi(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=Nn.fromString(t);Wt(Ej(i));const r=new fh(i.get(1),i.get(3)),s=new ot(i.popFirst(5));return r.isEqual(e)||hr(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}function jT(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}class _9 extends S1{constructor(t){super(),this.firestore=t}convertBytes(t){return new Jl(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new ki(this.firestore,null,e)}}class rm{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class yu extends wC{constructor(t,e,i,r,s,c){super(t,e,i,r,c),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new EC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(HT("DocumentSnapshot.get",t));if(null!==i)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class EC extends yu{data(t={}){return super.data(t)}}class Eh{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new rm(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new EC(this._firestore,this._userDataWriter,i.key,i,new rm(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new He(be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>({type:"added",doc:new EC(i._firestore,i._userDataWriter,c.doc.key,c.doc,new rm(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>r||3!==c.type).map(c=>{const d=new EC(i._firestore,i._userDataWriter,c.doc.key,c.doc,new rm(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,_=-1;return 0!==c.type&&(p=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),1!==c.type&&(s=s.add(c.doc),_=s.indexOf(c.doc.key)),{type:y9(c.type),doc:d,oldIndex:p,newIndex:_}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function y9(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Et()}}function pz(n,t){return n instanceof yu&&t instanceof yu?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(null===n._document?null===t._document:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof Eh&&t instanceof Eh&&n._firestore===t._firestore&&d1(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}function mz(n){n=Sn(n,ki);const t=Sn(n.firestore,Ri);return Y$(fr(t),n._key).then(e=>A1(t,n,e))}class Dh extends S1{constructor(t){super(),this.firestore=t}convertBytes(t){return new Jl(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new ki(this.firestore,null,e)}}function gz(n,t,e){n=Sn(n,ki);const i=Sn(n.firestore,Ri),r=jT(n.converter,t,e);return py(i,[VT(nm(i),"setDoc",n._key,r,null!==n.converter,e).toMutation(n._key,Ui.none())])}function _z(n,t,e,...i){n=Sn(n,ki);const r=Sn(n.firestore,Ri),s=nm(r);let c;return c="string"==typeof(t=(0,V.m9)(t))||t instanceof _u?E1(s,"updateDoc",n._key,t,e,i):C1(s,"updateDoc",n._key,t),py(r,[c.toMutation(n._key,Ui.exists(!0))])}function yz(n,...t){var e,i,r;n=(0,V.m9)(n);let s={includeMetadataChanges:!1},c=0;"object"!=typeof t[c]||b1(t[c])||(s=t[c],c++);const d={includeMetadataChanges:s.includeMetadataChanges};if(b1(t[c])){const I=t[c];t[c]=null===(e=I.next)||void 0===e?void 0:e.bind(I),t[c+1]=null===(i=I.error)||void 0===i?void 0:i.bind(I),t[c+2]=null===(r=I.complete)||void 0===r?void 0:r.bind(I)}let p,_,w;if(n instanceof ki)_=Sn(n.firestore,Ri),w=Y_(n._key.path),p={next:I=>{t[c]&&t[c](A1(_,n,I))},error:t[c+1],complete:t[c+2]};else{const I=Sn(n,ps);_=Sn(I.firestore,Ri),w=I._query;const T=new Dh(_);p={next:O=>{t[c]&&t[c](new Eh(_,T,I,O))},error:t[c+1],complete:t[c+2]},oz(n._query)}return function(I,T,O,U){const W=new OT(U),ie=new FN(T,W,O);return I.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return kN(yield fy(I),ie)})),()=>{W.bc(),I.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return ON(yield fy(I),ie)}))}}(fr(_),w,d,p)}function py(n,t){return function(e,i){const r=new xr;return e.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function cQ(n,t,e){return HN.apply(this,arguments)}(yield y1(e),i,r)})),r.promise}(fr(n),t)}function A1(n,t,e){const i=e.docs.get(t._key),r=new Dh(n);return new yu(n,r,t._key,i,new rm(e.hasPendingWrites,e.fromCache),t.converter)}const A9={maxAttempts:5};class vz{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=nm(t)}set(t,e,i){this._verifyNotCommitted();const r=Ih(t,this._firestore),s=jT(r.converter,e,i),c=VT(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,i);return this._mutations.push(c.toMutation(r._key,Ui.none())),this}update(t,e,i,...r){this._verifyNotCommitted();const s=Ih(t,this._firestore);let c;return c="string"==typeof(e=(0,V.m9)(e))||e instanceof _u?E1(this._dataReader,"WriteBatch.update",s._key,e,i,r):C1(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(c.toMutation(s._key,Ui.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=Ih(t,this._firestore);return this._mutations=this._mutations.concat(new J_(e._key,Ui.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new He(be.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ih(n,t){if((n=(0,V.m9)(n)).firestore!==t)throw new He(be.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class T9 extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=nm(t)}get(t){const e=Ih(t,this._firestore),i=new _9(this._firestore);return this._transaction.lookup([e._key]).then(r=>{if(!r||1!==r.length)return Et();const s=r[0];if(s.isFoundDocument())return new wC(this._firestore,i,s.key,s,e.converter);if(s.isNoDocument())return new wC(this._firestore,i,e._key,null,e.converter);throw Et()})}set(t,e,i){const r=Ih(t,this._firestore),s=jT(r.converter,e,i),c=VT(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,i);return this._transaction.set(r._key,c),this}update(t,e,i,...r){const s=Ih(t,this._firestore);let c;return c="string"==typeof(e=(0,V.m9)(e))||e instanceof _u?E1(this._dataReader,"Transaction.update",s._key,e,i,r):C1(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,c),this}delete(t){const e=Ih(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=Ih(t,this._firestore),i=new Dh(this._firestore);return super.get(t).then(r=>new yu(this._firestore,i,e._key,r._document,new rm(!1,!1),e.converter))}}!function(n,t=!0){$_=Pr.SDK_VERSION,(0,Pr._registerComponent)(new gi.wA("firestore",(e,{instanceIdentifier:i,options:r})=>{const s=e.getProvider("app").getImmediate(),c=new Ri(new BK(e.getProvider("auth-internal")),new jK(e.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new He(be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fh(d.options.projectId,p)}(s,i),s);return r=Object.assign({useFetchStreams:t},r),c._setSettings(r),c},"PUBLIC").setMultipleInstances(!0)),(0,Pr.registerVersion)(hH,"3.7.0",n),(0,Pr.registerVersion)(hH,"3.7.0","esm2017")}();class T1{constructor(t){return t}}const wz="firestore",M1=new l.OlP("angularfire2.firestore-instances");function L9(n){return(t,e)=>{const i=t.runOutsideAngular(()=>n(e));return new T1(i)}}const V9={provide:class N9{constructor(){return(0,Lt.vb)(wz)}},deps:[[new l.FiY,M1]]},B9={provide:T1,useFactory:function F9(n,t){const e=(0,Lt.JM)(wz,n,t);return e&&new T1(e)},deps:[[new l.FiY,M1],Pa]};let U9=(()=>{class n{constructor(){(0,Ir.KN)("angularfire",Lt.q4.full,"fst")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[B9,V9]}),n})();function H9(n,...t){return{ngModule:U9,providers:[{provide:M1,useFactory:L9(n),multi:!0,deps:[l.R0b,l.zs3,Lt.HU,Mi,[new l.FiY,pV],[new l.FiY,Yu],...t]}]}}const j9=(0,Lt.u3)(mz,!0),$9=(0,Lt.u3)($Q,!0);function x1(n,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new He("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function Cz(){if(typeof Uint8Array>"u")throw new He("unimplemented","Uint8Arrays are not available in this environment.")}function Ez(){if(!function QK(){return typeof atob<"u"}())throw new He("unimplemented","Blobs are unavailable in Firestore in this environment.")}class DC{constructor(t){this._delegate=t}static fromBase64String(t){return Ez(),new DC(Jl.fromBase64String(t))}static fromUint8Array(t){return Cz(),new DC(Jl.fromUint8Array(t))}toBase64(){return Ez(),this._delegate.toBase64()}toUint8Array(){return Cz(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function k1(n){return function W9(n,t){if("object"!=typeof n||null===n)return!1;const e=n;for(const i of t)if(i in e&&"function"==typeof e[i])return!0;return!1}(n,["next","error","complete"])}class q9{enableIndexedDbPersistence(t,e){return function zQ(n,t){X$(n=Sn(n,Ri));const e=fr(n),i=n._freezeSettings(),r=new c1;return Q$(e,r,new O$(r,i.cacheSizeBytes,t?.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function GQ(n){X$(n=Sn(n,Ri));const t=fr(n),e=n._freezeSettings(),i=new c1;return Q$(t,i,new IQ(i,e.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function WQ(n){if(n._initialized&&!n._terminated)throw new He(be.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new xr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{yield(e=(0,we.Z)(function*(i){if(!nl.C())return Promise.resolve();const r=i+"main";yield nl.delete(r)}),function(i){return e.apply(this,arguments)})(tN(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var e})),t.promise}(t._delegate)}}class Dz{constructor(t,e,i){this._delegate=e,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},t instanceof fh||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&Lp("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,i={}){U$(this._delegate,t,e,i)}enableNetwork(){return function YQ(n){return function OQ(n){return n.asyncQueue.enqueue((0,we.Z)(function*(){const t=yield W$(n),e=yield _1(n);return t.setNetworkEnabled(!0),function(i){const r=at(i);return r.wu.delete(0),_C(r)}(e)}))}(fr(n=Sn(n,Ri)))}(this._delegate)}disableNetwork(){return function KQ(n){return function PQ(n){return n.asyncQueue.enqueue((0,we.Z)(function*(){const t=yield W$(n),e=yield _1(n);return t.setNetworkEnabled(!1),(i=(0,we.Z)(function*(r){const s=at(r);s.wu.add(0),yield oy(s),s.yu.set("Offline")}),function(r){return i.apply(this,arguments)})(e);var i}))}(fr(n=Sn(n,Ri)))}(this._delegate)}enablePersistence(t){let e=!1,i=!1;return t&&(e=!!t.synchronizeTabs,i=!!t.experimentalForceOwningTab,P$("synchronizeTabs",e,"experimentalForceOwningTab",i)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function qQ(n){return function(t){const e=new xr;return t.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function fQ(n,t){return WN.apply(this,arguments)}(yield y1(t),e)})),e.promise}(fr(n=Sn(n,Ri)))}(this._delegate)}onSnapshotsInSync(t){return function S9(n,t){return function LQ(n,t){const e=new OT(t);return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return i=yield fy(n),r=e,at(i).bu.add(r),void r.next();var i,r})),()=>{e.bc(),n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return i=yield fy(n),r=e,void at(i).bu.delete(r);var i,r}))}}(fr(n=Sn(n,Ri)),b1(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new He("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new my(this,H$(this._delegate,t))}catch(e){throw Ns(e,"collection()","Firestore.collection()")}}doc(t){try{return new ha(this,RT(this._delegate,t))}catch(e){throw Ns(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new Fs(this,function SQ(n,t){if(n=Sn(n,vC),u1("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new He(be.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ps(n,null,(e=t,new fu(Nn.emptyPath(),e)));var e}(this._delegate,t))}catch(e){throw Ns(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function M9(n,t,e){n=Sn(n,Ri);const i=Object.assign(Object.assign({},A9),e);return function(r){if(r.maxAttempts<1)throw new He(be.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(r,s,c){const d=new xr;return r.asyncQueue.enqueueAndForget((0,we.Z)(function*(){const p=yield function q$(n){return PT(n).then(t=>t.datastore)}(r);new kQ(r.asyncQueue,p,c,s,d).run()})),d.promise}(fr(n),r=>t(new T9(n,r)),i)}(this._delegate,e=>t(new Iz(this,e)))}batch(){return fr(this._delegate),new Sz(new vz(this._delegate,t=>py(this._delegate,t)))}loadBundle(t){return function ZQ(n,t){const e=fr(n=Sn(n,Ri)),i=new HQ;return function VQ(n,t,e,i){const r=function(s,c){let d;return d="string"==typeof s?(new TextEncoder).encode(s):s,p=function(p,_){if(p instanceof Uint8Array)return $$(p,_);if(p instanceof ArrayBuffer)return $$(new Uint8Array(p),_);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new AQ(p,c);var p}(e,gC(t));n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){!function DQ(n,t,e){const i=at(n);var r;(r=(0,we.Z)(function*(s,c,d){try{const p=yield c.getMetadata();if(yield function(T,O){const U=at(T),W=Ur(O.createTime);return U.persistence.runTransaction("hasNewerBundle","readonly",ie=>U.Ns.getBundleMetadata(ie,O.id)).then(ie=>!!ie&&ie.createTime.compareTo(W)>=0)}(s.localStore,p))return yield c.close(),d._completeWith({taskState:"Success",documentsLoaded:(T=p).totalDocuments,bytesLoaded:T.totalBytes,totalDocuments:T.totalDocuments,totalBytes:T.totalBytes}),Promise.resolve(new Set);d._updateProgress(E$(p));const _=new iQ(p,s.localStore,c.It);let w=yield c.mc();for(;w;){const T=yield _.Fu(w);T&&d._updateProgress(T),w=yield c.mc()}const I=yield _.complete();return yield gu(s,I.Lu,void 0),yield function(T,O){const U=at(T);return U.persistence.runTransaction("Save bundle","readwrite",W=>U.Ns.saveBundleMetadata(W,O))}(s.localStore,p),d._completeWith(I.progress),Promise.resolve(I.Bu)}catch(p){return Lp("SyncEngine",`Loading bundle failed with ${p}`),d._failWith(p),Promise.resolve(new Set)}var T}),function(s,c,d){return r.apply(this,arguments)})(i,t,e).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield y1(n),r,i)}))}(e,n._databaseId,t,i),i}(this._delegate,t)}namedQuery(t){return function QQ(n,t){return function BQ(n,t){return n.asyncQueue.enqueue((0,we.Z)(function*(){return function(e,i){const r=at(e);return r.persistence.runTransaction("Get named query","readonly",s=>r.Ns.getNamedQuery(s,i))}(yield NT(n),t)}))}(fr(n=Sn(n,Ri)),t).then(e=>e?new ps(n,null,e.query):null)}(this._delegate,t).then(e=>e?new Fs(this,e):null)}}class $T extends S1{constructor(t){super(),this.firestore=t}convertBytes(t){return new DC(new Jl(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return ha.forKey(e,this.firestore,null)}}class Iz{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new $T(t)}get(t){const e=om(t);return this._delegate.get(e).then(i=>new IC(this._firestore,new yu(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,e.converter)))}set(t,e,i){const r=om(t);return i?(x1("Transaction.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=om(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=om(t);return this._delegate.delete(e),this}}class Sz{constructor(t){this._delegate=t}set(t,e,i){const r=om(t);return i?(x1("WriteBatch.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=om(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=om(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class sm{constructor(t,e,i){this._firestore=t,this._userDataWriter=e,this._delegate=i}fromFirestore(t,e){const i=new EC(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new SC(this._firestore,i),e??{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const i=sm.INSTANCES;let r=i.get(t);r||(r=new WeakMap,i.set(t,r));let s=r.get(e);return s||(s=new sm(t,new $T(t),e),r.set(e,s)),s}}sm.INSTANCES=new WeakMap;class ha{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new $T(t)}static forPath(t,e,i){if(t.length%2!=0)throw new He("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new ha(e,new ki(e._delegate,i,new ot(t)))}static forKey(t,e,i){return new ha(e,new ki(e._delegate,i,t))}get id(){return this._delegate.id}get parent(){return new my(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new my(this.firestore,H$(this._delegate,t))}catch(e){throw Ns(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,V.m9)(t))instanceof ki&&j$(this._delegate,t)}set(t,e){e=x1("DocumentReference.set",e);try{return e?gz(this._delegate,t,e):gz(this._delegate,t)}catch(i){throw Ns(i,"setDoc()","DocumentReference.set()")}}update(t,e,...i){try{return 1===arguments.length?_z(this._delegate,t):_z(this._delegate,t,e,...i)}catch(r){throw Ns(r,"updateDoc()","DocumentReference.update()")}}delete(){return function D9(n){return py(Sn(n.firestore,Ri),[new J_(n._key,Ui.none())])}(this._delegate)}onSnapshot(...t){const e=Az(t),i=Tz(t,r=>new IC(this.firestore,new yu(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return yz(this._delegate,e,i)}get(t){let e;return e="cache"===t?.source?function v9(n){n=Sn(n,ki);const t=Sn(n.firestore,Ri),e=fr(t),i=new Dh(t);return function NQ(n,t){const e=new xr;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(i=(0,we.Z)(function*(r,s,c){try{const d=yield function(p,_){const w=at(p);return w.persistence.runTransaction("read document","readonly",I=>w.localDocuments.getDocument(I,_))}(r,s);d.isFoundDocument()?c.resolve(d):d.isNoDocument()?c.resolve(null):c.reject(new He(be.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const p=cy(d,`Failed to get document '${s} from cache`);c.reject(p)}}),function(r,s,c){return i.apply(this,arguments)})(yield NT(n),t,e);var i})),e.promise}(e,n._key).then(r=>new yu(t,i,n._key,r,new rm(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===t?.source?function b9(n){n=Sn(n,ki);const t=Sn(n.firestore,Ri);return Y$(fr(t),n._key,{source:"server"}).then(e=>A1(t,n,e))}(this._delegate):mz(this._delegate),e.then(i=>new IC(this.firestore,new yu(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(t){return new ha(this.firestore,this._delegate.withConverter(t?sm.getInstance(this.firestore,t):null))}}function Ns(n,t,e){return n.message=n.message.replace(t,e),n}function Az(n){for(const t of n)if("object"==typeof t&&!k1(t))return t;return{}}function Tz(n,t){var e,i;let r;return r=k1(n[0])?n[0]:k1(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(t(s))},error:null===(e=r.error)||void 0===e?void 0:e.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class IC{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new ha(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return pz(this._delegate,t._delegate)}}class SC extends IC{data(t){const e=this._delegate.data(t);return function FK(n,t){n||Et()}(void 0!==e),e}}class Fs{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new $T(t)}where(t,e,i){try{return new Fs(this.firestore,Ch(this._delegate,function l9(n,t,e){const i=t,r=HT("where",n);return new a9(r,i,e)}(t,e,i)))}catch(r){throw Ns(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new Fs(this.firestore,Ch(this._delegate,function u9(n,t="asc"){const e=t,i=HT("orderBy",n);return new c9(i,e)}(t,e)))}catch(i){throw Ns(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new Fs(this.firestore,Ch(this._delegate,function d9(n){return L$("limit",n),new az("limit",n,"F")}(t)))}catch(e){throw Ns(e,"limit()","Query.limit()")}}limitToLast(t){try{return new Fs(this.firestore,Ch(this._delegate,function h9(n){return L$("limitToLast",n),new az("limitToLast",n,"L")}(t)))}catch(e){throw Ns(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new Fs(this.firestore,Ch(this._delegate,function f9(...n){return new lz("startAt",n,!0)}(...t)))}catch(e){throw Ns(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new Fs(this.firestore,Ch(this._delegate,function p9(...n){return new lz("startAfter",n,!1)}(...t)))}catch(e){throw Ns(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new Fs(this.firestore,Ch(this._delegate,function m9(...n){return new cz("endBefore",n,!1)}(...t)))}catch(e){throw Ns(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new Fs(this.firestore,Ch(this._delegate,function g9(...n){return new cz("endAt",n,!0)}(...t)))}catch(e){throw Ns(e,"endAt()","Query.endAt()")}}isEqual(t){return d1(this._delegate,t._delegate)}get(t){let e;return e="cache"===t?.source?function C9(n){n=Sn(n,ps);const t=Sn(n.firestore,Ri),e=fr(t),i=new Dh(t);return function FQ(n,t){const e=new xr;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(i=(0,we.Z)(function*(r,s,c){try{const d=yield IT(r,s,!0),p=new S$(s,d.Hi),_=p.Wu(d.documents),w=p.applyChanges(_,!1);c.resolve(w.snapshot)}catch(d){const p=cy(d,`Failed to execute query '${s} against cache`);c.reject(p)}}),function(r,s,c){return i.apply(this,arguments)})(yield NT(n),t,e);var i})),e.promise}(e,n._query).then(r=>new Eh(t,i,n,r))}(this._delegate):"server"===t?.source?function E9(n){n=Sn(n,ps);const t=Sn(n.firestore,Ri),e=fr(t),i=new Dh(t);return K$(e,n._query,{source:"server"}).then(r=>new Eh(t,i,n,r))}(this._delegate):function w9(n){n=Sn(n,ps);const t=Sn(n.firestore,Ri),e=fr(t),i=new Dh(t);return oz(n._query),K$(e,n._query).then(r=>new Eh(t,i,n,r))}(this._delegate),e.then(i=>new R1(this.firestore,new Eh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...t){const e=Az(t),i=Tz(t,r=>new R1(this.firestore,new Eh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return yz(this._delegate,e,i)}withConverter(t){return new Fs(this.firestore,this._delegate.withConverter(t?sm.getInstance(this.firestore,t):null))}}class K9{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new SC(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class R1{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new Fs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new SC(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new K9(this._firestore,e))}forEach(t,e){this._delegate.forEach(i=>{t.call(e,new SC(this._firestore,i))})}isEqual(t){return pz(this._delegate,t._delegate)}}class my extends Fs{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new ha(this.firestore,t):null}doc(t){try{return new ha(this.firestore,void 0===t?RT(this._delegate):RT(this._delegate,t))}catch(e){throw Ns(e,"doc()","CollectionReference.doc()")}}add(t){return function I9(n,t){const e=Sn(n.firestore,Ri),i=RT(n),r=jT(n.converter,t);return py(e,[VT(nm(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,Ui.exists(!1))]).then(()=>i)}(this._delegate,t).then(e=>new ha(this.firestore,e))}isEqual(t){return j$(this._delegate,t._delegate)}withConverter(t){return new my(this.firestore,this._delegate.withConverter(t?sm.getInstance(this.firestore,t):null))}}function om(n){return Sn(n,ki)}class O1{constructor(...t){this._delegate=new _u(...t)}static documentId(){return new O1(Ji.keyField().canonicalString())}isEqual(t){return(t=(0,V.m9)(t))instanceof _u&&this._delegate._internalPath.isEqual(t._internalPath)}}class am{constructor(t){this._delegate=t}static serverTimestamp(){const t=function k9(){return new w1("serverTimestamp")}();return t._methodName="FieldValue.serverTimestamp",new am(t)}static delete(){const t=function x9(){return new bC("deleteField")}();return t._methodName="FieldValue.delete",new am(t)}static arrayUnion(...t){const e=function R9(...n){return new t9("arrayUnion",n)}(...t);return e._methodName="FieldValue.arrayUnion",new am(e)}static arrayRemove(...t){const e=function O9(...n){return new n9("arrayRemove",n)}(...t);return e._methodName="FieldValue.arrayRemove",new am(e)}static increment(t){const e=function P9(n){return new r9("increment",n)}(t);return e._methodName="FieldValue.increment",new am(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const Z9={Firestore:Dz,GeoPoint:FT,Timestamp:Bi,Blob:DC,Transaction:Iz,WriteBatch:Sz,DocumentReference:ha,DocumentSnapshot:IC,Query:Fs,QueryDocumentSnapshot:SC,QuerySnapshot:R1,CollectionReference:my,FieldPath:O1,FieldValue:am,setLogLevel:function Y9(n){!function NK(n){ch.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function Mz(n,t){return function J9(n,t=Xu.z){return new Ni.y(e=>{let i;return null!=t?t.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},e)}):i=n.onSnapshot({includeMetadataChanges:!0},e),()=>{i?.()}})}(n,t)}function P1(n,t){return Mz(n,t).pipe((0,Ye.U)(e=>({payload:e,type:"query"})))}function zT(n,t){return P1(n,t).pipe(Gi(void 0),jS(),(0,Ye.U)(([e,i])=>{const r=i.payload.docChanges(),s=r.map(c=>({type:c.type,payload:c}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((c,d)=>{const p=r.find(w=>w.doc.ref.isEqual(c.ref)),_=e?.payload.docs.find(w=>w.ref.isEqual(c.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(c.metadata)||!p&&_&&JSON.stringify(_.metadata)===JSON.stringify(c.metadata)||s.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:c}})}),s}))}function xz(n,t,e){return zT(n,e).pipe(Ju((i,r)=>function tX(n,t,e){return t.forEach(i=>{e.indexOf(i.type)>-1&&(n=function nX(n,t){switch(t.type){case"added":if(!n[t.newIndex]||!n[t.newIndex].doc.ref.isEqual(t.doc.ref))return N1(n,t.newIndex,0,t);break;case"modified":if(null==n[t.oldIndex]||n[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=n.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return N1(n,t.newIndex,1,t)}break;case"removed":if(n[t.oldIndex]&&n[t.oldIndex].doc.ref.isEqual(t.doc.ref))return N1(n,t.oldIndex,1)}return n}(n,i))}),n}(i,r.map(s=>s.payload),t),[]),ed(),(0,Ye.U)(i=>i.map(r=>({type:r.type,payload:r}))))}function N1(n,t,e,...i){const r=n.slice();return r.splice(t,e,...i),r}function kz(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function X9(n){(function Q9(n,t){n.INTERNAL.registerComponent(new gi.wA("firestore-compat",e=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(i,r)},"PUBLIC").setServiceProps(Object.assign({},Z9)))})(n,(t,e)=>new Dz(t,e,new q9)),n.registerVersion("@firebase/firestore-compat","0.2.0")}(eM.Z);class Rz{constructor(t,e,i){this.ref=t,this.query=e,this.afs=i}stateChanges(t){let e=zT(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,Ye.U)(i=>i.filter(r=>t.indexOf(r.type)>-1)))),e.pipe(Gi(void 0),jS(),tn(([i,r])=>r.length>0||!i),(0,Ye.U)(([i,r])=>r),Lt.iC)}auditTrail(t){return this.stateChanges(t).pipe(Ju((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=kz(t);return xz(this.query,e,this.afs.schedulers.outsideAngular).pipe(Lt.iC)}valueChanges(t={}){return P1(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ye.U)(e=>e.payload.docs.map(i=>t.idField?Object.assign(Object.assign({},i.data()),{[t.idField]:i.id}):i.data())),Lt.iC)}get(t){return(0,On.D)(this.query.get(t)).pipe(Lt.iC)}add(t){return this.ref.add(t)}doc(t){return new Oz(this.ref.doc(t),this.afs)}}class Oz{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const i=this.ref.collection(t),{ref:r,query:s}=Pz(i,e);return new Rz(r,s,this.afs)}snapshotChanges(){return function eX(n,t){return Mz(n,t).pipe(Gi(void 0),jS(),(0,Ye.U)(([e,i])=>i.exists?e?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Lt.iC)}valueChanges(t={}){return this.snapshotChanges().pipe((0,Ye.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,On.D)(this.ref.get(t)).pipe(Lt.iC)}}class iX{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?zT(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ye.U)(e=>e.filter(i=>t.indexOf(i.type)>-1)),tn(e=>e.length>0),Lt.iC):zT(this.query,this.afs.schedulers.outsideAngular).pipe(Lt.iC)}auditTrail(t){return this.stateChanges(t).pipe(Ju((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=kz(t);return xz(this.query,e,this.afs.schedulers.outsideAngular).pipe(Lt.iC)}valueChanges(t={}){return P1(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ye.U)(i=>i.payload.docs.map(r=>t.idField?Object.assign({[t.idField]:r.id},r.data()):r.data())),Lt.iC)}get(t){return(0,On.D)(this.query.get(t)).pipe(Lt.iC)}}const rX=new l.OlP("angularfire2.enableFirestorePersistence"),sX=new l.OlP("angularfire2.firestore.persistenceSettings"),oX=new l.OlP("angularfire2.firestore.settings"),aX=new l.OlP("angularfire2.firestore.use-emulator");function Pz(n,t=(e=>e)){return{query:t(n),ref:n}}let lX=(()=>{class n{constructor(e,i,r,s,c,d,p,_,w,I,T,O,U,W,ie,ze,nt){this.schedulers=p;const ft=(0,ai.on)(e,d,i),bt=w;I&&av(ft,d,T,U,W,ie,O,ze),[this.firestore,this.persistenceEnabled$]=(0,ai.cc)(`${ft.name}.firestore`,"AngularFirestore",ft.name,()=>{const Ut=d.runOutsideAngular(()=>ft.firestore());if(s&&Ut.settings(s),bt&&Ut.useEmulator(...bt),r&&!Hs(c)){const zt=()=>{try{return(0,On.D)(Ut.enablePersistence(_||void 0).then(()=>!0,()=>!1))}catch(Mn){return typeof console<"u"&&console.warn(Mn),Je(!1)}};return[Ut,d.runOutsideAngular(zt)]}return[Ut,Je(!1)]},[s,bt,r])}collection(e,i){let r;r="string"==typeof e?this.firestore.collection(e):e;const{ref:s,query:c}=Pz(r,i),d=this.schedulers.ngZone.run(()=>s);return new Rz(d,c,this)}collectionGroup(e,i){const r=i||(c=>c),s=this.firestore.collectionGroup(e);return new iX(r(s),this)}doc(e){let i;i="string"==typeof e?this.firestore.doc(e):e;const r=this.schedulers.ngZone.run(()=>i);return new Oz(r,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ai.Dh),l.LFG(ai.xv,8),l.LFG(rX,8),l.LFG(oX,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(Lt.HU),l.LFG(sX,8),l.LFG(aX,8),l.LFG(Qu,8),l.LFG(iv,8),l.LFG(rv,8),l.LFG($m,8),l.LFG(wl,8),l.LFG(sv,8),l.LFG(ov,8),l.LFG(Yu,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Nz=(()=>{class n{constructor(e,i){this.db=e,this.dateService=i,this.collection=e.collection("badges")}ngOnInit(){}getCollection(){return this.collection.snapshotChanges().pipe(ed(),(0,Ye.U)(e=>e.map(i=>({key:i.payload.doc.id,...i.payload.doc.data()}))),_n(e=>e.length?$g(e.map(function(){var i=(0,we.Z)(function*(r){if(!r.user)return{...r,timestamp:r.timestamp?.toDate().toISOString()};const s=yield j9(r.user),c=s.data();return{...r,timestamp:r.timestamp?.toDate().toISOString(),user:{uid:s.id,...c}}});return function(r){return i.apply(this,arguments)}}())):Je([])))}create(e){var i=this;return(0,we.Z)(function*(){if(!e?.userId)return;const r=i.db.doc(`users/${e.userId}`).ref;return i.collection.add({clock:e.clock,timestamp:i.dateService.isoToJsDate(e.timestamp)??new Date,user:r})})()}update(e,i){var r=this;return(0,we.Z)(function*(){return r.collection.doc(e).update({clock:i.clock,timestamp:r.dateService.isoToJsDate(i.timestamp)??new Date})})()}deleteByKey(e){return this.collection.doc(e).delete()}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(lX),l.LFG(AA))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function cX(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"button",9),l.NdJ("click",function(){l.CHM(e);const r=l.oxw(2);return l.KtG(r.startNfcScan())}),l.TgZ(1,"span"),l._uU(2,"Start"),l.qZA(),l.TgZ(3,"mat-icon"),l._uU(4,"play_arrow"),l.qZA()()}}function uX(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"button",10),l.NdJ("click",function(){l.CHM(e);const r=l.oxw(2);return l.KtG(r.stopNfcScan())}),l.TgZ(1,"span"),l._uU(2,"Stop"),l.qZA(),l.TgZ(3,"mat-icon"),l._uU(4,"stop"),l.qZA()()}}function dX(n,t){1&n&&(l.TgZ(0,"li"),l._uU(1," Click the button to start NFC service "),l.qZA())}function hX(n,t){1&n&&(l.TgZ(0,"li")(1,"strong"),l._uU(2,"Grant permission manually in browser settings"),l.qZA(),l._uU(3," (you've blocked NFC permission when asked) "),l.qZA())}function fX(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"button",13),l.NdJ("click",function(){l.CHM(e);const r=l.oxw(3);return l.KtG(r.stopWriteNfc())}),l.TgZ(1,"span"),l._uU(2,"STOP"),l.qZA(),l._uU(3,"\xa0"),l.TgZ(4,"mat-icon"),l._uU(5,"stop"),l.qZA()()}}function pX(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div")(1,"div")(2,"strong"),l._uU(3,"Tag administration section"),l.qZA()(),l.TgZ(4,"div")(5,"button",11),l.NdJ("click",function(){l.CHM(e);const r=l.oxw(2);return l.KtG(r.startWriteNfc("in"))}),l.TgZ(6,"span"),l._uU(7,"Write IN"),l.qZA(),l._uU(8,"\xa0"),l.TgZ(9,"mat-icon"),l._uU(10,"login"),l.qZA()(),l.TgZ(11,"button",11),l.NdJ("click",function(){l.CHM(e);const r=l.oxw(2);return l.KtG(r.startWriteNfc("out"))}),l.TgZ(12,"span"),l._uU(13,"Write OUT"),l.qZA(),l._uU(14,"\xa0"),l.TgZ(15,"mat-icon"),l._uU(16,"logout"),l.qZA()(),l.YNc(17,fX,6,0,"button",12),l.qZA()()}if(2&n){const e=l.oxw(2);l.xp6(17),l.Q6J("ngIf","started"===e.nfcWriteRunningState)}}function mX(n,t){if(1&n&&(l.TgZ(0,"mat-card")(1,"mat-card-title"),l._uU(2,"NFC badge"),l.qZA(),l.TgZ(3,"mat-card-content")(4,"div"),l._uU(5,"Running status: "),l.TgZ(6,"strong"),l._uU(7),l.qZA()(),l.TgZ(8,"div"),l._uU(9,"Permission status: "),l.TgZ(10,"strong"),l._uU(11),l.qZA()(),l.TgZ(12,"div",6),l.YNc(13,cX,5,0,"button",7),l.YNc(14,uX,5,0,"button",8),l.qZA(),l.TgZ(15,"strong"),l._uU(16,"To use NFC:"),l.qZA(),l.TgZ(17,"ul"),l.YNc(18,dX,2,0,"li",1),l.YNc(19,hX,4,0,"li",1),l.TgZ(20,"li"),l._uU(21," Activate the NFC feature in the smartphone settings "),l.qZA(),l.TgZ(22,"li"),l._uU(23," Touch the appropriate smart tag (Black = IN, Red = OUT) "),l.qZA()(),l._UZ(24,"hr"),l.YNc(25,pX,18,1,"div",5),l.qZA()()),2&n){const e=l.oxw();l.xp6(7),l.Oqu(e.nfcReadRunningState),l.xp6(4),l.Oqu(e.nfcPermissionState),l.xp6(2),l.Q6J("ngIf","stopped"===e.nfcReadRunningState&&"denied"!==e.nfcPermissionState),l.xp6(1),l.Q6J("ngIf","started"===e.nfcReadRunningState),l.xp6(4),l.Q6J("ngIf","denied"!==e.nfcPermissionState),l.xp6(1),l.Q6J("ngIf","denied"===e.nfcPermissionState)}}function gX(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"mat-card")(1,"mat-card-title"),l._uU(2,"Manual badge"),l.qZA(),l.TgZ(3,"mat-card-content")(4,"ob-badge-form",14),l.NdJ("formSubmitted",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.addBadgeItem(r))}),l.qZA()()()}if(2&n){const e=l.oxw();l.xp6(4),l.Q6J("badge",e.newBadge)}}let _X=(()=>{class n{constructor(e,i,r,s,c,d){this.auth=e,this.nfcService=i,this.badgeApiService=r,this.datePipe=s,this.dateService=c,this.confirmDialog=d,this.hasNfcCapability$=this.nfcService.hasNfcCapability$,this.nfcMessages$=this.nfcService.messages$,this.nfcPermissionState="denied",this.nfcReadRunningState="stopped",this.nfcWriteRunningState="stopped",this.messages=[],this.newBadge={clock:"in",timestamp:this.datePipe.transform(new Date,Ss_formatter.badgeIsoDateTime)??void 0}}ngOnInit(){this.nfcService.init(),this.nfcService.readRunningState$.subscribe(e=>{this.nfcReadRunningState=e}),this.nfcService.writeRunningState$.subscribe(e=>{this.nfcWriteRunningState=e}),this.nfcService.permissionState$.subscribe(e=>{this.nfcPermissionState=e}),this.nfcMessages$.subscribe(e=>{this.doBadge(e.data)}),this.auth.user$.pipe(tn(e=>!!e),(0,di.b)(e=>{const{uid:i,email:r,displayName:s}=e;this.user={uid:i,email:r,displayName:s},this.newBadge={...this.newBadge,userId:this.user.uid}})).subscribe()}badgeIn(){this.doBadge("in")}badgeOut(){this.doBadge("out")}doBadge(e){if(!this.user)return void alert(`No username to use for badge ${e}`);const i={user:this.user,clock:e,timestamp:(new Date).toISOString()};this.addBadgeItem(i)}addBadgeItem(e){this.badgeApiService.create(e).then(()=>{console.debug("Created",e),this.confirmDialog.open({html:`<div><label>User ID:</label> ${e.userId}</div>\n<div><label>Clock:</label> ${e.clock}</div>\n<div><label>Time:</label> ${e.timestamp?this.dateService.isoToHumanDate(e.timestamp):""}</div>`,confirmText:"Ok",title:"Badge sent"})})}startNfcScan(){this.nfcService.startRead()}stopNfcScan(){this.nfcService.stopRead()}startWriteNfc(e){this.nfcService.startWrite(e)}stopWriteNfc(){this.nfcService.stopWrite()}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(oa),l.Y36(Z2),l.Y36(Nz),l.Y36(ya),l.Y36(AA),l.Y36(K2))},n.\u0275cmp=l.Xpm({type:n,selectors:[["ob-home"]],decls:15,vars:3,consts:[[1,"app-content-inner"],[4,"ngIf"],[1,"new-badge-buttons"],["mat-fab","","color","primary",1,"new-badge-button","in",3,"click"],["mat-fab","","color","warn",1,"new-badge-button","out",3,"click"],[4,"obAdminOnly"],[1,"nfc-badge-button"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","",3,"click"],["mat-flat-button","",3,"click"],["mat-flat-button","","color","warn",3,"click",4,"ngIf"],["mat-flat-button","","color","warn",3,"click"],[3,"badge","formSubmitted"]],template:function(e,i){1&e&&(l.TgZ(0,"div",0),l.YNc(1,mX,26,6,"mat-card",1),l.ALo(2,"async"),l.TgZ(3,"mat-card")(4,"mat-card-title"),l._uU(5,"New badge"),l.qZA(),l.TgZ(6,"mat-card-content")(7,"div",2)(8,"button",3),l.NdJ("click",function(){return i.badgeIn()}),l.TgZ(9,"mat-icon"),l._uU(10,"login"),l.qZA()(),l.TgZ(11,"button",4),l.NdJ("click",function(){return i.badgeOut()}),l.TgZ(12,"mat-icon"),l._uU(13,"logout"),l.qZA()()()()(),l.YNc(14,gX,5,1,"mat-card",5),l.qZA()),2&e&&(l.xp6(1),l.Q6J("ngIf",l.lcZ(2,1,i.hasNfcCapability$)))},dependencies:[Rn,x_,PO,RO,OO,wR,OR,BO,_a],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:20px}.nfc-badge-button[_ngcontent-%COMP%]{margin-block:20px}.new-badge-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;padding-block:20px}.new-badge-button[_ngcontent-%COMP%]{width:120px;height:120px}.new-badge-button[_ngcontent-%COMP%]   .mat-fab.mat-button-wrapper[_ngcontent-%COMP%]{width:90px;height:90px}.new-badge-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:90px;width:90px;height:90px}.new-badge-button.in[_ngcontent-%COMP%]{background-color:#60c687}.new-badge-button.out[_ngcontent-%COMP%]{background-color:#e95e5e}"]}),n})();function yX(n,t){1&n&&l._UZ(0,"ob-spinner")}function vX(n,t){1&n&&(l.TgZ(0,"p",5),l._uU(1,"No data"),l.qZA())}function bX(n,t){1&n&&(l.TgZ(0,"mat-icon",10),l._uU(1,"login"),l.qZA())}function wX(n,t){1&n&&(l.TgZ(0,"mat-icon",11),l._uU(1,"logout"),l.qZA())}function CX(n,t){if(1&n&&(l.TgZ(0,"span")(1,"strong"),l._uU(2),l.ALo(3,"date"),l.qZA()()),2&n){const e=l.oxw().$implicit;l.xp6(2),l.Oqu(l.xi3(3,1,e.timestamp,"dd/MM/yyyy HH:mm"))}}function EX(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",5)(1,"span"),l.YNc(2,bX,2,0,"mat-icon",6),l.YNc(3,wX,2,0,"mat-icon",7),l.YNc(4,CX,4,4,"span",1),l.qZA(),l.TgZ(5,"span"),l._uU(6),l.qZA(),l.TgZ(7,"span")(8,"button",8),l.NdJ("click",function(){const s=l.CHM(e).$implicit,c=l.oxw(2);return l.KtG(c.deleteBadgeItem(s))}),l.TgZ(9,"mat-icon"),l._uU(10,"delete"),l.qZA()(),l.TgZ(11,"button",9),l.NdJ("click",function(){const s=l.CHM(e).$implicit,c=l.oxw(2);return l.KtG(c.openUpdateBadgeModal(s))}),l.TgZ(12,"mat-icon"),l._uU(13,"edit"),l.qZA()()()()}if(2&n){const e=t.$implicit;l.xp6(2),l.Q6J("ngIf","in"===e.clock),l.xp6(1),l.Q6J("ngIf","out"===e.clock),l.xp6(1),l.Q6J("ngIf",e.timestamp),l.xp6(2),l.Oqu((null==e.user?null:e.user.displayName)||(null==e.user?null:e.user.email)||(null==e.user?null:e.user.uid)||"No user info")}}function DX(n,t){if(1&n&&(l.TgZ(0,"mat-card")(1,"mat-card-title"),l._uU(2,"Badge list"),l.qZA(),l.TgZ(3,"mat-card-content")(4,"div",2),l.YNc(5,vX,2,0,"p",3),l.YNc(6,EX,14,4,"div",4),l.qZA()()()),2&n){const e=t.ngIf;l.xp6(5),l.Q6J("ngIf",!e.length),l.xp6(1),l.Q6J("ngForOf",e)}}let IX=(()=>{class n{constructor(e,i,r){this.badgeApiService=e,this.dateService=i,this.dialog=r,this.isLoading=!0}ngOnInit(){this.badges$=this.badgeApiService.getCollection().pipe((0,di.b)(e=>this.isLoading=!1),ea(e=>(console.error({err:e}),this.isLoading=!1,Je([]))))}deleteBadgeItem(e){confirm(`Are you sure to delete badge by ${e.user?.email}\n${e.clock?.toUpperCase()}: ${this.dateService.isoToHumanDate(e.timestamp)}?`)&&e.key&&this.badgeApiService.deleteByKey(e.key).then(r=>console.debug("Deleted",e))}openUpdateBadgeModal(e){const i=this.dialog.open(q2,{width:"350px"});i.componentInstance.badgeForm={userId:e.user?.uid,clock:e.clock,timestamp:this.dateService.isoToHtmlDate(e?.timestamp)},i.componentInstance.formSubmitted.subscribe(r=>{this.badgeApiService.update(e.key,{...r,timestamp:r.timestamp}).then(s=>console.debug("Updated",r)),i.close()})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Nz),l.Y36(AA),l.Y36(SA))},n.\u0275cmp=l.Xpm({type:n,selectors:[["ob-badge-list"]],decls:4,vars:4,consts:[[1,"app-content-inner"],[4,"ngIf"],[1,"badge-list"],["class","badge-list-item",4,"ngIf"],["class","badge-list-item",4,"ngFor","ngForOf"],[1,"badge-list-item"],["class","badge-in",4,"ngIf"],["class","badge-out",4,"ngIf"],["mat-icon-button","","color","warn",3,"click"],["mat-icon-button","","color","primary",3,"click"],[1,"badge-in"],[1,"badge-out"]],template:function(e,i){1&e&&(l.TgZ(0,"div",0),l.YNc(1,yX,1,0,"ob-spinner",1),l.YNc(2,DX,7,2,"mat-card",1),l.ALo(3,"async"),l.qZA()),2&e&&(l.xp6(1),l.Q6J("ngIf",i.isLoading),l.xp6(1),l.Q6J("ngIf",l.lcZ(3,2,i.badges$)))},dependencies:[ss,Rn,x_,PO,RO,OO,wR,W2,_a,ya],styles:[".badge-list[_ngcontent-%COMP%]   .mat-mini-fab[_ngcontent-%COMP%]{margin-left:5px;margin-right:5px}.badge-list-item[_ngcontent-%COMP%]{padding:10px;display:flex;flex-direction:row;flex-wrap:wrap;gap:10px;align-items:center;justify-content:space-between}.badge-list-item[_ngcontent-%COMP%]:nth-of-type(2n){background-color:#efefef}.badge-list-item[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.badge-list-item[_ngcontent-%COMP%]   .badge-in[_ngcontent-%COMP%]{color:#60c687}.badge-list-item[_ngcontent-%COMP%]   .badge-out[_ngcontent-%COMP%]{color:#e95e5e}"]}),n})(),SX=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["ob-not-found"]],decls:5,vars:0,consts:[[1,"app-content-inner"],["routerLink","/home"]],template:function(e,i){1&e&&(l.TgZ(0,"div",0)(1,"h1"),l._uU(2,"Page not found. Go to "),l.TgZ(3,"a",1),l._uU(4,"HOME"),l.qZA()()())},dependencies:[Zd]}),n})(),AX=(()=>{class n{constructor(e){this.userApiService=e,this.users=[]}ngOnInit(){this.userApiService.getList().subscribe(e=>this.users=e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Fd))},n.\u0275cmp=l.Xpm({type:n,selectors:[["ob-user-list"]],decls:8,vars:3,consts:[[1,"app-content-inner"]],template:function(e,i){1&e&&(l.TgZ(0,"div",0)(1,"mat-card")(2,"mat-card-title"),l._uU(3,"User list"),l.qZA(),l.TgZ(4,"mat-card-content")(5,"pre"),l._uU(6),l.ALo(7,"json"),l.qZA()()()()),2&e&&(l.xp6(6),l.Oqu(l.lcZ(7,1,i.users)))},dependencies:[PO,RO,OO,ba]}),n})(),TX=(()=>{class n{constructor(e,i){this.authService=e,this.router=i}canActivate(e,i){return this.authService.isAdmin$.pipe((0,Ye.U)(r=>r),(0,di.b)(r=>{r||this.router.navigate(["/"])}))}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(oa),l.LFG(xi))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function MX(n,t){1&n&&(l.ynx(0),l.TgZ(1,"p"),l._uU(2,"You have to be authenticated to use this app. "),l._UZ(3,"ob-login-with-google",2),l.qZA(),l.BQk())}function xX(n,t){1&n&&(l.ynx(0),l.TgZ(1,"p"),l._uU(2,"You are not authorized to use this app."),l.qZA(),l.BQk())}function kX(n,t){1&n&&(l.ynx(0),l.TgZ(1,"p"),l._uU(2,"You are authorized to use this app. Go to "),l.TgZ(3,"a",3),l._uU(4,"HOME"),l.qZA()(),l.BQk())}let RX=(()=>{class n{constructor(e){this.authService=e,this.isAuthorized$=this.authService.isAuthorized$,this.isAuthenticated$=this.authService.isAuthenticated$}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(oa))},n.\u0275cmp=l.Xpm({type:n,selectors:[["ob-login"]],decls:8,vars:11,consts:[[1,"app-content-inner"],[4,"ngIf"],["color","primary"],["routerLink","/home"]],template:function(e,i){1&e&&(l.TgZ(0,"div",0),l.YNc(1,MX,4,0,"ng-container",1),l.ALo(2,"async"),l.YNc(3,xX,3,0,"ng-container",1),l.ALo(4,"async"),l.ALo(5,"async"),l.YNc(6,kX,5,0,"ng-container",1),l.ALo(7,"async"),l.qZA()),2&e&&(l.xp6(1),l.Q6J("ngIf",!l.lcZ(2,3,i.isAuthenticated$)),l.xp6(2),l.Q6J("ngIf",l.lcZ(4,5,i.isAuthenticated$)&&!l.lcZ(5,7,i.isAuthorized$)),l.xp6(3),l.Q6J("ngIf",l.lcZ(7,9,i.isAuthorized$)))},dependencies:[Rn,G2,Zd,_a],styles:["p[_ngcontent-%COMP%]{text-align:center}"]}),n})(),F1=(()=>{class n{constructor(e,i){this.authService=e,this.router=i}canActivate(e,i){return this.authService.isAuthorized$.pipe((0,Ye.U)(r=>r),(0,di.b)(r=>{r||this.router.navigate(["/login"])}))}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(oa),l.LFG(xi))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const OX=[{path:"login",component:RX},{path:"home",component:_X,canActivate:[F1]},{path:"badges",component:IX,canActivate:[F1]},{path:"users",component:AX,canActivate:[F1,TX]},{path:"",redirectTo:"/home",pathMatch:"full"},{path:"**",component:SX}];let PX=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[mr,PF.forRoot(OX)]}),n})(),NX=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n,bootstrap:[SW]}),n.\u0275inj=l.cJS({providers:[v,ya,Z2,ZW,_V],imports:[Ma,c4,m2,m.register("ngsw-worker.js",{enabled:Ss_production,registrationStrategy:"registerWhenStable:30000"}),ai.hO.initializeApp(Ss_firebase),Xh(()=>xm(Ss_firebase)),H9(()=>$9()),fY,zm,Jq,E5,k5,PX]}),n})();Ss_production&&(0,l.G48)(),pc().bootstrapModule(NX).catch(n=>console.error(n))},7982:(pt,Re,N)=>{N.d(Re,{Gb:()=>l.Gb,Iv:()=>l.Iv,Kz:()=>l.Kz});var l=N(579)},5867:(pt,Re,N)=>{N.d(Re,{C6:()=>l.getApps,KN:()=>l.registerVersion,Mq:()=>l.getApp,ZF:()=>l.initializeApp});var l=N(9681);(0,l.registerVersion)("firebase","9.12.0","app")},127:(pt,Re,N)=>{N.d(Re,{Z:()=>l.Z});var l=N(3942);l.Z.registerVersion("firebase","9.12.0","app-compat")},5881:(pt,Re,N)=>{N.r(Re);var l=N(5861),$=N(3942),F=N(9934),se=N(2090),re=(N(9681),N(1877),N(4859));function me(){return window}function q(){return(q=(0,l.Z)(function*(k,A,R){var G;const{BuildInfo:ue}=me();(0,F.aq)(A.sessionId,"AuthEvent did not contain a session ID");const Le=yield de(A.sessionId),Ge={};return(0,F.ar)()?Ge.ibi=ue.packageName:(0,F.as)()?Ge.apn=ue.packageName:(0,F.at)(k,"operation-not-supported-in-this-environment"),ue.displayName&&(Ge.appDisplayName=ue.displayName),Ge.sessionId=Le,(0,F.au)(k,R,A.type,void 0,null!==(G=A.eventId)&&void 0!==G?G:void 0,Ge)})).apply(this,arguments)}function Ne(){return(Ne=(0,l.Z)(function*(k){const{BuildInfo:A}=me(),R={};(0,F.ar)()?R.iosBundleId=A.packageName:(0,F.as)()?R.androidPackageName=A.packageName:(0,F.at)(k,"operation-not-supported-in-this-environment"),yield(0,F.av)(k,R)})).apply(this,arguments)}function et(){return(et=(0,l.Z)(function*(k,A,R){const{cordova:G}=me();let ue=()=>{};try{yield new Promise((Le,Ge)=>{let _e=null;function ke(){var xt;Le();const Yt=null===(xt=G.plugins.browsertab)||void 0===xt?void 0:xt.close;"function"==typeof Yt&&Yt(),"function"==typeof R?.close&&R.close()}function dt(){_e||(_e=window.setTimeout(()=>{Ge((0,F.aw)(k,"redirect-cancelled-by-user"))},2e3))}function Jt(){"visible"===document?.visibilityState&&dt()}A.addPassiveListener(ke),document.addEventListener("resume",dt,!1),(0,F.as)()&&document.addEventListener("visibilitychange",Jt,!1),ue=()=>{A.removePassiveListener(ke),document.removeEventListener("resume",dt,!1),document.removeEventListener("visibilitychange",Jt,!1),_e&&window.clearTimeout(_e)}})}finally{ue()}})).apply(this,arguments)}function de(k){return ct.apply(this,arguments)}function ct(){return(ct=(0,l.Z)(function*(k){const A=Qe(k),R=yield crypto.subtle.digest("SHA-256",A);return Array.from(new Uint8Array(R)).map(ue=>ue.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Qe(k){if((0,F.aq)(/[0-9a-zA-Z]+/.test(k),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(k);const A=new ArrayBuffer(k.length),R=new Uint8Array(A);for(let G=0;G<k.length;G++)R[G]=k.charCodeAt(G);return R}class Pe extends F.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(A=>{this.resolveInialized=A})}addPassiveListener(A){this.passiveListeners.add(A)}removePassiveListener(A){this.passiveListeners.delete(A)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(A){return this.resolveInialized(),this.passiveListeners.forEach(R=>R(A)),super.onEvent(A)}initialized(){var A=this;return(0,l.Z)(function*(){yield A.initPromise})()}}function ne(k){return ce.apply(this,arguments)}function ce(){return(ce=(0,l.Z)(function*(k){const A=yield ee()._get(he(k));return A&&(yield ee()._remove(he(k))),A})).apply(this,arguments)}function J(){const k=[],A="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let R=0;R<20;R++){const G=Math.floor(Math.random()*A.length);k.push(A.charAt(G))}return k.join("")}function ee(){return(0,F.ay)(F.b)}function he(k){return(0,F.az)("authEvent",k.config.apiKey,k.name)}function Be(k){if(!k?.includes("?"))return{};const[A,...R]=k.split("?");return(0,se.zd)(R.join("?"))}function Ke(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,F.aw)("no-auth-event")}}function Gt(){var k;return(null===(k=self?.location)||void 0===k?void 0:k.protocol)||null}function xn(k=(0,se.z$)()){return!("file:"!==Gt()&&"ionic:"!==Gt()&&"capacitor:"!==Gt()||!k.toLowerCase().match(/iphone|ipad|ipod|android/))}function qi(){try{const k=self.localStorage,A=F.aI();if(k)return k.setItem(A,"1"),k.removeItem(A),!function fi(k=(0,se.z$)()){return function pr(){return(0,se.w1)()&&11===document?.documentMode}()||function qn(k=(0,se.z$)()){return/Edge\/\d+/.test(k)}(k)}()||(0,se.hl)()}catch{return ni()&&(0,se.hl)()}return!1}function ni(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function ti(){return(function St(){return"http:"===Gt()||"https:"===Gt()}()||(0,se.ru)()||xn())&&!function nr(){return(0,se.b$)()||(0,se.UG)()}()&&qi()&&!ni()}function Oi(){return xn()&&typeof document<"u"}function rt(){return(rt=(0,l.Z)(function*(){return!!Oi()&&new Promise(k=>{const A=setTimeout(()=>{k(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(A),k(!0)})})})).apply(this,arguments)}const Qn={LOCAL:"local",NONE:"none",SESSION:"session"},wn=F.ax,bi="persistence";function Dn(k){return kn.apply(this,arguments)}function kn(){return(kn=(0,l.Z)(function*(k){yield k._initializationPromise;const A=mt(),R=F.az(bi,k.config.apiKey,k.name);A&&A.setItem(R,k._getPersistence())})).apply(this,arguments)}function mt(){var k;try{return(null===(k=function En(){return typeof window<"u"?window:null}())||void 0===k?void 0:k.sessionStorage)||null}catch{return null}}const ht=F.ax;class gt{constructor(){this.browserResolver=F.ay(F.k),this.cordovaResolver=F.ay(class ln{constructor(){this._redirectPersistence=F.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=F.aB,this._overrideRedirectResult=F.aC}_initialize(A){var R=this;return(0,l.Z)(function*(){const G=A._key();let ue=R.eventManagers.get(G);return ue||(ue=new Pe(A),R.eventManagers.set(G,ue),R.attachCallbackListeners(A,ue)),ue})()}_openPopup(A){(0,F.at)(A,"operation-not-supported-in-this-environment")}_openRedirect(A,R,G,ue){var Le=this;return(0,l.Z)(function*(){!function Ce(k){var A,R,G,ue,Le,Ge,_e,ke,dt,Jt;const xt=me();(0,F.ax)("function"==typeof(null===(A=xt?.universalLinks)||void 0===A?void 0:A.subscribe),k,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,F.ax)(typeof(null===(R=xt?.BuildInfo)||void 0===R?void 0:R.packageName)<"u",k,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,F.ax)("function"==typeof(null===(Le=null===(ue=null===(G=xt?.cordova)||void 0===G?void 0:G.plugins)||void 0===ue?void 0:ue.browsertab)||void 0===Le?void 0:Le.openUrl),k,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,F.ax)("function"==typeof(null===(ke=null===(_e=null===(Ge=xt?.cordova)||void 0===Ge?void 0:Ge.plugins)||void 0===_e?void 0:_e.browsertab)||void 0===ke?void 0:ke.isAvailable),k,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,F.ax)("function"==typeof(null===(Jt=null===(dt=xt?.cordova)||void 0===dt?void 0:dt.InAppBrowser)||void 0===Jt?void 0:Jt.open),k,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(A);const Ge=yield Le._initialize(A);yield Ge.initialized(),Ge.resetRedirect(),(0,F.aD)(),yield Le._originValidation(A);const _e=function Ie(k,A,R=null){return{type:A,eventId:R,urlResponse:null,sessionId:J(),postBody:null,tenantId:k.tenantId,error:(0,F.aw)(k,"no-auth-event")}}(A,G,ue);yield function Ze(k,A){return ee()._set(he(k),A)}(A,_e);const ke=yield function K(k,A,R){return q.apply(this,arguments)}(A,_e,R),dt=yield function Ae(k){const{cordova:A}=me();return new Promise(R=>{A.plugins.browsertab.isAvailable(G=>{let ue=null;G?A.plugins.browsertab.openUrl(k):ue=A.InAppBrowser.open(k,(0,F.ap)()?"_blank":"_system","location=yes"),R(ue)})})}(ke);return function Te(k,A,R){return et.apply(this,arguments)}(A,Ge,dt)})()}_isIframeWebStorageSupported(A,R){throw new Error("Method not implemented.")}_originValidation(A){const R=A._key();return this.originValidationPromises[R]||(this.originValidationPromises[R]=function X(k){return Ne.apply(this,arguments)}(A)),this.originValidationPromises[R]}attachCallbackListeners(A,R){const{universalLinks:G,handleOpenURL:ue,BuildInfo:Le}=me(),Ge=setTimeout((0,l.Z)(function*(){yield ne(A),R.onEvent(Ke())}),500),_e=function(){var Jt=(0,l.Z)(function*(xt){clearTimeout(Ge);const Yt=yield ne(A);let Dr=null;Yt&&xt?.url&&(Dr=function Ee(k,A){var R,G;const ue=function je(k){const A=Be(k),R=A.link?decodeURIComponent(A.link):void 0,G=Be(R).link,ue=A.deep_link_id?decodeURIComponent(A.deep_link_id):void 0;return Be(ue).link||ue||G||R||k}(A);if(ue.includes("/__/auth/callback")){const Le=Be(ue),Ge=Le.firebaseError?function le(k){try{return JSON.parse(k)}catch{return null}}(decodeURIComponent(Le.firebaseError)):null,_e=null===(G=null===(R=Ge?.code)||void 0===R?void 0:R.split("auth/"))||void 0===G?void 0:G[1],ke=_e?(0,F.aw)(_e):null;return ke?{type:k.type,eventId:k.eventId,tenantId:k.tenantId,error:ke,urlResponse:null,sessionId:null,postBody:null}:{type:k.type,eventId:k.eventId,tenantId:k.tenantId,sessionId:k.sessionId,urlResponse:ue,postBody:null}}return null}(Yt,xt.url)),R.onEvent(Dr||Ke())});return function(Yt){return Jt.apply(this,arguments)}}();typeof G<"u"&&"function"==typeof G.subscribe&&G.subscribe(null,_e);const ke=ue,dt=`${Le.packageName.toLowerCase()}://`;me().handleOpenURL=function(){var Jt=(0,l.Z)(function*(xt){if(xt.toLowerCase().startsWith(dt)&&_e({url:xt}),"function"==typeof ke)try{ke(xt)}catch(Yt){console.error(Yt)}});return function(xt){return Jt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=F.a,this._completeRedirectFn=F.aB,this._overrideRedirectResult=F.aC}_initialize(A){var R=this;return(0,l.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._initialize(A)})()}_openPopup(A,R,G,ue){var Le=this;return(0,l.Z)(function*(){return yield Le.selectUnderlyingResolver(),Le.assertedUnderlyingResolver._openPopup(A,R,G,ue)})()}_openRedirect(A,R,G,ue){var Le=this;return(0,l.Z)(function*(){return yield Le.selectUnderlyingResolver(),Le.assertedUnderlyingResolver._openRedirect(A,R,G,ue)})()}_isIframeWebStorageSupported(A,R){this.assertedUnderlyingResolver._isIframeWebStorageSupported(A,R)}_originValidation(A){return this.assertedUnderlyingResolver._originValidation(A)}get _shouldInitProactively(){return Oi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ht(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var A=this;return(0,l.Z)(function*(){if(A.underlyingResolver)return;const R=yield function ir(){return rt.apply(this,arguments)}();A.underlyingResolver=R?A.cordovaResolver:A.browserResolver})()}}function An(k){return k.unwrap()}function wi(k){return Ai(k)}function Ai(k){const{_tokenResponse:A}=k instanceof se.ZR?k.customData:k;if(!A)return null;if(!(k instanceof se.ZR)&&"temporaryProof"in A&&"phoneNumber"in A)return F.P.credentialFromResult(k);const R=A.providerId;if(!R||R===F.o.PASSWORD)return null;let G;switch(R){case F.o.GOOGLE:G=F.Q;break;case F.o.FACEBOOK:G=F.N;break;case F.o.GITHUB:G=F.T;break;case F.o.TWITTER:G=F.W;break;default:const{oauthIdToken:ue,oauthAccessToken:Le,oauthTokenSecret:Ge,pendingToken:_e,nonce:ke}=A;return Le||Ge||ue||_e?_e?R.startsWith("saml.")?F.aL._create(R,_e):F.J._fromParams({providerId:R,signInMethod:R,pendingToken:_e,idToken:ue,accessToken:Le}):new F.U(R).credential({idToken:ue,accessToken:Le,rawNonce:ke}):null}return k instanceof se.ZR?G.credentialFromError(k):G.credentialFromResult(k)}function Rt(k,A){return A.catch(R=>{throw R instanceof se.ZR&&function Mt(k,A){var R,G;const ue=null===(R=A.customData)||void 0===R?void 0:R._tokenResponse;if("auth/multi-factor-auth-required"===(null===(G=A)||void 0===G?void 0:G.code))A.resolver=new ri(k,F.an(k,A));else if(ue){const Le=Ai(A),Ge=A;Le&&(Ge.credential=Le,Ge.tenantId=ue.tenantId||void 0,Ge.email=ue.email||void 0,Ge.phoneNumber=ue.phoneNumber||void 0)}}(k,R),R}).then(R=>{const ue=R.user;return{operationType:R.operationType,credential:wi(R),additionalUserInfo:F.al(R),user:Ln.getOrCreate(ue)}})}function Ti(k,A){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,l.Z)(function*(k,A){const R=yield A;return{verificationId:R.verificationId,confirm:G=>Rt(k,R.confirm(G))}})).apply(this,arguments)}class ri{constructor(A,R){this.resolver=R,this.auth=function ii(k){return k.wrapped()}(A)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(A){return Rt(An(this.auth),this.resolver.resolveSignIn(A))}}class Ln{constructor(A){this._delegate=A,this.multiFactor=F.ao(A)}static getOrCreate(A){return Ln.USER_MAP.has(A)||Ln.USER_MAP.set(A,new Ln(A)),Ln.USER_MAP.get(A)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(A){return this._delegate.getIdTokenResult(A)}getIdToken(A){return this._delegate.getIdToken(A)}linkAndRetrieveDataWithCredential(A){return this.linkWithCredential(A)}linkWithCredential(A){var R=this;return(0,l.Z)(function*(){return Rt(R.auth,F.Z(R._delegate,A))})()}linkWithPhoneNumber(A,R){var G=this;return(0,l.Z)(function*(){return Ti(G.auth,F.l(G._delegate,A,R))})()}linkWithPopup(A){var R=this;return(0,l.Z)(function*(){return Rt(R.auth,F.d(R._delegate,A,gt))})()}linkWithRedirect(A){var R=this;return(0,l.Z)(function*(){return yield Dn(F.aE(R.auth)),F.g(R._delegate,A,gt)})()}reauthenticateAndRetrieveDataWithCredential(A){return this.reauthenticateWithCredential(A)}reauthenticateWithCredential(A){var R=this;return(0,l.Z)(function*(){return Rt(R.auth,F._(R._delegate,A))})()}reauthenticateWithPhoneNumber(A,R){return Ti(this.auth,F.r(this._delegate,A,R))}reauthenticateWithPopup(A){return Rt(this.auth,F.e(this._delegate,A,gt))}reauthenticateWithRedirect(A){var R=this;return(0,l.Z)(function*(){return yield Dn(F.aE(R.auth)),F.h(R._delegate,A,gt)})()}sendEmailVerification(A){return F.ab(this._delegate,A)}unlink(A){var R=this;return(0,l.Z)(function*(){return yield F.ak(R._delegate,A),R})()}updateEmail(A){return F.ag(this._delegate,A)}updatePassword(A){return F.ah(this._delegate,A)}updatePhoneNumber(A){return F.u(this._delegate,A)}updateProfile(A){return F.af(this._delegate,A)}verifyBeforeUpdateEmail(A,R){return F.ac(this._delegate,A,R)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ln.USER_MAP=new WeakMap;const tt=F.ax;let Me=(()=>{class k{constructor(R,G){if(this.app=R,G.isInitialized())return this._delegate=G.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:ue}=R.options;tt(ue,"invalid-api-key",{appName:R.name}),tt(ue,"invalid-api-key",{appName:R.name});const Le=typeof window<"u"?gt:void 0;this._delegate=G.initialize({options:{persistence:wt(ue,R.name),popupRedirectResolver:Le}}),this._delegate._updateErrorMap(F.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ln.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(R){this._delegate.languageCode=R}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(R){this._delegate.tenantId=R}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(R,G){F.G(this._delegate,R,G)}applyActionCode(R){return F.a2(this._delegate,R)}checkActionCode(R){return F.a3(this._delegate,R)}confirmPasswordReset(R,G){return F.a1(this._delegate,R,G)}createUserWithEmailAndPassword(R,G){var ue=this;return(0,l.Z)(function*(){return Rt(ue._delegate,F.a5(ue._delegate,R,G))})()}fetchProvidersForEmail(R){return this.fetchSignInMethodsForEmail(R)}fetchSignInMethodsForEmail(R){return F.aa(this._delegate,R)}isSignInWithEmailLink(R){return F.a8(this._delegate,R)}getRedirectResult(){var R=this;return(0,l.Z)(function*(){tt(ti(),R._delegate,"operation-not-supported-in-this-environment");const G=yield F.j(R._delegate,gt);return G?Rt(R._delegate,Promise.resolve(G)):{credential:null,user:null}})()}addFrameworkForLogging(R){!function vn(k,A){(0,F.aE)(k)._logFramework(A)}(this._delegate,R)}onAuthStateChanged(R,G,ue){const{next:Le,error:Ge,complete:_e}=st(R,G,ue);return this._delegate.onAuthStateChanged(Le,Ge,_e)}onIdTokenChanged(R,G,ue){const{next:Le,error:Ge,complete:_e}=st(R,G,ue);return this._delegate.onIdTokenChanged(Le,Ge,_e)}sendSignInLinkToEmail(R,G){return F.a7(this._delegate,R,G)}sendPasswordResetEmail(R,G){return F.a0(this._delegate,R,G||void 0)}setPersistence(R){var G=this;return(0,l.Z)(function*(){let ue;switch(function Hi(k,A){wn(Object.values(Qn).includes(A),k,"invalid-persistence-type"),(0,se.b$)()?wn(A!==Qn.SESSION,k,"unsupported-persistence-type"):(0,se.UG)()?wn(A===Qn.NONE,k,"unsupported-persistence-type"):ni()?wn(A===Qn.NONE||A===Qn.LOCAL&&(0,se.hl)(),k,"unsupported-persistence-type"):wn(A===Qn.NONE||qi(),k,"unsupported-persistence-type")}(G._delegate,R),R){case Qn.SESSION:ue=F.a;break;case Qn.LOCAL:ue=(yield F.ay(F.i)._isAvailable())?F.i:F.b;break;case Qn.NONE:ue=F.L;break;default:return F.at("argument-error",{appName:G._delegate.name})}return G._delegate.setPersistence(ue)})()}signInAndRetrieveDataWithCredential(R){return this.signInWithCredential(R)}signInAnonymously(){return Rt(this._delegate,F.X(this._delegate))}signInWithCredential(R){return Rt(this._delegate,F.Y(this._delegate,R))}signInWithCustomToken(R){return Rt(this._delegate,F.$(this._delegate,R))}signInWithEmailAndPassword(R,G){return Rt(this._delegate,F.a6(this._delegate,R,G))}signInWithEmailLink(R,G){return Rt(this._delegate,F.a9(this._delegate,R,G))}signInWithPhoneNumber(R,G){return Ti(this._delegate,F.s(this._delegate,R,G))}signInWithPopup(R){var G=this;return(0,l.Z)(function*(){return tt(ti(),G._delegate,"operation-not-supported-in-this-environment"),Rt(G._delegate,F.c(G._delegate,R,gt))})()}signInWithRedirect(R){var G=this;return(0,l.Z)(function*(){return tt(ti(),G._delegate,"operation-not-supported-in-this-environment"),yield Dn(G._delegate),F.f(G._delegate,R,gt)})()}updateCurrentUser(R){return this._delegate.updateCurrentUser(R)}verifyPasswordResetCode(R){return F.a4(this._delegate,R)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return k.Persistence=Qn,k})();function st(k,A,R){let G=k;"function"!=typeof k&&({next:G,error:A,complete:R}=k);const ue=G;return{next:Ge=>ue(Ge&&Ln.getOrCreate(Ge)),error:A,complete:R}}function wt(k,A){const R=function dn(k,A){const R=mt();if(!R)return[];const G=F.az(bi,k,A);switch(R.getItem(G)){case Qn.NONE:return[F.L];case Qn.LOCAL:return[F.i,F.a];case Qn.SESSION:return[F.a];default:return[]}}(k,A);if(typeof self<"u"&&!R.includes(F.i)&&R.push(F.i),typeof window<"u")for(const G of[F.b,F.a])R.includes(G)||R.push(G);return R.includes(F.L)||R.push(F.L),R}class Tt{constructor(){this.providerId="phone",this._delegate=new F.P(An($.Z.auth()))}static credential(A,R){return F.P.credential(A,R)}verifyPhoneNumber(A,R){return this._delegate.verifyPhoneNumber(A,R)}unwrap(){return this._delegate}}Tt.PHONE_SIGN_IN_METHOD=F.P.PHONE_SIGN_IN_METHOD,Tt.PROVIDER_ID=F.P.PROVIDER_ID;const Qt=F.ax;class Y{constructor(A,R,G=$.Z.app()){var ue;Qt(null===(ue=G.options)||void 0===ue?void 0:ue.apiKey,"invalid-api-key",{appName:G.name}),this._delegate=new F.R(A,R,G.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function P(k){k.INTERNAL.registerComponent(new re.wA("auth-compat",A=>{const R=A.getProvider("app-compat").getImmediate(),G=A.getProvider("auth");return new Me(R,G)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:F.A.EMAIL_SIGNIN,PASSWORD_RESET:F.A.PASSWORD_RESET,RECOVER_EMAIL:F.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:F.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:F.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:F.A.VERIFY_EMAIL}},EmailAuthProvider:F.M,FacebookAuthProvider:F.N,GithubAuthProvider:F.T,GoogleAuthProvider:F.Q,OAuthProvider:F.U,SAMLAuthProvider:F.V,PhoneAuthProvider:Tt,PhoneMultiFactorGenerator:F.m,RecaptchaVerifier:Y,TwitterAuthProvider:F.W,Auth:Me,AuthCredential:F.H,Error:se.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),k.registerVersion("@firebase/auth-compat","0.2.22")}($.Z)},9751:(pt,Re,N)=>{N.d(Re,{y:()=>me});var l=N(930),$=N(727),F=N(8822),se=N(9635),ge=N(2416),ve=N(576),re=N(2806);let me=(()=>{class X{constructor(Ae){Ae&&(this._subscribe=Ae)}lift(Ae){const Te=new X;return Te.source=this,Te.operator=Ae,Te}subscribe(Ae,Te,et){const Ce=function q(X){return X&&X instanceof l.Lv||function K(X){return X&&(0,ve.m)(X.next)&&(0,ve.m)(X.error)&&(0,ve.m)(X.complete)}(X)&&(0,$.Nn)(X)}(Ae)?Ae:new l.Hp(Ae,Te,et);return(0,re.x)(()=>{const{operator:de,source:ct}=this;Ce.add(de?de.call(Ce,ct):ct?this._subscribe(Ce):this._trySubscribe(Ce))}),Ce}_trySubscribe(Ae){try{return this._subscribe(Ae)}catch(Te){Ae.error(Te)}}forEach(Ae,Te){return new(Te=ye(Te))((et,Ce)=>{const de=new l.Hp({next:ct=>{try{Ae(ct)}catch(Qe){Ce(Qe),de.unsubscribe()}},error:Ce,complete:et});this.subscribe(de)})}_subscribe(Ae){var Te;return null===(Te=this.source)||void 0===Te?void 0:Te.subscribe(Ae)}[F.L](){return this}pipe(...Ae){return(0,se.U)(Ae)(this)}toPromise(Ae){return new(Ae=ye(Ae))((Te,et)=>{let Ce;this.subscribe(de=>Ce=de,de=>et(de),()=>Te(Ce))})}}return X.create=Ne=>new X(Ne),X})();function ye(X){var Ne;return null!==(Ne=X??ge.v.Promise)&&void 0!==Ne?Ne:Promise}},7579:(pt,Re,N)=>{N.d(Re,{x:()=>re});var l=N(9751),$=N(727);const se=(0,N(3888).d)(ye=>function(){ye(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ge=N(8737),ve=N(2806);let re=(()=>{class ye extends l.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(q){const X=new me(this,this);return X.operator=q,X}_throwIfClosed(){if(this.closed)throw new se}next(q){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const X of this.currentObservers)X.next(q)}})}error(q){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=q;const{observers:X}=this;for(;X.length;)X.shift().error(q)}})}complete(){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:q}=this;for(;q.length;)q.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var q;return(null===(q=this.observers)||void 0===q?void 0:q.length)>0}_trySubscribe(q){return this._throwIfClosed(),super._trySubscribe(q)}_subscribe(q){return this._throwIfClosed(),this._checkFinalizedStatuses(q),this._innerSubscribe(q)}_innerSubscribe(q){const{hasError:X,isStopped:Ne,observers:Ae}=this;return X||Ne?$.Lc:(this.currentObservers=null,Ae.push(q),new $.w0(()=>{this.currentObservers=null,(0,ge.P)(Ae,q)}))}_checkFinalizedStatuses(q){const{hasError:X,thrownError:Ne,isStopped:Ae}=this;X?q.error(Ne):Ae&&q.complete()}asObservable(){const q=new l.y;return q.source=this,q}}return ye.create=(K,q)=>new me(K,q),ye})();class me extends re{constructor(K,q){super(),this.destination=K,this.source=q}next(K){var q,X;null===(X=null===(q=this.destination)||void 0===q?void 0:q.next)||void 0===X||X.call(q,K)}error(K){var q,X;null===(X=null===(q=this.destination)||void 0===q?void 0:q.error)||void 0===X||X.call(q,K)}complete(){var K,q;null===(q=null===(K=this.destination)||void 0===K?void 0:K.complete)||void 0===q||q.call(K)}_subscribe(K){var q,X;return null!==(X=null===(q=this.source)||void 0===q?void 0:q.subscribe(K))&&void 0!==X?X:$.Lc}}},930:(pt,Re,N)=>{N.d(Re,{Hp:()=>et,Lv:()=>X});var l=N(576),$=N(727),F=N(2416),se=N(7849),ge=N(5032);const ve=ye("C",void 0,void 0);function ye(Fe,Pe,Ie){return{kind:Fe,value:Pe,error:Ie}}var K=N(3410),q=N(2806);class X extends $.w0{constructor(Pe){super(),this.isStopped=!1,Pe?(this.destination=Pe,(0,$.Nn)(Pe)&&Pe.add(this)):this.destination=Qe}static create(Pe,Ie,Ze){return new et(Pe,Ie,Ze)}next(Pe){this.isStopped?ct(function me(Fe){return ye("N",Fe,void 0)}(Pe),this):this._next(Pe)}error(Pe){this.isStopped?ct(function re(Fe){return ye("E",void 0,Fe)}(Pe),this):(this.isStopped=!0,this._error(Pe))}complete(){this.isStopped?ct(ve,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Pe){this.destination.next(Pe)}_error(Pe){try{this.destination.error(Pe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ne=Function.prototype.bind;function Ae(Fe,Pe){return Ne.call(Fe,Pe)}class Te{constructor(Pe){this.partialObserver=Pe}next(Pe){const{partialObserver:Ie}=this;if(Ie.next)try{Ie.next(Pe)}catch(Ze){Ce(Ze)}}error(Pe){const{partialObserver:Ie}=this;if(Ie.error)try{Ie.error(Pe)}catch(Ze){Ce(Ze)}else Ce(Pe)}complete(){const{partialObserver:Pe}=this;if(Pe.complete)try{Pe.complete()}catch(Ie){Ce(Ie)}}}class et extends X{constructor(Pe,Ie,Ze){let ne;if(super(),(0,l.m)(Pe)||!Pe)ne={next:Pe??void 0,error:Ie??void 0,complete:Ze??void 0};else{let ce;this&&F.v.useDeprecatedNextContext?(ce=Object.create(Pe),ce.unsubscribe=()=>this.unsubscribe(),ne={next:Pe.next&&Ae(Pe.next,ce),error:Pe.error&&Ae(Pe.error,ce),complete:Pe.complete&&Ae(Pe.complete,ce)}):ne=Pe}this.destination=new Te(ne)}}function Ce(Fe){F.v.useDeprecatedSynchronousErrorHandling?(0,q.O)(Fe):(0,se.h)(Fe)}function ct(Fe,Pe){const{onStoppedNotification:Ie}=F.v;Ie&&K.z.setTimeout(()=>Ie(Fe,Pe))}const Qe={closed:!0,next:ge.Z,error:function de(Fe){throw Fe},complete:ge.Z}},727:(pt,Re,N)=>{N.d(Re,{Lc:()=>ve,w0:()=>ge,Nn:()=>re});var l=N(576);const F=(0,N(3888).d)(ye=>function(q){ye(this),this.message=q?`${q.length} errors occurred during unsubscription:\n${q.map((X,Ne)=>`${Ne+1}) ${X.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=q});var se=N(8737);class ge{constructor(K){this.initialTeardown=K,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let K;if(!this.closed){this.closed=!0;const{_parentage:q}=this;if(q)if(this._parentage=null,Array.isArray(q))for(const Ae of q)Ae.remove(this);else q.remove(this);const{initialTeardown:X}=this;if((0,l.m)(X))try{X()}catch(Ae){K=Ae instanceof F?Ae.errors:[Ae]}const{_finalizers:Ne}=this;if(Ne){this._finalizers=null;for(const Ae of Ne)try{me(Ae)}catch(Te){K=K??[],Te instanceof F?K=[...K,...Te.errors]:K.push(Te)}}if(K)throw new F(K)}}add(K){var q;if(K&&K!==this)if(this.closed)me(K);else{if(K instanceof ge){if(K.closed||K._hasParent(this))return;K._addParent(this)}(this._finalizers=null!==(q=this._finalizers)&&void 0!==q?q:[]).push(K)}}_hasParent(K){const{_parentage:q}=this;return q===K||Array.isArray(q)&&q.includes(K)}_addParent(K){const{_parentage:q}=this;this._parentage=Array.isArray(q)?(q.push(K),q):q?[q,K]:K}_removeParent(K){const{_parentage:q}=this;q===K?this._parentage=null:Array.isArray(q)&&(0,se.P)(q,K)}remove(K){const{_finalizers:q}=this;q&&(0,se.P)(q,K),K instanceof ge&&K._removeParent(this)}}ge.EMPTY=(()=>{const ye=new ge;return ye.closed=!0,ye})();const ve=ge.EMPTY;function re(ye){return ye instanceof ge||ye&&"closed"in ye&&(0,l.m)(ye.remove)&&(0,l.m)(ye.add)&&(0,l.m)(ye.unsubscribe)}function me(ye){(0,l.m)(ye)?ye():ye.unsubscribe()}},2416:(pt,Re,N)=>{N.d(Re,{v:()=>l});const l={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(pt,Re,N)=>{N.d(Re,{E:()=>$});const $=new(N(9751).y)(ge=>ge.complete())},8996:(pt,Re,N)=>{N.d(Re,{D:()=>Pe});var l=N(8421),$=N(5363),F=N(9468),ve=N(9751),me=N(2202),ye=N(576),K=N(9672);function X(Ie,Ze){if(!Ie)throw new Error("Iterable cannot be null");return new ve.y(ne=>{(0,K.f)(ne,Ze,()=>{const ce=Ie[Symbol.asyncIterator]();(0,K.f)(ne,Ze,()=>{ce.next().then(Ee=>{Ee.done?ne.complete():ne.next(Ee.value)})},0,!0)})})}var Ne=N(3670),Ae=N(8239),Te=N(1144),et=N(6495),Ce=N(2206),de=N(4532),ct=N(3260);function Pe(Ie,Ze){return Ze?function Fe(Ie,Ze){if(null!=Ie){if((0,Ne.c)(Ie))return function se(Ie,Ze){return(0,l.Xf)(Ie).pipe((0,F.R)(Ze),(0,$.Q)(Ze))}(Ie,Ze);if((0,Te.z)(Ie))return function re(Ie,Ze){return new ve.y(ne=>{let ce=0;return Ze.schedule(function(){ce===Ie.length?ne.complete():(ne.next(Ie[ce++]),ne.closed||this.schedule())})})}(Ie,Ze);if((0,Ae.t)(Ie))return function ge(Ie,Ze){return(0,l.Xf)(Ie).pipe((0,F.R)(Ze),(0,$.Q)(Ze))}(Ie,Ze);if((0,Ce.D)(Ie))return X(Ie,Ze);if((0,et.T)(Ie))return function q(Ie,Ze){return new ve.y(ne=>{let ce;return(0,K.f)(ne,Ze,()=>{ce=Ie[me.h](),(0,K.f)(ne,Ze,()=>{let Ee,J;try{({value:Ee,done:J}=ce.next())}catch(ee){return void ne.error(ee)}J?ne.complete():ne.next(Ee)},0,!0)}),()=>(0,ye.m)(ce?.return)&&ce.return()})}(Ie,Ze);if((0,ct.L)(Ie))return function Qe(Ie,Ze){return X((0,ct.Q)(Ie),Ze)}(Ie,Ze)}throw(0,de.z)(Ie)}(Ie,Ze):(0,l.Xf)(Ie)}},8421:(pt,Re,N)=>{N.d(Re,{Xf:()=>Ne});var l=N(655),$=N(1144),F=N(8239),se=N(9751),ge=N(3670),ve=N(2206),re=N(4532),me=N(6495),ye=N(3260),K=N(576),q=N(7849),X=N(8822);function Ne(Fe){if(Fe instanceof se.y)return Fe;if(null!=Fe){if((0,ge.c)(Fe))return function Ae(Fe){return new se.y(Pe=>{const Ie=Fe[X.L]();if((0,K.m)(Ie.subscribe))return Ie.subscribe(Pe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Fe);if((0,$.z)(Fe))return function Te(Fe){return new se.y(Pe=>{for(let Ie=0;Ie<Fe.length&&!Pe.closed;Ie++)Pe.next(Fe[Ie]);Pe.complete()})}(Fe);if((0,F.t)(Fe))return function et(Fe){return new se.y(Pe=>{Fe.then(Ie=>{Pe.closed||(Pe.next(Ie),Pe.complete())},Ie=>Pe.error(Ie)).then(null,q.h)})}(Fe);if((0,ve.D)(Fe))return de(Fe);if((0,me.T)(Fe))return function Ce(Fe){return new se.y(Pe=>{for(const Ie of Fe)if(Pe.next(Ie),Pe.closed)return;Pe.complete()})}(Fe);if((0,ye.L)(Fe))return function ct(Fe){return de((0,ye.Q)(Fe))}(Fe)}throw(0,re.z)(Fe)}function de(Fe){return new se.y(Pe=>{(function Qe(Fe,Pe){var Ie,Ze,ne,ce;return(0,l.mG)(this,void 0,void 0,function*(){try{for(Ie=(0,l.KL)(Fe);!(Ze=yield Ie.next()).done;)if(Pe.next(Ze.value),Pe.closed)return}catch(Ee){ne={error:Ee}}finally{try{Ze&&!Ze.done&&(ce=Ie.return)&&(yield ce.call(Ie))}finally{if(ne)throw ne.error}}Pe.complete()})})(Fe,Pe).catch(Ie=>Pe.error(Ie))})}},6451:(pt,Re,N)=>{N.d(Re,{T:()=>ve});var l=N(8189),$=N(8421),F=N(515),se=N(3269),ge=N(8996);function ve(...re){const me=(0,se.yG)(re),ye=(0,se._6)(re,1/0),K=re;return K.length?1===K.length?(0,$.Xf)(K[0]):(0,l.J)(ye)((0,ge.D)(K,me)):F.E}},5403:(pt,Re,N)=>{N.d(Re,{Q:()=>F,x:()=>$});var l=N(930);function $(se,ge,ve,re,me){return new F(se,ge,ve,re,me)}class F extends l.Lv{constructor(ge,ve,re,me,ye,K){super(ge),this.onFinalize=ye,this.shouldUnsubscribe=K,this._next=ve?function(q){try{ve(q)}catch(X){ge.error(X)}}:super._next,this._error=me?function(q){try{me(q)}catch(X){ge.error(X)}finally{this.unsubscribe()}}:super._error,this._complete=re?function(){try{re()}catch(q){ge.error(q)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ge;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ve}=this;super.unsubscribe(),!ve&&(null===(ge=this.onFinalize)||void 0===ge||ge.call(this))}}}},4004:(pt,Re,N)=>{N.d(Re,{U:()=>F});var l=N(4482),$=N(5403);function F(se,ge){return(0,l.e)((ve,re)=>{let me=0;ve.subscribe((0,$.x)(re,ye=>{re.next(se.call(ge,ye,me++))}))})}},8189:(pt,Re,N)=>{N.d(Re,{J:()=>F});var l=N(5577),$=N(4671);function F(se=1/0){return(0,l.z)($.y,se)}},5577:(pt,Re,N)=>{N.d(Re,{z:()=>me});var l=N(4004),$=N(8421),F=N(4482),se=N(9672),ge=N(5403),re=N(576);function me(ye,K,q=1/0){return(0,re.m)(K)?me((X,Ne)=>(0,l.U)((Ae,Te)=>K(X,Ae,Ne,Te))((0,$.Xf)(ye(X,Ne))),q):("number"==typeof K&&(q=K),(0,F.e)((X,Ne)=>function ve(ye,K,q,X,Ne,Ae,Te,et){const Ce=[];let de=0,ct=0,Qe=!1;const Fe=()=>{Qe&&!Ce.length&&!de&&K.complete()},Pe=Ze=>de<X?Ie(Ze):Ce.push(Ze),Ie=Ze=>{Ae&&K.next(Ze),de++;let ne=!1;(0,$.Xf)(q(Ze,ct++)).subscribe((0,ge.x)(K,ce=>{Ne?.(ce),Ae?Pe(ce):K.next(ce)},()=>{ne=!0},void 0,()=>{if(ne)try{for(de--;Ce.length&&de<X;){const ce=Ce.shift();Te?(0,se.f)(K,Te,()=>Ie(ce)):Ie(ce)}Fe()}catch(ce){K.error(ce)}}))};return ye.subscribe((0,ge.x)(K,Pe,()=>{Qe=!0,Fe()})),()=>{et?.()}}(X,Ne,ye,q)))}},5363:(pt,Re,N)=>{N.d(Re,{Q:()=>se});var l=N(9672),$=N(4482),F=N(5403);function se(ge,ve=0){return(0,$.e)((re,me)=>{re.subscribe((0,F.x)(me,ye=>(0,l.f)(me,ge,()=>me.next(ye),ve),()=>(0,l.f)(me,ge,()=>me.complete(),ve),ye=>(0,l.f)(me,ge,()=>me.error(ye),ve)))})}},3099:(pt,Re,N)=>{N.d(Re,{B:()=>ge});var l=N(8421),$=N(7579),F=N(930),se=N(4482);function ge(re={}){const{connector:me=(()=>new $.x),resetOnError:ye=!0,resetOnComplete:K=!0,resetOnRefCountZero:q=!0}=re;return X=>{let Ne,Ae,Te,et=0,Ce=!1,de=!1;const ct=()=>{Ae?.unsubscribe(),Ae=void 0},Qe=()=>{ct(),Ne=Te=void 0,Ce=de=!1},Fe=()=>{const Pe=Ne;Qe(),Pe?.unsubscribe()};return(0,se.e)((Pe,Ie)=>{et++,!de&&!Ce&&ct();const Ze=Te=Te??me();Ie.add(()=>{et--,0===et&&!de&&!Ce&&(Ae=ve(Fe,q))}),Ze.subscribe(Ie),!Ne&&et>0&&(Ne=new F.Hp({next:ne=>Ze.next(ne),error:ne=>{de=!0,ct(),Ae=ve(Qe,ye,ne),Ze.error(ne)},complete:()=>{Ce=!0,ct(),Ae=ve(Qe,K),Ze.complete()}}),(0,l.Xf)(Pe).subscribe(Ne))})(X)}}function ve(re,me,...ye){if(!0===me)return void re();if(!1===me)return;const K=new F.Hp({next:()=>{K.unsubscribe(),re()}});return me(...ye).subscribe(K)}},9468:(pt,Re,N)=>{N.d(Re,{R:()=>$});var l=N(4482);function $(F,se=0){return(0,l.e)((ge,ve)=>{ve.add(F.schedule(()=>ge.subscribe(ve),se))})}},8505:(pt,Re,N)=>{N.d(Re,{b:()=>ge});var l=N(576),$=N(4482),F=N(5403),se=N(4671);function ge(ve,re,me){const ye=(0,l.m)(ve)||re||me?{next:ve,error:re,complete:me}:ve;return ye?(0,$.e)((K,q)=>{var X;null===(X=ye.subscribe)||void 0===X||X.call(ye);let Ne=!0;K.subscribe((0,F.x)(q,Ae=>{var Te;null===(Te=ye.next)||void 0===Te||Te.call(ye,Ae),q.next(Ae)},()=>{var Ae;Ne=!1,null===(Ae=ye.complete)||void 0===Ae||Ae.call(ye),q.complete()},Ae=>{var Te;Ne=!1,null===(Te=ye.error)||void 0===Te||Te.call(ye,Ae),q.error(Ae)},()=>{var Ae,Te;Ne&&(null===(Ae=ye.unsubscribe)||void 0===Ae||Ae.call(ye)),null===(Te=ye.finalize)||void 0===Te||Te.call(ye)}))}):se.y}},4408:(pt,Re,N)=>{N.d(Re,{o:()=>ge});var l=N(727);class $ extends l.w0{constructor(re,me){super()}schedule(re,me=0){return this}}const F={setInterval(ve,re,...me){const{delegate:ye}=F;return ye?.setInterval?ye.setInterval(ve,re,...me):setInterval(ve,re,...me)},clearInterval(ve){const{delegate:re}=F;return(re?.clearInterval||clearInterval)(ve)},delegate:void 0};var se=N(8737);class ge extends ${constructor(re,me){super(re,me),this.scheduler=re,this.work=me,this.pending=!1}schedule(re,me=0){var ye;if(this.closed)return this;this.state=re;const K=this.id,q=this.scheduler;return null!=K&&(this.id=this.recycleAsyncId(q,K,me)),this.pending=!0,this.delay=me,this.id=null!==(ye=this.id)&&void 0!==ye?ye:this.requestAsyncId(q,this.id,me),this}requestAsyncId(re,me,ye=0){return F.setInterval(re.flush.bind(re,this),ye)}recycleAsyncId(re,me,ye=0){if(null!=ye&&this.delay===ye&&!1===this.pending)return me;null!=me&&F.clearInterval(me)}execute(re,me){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ye=this._execute(re,me);if(ye)return ye;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(re,me){let K,ye=!1;try{this.work(re)}catch(q){ye=!0,K=q||new Error("Scheduled action threw falsy error")}if(ye)return this.unsubscribe(),K}unsubscribe(){if(!this.closed){const{id:re,scheduler:me}=this,{actions:ye}=me;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(ye,this),null!=re&&(this.id=this.recycleAsyncId(me,re,null)),this.delay=null,super.unsubscribe()}}}},7565:(pt,Re,N)=>{N.d(Re,{v:()=>F});var l=N(6063);class ${constructor(ge,ve=$.now){this.schedulerActionCtor=ge,this.now=ve}schedule(ge,ve=0,re){return new this.schedulerActionCtor(this,ge).schedule(re,ve)}}$.now=l.l.now;class F extends ${constructor(ge,ve=$.now){super(ge,ve),this.actions=[],this._active=!1}flush(ge){const{actions:ve}=this;if(this._active)return void ve.push(ge);let re;this._active=!0;do{if(re=ge.execute(ge.state,ge.delay))break}while(ge=ve.shift());if(this._active=!1,re){for(;ge=ve.shift();)ge.unsubscribe();throw re}}}},4986:(pt,Re,N)=>{N.d(Re,{P:()=>se,z:()=>F});var l=N(4408);const F=new(N(7565).v)(l.o),se=F},6063:(pt,Re,N)=>{N.d(Re,{l:()=>l});const l={now:()=>(l.delegate||Date).now(),delegate:void 0}},3410:(pt,Re,N)=>{N.d(Re,{z:()=>l});const l={setTimeout($,F,...se){const{delegate:ge}=l;return ge?.setTimeout?ge.setTimeout($,F,...se):setTimeout($,F,...se)},clearTimeout($){const{delegate:F}=l;return(F?.clearTimeout||clearTimeout)($)},delegate:void 0}},2202:(pt,Re,N)=>{N.d(Re,{h:()=>$});const $=function l(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(pt,Re,N)=>{N.d(Re,{L:()=>l});const l="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(pt,Re,N)=>{N.d(Re,{_6:()=>ve,jO:()=>se,yG:()=>ge});var l=N(576),$=N(3532);function F(re){return re[re.length-1]}function se(re){return(0,l.m)(F(re))?re.pop():void 0}function ge(re){return(0,$.K)(F(re))?re.pop():void 0}function ve(re,me){return"number"==typeof F(re)?re.pop():me}},8737:(pt,Re,N)=>{function l($,F){if($){const se=$.indexOf(F);0<=se&&$.splice(se,1)}}N.d(Re,{P:()=>l})},3888:(pt,Re,N)=>{function l($){const se=$(ge=>{Error.call(ge),ge.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}N.d(Re,{d:()=>l})},2806:(pt,Re,N)=>{N.d(Re,{O:()=>se,x:()=>F});var l=N(2416);let $=null;function F(ge){if(l.v.useDeprecatedSynchronousErrorHandling){const ve=!$;if(ve&&($={errorThrown:!1,error:null}),ge(),ve){const{errorThrown:re,error:me}=$;if($=null,re)throw me}}else ge()}function se(ge){l.v.useDeprecatedSynchronousErrorHandling&&$&&($.errorThrown=!0,$.error=ge)}},9672:(pt,Re,N)=>{function l($,F,se,ge=0,ve=!1){const re=F.schedule(function(){se(),ve?$.add(this.schedule(null,ge)):this.unsubscribe()},ge);if($.add(re),!ve)return re}N.d(Re,{f:()=>l})},4671:(pt,Re,N)=>{function l($){return $}N.d(Re,{y:()=>l})},1144:(pt,Re,N)=>{N.d(Re,{z:()=>l});const l=$=>$&&"number"==typeof $.length&&"function"!=typeof $},2206:(pt,Re,N)=>{N.d(Re,{D:()=>$});var l=N(576);function $(F){return Symbol.asyncIterator&&(0,l.m)(F?.[Symbol.asyncIterator])}},576:(pt,Re,N)=>{function l($){return"function"==typeof $}N.d(Re,{m:()=>l})},3670:(pt,Re,N)=>{N.d(Re,{c:()=>F});var l=N(8822),$=N(576);function F(se){return(0,$.m)(se[l.L])}},6495:(pt,Re,N)=>{N.d(Re,{T:()=>F});var l=N(2202),$=N(576);function F(se){return(0,$.m)(se?.[l.h])}},8239:(pt,Re,N)=>{N.d(Re,{t:()=>$});var l=N(576);function $(F){return(0,l.m)(F?.then)}},3260:(pt,Re,N)=>{N.d(Re,{L:()=>se,Q:()=>F});var l=N(655),$=N(576);function F(ge){return(0,l.FC)(this,arguments,function*(){const re=ge.getReader();try{for(;;){const{value:me,done:ye}=yield(0,l.qq)(re.read());if(ye)return yield(0,l.qq)(void 0);yield yield(0,l.qq)(me)}}finally{re.releaseLock()}})}function se(ge){return(0,$.m)(ge?.getReader)}},3532:(pt,Re,N)=>{N.d(Re,{K:()=>$});var l=N(576);function $(F){return F&&(0,l.m)(F.schedule)}},4482:(pt,Re,N)=>{N.d(Re,{A:()=>$,e:()=>F});var l=N(576);function $(se){return(0,l.m)(se?.lift)}function F(se){return ge=>{if($(ge))return ge.lift(function(ve){try{return se(ve,this)}catch(re){this.error(re)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(pt,Re,N)=>{function l(){}N.d(Re,{Z:()=>l})},9635:(pt,Re,N)=>{N.d(Re,{U:()=>F,z:()=>$});var l=N(4671);function $(...se){return F(se)}function F(se){return 0===se.length?l.y:1===se.length?se[0]:function(ve){return se.reduce((re,me)=>me(re),ve)}}},7849:(pt,Re,N)=>{N.d(Re,{h:()=>F});var l=N(2416),$=N(3410);function F(se){$.z.setTimeout(()=>{const{onUnhandledError:ge}=l.v;if(!ge)throw se;ge(se)})}},4532:(pt,Re,N)=>{function l($){return new TypeError(`You provided ${null!==$&&"object"==typeof $?"an invalid object":`'${$}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}N.d(Re,{z:()=>l})},655:(pt,Re,N)=>{function se(J,ee){var he={};for(var le in J)Object.prototype.hasOwnProperty.call(J,le)&&ee.indexOf(le)<0&&(he[le]=J[le]);if(null!=J&&"function"==typeof Object.getOwnPropertySymbols){var je=0;for(le=Object.getOwnPropertySymbols(J);je<le.length;je++)ee.indexOf(le[je])<0&&Object.prototype.propertyIsEnumerable.call(J,le[je])&&(he[le[je]]=J[le[je]])}return he}function me(J,ee,he,le){return new(he||(he=Promise))(function(Be,yt){function ln(vn){try{Ke(le.next(vn))}catch(Zn){yt(Zn)}}function Nt(vn){try{Ke(le.throw(vn))}catch(Zn){yt(Zn)}}function Ke(vn){vn.done?Be(vn.value):function je(Be){return Be instanceof he?Be:new he(function(yt){yt(Be)})}(vn.value).then(ln,Nt)}Ke((le=le.apply(J,ee||[])).next())})}function Ce(J){return this instanceof Ce?(this.v=J,this):new Ce(J)}function de(J,ee,he){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var je,le=he.apply(J,ee||[]),Be=[];return je={},yt("next"),yt("throw"),yt("return"),je[Symbol.asyncIterator]=function(){return this},je;function yt(mn){le[mn]&&(je[mn]=function(cn){return new Promise(function(Gt,St){Be.push([mn,cn,Gt,St])>1||ln(mn,cn)})})}function ln(mn,cn){try{!function Nt(mn){mn.value instanceof Ce?Promise.resolve(mn.value.v).then(Ke,vn):Zn(Be[0][2],mn)}(le[mn](cn))}catch(Gt){Zn(Be[0][3],Gt)}}function Ke(mn){ln("next",mn)}function vn(mn){ln("throw",mn)}function Zn(mn,cn){mn(cn),Be.shift(),Be.length&&ln(Be[0][0],Be[0][1])}}function Qe(J){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var he,ee=J[Symbol.asyncIterator];return ee?ee.call(J):(J=function X(J){var ee="function"==typeof Symbol&&Symbol.iterator,he=ee&&J[ee],le=0;if(he)return he.call(J);if(J&&"number"==typeof J.length)return{next:function(){return J&&le>=J.length&&(J=void 0),{value:J&&J[le++],done:!J}}};throw new TypeError(ee?"Object is not iterable.":"Symbol.iterator is not defined.")}(J),he={},le("next"),le("throw"),le("return"),he[Symbol.asyncIterator]=function(){return this},he);function le(Be){he[Be]=J[Be]&&function(yt){return new Promise(function(ln,Nt){!function je(Be,yt,ln,Nt){Promise.resolve(Nt).then(function(Ke){Be({value:Ke,done:ln})},yt)}(ln,Nt,(yt=J[Be](yt)).done,yt.value)})}}}N.d(Re,{FC:()=>de,KL:()=>Qe,_T:()=>se,mG:()=>me,qq:()=>Ce})},4650:(pt,Re,N)=>{N.d(Re,{$8M:()=>Vu,$Z:()=>Of,AFp:()=>l_,ALo:()=>Jc,AaK:()=>me,BQk:()=>Qr,CHM:()=>oi,CRH:()=>v0,CZH:()=>a_,CqO:()=>ds,D6c:()=>eR,DdM:()=>_I,EJc:()=>u_,EiD:()=>Tc,EpF:()=>sD,F$t:()=>Db,F4k:()=>wb,FYo:()=>lv,FiY:()=>hl,G48:()=>xF,Gf:()=>MI,GfV:()=>WC,Gpc:()=>q,Gre:()=>ID,Hsn:()=>Ib,Ikx:()=>Ub,JOm:()=>Co,JVY:()=>ff,KtG:()=>jt,L6k:()=>pf,LAX:()=>mf,LFG:()=>Mi,LSH:()=>Hm,Lbi:()=>Mk,Lck:()=>sk,MAs:()=>Td,MMx:()=>hn,NdJ:()=>Rg,O4$:()=>ym,OlP:()=>Xn,Oqu:()=>Rd,PXZ:()=>$k,Q6J:()=>Qs,QGY:()=>xd,QP$:()=>ue,QbO:()=>c_,Qsj:()=>zC,R0b:()=>io,RDi:()=>cf,Rgc:()=>zd,SBq:()=>Df,Sil:()=>Ok,Suo:()=>Vl,TTD:()=>co,TgZ:()=>qf,Udp:()=>kb,W1O:()=>t_,WFA:()=>Cb,X6Q:()=>cS,XFs:()=>rt,Xpm:()=>Me,Xts:()=>Ky,Y36:()=>pd,YKP:()=>t0,YNc:()=>vb,Yjl:()=>k,Yz7:()=>cn,Z0I:()=>nr,ZZ4:()=>C_,_Bn:()=>e0,_UZ:()=>Gc,_Vd:()=>Ef,_c5:()=>wS,_uU:()=>kd,aQg:()=>H0,c2e:()=>qI,cJS:()=>St,cg1:()=>OD,d8E:()=>Hb,dDg:()=>Bk,dqk:()=>gt,eBb:()=>Wy,eFA:()=>rS,ekj:()=>ep,eoX:()=>tS,f3M:()=>Mm,g9A:()=>GI,h0i:()=>Ud,hGG:()=>Jk,hij:()=>Pl,iGM:()=>y0,ifc:()=>ht,ip1:()=>x0,jDz:()=>cI,kL8:()=>PD,lG2:()=>P,lcZ:()=>a0,lqb:()=>Zu,lri:()=>JI,mCW:()=>y,n5z:()=>jo,n_E:()=>Xg,oAB:()=>Qt,oJD:()=>Um,oxw:()=>Eb,pB0:()=>Lm,q3G:()=>_i,q4F:()=>qC,qLn:()=>Sf,qOj:()=>Sg,qZA:()=>Md,qzn:()=>Is,rWj:()=>eS,sBO:()=>uS,sIi:()=>Uc,s_b:()=>nu,soG:()=>su,tb:()=>WI,tp0:()=>fl,uIk:()=>gb,vHH:()=>Te,vpe:()=>ia,wAp:()=>Vt,xi3:()=>eu,xp6:()=>EE,ynx:()=>kg,z2F:()=>__,z3N:()=>Gs,zSh:()=>Jy,zs3:()=>Nc});var l=N(7579),$=N(727),F=N(9751),se=N(6451),ge=N(3099);function ve(o){for(let a in o)if(o[a]===ve)return a;throw Error("Could not find renamed property on target object.")}function re(o,a){for(const u in a)a.hasOwnProperty(u)&&!o.hasOwnProperty(u)&&(o[u]=a[u])}function me(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(me).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const u=a.indexOf("\n");return-1===u?a:a.substring(0,u)}function ye(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const K=ve({__forward_ref__:ve});function q(o){return o.__forward_ref__=q,o.toString=function(){return me(this())},o}function X(o){return Ne(o)?o():o}function Ne(o){return"function"==typeof o&&o.hasOwnProperty(K)&&o.__forward_ref__===q}class Te extends Error{constructor(a,u){super(function et(o,a){return`NG0${Math.abs(o)}${a?": "+a.trim():""}`}(a,u)),this.code=a}}function Ce(o){return"string"==typeof o?o:null==o?"":String(o)}function Pe(o,a){throw new Te(-201,!1)}function Nt(o,a){null==o&&function Ke(o,a,u,h){throw new Error(`ASSERTION ERROR: ${o}`+(null==h?"":` [Expected=> ${u} ${h} ${a} <=Actual]`))}(a,o,null,"!=")}function cn(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function St(o){return{providers:o.providers||[],imports:o.imports||[]}}function xn(o){return pr(o,ni)||pr(o,Oi)}function nr(o){return null!==xn(o)}function pr(o,a){return o.hasOwnProperty(a)?o[a]:null}function qi(o){return o&&(o.hasOwnProperty(ti)||o.hasOwnProperty(ir))?o[ti]:null}const ni=ve({\u0275prov:ve}),ti=ve({\u0275inj:ve}),Oi=ve({ngInjectableDef:ve}),ir=ve({ngInjectorDef:ve});var rt=(()=>((rt=rt||{})[rt.Default=0]="Default",rt[rt.Host=1]="Host",rt[rt.Self=2]="Self",rt[rt.SkipSelf=4]="SkipSelf",rt[rt.Optional=8]="Optional",rt))();let En;function wn(o){const a=En;return En=o,a}function bi(o,a,u){const h=xn(o);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:u&rt.Optional?null:void 0!==a?a:void Pe(me(o))}function Dn(o){return{toString:o}.toString()}var kn=(()=>((kn=kn||{})[kn.OnPush=0]="OnPush",kn[kn.Default=1]="Default",kn))(),ht=(()=>{return(o=ht||(ht={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",ht;var o})();const gt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),wi={},Mt=[],Ai=ve({\u0275cmp:ve}),Rt=ve({\u0275dir:ve}),Ti=ve({\u0275pipe:ve}),Zt=ve({\u0275mod:ve}),ri=ve({\u0275fac:ve}),Ln=ve({__NG_ELEMENT_ID__:ve});let tt=0;function Me(o){return Dn(()=>{const u=!0===o.standalone,h={},f={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:h,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===kn.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&o.dependencies||null,getStandaloneInjector:null,selectors:o.selectors||Mt,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||ht.Emulated,id:"c"+tt++,styles:o.styles||Mt,_:null,setInput:null,schemas:o.schemas||null,tView:null},m=o.dependencies,v=o.features;return f.inputs=z(o.inputs,h),f.outputs=z(o.outputs),v&&v.forEach(C=>C(f)),f.directiveDefs=m?()=>("function"==typeof m?m():m).map(wt).filter(Tt):null,f.pipeDefs=m?()=>("function"==typeof m?m():m).map(G).filter(Tt):null,f})}function wt(o){return A(o)||R(o)}function Tt(o){return null!==o}function Qt(o){return Dn(()=>({type:o.type,bootstrap:o.bootstrap||Mt,declarations:o.declarations||Mt,imports:o.imports||Mt,exports:o.exports||Mt,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null}))}function z(o,a){if(null==o)return wi;const u={};for(const h in o)if(o.hasOwnProperty(h)){let f=o[h],m=f;Array.isArray(f)&&(m=f[1],f=f[0]),u[f]=h,a&&(a[f]=m)}return u}const P=Me;function k(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,standalone:!0===o.standalone,onDestroy:o.type.prototype.ngOnDestroy||null}}function A(o){return o[Ai]||null}function R(o){return o[Rt]||null}function G(o){return o[Ti]||null}function ue(o){const a=A(o)||R(o)||G(o);return null!==a&&a.standalone}function Le(o,a){const u=o[Zt]||null;if(!u&&!0===a)throw new Error(`Type ${me(o)} does not have '\u0275mod' property.`);return u}function ji(o){return Array.isArray(o)&&"object"==typeof o[1]}function or(o){return Array.isArray(o)&&!0===o[1]}function zr(o){return 0!=(8&o.flags)}function ys(o){return 2==(2&o.flags)}function lo(o){return 1==(1&o.flags)}function Rr(o){return null!==o.template}function il(o){return 0!=(256&o[2])}function Yi(o,a){return o.hasOwnProperty(ri)?o[ri]:null}class wa{constructor(a,u,h){this.previousValue=a,this.currentValue=u,this.firstChange=h}isFirstChange(){return this.firstChange}}function co(){return ic}function ic(o){return o.type.prototype.ngOnChanges&&(o.setInput=ol),rc}function rc(){const o=Vo(this),a=o?.current;if(a){const u=o.previous;if(u===wi)o.previous=a;else for(let h in a)u[h]=a[h];o.current=null,this.ngOnChanges(a)}}function ol(o,a,u,h){const f=Vo(o)||function mr(o,a){return o[sc]=a}(o,{previous:wi,current:null}),m=f.current||(f.current={}),v=f.previous,C=this.declaredInputs[u],D=v[C];m[C]=new wa(D&&D.currentValue,a,v===wi),o[h]=a}co.ngInherit=!0;const sc="__ngSimpleChanges__";function Vo(o){return o[sc]||null}function si(o){for(;Array.isArray(o);)o=o[0];return o}function os(o,a){return si(a[o])}function lr(o,a){return si(a[o.index])}function Ca(o,a){return o.data[a]}function gr(o,a){return o[a]}function In(o,a){const u=a[o];return ji(u)?u:u[0]}function fo(o){return 64==(64&o[2])}function Gr(o,a){return null==a?null:o[a]}function Ea(o){o[18]=0}function Da(o,a){o[5]+=a;let u=o,h=o[3];for(;null!==h&&(1===a&&1===u[5]||-1===a&&0===u[5]);)h[5]+=a,u=h,h=h[3]}const $t={lFrame:Nh(null),bindingsEnabled:!0};function Xe(){return $t.bindingsEnabled}function Se(){return $t.lFrame.lView}function Ft(){return $t.lFrame.tView}function oi(o){return $t.lFrame.contextLView=o,o[8]}function jt(o){return $t.lFrame.contextLView=null,o}function Yn(){let o=po();for(;null!==o&&64===o.type;)o=o.parent;return o}function po(){return $t.lFrame.currentTNode}function Ki(o,a){const u=$t.lFrame;u.currentTNode=o,u.isParent=a}function js(){return $t.lFrame.isParent}function al(){$t.lFrame.isParent=!1}function Ci(){const o=$t.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}function cc(){return $t.lFrame.bindingIndex++}function Uo(o){const a=$t.lFrame,u=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,u}function gm(o,a){const u=$t.lFrame;u.bindingIndex=u.bindingRootIndex=o,Su(a)}function Su(o){$t.lFrame.currentDirectiveIndex=o}function kh(o){const a=$t.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}function Rh(){return $t.lFrame.currentQueryIndex}function Oh(o){$t.lFrame.currentQueryIndex=o}function Ph(o){const a=o[1];return 2===a.type?a.declTNode:1===a.type?o[6]:null}function by(o,a,u){if(u&rt.SkipSelf){let f=a,m=o;for(;!(f=f.parent,null!==f||u&rt.Host||(f=Ph(m),null===f||(m=m[15],10&f.type))););if(null===f)return!1;a=f,o=m}const h=$t.lFrame=wy();return h.currentTNode=a,h.lView=o,!0}function Au(o){const a=wy(),u=o[1];$t.lFrame=a,a.currentTNode=u.firstChild,a.lView=o,a.tView=u,a.contextLView=o,a.bindingIndex=u.bindingStartIndex,a.inI18n=!1}function wy(){const o=$t.lFrame,a=null===o?null:o.child;return null===a?Nh(o):a}function Nh(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function Cy(){const o=$t.lFrame;return $t.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const _m=Cy;function ll(){const o=Cy();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function pi(){return $t.lFrame.selectedIndex}function _o(o){$t.lFrame.selectedIndex=o}function mi(){const o=$t.lFrame;return Ca(o.tView,o.selectedIndex)}function ym(){$t.lFrame.currentNamespace="svg"}function uc(o,a){for(let u=a.directiveStart,h=a.directiveEnd;u<h;u++){const m=o.data[u].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:C,ngAfterViewInit:D,ngAfterViewChecked:S,ngOnDestroy:x}=m;v&&(o.contentHooks||(o.contentHooks=[])).push(-u,v),C&&((o.contentHooks||(o.contentHooks=[])).push(u,C),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(u,C)),D&&(o.viewHooks||(o.viewHooks=[])).push(-u,D),S&&((o.viewHooks||(o.viewHooks=[])).push(u,S),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(u,S)),null!=x&&(o.destroyHooks||(o.destroyHooks=[])).push(u,x)}}function dc(o,a,u){Vh(o,a,3,u)}function Sa(o,a,u,h){(3&o[2])===u&&Vh(o,a,u,h)}function Lh(o,a){let u=o[2];(3&u)===a&&(u&=2047,u+=1,o[2]=u)}function Vh(o,a,u,h){const m=h??-1,v=a.length-1;let C=0;for(let D=void 0!==h?65535&o[18]:0;D<v;D++)if("number"==typeof a[D+1]){if(C=a[D],null!=h&&C>=h)break}else a[D]<0&&(o[18]+=65536),(C<m||-1==m)&&(vm(o,u,a,D),o[18]=(4294901760&o[18])+D+2),D++}function vm(o,a,u,h){const f=u[h]<0,m=u[h+1],C=o[f?-u[h]:u[h]];if(f){if(o[2]>>11<o[18]>>16&&(3&o[2])===a){o[2]+=2048;try{m.call(C)}finally{}}}else try{m.call(C)}finally{}}class as{constructor(a,u,h){this.factory=a,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=h}}function yo(o,a,u){let h=0;for(;h<u.length;){const f=u[h];if("number"==typeof f){if(0!==f)break;h++;const m=u[h++],v=u[h++],C=u[h++];o.setAttribute(a,v,C,m)}else{const m=f,v=u[++h];$h(m)?o.setProperty(a,m,v):o.setAttribute(a,m,v),h++}}return h}function jh(o){return 3===o||4===o||6===o}function $h(o){return 64===o.charCodeAt(0)}function fc(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let u=-1;for(let h=0;h<a.length;h++){const f=a[h];"number"==typeof f?u=f:0===u||bm(o,u,f,null,-1===u||2===u?a[++h]:null)}}return o}function bm(o,a,u,h,f){let m=0,v=o.length;if(-1===a)v=-1;else for(;m<o.length;){const C=o[m++];if("number"==typeof C){if(C===a){v=-1;break}if(C>a){v=m-1;break}}}for(;m<o.length;){const C=o[m];if("number"==typeof C)break;if(C===u){if(null===h)return void(null!==f&&(o[m+1]=f));if(h===o[m+1])return void(o[m+2]=f)}m++,null!==h&&m++,null!==f&&m++}-1!==v&&(o.splice(v,0,a),m=v+1),o.splice(m++,0,u),null!==h&&o.splice(m++,0,h),null!==f&&o.splice(m++,0,f)}function My(o){return-1!==o}function Aa(o){return 32767&o}function Ho(o,a){let u=function xy(o){return o>>16}(o),h=a;for(;u>0;)h=h[15],u--;return h}let zh=!0;function ku(o){const a=zh;return zh=o,a}let wm=0;const Cs={};function Ta(o,a){const u=Ru(o,a);if(-1!==u)return u;const h=a[1];h.firstCreatePass&&(o.injectorIndex=a.length,Gh(h.data,o),Gh(a,null),Gh(h.blueprint,null));const f=pc(o,a),m=o.injectorIndex;if(My(f)){const v=Aa(f),C=Ho(f,a),D=C[1].data;for(let S=0;S<8;S++)a[m+S]=C[v+S]|D[v+S]}return a[m+8]=f,m}function Gh(o,a){o.push(0,0,0,0,0,0,0,0,a)}function Ru(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function pc(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let u=0,h=null,f=a;for(;null!==f;){if(h=Lu(f),null===h)return-1;if(u++,f=f[15],-1!==h.injectorIndex)return h.injectorIndex|u<<16}return-1}function mc(o,a,u){!function Ry(o,a,u){let h;"string"==typeof u?h=u.charCodeAt(0)||0:u.hasOwnProperty(Ln)&&(h=u[Ln]),null==h&&(h=u[Ln]=wm++);const f=255&h;a.data[o+(f>>5)]|=1<<f}(o,a,u)}function Ou(o,a,u){if(u&rt.Optional||void 0!==o)return o;Pe()}function Ma(o,a,u,h){if(u&rt.Optional&&void 0===h&&(h=null),0==(u&(rt.Self|rt.Host))){const f=o[9],m=wn(void 0);try{return f?f.get(a,h,u&rt.Optional):bi(a,h,u&rt.Optional)}finally{wn(m)}}return Ou(h,0,u)}function Pu(o,a,u,h=rt.Default,f){if(null!==o){if(1024&a[2]){const v=function Py(o,a,u,h,f){let m=o,v=a;for(;null!==m&&null!==v&&1024&v[2]&&!(256&v[2]);){const C=Cm(m,v,u,h|rt.Self,Cs);if(C!==Cs)return C;let D=m.parent;if(!D){const S=v[21];if(S){const x=S.get(u,Cs,h);if(x!==Cs)return x}D=Lu(v),v=v[15]}m=D}return f}(o,a,u,h,Cs);if(v!==Cs)return v}const m=Cm(o,a,u,h,Cs);if(m!==Cs)return m}return Ma(a,u,h,f)}function Cm(o,a,u,h,f){const m=function Oy(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(Ln)?o[Ln]:void 0;return"number"==typeof a?a>=0?255&a:Im:a}(u);if("function"==typeof m){if(!by(a,o,h))return h&rt.Host?Ou(f,0,h):Ma(a,u,h,f);try{const v=m(h);if(null!=v||h&rt.Optional)return v;Pe()}finally{_m()}}else if("number"==typeof m){let v=null,C=Ru(o,a),D=-1,S=h&rt.Host?a[16][6]:null;for((-1===C||h&rt.SkipSelf)&&(D=-1===C?pc(o,a):a[C+8],-1!==D&&Dm(h,!1)?(v=a[1],C=Aa(D),a=Ho(D,a)):C=-1);-1!==C;){const x=a[1];if(Nu(m,C,x.data)){const j=Em(C,a,u,v,h,S);if(j!==Cs)return j}D=a[C+8],-1!==D&&Dm(h,a[1].data[C+8]===S)&&Nu(m,C,a)?(v=x,C=Aa(D),a=Ho(D,a)):C=-1}}return f}function Em(o,a,u,h,f,m){const v=a[1],C=v.data[o+8],x=_c(C,v,u,null==h?ys(C)&&zh:h!=v&&0!=(3&C.type),f&rt.Host&&m===C);return null!==x?zs(a,v,x,C):Cs}function _c(o,a,u,h,f){const m=o.providerIndexes,v=a.data,C=1048575&m,D=o.directiveStart,x=m>>20,Z=f?C+x:o.directiveEnd;for(let ae=h?C:C+x;ae<Z;ae++){const xe=v[ae];if(ae<D&&u===xe||ae>=D&&xe.type===u)return ae}if(f){const ae=v[D];if(ae&&Rr(ae)&&ae.type===u)return D}return null}function zs(o,a,u,h){let f=o[u];const m=a.data;if(function Bh(o){return o instanceof as}(f)){const v=f;v.resolving&&function ct(o,a){const u=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new Te(-200,`Circular dependency in DI detected for ${o}${u}`)}(function de(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():Ce(o)}(m[u]));const C=ku(v.canSeeViewProviders);v.resolving=!0;const D=v.injectImpl?wn(v.injectImpl):null;by(o,h,rt.Default);try{f=o[u]=v.factory(void 0,m,o,h),a.firstCreatePass&&u>=h.directiveStart&&function Tu(o,a,u){const{ngOnChanges:h,ngOnInit:f,ngDoCheck:m}=a.type.prototype;if(h){const v=ic(a);(u.preOrderHooks||(u.preOrderHooks=[])).push(o,v),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,v)}f&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-o,f),m&&((u.preOrderHooks||(u.preOrderHooks=[])).push(o,m),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,m))}(u,m[u],a)}finally{null!==D&&wn(D),ku(C),v.resolving=!1,_m()}}return f}function Nu(o,a,u){return!!(u[a+(o>>5)]&1<<o)}function Dm(o,a){return!(o&rt.Self||o&rt.Host&&a)}class yc{constructor(a,u){this._tNode=a,this._lView=u}get(a,u,h){return Pu(this._tNode,this._lView,a,h,u)}}function Im(){return new yc(Yn(),Se())}function jo(o){return Dn(()=>{const a=o.prototype.constructor,u=a[ri]||Fu(a),h=Object.prototype;let f=Object.getPrototypeOf(o.prototype).constructor;for(;f&&f!==h;){const m=f[ri]||Fu(f);if(m&&m!==u)return m;f=Object.getPrototypeOf(f)}return m=>new m})}function Fu(o){return Ne(o)?()=>{const a=Fu(X(o));return a&&a()}:Yi(o)}function Lu(o){const a=o[1],u=a.type;return 2===u?a.declTNode:1===u?o[6]:null}function Vu(o){return function gc(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const u=o.attrs;if(u){const h=u.length;let f=0;for(;f<h;){const m=u[f];if(jh(m))break;if(0===m)f+=2;else if("number"==typeof m)for(f++;f<h&&"string"==typeof u[f];)f++;else{if(m===a)return u[f+1];f+=2}}}return null}(Yn(),o)}const vc="__parameters__";function bc(o,a,u){return Dn(()=>{const h=function Sm(o){return function(...u){if(o){const h=o(...u);for(const f in h)this[f]=h[f]}}}(a);function f(...m){if(this instanceof f)return h.apply(this,m),this;const v=new f(...m);return C.annotation=v,C;function C(D,S,x){const j=D.hasOwnProperty(vc)?D[vc]:Object.defineProperty(D,vc,{value:[]})[vc];for(;j.length<=x;)j.push(null);return(j[x]=j[x]||[]).push(v),D}}return u&&(f.prototype=Object.create(u.prototype)),f.prototype.ngMetadataName=o,f.annotationCls=f,f})}class Xn{constructor(a,u){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=cn({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function gi(o,a){void 0===a&&(a=o);for(let u=0;u<o.length;u++){let h=o[u];Array.isArray(h)?(a===o&&(a=o.slice(0,u)),gi(h,a)):a!==o&&a.push(h)}return a}function vt(o,a){o.forEach(u=>Array.isArray(u)?vt(u,a):a(u))}function Pi(o,a,u){a>=o.length?o.push(u):o.splice(a,0,u)}function Ye(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function Un(o,a){const u=[];for(let h=0;h<o;h++)u.push(a);return u}function Pn(o,a,u){let h=cr(o,a);return h>=0?o[1|h]=u:(h=~h,function ka(o,a,u,h){let f=o.length;if(f==a)o.push(u,h);else if(1===f)o.push(h,o[0]),o[0]=u;else{for(f--,o.push(o[f-1],o[f]);f>a;)o[f]=o[f-2],f--;o[a]=u,o[a+1]=h}}(o,h,a,u)),h}function Ra(o,a){const u=cr(o,a);if(u>=0)return o[1|u]}function cr(o,a){return function Tm(o,a,u){let h=0,f=o.length>>u;for(;f!==h;){const m=h+(f-h>>1),v=o[m<<u];if(a===v)return m<<u;v>a?f=m:h=m+1}return~(f<<u)}(o,a,1)}const Ec={},zo="__NG_DI_FLAG__",Nr="ngTempTokenPath",Uu=/\n/gm,Lt="__source";let ai;function Ir(o){const a=ai;return ai=o,a}function Pa(o,a=rt.Default){if(void 0===ai)throw new Te(-203,!1);return null===ai?bi(o,void 0,a):ai.get(o,a&rt.Optional?null:void 0,a)}function Mi(o,a=rt.Default){return(function Qn(){return En}()||Pa)(X(o),a)}function Mm(o,a=rt.Default){return"number"!=typeof a&&(a=0|(a.optional&&8)|(a.host&&1)|(a.self&&2)|(a.skipSelf&&4)),Mi(o,a)}function Dc(o){const a=[];for(let u=0;u<o.length;u++){const h=X(o[u]);if(Array.isArray(h)){if(0===h.length)throw new Te(900,!1);let f,m=rt.Default;for(let v=0;v<h.length;v++){const C=h[v],D=Vy(C);"number"==typeof D?-1===D?f=C.token:m|=D:f=C}a.push(Mi(f,m))}else a.push(Mi(h))}return a}function Na(o,a){return o[zo]=a,o.prototype[zo]=a,o}function Vy(o){return o[zo]}const hl=Na(bc("Optional"),8),fl=Na(bc("SkipSelf"),4);let pl,zu,Sc;function cf(o){pl=o}function gl(o){return function uf(){if(void 0===zu&&(zu=null,gt.trustedTypes))try{zu=gt.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return zu}()?.createHTML(o)||o}function df(o){return function _l(){if(void 0===Sc&&(Sc=null,gt.trustedTypes))try{Sc=gt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return Sc}()?.createHTML(o)||o}class Va{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class hf extends Va{getTypeName(){return"HTML"}}class Pm extends Va{getTypeName(){return"Style"}}class Wu extends Va{getTypeName(){return"Script"}}class Nm extends Va{getTypeName(){return"URL"}}class Ac extends Va{getTypeName(){return"ResourceURL"}}function Gs(o){return o instanceof Va?o.changingThisBreaksApplicationSecurity:o}function Is(o,a){const u=function Fm(o){return o instanceof Va&&o.getTypeName()||null}(o);if(null!=u&&u!==a){if("ResourceURL"===u&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===a}function ff(o){return new hf(o)}function pf(o){return new Pm(o)}function Wy(o){return new Wu(o)}function mf(o){return new Nm(o)}function Lm(o){return new Ac(o)}class gf{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const u=(new window.DOMParser).parseFromString(gl(a),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(a):(u.removeChild(u.firstChild),u)}catch{return null}}}class OC{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const h=this.inertDocument.createElement("body");u.appendChild(h)}}getInertBodyElement(a){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=gl(a),u;const h=this.inertDocument.createElement("body");return h.innerHTML=gl(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(h),h}stripCustomNsAttrs(a){const u=a.attributes;for(let f=u.length-1;0<f;f--){const v=u.item(f).name;("xmlns:ns1"===v||0===v.indexOf("ns1:"))&&a.removeAttribute(v)}let h=a.firstChild;for(;h;)h.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(h),h=h.nextSibling}}const g=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function y(o){return(o=String(o)).match(g)?o:"unsafe:"+o}function E(o){const a={};for(const u of o.split(","))a[u]=!0;return a}function M(...o){const a={};for(const u of o)for(const h in u)u.hasOwnProperty(h)&&(a[h]=!0);return a}const L=E("area,br,col,hr,img,wbr"),oe=E("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Oe=E("rp,rt"),Jn=M(L,M(oe,E("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),M(Oe,E("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),M(Oe,oe)),cs=E("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),yf=M(cs,E("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),E("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),vf=E("script,style,template");class Vm{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let u=a.firstChild,h=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?h=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,h&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let f=this.checkClobberedElement(u,u.nextSibling);if(f){u=f;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(a){const u=a.nodeName.toLowerCase();if(!Jn.hasOwnProperty(u))return this.sanitizedSomething=!0,!vf.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const h=a.attributes;for(let f=0;f<h.length;f++){const m=h.item(f),v=m.name,C=v.toLowerCase();if(!yf.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let D=m.value;cs[C]&&(D=y(D)),this.buf.push(" ",v,'="',yl(D),'"')}return this.buf.push(">"),!0}endElement(a){const u=a.nodeName.toLowerCase();Jn.hasOwnProperty(u)&&!L.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(a){this.buf.push(yl(a))}checkClobberedElement(a,u){if(u&&(a.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return u}}const Bm=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,bf=/([^\#-~ |!])/g;function yl(o){return o.replace(/&/g,"&amp;").replace(Bm,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(bf,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let vl;function Tc(o,a){let u=null;try{vl=vl||function qu(o){const a=new OC(o);return function b(){try{return!!(new window.DOMParser).parseFromString(gl(""),"text/html")}catch{return!1}}()?new gf(a):a}(o);let h=a?String(a):"";u=vl.getInertBodyElement(h);let f=5,m=h;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,h=m,m=u.innerHTML,u=vl.getInertBodyElement(h)}while(h!==m);return gl((new Vm).sanitizeChildren(bl(u)||u))}finally{if(u){const h=bl(u)||u;for(;h.firstChild;)h.removeChild(h.firstChild)}}}function bl(o){return"content"in o&&function qy(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var _i=(()=>((_i=_i||{})[_i.NONE=0]="NONE",_i[_i.HTML=1]="HTML",_i[_i.STYLE=2]="STYLE",_i[_i.SCRIPT=3]="SCRIPT",_i[_i.URL=4]="URL",_i[_i.RESOURCE_URL=5]="RESOURCE_URL",_i))();function Um(o){const a=jm();return a?df(a.sanitize(_i.HTML,o)||""):Is(o,"HTML")?df(Gs(o)):Tc(function ml(){return void 0!==pl?pl:typeof document<"u"?document:void 0}(),Ce(o))}function Hm(o){const a=jm();return a?a.sanitize(_i.URL,o)||"":Is(o,"URL")?Gs(o):y(Ce(o))}function jm(){const o=Se();return o&&o[12]}const Ky=new Xn("ENVIRONMENT_INITIALIZER"),Zy=new Xn("INJECTOR",-1),VC=new Xn("INJECTOR_DEF_TYPES");class Qy{get(a,u=Ec){if(u===Ec){const h=new Error(`NullInjectorError: No provider for ${me(a)}!`);throw h.name="NullInjectorError",h}return u}}function Xy(...o){return{\u0275providers:Yu(0,o)}}function Yu(o,...a){const u=[],h=new Set;let f;return vt(a,m=>{const v=m;wf(v,u,[],h)&&(f||(f=[]),f.push(v))}),void 0!==f&&XT(f,u),u}function XT(o,a){for(let u=0;u<o.length;u++){const{providers:f}=o[u];vt(f,m=>{a.push(m)})}}function wf(o,a,u,h){if(!(o=X(o)))return!1;let f=null,m=qi(o);const v=!m&&A(o);if(m||v){if(v&&!v.standalone)return!1;f=o}else{const D=o.ngModule;if(m=qi(D),!m)return!1;f=D}const C=h.has(f);if(v){if(C)return!1;if(h.add(f),v.dependencies){const D="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const S of D)wf(S,a,u,h)}}else{if(!m)return!1;{if(null!=m.imports&&!C){let S;h.add(f);try{vt(m.imports,x=>{wf(x,a,u,h)&&(S||(S=[]),S.push(x))})}finally{}void 0!==S&&XT(S,a)}if(!C){const S=Yi(f)||(()=>new f);a.push({provide:f,useFactory:S,deps:Mt},{provide:VC,useValue:f,multi:!0},{provide:Ky,useValue:()=>Mi(f),multi:!0})}const D=m.providers;null==D||C||vt(D,x=>{a.push(x)})}}return f!==o&&void 0!==o.providers}const JT=ve({provide:String,useValue:ve});function BC(o){return null!==o&&"object"==typeof o&&JT in o}function Ku(o){return"function"==typeof o}const Jy=new Xn("Set Injector scope."),ev={},H1={};let jC;function tv(){return void 0===jC&&(jC=new Qy),jC}class Zu{}class Cf extends Zu{constructor(a,u,h,f){super(),this.parent=u,this.source=h,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,zm(a,v=>this.processProvider(v)),this.records.set(Zy,wl(void 0,this)),f.has("environment")&&this.records.set(Zu,wl(void 0,this));const m=this.records.get(Jy);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(VC.multi,Mt,rt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const u=Ir(this),h=wn(void 0);try{return a()}finally{Ir(u),wn(h)}}get(a,u=Ec,h=rt.Default){this.assertNotDestroyed();const f=Ir(this),m=wn(void 0);try{if(!(h&rt.SkipSelf)){let C=this.records.get(a);if(void 0===C){const D=function av(o){return"function"==typeof o||"object"==typeof o&&o instanceof Xn}(a)&&xn(a);C=D&&this.injectableDefInScope(D)?wl(nv(a),ev):null,this.records.set(a,C)}if(null!=C)return this.hydrate(a,C)}return(h&rt.Self?tv():this.parent).get(a,u=h&rt.Optional&&u===Ec?null:u)}catch(v){if("NullInjectorError"===v.name){if((v[Nr]=v[Nr]||[]).unshift(me(a)),f)throw v;return function By(o,a,u,h){const f=o[Nr];throw a[Lt]&&f.unshift(a[Lt]),o.message=function Qh(o,a,u,h=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.slice(2):o;let f=me(a);if(Array.isArray(a))f=a.map(me).join(" -> ");else if("object"==typeof a){let m=[];for(let v in a)if(a.hasOwnProperty(v)){let C=a[v];m.push(v+":"+("string"==typeof C?JSON.stringify(C):me(C)))}f=`{${m.join(", ")}}`}return`${u}${h?"("+h+")":""}[${f}]: ${o.replace(Uu,"\n  ")}`}("\n"+o.message,f,u,h),o.ngTokenPath=f,o[Nr]=null,o}(v,a,"R3InjectorError",this.source)}throw v}finally{wn(m),Ir(f)}}resolveInjectorInitializers(){const a=Ir(this),u=wn(void 0);try{const h=this.get(Ky.multi,Mt,rt.Self);for(const f of h)f()}finally{Ir(a),wn(u)}}toString(){const a=[],u=this.records;for(const h of u.keys())a.push(me(h));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Te(205,!1)}processProvider(a){let u=Ku(a=X(a))?a:X(a&&a.provide);const h=function rv(o){return BC(o)?wl(void 0,o.useValue):wl($m(o),ev)}(a);if(Ku(a)||!0!==a.multi)this.records.get(u);else{let f=this.records.get(u);f||(f=wl(void 0,ev,!0),f.factory=()=>Dc(f.multi),this.records.set(u,f)),u=a,f.multi.push(a)}this.records.set(u,h)}hydrate(a,u){return u.value===ev&&(u.value=H1,u.value=u.factory()),"object"==typeof u.value&&u.value&&function ov(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(a){if(!a.providedIn)return!1;const u=X(a.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function nv(o){const a=xn(o),u=null!==a?a.factory:Yi(o);if(null!==u)return u;if(o instanceof Xn)throw new Te(204,!1);if(o instanceof Function)return function iv(o){const a=o.length;if(a>0)throw Un(a,"?"),new Te(204,!1);const u=function qn(o){const a=o&&(o[ni]||o[Oi]);if(a){const u=function fi(o){if(o.hasOwnProperty("name"))return o.name;const a=(""+o).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),a}return null}(o);return null!==u?()=>u.factory(o):()=>new o}(o);throw new Te(204,!1)}function $m(o,a,u){let h;if(Ku(o)){const f=X(o);return Yi(f)||nv(f)}if(BC(o))h=()=>X(o.useValue);else if(function HC(o){return!(!o||!o.useFactory)}(o))h=()=>o.useFactory(...Dc(o.deps||[]));else if(function UC(o){return!(!o||!o.useExisting)}(o))h=()=>Mi(X(o.useExisting));else{const f=X(o&&(o.useClass||o.provide));if(!function sv(o){return!!o.deps}(o))return Yi(f)||nv(f);h=()=>new f(...Dc(o.deps))}return h}function wl(o,a,u=!1){return{factory:o,value:a,multi:u?[]:void 0}}function Qu(o){return!!o.\u0275providers}function zm(o,a){for(const u of o)Array.isArray(u)?zm(u,a):Qu(u)?zm(u.\u0275providers,a):a(u)}class Ss{}class ed{resolveComponentFactory(a){throw function Xu(o){const a=Error(`No component factory found for ${me(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let Ef=(()=>{class o{}return o.NULL=new ed,o})();function Gm(){return td(Yn(),Se())}function td(o,a){return new Df(lr(o,a))}let Df=(()=>{class o{constructor(u){this.nativeElement=u}}return o.__NG_ELEMENT_ID__=Gm,o})();function $1(o){return o instanceof Df?o.nativeElement:o}class lv{}let zC=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function cv(){const o=Se(),u=In(Yn().index,o);return(ji(u)?u:o)[11]}(),o})(),GC=(()=>{class o{}return o.\u0275prov=cn({token:o,providedIn:"root",factory:()=>null}),o})();class WC{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const qC=new WC("14.2.5"),Wm={};function Ua(o){return o.ngOriginalError}class Sf{constructor(){this._console=console}handleError(a){const u=this._findOriginalError(a);this._console.error("ERROR",a),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(a){let u=a&&Ua(a);for(;u&&Ua(u);)u=Ua(u);return u||null}}const fv=new Map;let XC=0;const rd="__ngContext__";function Ar(o,a){ji(a)?(o[rd]=a[20],function Ym(o){fv.set(o[20],o)}(a)):o[rd]=a}function wo(o){return o instanceof Function?o():o}var Co=(()=>((Co=Co||{})[Co.Important=1]="Important",Co[Co.DashCase=2]="DashCase",Co))();function Qm(o,a){return undefined(o,a)}function Mf(o){const a=o[3];return or(a)?a[3]:a}function Xm(o){return aE(o[13])}function wv(o){return aE(o[4])}function aE(o){for(;null!==o&&!or(o);)o=o[4];return o}function As(o,a,u,h,f){if(null!=h){let m,v=!1;or(h)?m=h:ji(h)&&(v=!0,h=h[0]);const C=si(h);0===o&&null!==u?null==f?hE(a,u,C):Dl(a,u,C,f||null,!0):1===o&&null!==u?Dl(a,u,C,f||null,!0):2===o?function Sv(o,a,u){const h=Rc(o,a);h&&function fE(o,a,u,h){o.removeChild(a,u,h)}(o,h,a,u)}(a,C,v):3===o&&a.destroyNode(C),null!=m&&function Av(o,a,u,h,f){const m=u[7];m!==si(u)&&As(a,o,h,m,f);for(let C=10;C<u.length;C++){const D=u[C];nn(D[1],D,o,a,h,m)}}(a,o,m,u,f)}}function od(o,a,u){return o.createElement(a,u)}function Jm(o,a){const u=o[9],h=u.indexOf(a),f=a[3];512&a[2]&&(a[2]&=-513,Da(f,-1)),u.splice(h,1)}function eg(o,a){if(o.length<=10)return;const u=10+a,h=o[u];if(h){const f=h[17];null!==f&&f!==o&&Jm(f,h),a>0&&(o[u-1][4]=h[4]);const m=Ye(o,10+a);!function ad(o,a){nn(o,a,a[11],2,null,null),a[0]=null,a[6]=null}(h[1],h);const v=m[19];null!==v&&v.detachView(m[1]),h[3]=null,h[4]=null,h[2]&=-65}return h}function uE(o,a){if(!(128&a[2])){const u=a[11];u.destroyNode&&nn(o,a,u,3,null,null),function vM(o){let a=o[13];if(!a)return tg(o[1],o);for(;a;){let u=null;if(ji(a))u=a[13];else{const h=a[10];h&&(u=h)}if(!u){for(;a&&!a[4]&&a!==o;)ji(a)&&tg(a[1],a),a=a[3];null===a&&(a=o),ji(a)&&tg(a[1],a),u=a&&a[4]}a=u}}(a)}}function tg(o,a){if(!(128&a[2])){a[2]&=-65,a[2]|=128,function dE(o,a){let u;if(null!=o&&null!=(u=o.destroyHooks))for(let h=0;h<u.length;h+=2){const f=a[u[h]];if(!(f instanceof as)){const m=u[h+1];if(Array.isArray(m))for(let v=0;v<m.length;v+=2){const C=f[m[v]],D=m[v+1];try{D.call(C)}finally{}}else try{m.call(f)}finally{}}}}(o,a),function CM(o,a){const u=o.cleanup,h=a[7];let f=-1;if(null!==u)for(let m=0;m<u.length-1;m+=2)if("string"==typeof u[m]){const v=u[m+1],C="function"==typeof v?v(a):si(a[v]),D=h[f=u[m+2]],S=u[m+3];"boolean"==typeof S?C.removeEventListener(u[m],D,S):S>=0?h[f=S]():h[f=-S].unsubscribe(),m+=2}else{const v=h[f=u[m+1]];u[m].call(v)}if(null!==h){for(let m=f+1;m<h.length;m++)(0,h[m])();a[7]=null}}(o,a),1===a[1].type&&a[11].destroy();const u=a[17];if(null!==u&&or(a[3])){u!==a[3]&&Jm(u,a);const h=a[19];null!==h&&h.detachView(o)}!function lM(o){fv.delete(o[20])}(a)}}function Cv(o,a,u){return function Ev(o,a,u){let h=a;for(;null!==h&&40&h.type;)h=(a=h).parent;if(null===h)return u[0];if(2&h.flags){const f=o.data[h.directiveStart].encapsulation;if(f===ht.None||f===ht.Emulated)return null}return lr(h,u)}(o,a.parent,u)}function Dl(o,a,u,h,f){o.insertBefore(a,u,h,f)}function hE(o,a,u){o.appendChild(a,u)}function Dv(o,a,u,h,f){null!==h?Dl(o,a,u,h,f):hE(o,a,u)}function Rc(o,a){return o.parentNode(a)}function Iv(o,a,u){return Tn(o,a,u)}let Tn=function Hn(o,a,u){return 40&o.type?lr(o,u):null};function Gn(o,a,u,h){const f=Cv(o,h,a),m=a[11],C=Iv(h.parent||a[6],h,a);if(null!=f)if(Array.isArray(u))for(let D=0;D<u.length;D++)Dv(m,f,u[D],C,!1);else Dv(m,f,u,C,!1)}function ld(o,a){if(null!==a){const u=a.type;if(3&u)return lr(a,o);if(4&u)return Oc(-1,o[a.index]);if(8&u){const h=a.child;if(null!==h)return ld(o,h);{const f=o[a.index];return or(f)?Oc(-1,f):si(f)}}if(32&u)return Qm(a,o)()||si(o[a.index]);{const h=mE(o,a);return null!==h?Array.isArray(h)?h[0]:ld(Mf(o[16]),h):ld(o,a.next)}}return null}function mE(o,a){return null!==a?o[16][6].projection[a.projection]:null}function Oc(o,a){const u=10+o+1;if(u<a.length){const h=a[u],f=h[1].firstChild;if(null!==f)return ld(h,f)}return a[7]}function ci(o,a,u,h,f,m,v){for(;null!=u;){const C=h[u.index],D=u.type;if(v&&0===a&&(C&&Ar(si(C),h),u.flags|=4),64!=(64&u.flags))if(8&D)ci(o,a,u.child,h,f,m,!1),As(a,o,f,C,m);else if(32&D){const S=Qm(u,h);let x;for(;x=S();)As(a,o,f,x,m);As(a,o,f,C,m)}else 16&D?gE(o,a,h,u,f,m):As(a,o,f,C,m);u=v?u.projectionNext:u.next}}function nn(o,a,u,h,f,m){ci(u,h,o.firstChild,a,f,m,!1)}function gE(o,a,u,h,f,m){const v=u[16],D=v[6].projection[h.projection];if(Array.isArray(D))for(let S=0;S<D.length;S++)As(a,o,f,D[S],m);else ci(o,a,D,v[3],f,m,!0)}function _E(o,a,u){o.setAttribute(a,"style",u)}function Tv(o,a,u){""===u?o.removeAttribute(a,"class"):o.setAttribute(a,"class",u)}function yE(o,a,u){let h=o.length;for(;;){const f=o.indexOf(a,u);if(-1===f)return f;if(0===f||o.charCodeAt(f-1)<=32){const m=a.length;if(f+m===h||o.charCodeAt(f+m)<=32)return f}u=f+1}}const Il="ng-template";function Mv(o,a,u){let h=0;for(;h<o.length;){let f=o[h++];if(u&&"class"===f){if(f=o[h],-1!==yE(f.toLowerCase(),a,0))return!0}else if(1===f){for(;h<o.length&&"string"==typeof(f=o[h++]);)if(f.toLowerCase()===a)return!0;return!1}}return!1}function cd(o){return 4===o.type&&o.value!==Il}function IM(o,a,u){return a===(4!==o.type||u?o.value:Il)}function vE(o,a,u){let h=4;const f=o.attrs||[],m=function Pc(o){for(let a=0;a<o.length;a++)if(jh(o[a]))return a;return o.length}(f);let v=!1;for(let C=0;C<a.length;C++){const D=a[C];if("number"!=typeof D){if(!v)if(4&h){if(h=2|1&h,""!==D&&!IM(o,D,u)||""===D&&1===a.length){if(Eo(h))return!1;v=!0}}else{const S=8&h?D:a[++C];if(8&h&&null!==o.attrs){if(!Mv(o.attrs,S,u)){if(Eo(h))return!1;v=!0}continue}const j=SM(8&h?"class":D,f,cd(o),u);if(-1===j){if(Eo(h))return!1;v=!0;continue}if(""!==S){let Z;Z=j>m?"":f[j+1].toLowerCase();const ae=8&h?Z:null;if(ae&&-1!==yE(ae,S,0)||2&h&&S!==Z){if(Eo(h))return!1;v=!0}}}}else{if(!v&&!Eo(h)&&!Eo(D))return!1;if(v&&Eo(D))continue;v=!1,h=D|1&h}}return Eo(h)||v}function Eo(o){return 0==(1&o)}function SM(o,a,u,h){if(null===a)return-1;let f=0;if(h||!u){let m=!1;for(;f<a.length;){const v=a[f];if(v===o)return f;if(3===v||6===v)m=!0;else{if(1===v||2===v){let C=a[++f];for(;"string"==typeof C;)C=a[++f];continue}if(4===v)break;if(0===v){f+=4;continue}}f+=m?1:2}return-1}return function yn(o,a){let u=o.indexOf(4);if(u>-1)for(u++;u<o.length;){const h=o[u];if("number"==typeof h)return-1;if(h===a)return u;u++}return-1}(a,o)}function bE(o,a,u=!1){for(let h=0;h<a.length;h++)if(vE(o,a[h],u))return!0;return!1}function ng(o,a){e:for(let u=0;u<a.length;u++){const h=a[u];if(o.length===h.length){for(let f=0;f<o.length;f++)if(o[f]!==h[f])continue e;return!0}}return!1}function kf(o,a){return o?":not("+a.trim()+")":a}function CE(o){let a=o[0],u=1,h=2,f="",m=!1;for(;u<o.length;){let v=o[u];if("string"==typeof v)if(2&h){const C=o[++u];f+="["+v+(C.length>0?'="'+C+'"':"")+"]"}else 8&h?f+="."+v:4&h&&(f+=" "+v);else""!==f&&!Eo(v)&&(a+=kf(m,f),f=""),h=v,m=m||!Eo(h);u++}return""!==f&&(a+=kf(m,f)),a}const Ot={};function EE(o){Kr(Ft(),Se(),pi()+o,!1)}function Kr(o,a,u,h){if(!h)if(3==(3&a[2])){const m=o.preOrderCheckHooks;null!==m&&dc(a,m,u)}else{const m=o.preOrderHooks;null!==m&&Sa(a,m,0,u)}_o(u)}function Ov(o,a=null,u=null,h){const f=TE(o,a,u,h);return f.resolveInjectorInitializers(),f}function TE(o,a=null,u=null,h,f=new Set){const m=[u||Mt,Xy(o)];return h=h||("object"==typeof o?void 0:me(o)),new Cf(m,a||tv(),h||null,f)}let Nc=(()=>{class o{static create(u,h){if(Array.isArray(u))return Ov({name:""},h,u,"");{const f=u.name??"";return Ov({name:f},u.parent,u.providers,f)}}}return o.THROW_IF_NOT_FOUND=Ec,o.NULL=new Qy,o.\u0275prov=cn({token:o,providedIn:"any",factory:()=>Mi(Zy)}),o.__NG_ELEMENT_ID__=-1,o})();function pd(o,a=rt.Default){const u=Se();return null===u?Mi(o,a):Pu(Yn(),u,X(o),a)}function Of(){throw new Error("invalid")}function ag(o,a){return o<<17|a<<2}function Do(o){return o>>17&32767}function Pf(o){return 2|o}function $a(o){return(131068&o)>>2}function md(o,a){return-131069&o|a<<2}function cg(o){return 1|o}function Bc(o,a){const u=o.contentQueries;if(null!==u)for(let h=0;h<u.length;h+=2){const f=u[h],m=u[h+1];if(-1!==m){const v=o.data[m];Oh(f),v.contentQueries(2,a[m],m)}}}function gg(o,a,u,h,f,m,v,C,D,S,x){const j=a.blueprint.slice();return j[0]=f,j[2]=76|h,(null!==x||o&&1024&o[2])&&(j[2]|=1024),Ea(j),j[3]=j[15]=o,j[8]=u,j[10]=v||o&&o[10],j[11]=C||o&&o[11],j[12]=D||o&&o[12]||null,j[9]=S||o&&o[9]||null,j[6]=m,j[20]=function pv(){return XC++}(),j[21]=x,j[16]=2==a.type?o[16]:j,j}function bd(o,a,u,h,f){let m=o.data[a];if(null===m)m=function eb(o,a,u,h,f){const m=po(),v=js(),D=o.data[a]=function sb(o,a,u,h,f,m){return{type:u,index:h,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?m:m&&m.parent,u,a,h,f);return null===o.firstChild&&(o.firstChild=D),null!==m&&(v?null==m.child&&null!==D.parent&&(m.child=D):null===m.next&&(m.next=D)),D}(o,a,u,h,f),function mm(){return $t.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=u,m.value=h,m.attrs=f;const v=function mo(){const o=$t.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();m.injectorIndex=null===v?-1:v.injectorIndex}return Ki(m,!0),m}function wd(o,a,u,h){if(0===u)return-1;const f=a.length;for(let m=0;m<u;m++)a.push(h),o.blueprint.push(h),o.data.push(null);return f}function tb(o,a,u){Au(a);try{const h=o.viewQuery;null!==h&&hb(1,h,u);const f=o.template;null!==f&&LE(o,a,f,1,u),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&Bc(o,a),o.staticViewQueries&&hb(2,o.viewQuery,u);const m=o.components;null!==m&&function mg(o,a){for(let u=0;u<a.length;u++)WE(o,a[u])}(a,m)}catch(h){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),h}finally{a[2]&=-5,ll()}}function _g(o,a,u,h){const f=a[2];if(128!=(128&f)){Au(a);try{Ea(a),function lc(o){return $t.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==u&&LE(o,a,u,2,h);const v=3==(3&f);if(v){const S=o.preOrderCheckHooks;null!==S&&dc(a,S,null)}else{const S=o.preOrderHooks;null!==S&&Sa(a,S,0,null),Lh(a,0)}if(function GE(o){for(let a=Xm(o);null!==a;a=wv(a)){if(!a[2])continue;const u=a[9];for(let h=0;h<u.length;h++){const f=u[h],m=f[3];0==(512&f[2])&&Da(m,1),f[2]|=512}}}(a),function KM(o){for(let a=Xm(o);null!==a;a=wv(a))for(let u=10;u<a.length;u++){const h=a[u],f=h[1];fo(h)&&_g(f,h,f.template,h[8])}}(a),null!==o.contentQueries&&Bc(o,a),v){const S=o.contentCheckHooks;null!==S&&dc(a,S)}else{const S=o.contentHooks;null!==S&&Sa(a,S,1),Lh(a,1)}!function Jv(o,a){const u=o.hostBindingOpCodes;if(null!==u)try{for(let h=0;h<u.length;h++){const f=u[h];if(f<0)_o(~f);else{const m=f,v=u[++h],C=u[++h];gm(v,m),C(2,a[m])}}}finally{_o(-1)}}(o,a);const C=o.components;null!==C&&function FE(o,a){for(let u=0;u<a.length;u++)ZM(o,a[u])}(a,C);const D=o.viewQuery;if(null!==D&&hb(2,D,h),v){const S=o.viewCheckHooks;null!==S&&dc(a,S)}else{const S=o.viewHooks;null!==S&&Sa(a,S,2),Lh(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),a[2]&=-41,512&a[2]&&(a[2]&=-513,Da(a[3],-1))}finally{ll()}}}function LE(o,a,u,h,f){const m=pi(),v=2&h;try{_o(-1),v&&a.length>22&&Kr(o,a,22,!1),u(h,f)}finally{_o(m)}}function nb(o,a,u){if(zr(a)){const f=a.directiveEnd;for(let m=a.directiveStart;m<f;m++){const v=o.data[m];v.contentQueries&&v.contentQueries(1,u[m],m)}}}function yg(o,a,u){!Xe()||(function GM(o,a,u,h){const f=u.directiveStart,m=u.directiveEnd;o.firstCreatePass||Ta(u,a),Ar(h,a);const v=u.initialInputs;for(let C=f;C<m;C++){const D=o.data[C],S=Rr(D);S&&ub(a,u,D);const x=zs(a,o,C,u);Ar(x,a),null!==v&&qM(0,C-f,x,D,0,v),S&&(In(u.index,a)[8]=x)}}(o,a,u,lr(u,a)),128==(128&u.flags)&&function WM(o,a,u){const h=u.directiveStart,f=u.directiveEnd,m=u.index,v=function TC(){return $t.lFrame.currentDirectiveIndex}();try{_o(m);for(let C=h;C<f;C++){const D=o.data[C],S=a[C];Su(C),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&UE(D,S)}}finally{_o(-1),Su(v)}}(o,a,u))}function ib(o,a,u=lr){const h=a.localNames;if(null!==h){let f=a.index+1;for(let m=0;m<h.length;m+=2){const v=h[m+1],C=-1===v?u(a,o):o[v];o[f++]=C}}}function VE(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=rb(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function rb(o,a,u,h,f,m,v,C,D,S){const x=22+h,j=x+f,Z=function UM(o,a){const u=[];for(let h=0;h<a;h++)u.push(h<o?null:Ot);return u}(x,j),ae="function"==typeof S?S():S;return Z[1]={type:o,blueprint:Z,template:u,queries:null,viewQuery:C,declTNode:a,data:Z.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:j,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:D,consts:ae,incompleteFirstPass:!1}}function Ff(o,a,u,h){const f=Cg(a);null===u?f.push(h):(f.push(u),o.firstCreatePass&&fb(o).push(h,f.length-1))}function ob(o,a,u){for(let h in o)if(o.hasOwnProperty(h)){const f=o[h];(u=null===u?{}:u).hasOwnProperty(h)?u[h].push(a,f):u[h]=[a,f]}return u}function Lf(o,a){const h=a.directiveEnd,f=o.data,m=a.attrs,v=[];let C=null,D=null;for(let S=a.directiveStart;S<h;S++){const x=f[S],j=x.inputs,Z=null===m||cd(a)?null:YM(j,m);v.push(Z),C=ob(j,S,C),D=ob(x.outputs,S,D)}null!==C&&(C.hasOwnProperty("class")&&(a.flags|=16),C.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=v,a.inputs=C,a.outputs=D}function Zr(o,a,u,h,f,m,v,C){const D=lr(a,u);let x,S=a.inputs;!C&&null!=S&&(x=S[h])?(Eg(o,u,x,h,f),ys(a)&&ab(u,a.index)):3&a.type&&(h=function jM(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(h),f=null!=v?v(f,a.value||"",h):f,m.setProperty(D,h,f))}function ab(o,a){const u=In(a,o);16&u[2]||(u[2]|=32)}function vg(o,a,u,h){let f=!1;if(Xe()){const m=function HE(o,a,u){const h=o.directiveRegistry;let f=null;if(h)for(let m=0;m<h.length;m++){const v=h[m];bE(u,v.selectors,!1)&&(f||(f=[]),mc(Ta(u,a),o,v.type),Rr(v)?(Vf(o,u),f.unshift(v)):f.push(v))}return f}(o,a,u),v=null===h?null:{"":-1};if(null!==m){f=!0,$E(u,o.data.length,m.length);for(let x=0;x<m.length;x++){const j=m[x];j.providersResolver&&j.providersResolver(j)}let C=!1,D=!1,S=wd(o,a,m.length,null);for(let x=0;x<m.length;x++){const j=m[x];u.mergedAttrs=fc(u.mergedAttrs,j.hostAttrs),cb(o,u,a,S,j),jE(S,j,v),null!==j.contentQueries&&(u.flags|=8),(null!==j.hostBindings||null!==j.hostAttrs||0!==j.hostVars)&&(u.flags|=128);const Z=j.type.prototype;!C&&(Z.ngOnChanges||Z.ngOnInit||Z.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(u.index),C=!0),!D&&(Z.ngOnChanges||Z.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(u.index),D=!0),S++}Lf(o,u)}v&&function lb(o,a,u){if(a){const h=o.localNames=[];for(let f=0;f<a.length;f+=2){const m=u[a[f+1]];if(null==m)throw new Te(-301,!1);h.push(a[f],m)}}}(u,h,v)}return u.mergedAttrs=fc(u.mergedAttrs,u.attrs),f}function bg(o,a,u,h,f,m){const v=m.hostBindings;if(v){let C=o.hostBindingOpCodes;null===C&&(C=o.hostBindingOpCodes=[]);const D=~a.index;(function zM(o){let a=o.length;for(;a>0;){const u=o[--a];if("number"==typeof u&&u<0)return u}return 0})(C)!=D&&C.push(D),C.push(h,f,v)}}function UE(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function Vf(o,a){a.flags|=2,(o.components||(o.components=[])).push(a.index)}function jE(o,a,u){if(u){if(a.exportAs)for(let h=0;h<a.exportAs.length;h++)u[a.exportAs[h]]=o;Rr(a)&&(u[""]=o)}}function $E(o,a,u){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+u,o.providerIndexes=a}function cb(o,a,u,h,f){o.data[h]=f;const m=f.factory||(f.factory=Yi(f.type)),v=new as(m,Rr(f),pd);o.blueprint[h]=v,u[h]=v,bg(o,a,0,h,wd(o,u,f.hostVars,Ot),f)}function ub(o,a,u){const h=lr(a,o),f=VE(u),m=o[10],v=Bf(o,gg(o,f,null,u.onPush?32:16,h,a,m,m.createRenderer(h,u),null,null,null));o[a.index]=v}function Zo(o,a,u,h,f,m){const v=lr(o,a);!function db(o,a,u,h,f,m,v){if(null==m)o.removeAttribute(a,f,u);else{const C=null==v?Ce(m):v(m,h||"",f);o.setAttribute(a,f,C,u)}}(a[11],v,m,o.value,u,h,f)}function qM(o,a,u,h,f,m){const v=m[a];if(null!==v){const C=h.setInput;for(let D=0;D<v.length;){const S=v[D++],x=v[D++],j=v[D++];null!==C?h.setInput(u,j,S,x):u[x]=j}}}function YM(o,a){let u=null,h=0;for(;h<a.length;){const f=a[h];if(0!==f)if(5!==f){if("number"==typeof f)break;o.hasOwnProperty(f)&&(null===u&&(u=[]),u.push(f,o[f],a[h+1])),h+=2}else h+=2;else h+=4}return u}function zE(o,a,u,h){return new Array(o,!0,!1,a,null,0,h,u,null,null)}function ZM(o,a){const u=In(a,o);if(fo(u)){const h=u[1];48&u[2]?_g(h,u,h.template,u[8]):u[5]>0&&wg(u)}}function wg(o){for(let h=Xm(o);null!==h;h=wv(h))for(let f=10;f<h.length;f++){const m=h[f];if(fo(m))if(512&m[2]){const v=m[1];_g(v,m,v.template,m[8])}else m[5]>0&&wg(m)}const u=o[1].components;if(null!==u)for(let h=0;h<u.length;h++){const f=In(u[h],o);fo(f)&&f[5]>0&&wg(f)}}function WE(o,a){const u=In(a,o),h=u[1];(function QM(o,a){for(let u=a.length;u<o.blueprint.length;u++)a.push(o.blueprint[u])})(h,u),tb(h,u,u[8])}function Bf(o,a){return o[13]?o[14][4]=a:o[13]=a,o[14]=a,a}function Cd(o){for(;o;){o[2]|=32;const a=Mf(o);if(il(o)&&!a)return o;o=a}return null}function Uf(o,a,u,h=!0){const f=a[10];f.begin&&f.begin();try{_g(o,a,o.template,u)}catch(v){throw h&&YE(a,v),v}finally{f.end&&f.end()}}function hb(o,a,u){Oh(0),a(o,u)}function Cg(o){return o[7]||(o[7]=[])}function fb(o){return o.cleanup||(o.cleanup=[])}function qE(o,a,u){return(null===o||Rr(o))&&(u=function Du(o){for(;Array.isArray(o);){if("object"==typeof o[1])return o;o=o[0]}return null}(u[a.index])),u[11]}function YE(o,a){const u=o[9],h=u?u.get(Sf,null):null;h&&h.handleError(a)}function Eg(o,a,u,h,f){for(let m=0;m<u.length;){const v=u[m++],C=u[m++],D=a[v],S=o.data[v];null!==S.setInput?S.setInput(D,f,h,C):D[C]=f}}function Hf(o,a,u){let h=u?o.styles:null,f=u?o.classes:null,m=0;if(null!==a)for(let v=0;v<a.length;v++){const C=a[v];"number"==typeof C?m=C:1==m?f=ye(f,C):2==m&&(h=ye(h,C+": "+a[++v]+";"))}u?o.styles=h:o.stylesWithoutHost=h,u?o.classes=f:o.classesWithoutHost=f}function jf(o,a,u,h,f=!1){for(;null!==u;){const m=a[u.index];if(null!==m&&h.push(si(m)),or(m))for(let C=10;C<m.length;C++){const D=m[C],S=D[1].firstChild;null!==S&&jf(D[1],D,S,h)}const v=u.type;if(8&v)jf(o,a,u.child,h);else if(32&v){const C=Qm(u,a);let D;for(;D=C();)h.push(D)}else if(16&v){const C=mE(a,u);if(Array.isArray(C))h.push(...C);else{const D=Mf(a[16]);jf(D[1],D,C,h,!0)}}u=f?u.projectionNext:u.next}return h}class Ks{constructor(a,u){this._lView=a,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,u=a[1];return jf(u,a,u.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(or(a)){const u=a[8],h=u?u.indexOf(this):-1;h>-1&&(eg(a,h),Ye(u,h))}this._attachedToViewContainer=!1}uE(this._lView[1],this._lView)}onDestroy(a){Ff(this._lView[1],this._lView,null,a)}markForCheck(){Cd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Uf(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Te(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function yM(o,a){nn(o,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Te(902,!1);this._appRef=a}}class Dg extends Ks{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;Uf(a[1],a,a[8],!1)}checkNoChanges(){}get context(){return null}}class Ed extends Ef{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const u=A(a);return new Dd(u,this.ngModule)}}function KE(o){const a=[];for(let u in o)o.hasOwnProperty(u)&&a.push({propName:o[u],templateName:u});return a}class JM{constructor(a,u){this.injector=a,this.parentInjector=u}get(a,u,h){const f=this.injector.get(a,Wm,h);return f!==Wm||u===Wm?f:this.parentInjector.get(a,u,h)}}class Dd extends Ss{constructor(a,u){super(),this.componentDef=a,this.ngModule=u,this.componentType=a.type,this.selector=function Wo(o){return o.map(CE).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return KE(this.componentDef.inputs)}get outputs(){return KE(this.componentDef.outputs)}create(a,u,h,f){let m=(f=f||this.ngModule)instanceof Zu?f:f?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const v=m?new JM(a,m):a,C=v.get(lv,null);if(null===C)throw new Te(407,!1);const D=v.get(GC,null),S=C.createRenderer(null,this.componentDef),x=this.componentDef.selectors[0][0]||"div",j=h?function HM(o,a,u){return o.selectRootElement(a,u===ht.ShadowDom)}(S,h,this.componentDef.encapsulation):od(C.createRenderer(null,this.componentDef),x,function XM(o){const a=o.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(x)),Z=this.componentDef.onPush?288:272,ae=rb(0,null,null,1,0,null,null,null,null,null),xe=gg(null,ae,null,Z,null,null,C,S,D,v,null);let We,it;Au(xe);try{const ut=function ex(o,a,u,h,f,m){const v=u[1];u[22]=o;const D=bd(v,22,2,"#host",null),S=D.mergedAttrs=a.hostAttrs;null!==S&&(Hf(D,S,!0),null!==o&&(yo(f,o,S),null!==D.classes&&Tv(f,o,D.classes),null!==D.styles&&_E(f,o,D.styles)));const x=h.createRenderer(o,a),j=gg(u,VE(a),null,a.onPush?32:16,u[22],D,h,x,m||null,null,null);return v.firstCreatePass&&(mc(Ta(D,u),v,a.type),Vf(v,D),$E(D,u.length,1)),Bf(u,j),u[22]=j}(j,this.componentDef,xe,C,S);if(j)if(h)yo(S,j,["ng-version",qC.full]);else{const{attrs:Pt,classes:Ve}=function ig(o){const a=[],u=[];let h=1,f=2;for(;h<o.length;){let m=o[h];if("string"==typeof m)2===f?""!==m&&a.push(m,o[++h]):8===f&&u.push(m);else{if(!Eo(f))break;f=m}h++}return{attrs:a,classes:u}}(this.componentDef.selectors[0]);Pt&&yo(S,j,Pt),Ve&&Ve.length>0&&Tv(S,j,Ve.join(" "))}if(it=Ca(ae,22),void 0!==u){const Pt=it.projection=[];for(let Ve=0;Ve<this.ngContentSelectors.length;Ve++){const Bt=u[Ve];Pt.push(null!=Bt?Array.from(Bt):null)}}We=function tx(o,a,u,h){const f=u[1],m=function $M(o,a,u){const h=Yn();o.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),cb(o,h,a,wd(o,a,1,null),u),Lf(o,h));const f=zs(a,o,h.directiveStart,h);Ar(f,a);const m=lr(h,a);return m&&Ar(m,a),f}(f,u,a);if(o[8]=u[8]=m,null!==h)for(const C of h)C(m,a);if(a.contentQueries){const C=Yn();a.contentQueries(1,m,C.directiveStart)}const v=Yn();return!f.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(_o(v.index),bg(u[1],v,0,v.directiveStart,v.directiveEnd,a),UE(a,m)),m}(ut,this.componentDef,xe,[nx]),tb(ae,xe,null)}finally{ll()}return new Tl(this.componentType,We,td(it,xe),xe,it)}}class Tl extends class j1{}{constructor(a,u,h,f,m){super(),this.location=h,this._rootLView=f,this._tNode=m,this.instance=u,this.hostView=this.changeDetectorRef=new Dg(f),this.componentType=a}setInput(a,u){const h=this._tNode.inputs;let f;if(null!==h&&(f=h[a])){const m=this._rootLView;Eg(m[1],m,f,a,u),ab(m,this._tNode.index)}}get injector(){return new yc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function nx(){const o=Yn();uc(Se()[1],o)}function Sg(o){let a=function $f(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),u=!0;const h=[o];for(;a;){let f;if(Rr(o))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Te(903,!1);f=a.\u0275dir}if(f){if(u){h.push(f);const v=o;v.inputs=zf(o.inputs),v.declaredInputs=zf(o.declaredInputs),v.outputs=zf(o.outputs);const C=f.hostBindings;C&&Id(o,C);const D=f.viewQuery,S=f.contentQueries;if(D&&Ag(o,D),S&&rx(o,S),re(o.inputs,f.inputs),re(o.declaredInputs,f.declaredInputs),re(o.outputs,f.outputs),Rr(f)&&f.data.animation){const x=o.data;x.animation=(x.animation||[]).concat(f.data.animation)}}const m=f.features;if(m)for(let v=0;v<m.length;v++){const C=m[v];C&&C.ngInherit&&C(o),C===Sg&&(u=!1)}}a=Object.getPrototypeOf(a)}!function ix(o){let a=0,u=null;for(let h=o.length-1;h>=0;h--){const f=o[h];f.hostVars=a+=f.hostVars,f.hostAttrs=fc(f.hostAttrs,u=fc(u,f.hostAttrs))}}(h)}function zf(o){return o===wi?{}:o===Mt?[]:o}function Ag(o,a){const u=o.viewQuery;o.viewQuery=u?(h,f)=>{a(h,f),u(h,f)}:a}function rx(o,a){const u=o.contentQueries;o.contentQueries=u?(h,f,m)=>{a(h,f,m),u(h,f,m)}:a}function Id(o,a){const u=o.hostBindings;o.hostBindings=u?(h,f)=>{a(h,f),u(h,f)}:a}let Ml=null;function Qo(){if(!Ml){const o=gt.Symbol;if(o&&o.iterator)Ml=o.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<a.length;++u){const h=a[u];"entries"!==h&&"size"!==h&&Map.prototype[h]===Map.prototype.entries&&(Ml=h)}}}return Ml}function Uc(o){return!!Hc(o)&&(Array.isArray(o)||!(o instanceof Map)&&Qo()in o)}function Hc(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function Xo(o,a,u){return o[a]=u}function vr(o,a,u){return!Object.is(o[a],u)&&(o[a]=u,!0)}function gb(o,a,u,h){const f=Se();return vr(f,cc(),a)&&(Ft(),Zo(mi(),f,o,a,u,h)),gb}function jc(o,a,u,h){return vr(o,cc(),u)?a+Ce(u)+h:Ot}function vb(o,a,u,h,f,m,v,C){const D=Se(),S=Ft(),x=o+22,j=S.firstCreatePass?function xg(o,a,u,h,f,m,v,C,D){const S=a.consts,x=bd(a,o,4,v||null,Gr(S,C));vg(a,u,x,Gr(S,D)),uc(a,x);const j=x.tViews=rb(2,x,h,f,m,a.directiveRegistry,a.pipeRegistry,null,a.schemas,S);return null!==a.queries&&(a.queries.template(a,x),j.queries=a.queries.embeddedTView(x)),x}(x,S,D,a,u,h,f,m,v):S.data[x];Ki(j,!1);const Z=D[11].createComment("");Gn(S,D,Z,j),Ar(Z,D),Bf(D,D[x]=zE(Z,D,Z,j)),lo(j)&&yg(S,D,j),null!=v&&ib(D,j,C)}function Td(o){return gr(function go(){return $t.lFrame.contextLView}(),22+o)}function Qs(o,a,u){const h=Se();return vr(h,cc(),a)&&Zr(Ft(),mi(),h,o,a,h[11],u,!1),Qs}function zc(o,a,u,h,f){const v=f?"class":"style";Eg(o,u,a.inputs[v],v,h)}function qf(o,a,u,h){const f=Se(),m=Ft(),v=22+o,C=f[11],D=f[v]=od(C,a,function Fh(){return $t.lFrame.currentNamespace}()),S=m.firstCreatePass?function lx(o,a,u,h,f,m,v){const C=a.consts,S=bd(a,o,2,f,Gr(C,m));return vg(a,u,S,Gr(C,v)),null!==S.attrs&&Hf(S,S.attrs,!1),null!==S.mergedAttrs&&Hf(S,S.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,S),S}(v,m,f,0,a,u,h):m.data[v];Ki(S,!0);const x=S.mergedAttrs;null!==x&&yo(C,D,x);const j=S.classes;null!==j&&Tv(C,D,j);const Z=S.styles;return null!==Z&&_E(C,D,Z),64!=(64&S.flags)&&Gn(m,f,D,S),0===function Q(){return $t.lFrame.elementDepthCount}()&&Ar(D,f),function pe(){$t.lFrame.elementDepthCount++}(),lo(S)&&(yg(m,f,S),nb(m,S,f)),null!==h&&ib(f,S),qf}function Md(){let o=Yn();js()?al():(o=o.parent,Ki(o,!1));const a=o;!function Ue(){$t.lFrame.elementDepthCount--}();const u=Ft();return u.firstCreatePass&&(uc(u,o),zr(o)&&u.queries.elementEnd(o)),null!=a.classesWithoutHost&&function Mu(o){return 0!=(16&o.flags)}(a)&&zc(u,a,Se(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function xu(o){return 0!=(32&o.flags)}(a)&&zc(u,a,Se(),a.stylesWithoutHost,!1),Md}function Gc(o,a,u,h){return qf(o,a,u,h),Md(),Gc}function kg(o,a,u){const h=Se(),f=Ft(),m=o+22,v=f.firstCreatePass?function Yf(o,a,u,h,f){const m=a.consts,v=Gr(m,h),C=bd(a,o,8,"ng-container",v);return null!==v&&Hf(C,v,!0),vg(a,u,C,Gr(m,f)),null!==a.queries&&a.queries.elementStart(a,C),C}(m,f,h,a,u):f.data[m];Ki(v,!0);const C=h[m]=h[11].createComment("");return Gn(f,h,C,v),Ar(C,h),lo(v)&&(yg(f,h,v),nb(f,v,h)),null!=u&&ib(h,v),kg}function Qr(){let o=Yn();const a=Ft();return js()?al():(o=o.parent,Ki(o,!1)),a.firstCreatePass&&(uc(a,o),zr(o)&&a.queries.elementEnd(o)),Qr}function sD(){return Se()}function xd(o){return!!o&&"function"==typeof o.then}function wb(o){return!!o&&"function"==typeof o.subscribe}const ds=wb;function Rg(o,a,u,h){const f=Se(),m=Ft(),v=Yn();return aD(m,f,f[11],v,o,a,0,h),Rg}function Cb(o,a){const u=Yn(),h=Se(),f=Ft();return aD(f,h,qE(kh(f.data),u,h),u,o,a),Cb}function aD(o,a,u,h,f,m,v,C){const D=lo(h),x=o.firstCreatePass&&fb(o),j=a[8],Z=Cg(a);let ae=!0;if(3&h.type||C){const it=lr(h,a),ut=C?C(it):it,Pt=Z.length,Ve=C?jn=>C(si(jn[h.index])):h.index;let Bt=null;if(!C&&D&&(Bt=function oD(o,a,u,h){const f=o.cleanup;if(null!=f)for(let m=0;m<f.length-1;m+=2){const v=f[m];if(v===u&&f[m+1]===h){const C=a[7],D=f[m+2];return C.length>D?C[D]:null}"string"==typeof v&&(m+=2)}return null}(o,a,f,h.index)),null!==Bt)(Bt.__ngLastListenerFn__||Bt).__ngNextListenerFn__=m,Bt.__ngLastListenerFn__=m,ae=!1;else{m=cD(h,a,j,m,!1);const jn=u.listen(ut,f,m);Z.push(m,jn),x&&x.push(f,Ve,Pt,Pt+1)}}else m=cD(h,a,j,m,!1);const xe=h.outputs;let We;if(ae&&null!==xe&&(We=xe[f])){const it=We.length;if(it)for(let ut=0;ut<it;ut+=2){const yi=a[We[ut]][We[ut+1]].subscribe(m),tl=Z.length;Z.push(m,yi),x&&x.push(f,h.index,tl,-(tl+1))}}}function lD(o,a,u,h){try{return!1!==u(h)}catch(f){return YE(o,f),!1}}function cD(o,a,u,h,f){return function m(v){if(v===Function)return h;Cd(2&o.flags?In(o.index,a):a);let D=lD(a,0,h,v),S=m.__ngNextListenerFn__;for(;S;)D=lD(a,0,S,v)&&D,S=S.__ngNextListenerFn__;return f&&!1===D&&(v.preventDefault(),v.returnValue=!1),D}}function Eb(o=1){return function Ia(o){return($t.lFrame.contextLView=function Ey(o,a){for(;o>0;)a=a[15],o--;return a}(o,$t.lFrame.contextLView))[8]}(o)}function Kf(o,a){let u=null;const h=function wE(o){const a=o.attrs;if(null!=a){const u=a.indexOf(5);if(0==(1&u))return a[u+1]}return null}(o);for(let f=0;f<a.length;f++){const m=a[f];if("*"!==m){if(null===h?bE(o,m,!0):ng(h,m))return f}else u=f}return u}function Db(o){const a=Se()[16][6];if(!a.projection){const h=a.projection=Un(o?o.length:1,null),f=h.slice();let m=a.child;for(;null!==m;){const v=o?Kf(m,o):0;null!==v&&(f[v]?f[v].projectionNext=m:h[v]=m,f[v]=m),m=m.next}}}function Ib(o,a=0,u){const h=Se(),f=Ft(),m=bd(f,22+o,16,null,u||null);null===m.projection&&(m.projection=a),al(),64!=(64&m.flags)&&function Yr(o,a,u){gE(a[11],0,a,u,Cv(o,u,a),Iv(u.parent||a[6],u,a))}(f,h,m)}function Tb(o,a,u,h,f){const m=o[u+1],v=null===a;let C=h?Do(m):$a(m),D=!1;for(;0!==C&&(!1===D||v);){const x=o[C+1];ux(o[C],a)&&(D=!0,o[C+1]=h?cg(x):Pf(x)),C=h?Do(x):$a(x)}D&&(o[u+1]=h?Pf(m):cg(m))}function ux(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&cr(o,a)>=0}const Di={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function qa(o){return o.substring(Di.key,Di.keyEnd)}function Xf(o,a){const u=Di.textEnd;return u===a?-1:(a=Di.keyEnd=function _D(o,a,u){for(;a<u&&o.charCodeAt(a)>32;)a++;return a}(o,Di.key=a,u),qc(o,a,u))}function qc(o,a,u){for(;a<u&&o.charCodeAt(a)<=32;)a++;return a}function kb(o,a,u){return Js(o,a,u,!1),kb}function ep(o,a){return Js(o,a,null,!0),ep}function Xs(o,a){for(let u=function Mb(o){return function gD(o){Di.key=0,Di.keyEnd=0,Di.value=0,Di.valueEnd=0,Di.textEnd=o.length}(o),Xf(o,qc(o,0,Di.textEnd))}(a);u>=0;u=Xf(a,u))Pn(o,qa(a),!0)}function Js(o,a,u,h){const f=Se(),m=Ft(),v=Uo(2);m.firstUpdatePass&&Ya(m,o,v,h),a!==Ot&&vr(f,v,a)&&Lg(m,m.data[pi()],f,f[11],o,f[v+1]=function px(o,a){return null==o||("string"==typeof a?o+=a:"object"==typeof o&&(o=me(Gs(o)))),o}(a,u),h,v)}function tp(o,a){return a>=o.expandoStartIndex}function Ya(o,a,u,h){const f=o.data;if(null===f[u+1]){const m=f[pi()],v=tp(o,u);DD(m,h)&&null===a&&!v&&(a=!1),a=function Ng(o,a,u,h){const f=kh(o);let m=h?a.residualClasses:a.residualStyles;if(null===f)0===(h?a.classBindings:a.styleBindings)&&(u=Io(u=Fg(null,o,a,u,h),a.attrs,h),m=null);else{const v=a.directiveStylingLast;if(-1===v||o[v]!==f)if(u=Fg(f,o,a,u,h),null===m){let D=function eo(o,a,u){const h=u?a.classBindings:a.styleBindings;if(0!==$a(h))return o[Do(h)]}(o,a,h);void 0!==D&&Array.isArray(D)&&(D=Fg(null,o,a,D[1],h),D=Io(D,a.attrs,h),function Yc(o,a,u,h){o[Do(u?a.classBindings:a.styleBindings)]=h}(o,a,h,D))}else m=function wD(o,a,u){let h;const f=a.directiveEnd;for(let m=1+a.directiveStylingLast;m<f;m++)h=Io(h,o[m].hostAttrs,u);return Io(h,a.attrs,u)}(o,a,h)}return void 0!==m&&(h?a.residualClasses=m:a.residualStyles=m),u}(f,m,a,h),function cx(o,a,u,h,f,m){let v=m?a.classBindings:a.styleBindings,C=Do(v),D=$a(v);o[h]=u;let x,S=!1;if(Array.isArray(u)){const j=u;x=j[1],(null===x||cr(j,x)>0)&&(S=!0)}else x=u;if(f)if(0!==D){const Z=Do(o[C+1]);o[h+1]=ag(Z,C),0!==Z&&(o[Z+1]=md(o[Z+1],h)),o[C+1]=function PM(o,a){return 131071&o|a<<17}(o[C+1],h)}else o[h+1]=ag(C,0),0!==C&&(o[C+1]=md(o[C+1],h)),C=h;else o[h+1]=ag(D,0),0===C?C=h:o[D+1]=md(o[D+1],h),D=h;S&&(o[h+1]=Pf(o[h+1])),Tb(o,x,h,!0),Tb(o,x,h,!1),function Ab(o,a,u,h,f){const m=f?o.residualClasses:o.residualStyles;null!=m&&"string"==typeof a&&cr(m,a)>=0&&(u[h+1]=cg(u[h+1]))}(a,x,o,h,m),v=ag(C,D),m?a.classBindings=v:a.styleBindings=v}(f,m,a,u,v,h)}}function Fg(o,a,u,h,f){let m=null;const v=u.directiveEnd;let C=u.directiveStylingLast;for(-1===C?C=u.directiveStart:C++;C<v&&(m=a[C],h=Io(h,m.hostAttrs,f),m!==o);)C++;return null!==o&&(u.directiveStylingLast=C),h}function Io(o,a,u){const h=u?1:2;let f=-1;if(null!==a)for(let m=0;m<a.length;m++){const v=a[m];"number"==typeof v?f=v:f===h&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),Pn(o,v,!!u||a[++m]))}return void 0===o?null:o}function Lg(o,a,u,h,f,m,v,C){if(!(3&a.type))return;const D=o.data,S=D[C+1];Vg(function Hv(o){return 1==(1&o)}(S)?ED(D,a,u,f,$a(S),v):void 0)||(Vg(m)||function lg(o){return 2==(2&o)}(S)&&(m=ED(D,null,u,f,C,v)),function Ws(o,a,u,h,f){if(a)f?o.addClass(u,h):o.removeClass(u,h);else{let m=-1===h.indexOf("-")?void 0:Co.DashCase;null==f?o.removeStyle(u,h,m):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),m|=Co.Important),o.setStyle(u,h,f,m))}}(h,v,os(pi(),u),f,m))}function ED(o,a,u,h,f,m){const v=null===a;let C;for(;f>0;){const D=o[f],S=Array.isArray(D),x=S?D[1]:D,j=null===x;let Z=u[f+1];Z===Ot&&(Z=j?Mt:void 0);let ae=j?Ra(Z,h):x===h?Z:void 0;if(S&&!Vg(ae)&&(ae=Ra(D,h)),Vg(ae)&&(C=ae,v))return C;const xe=o[f+1];f=v?Do(xe):$a(xe)}if(null!==a){let D=m?a.residualClasses:a.residualStyles;null!=D&&(C=Ra(D,h))}return C}function Vg(o){return void 0!==o}function DD(o,a){return 0!=(o.flags&(a?16:32))}function kd(o,a=""){const u=Se(),h=Ft(),f=o+22,m=h.firstCreatePass?bd(h,f,1,a,null):h.data[f],v=u[f]=function xf(o,a){return o.createText(a)}(u[11],a);Gn(h,u,v,m),Ki(m,!1)}function Rd(o){return Pl("",o,""),Rd}function Pl(o,a,u){const h=Se(),f=jc(h,o,a,u);return f!==Ot&&function Lr(o,a,u){const h=os(a,o);!function lE(o,a,u){o.setValue(a,u)}(o[11],h,u)}(h,pi(),f),Pl}function ID(o,a,u){!function Ii(o,a,u,h){const f=Ft(),m=Uo(2);f.firstUpdatePass&&Ya(f,null,m,h);const v=Se();if(u!==Ot&&vr(v,m,u)){const C=f.data[pi()];if(DD(C,h)&&!tp(f,m)){let D=h?C.classesWithoutHost:C.stylesWithoutHost;null!==D&&(u=ye(D,u||"")),zc(f,C,v,u,h)}else!function fx(o,a,u,h,f,m,v,C){f===Ot&&(f=Mt);let D=0,S=0,x=0<f.length?f[0]:null,j=0<m.length?m[0]:null;for(;null!==x||null!==j;){const Z=D<f.length?f[D+1]:void 0,ae=S<m.length?m[S+1]:void 0;let We,xe=null;x===j?(D+=2,S+=2,Z!==ae&&(xe=j,We=ae)):null===j||null!==x&&x<j?(D+=2,xe=x):(S+=2,xe=j,We=ae),null!==xe&&Lg(o,a,u,h,xe,We,v,C),x=D<f.length?f[D]:null,j=S<m.length?m[S]:null}}(f,C,v,v[11],v[m+1],v[m+1]=function sF(o,a,u){if(null==u||""===u)return Mt;const h=[],f=Gs(u);if(Array.isArray(f))for(let m=0;m<f.length;m++)o(h,f[m],!0);else if("object"==typeof f)for(const m in f)f.hasOwnProperty(m)&&o(h,m,f[m]);else"string"==typeof f&&a(h,f);return h}(o,a,u),h,m)}}(Pn,Xs,jc(Se(),o,a,u),!0)}function Ub(o,a,u){const h=Se();return vr(h,cc(),a)&&Zr(Ft(),mi(),h,o,a,h[11],u,!0),Ub}function Hb(o,a,u){const h=Se();if(vr(h,cc(),a)){const m=Ft(),v=mi();Zr(m,v,h,o,a,qE(kh(m.data),v,h),u,!0)}return Hb}const Kc=void 0;var RD=["en",[["a","p"],["AM","PM"],Kc],[["AM","PM"],Kc,Kc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Kc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Kc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Kc,"{1} 'at' {0}",Kc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function kx(o){const u=Math.floor(Math.abs(o)),h=o.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===h?1:5}];let Od={};function OD(o){const a=function Ox(o){return o.toLowerCase().replace(/_/g,"-")}(o);let u=ND(a);if(u)return u;const h=a.split("-")[0];if(u=ND(h),u)return u;if("en"===h)return RD;throw new Te(701,!1)}function PD(o){return OD(o)[Vt.PluralCase]}function ND(o){return o in Od||(Od[o]=gt.ng&&gt.ng.common&&gt.ng.common.locales&&gt.ng.common.locales[o]),Od[o]}var Vt=(()=>((Vt=Vt||{})[Vt.LocaleId=0]="LocaleId",Vt[Vt.DayPeriodsFormat=1]="DayPeriodsFormat",Vt[Vt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Vt[Vt.DaysFormat=3]="DaysFormat",Vt[Vt.DaysStandalone=4]="DaysStandalone",Vt[Vt.MonthsFormat=5]="MonthsFormat",Vt[Vt.MonthsStandalone=6]="MonthsStandalone",Vt[Vt.Eras=7]="Eras",Vt[Vt.FirstDayOfWeek=8]="FirstDayOfWeek",Vt[Vt.WeekendRange=9]="WeekendRange",Vt[Vt.DateFormat=10]="DateFormat",Vt[Vt.TimeFormat=11]="TimeFormat",Vt[Vt.DateTimeFormat=12]="DateTimeFormat",Vt[Vt.NumberSymbols=13]="NumberSymbols",Vt[Vt.NumberFormats=14]="NumberFormats",Vt[Vt.CurrencyCode=15]="CurrencyCode",Vt[Vt.CurrencySymbol=16]="CurrencySymbol",Vt[Vt.CurrencyName=17]="CurrencyName",Vt[Vt.Currencies=18]="Currencies",Vt[Vt.Directionality=19]="Directionality",Vt[Vt.PluralCase=20]="PluralCase",Vt[Vt.ExtraData=21]="ExtraData",Vt))();const Pd="en-US";let FD=Pd;function Gg(o,a,u,h,f){if(o=X(o),Array.isArray(o))for(let m=0;m<o.length;m++)Gg(o[m],a,u,h,f);else{const m=Ft(),v=Se();let C=Ku(o)?o:X(o.provide),D=$m(o);const S=Yn(),x=1048575&S.providerIndexes,j=S.directiveStart,Z=S.providerIndexes>>20;if(Ku(o)||!o.multi){const ae=new as(D,f,pd),xe=na(C,a,f?x:x+Z,j);-1===xe?(mc(Ta(S,v),m,C),aI(m,o,a.length),a.push(C),S.directiveStart++,S.directiveEnd++,f&&(S.providerIndexes+=1048576),u.push(ae),v.push(ae)):(u[xe]=ae,v[xe]=ae)}else{const ae=na(C,a,x+Z,j),xe=na(C,a,x,x+Z),We=ae>=0&&u[ae],it=xe>=0&&u[xe];if(f&&!it||!f&&!We){mc(Ta(S,v),m,C);const ut=function lI(o,a,u,h,f){const m=new as(o,u,pd);return m.multi=[],m.index=a,m.componentProviders=0,wr(m,f,h&&!u),m}(f?rk:Xb,u.length,f,h,D);!f&&it&&(u[xe].providerFactory=ut),aI(m,o,a.length,0),a.push(C),S.directiveStart++,S.directiveEnd++,f&&(S.providerIndexes+=1048576),u.push(ut),v.push(ut)}else aI(m,o,ae>-1?ae:xe,wr(u[f?xe:ae],D,!f&&h));!f&&h&&it&&u[xe].componentProviders++}}}function aI(o,a,u,h){const f=Ku(a),m=function U1(o){return!!o.useClass}(a);if(f||m){const D=(m?X(a.useClass):a).prototype.ngOnDestroy;if(D){const S=o.destroyHooks||(o.destroyHooks=[]);if(!f&&a.multi){const x=S.indexOf(u);-1===x?S.push(u,[h,D]):S[x+1].push(h,D)}else S.push(u,D)}}}function wr(o,a,u){return u&&o.componentProviders++,o.multi.push(a)-1}function na(o,a,u,h){for(let f=u;f<h;f++)if(a[f]===o)return f;return-1}function Xb(o,a,u,h){return Jb(this.multi,[])}function rk(o,a,u,h){const f=this.multi;let m;if(this.providerFactory){const v=this.providerFactory.componentProviders,C=zs(u,u[1],this.providerFactory.index,h);m=C.slice(0,v),Jb(f,m);for(let D=v;D<C.length;D++)m.push(C[D])}else m=[],Jb(f,m);return m}function Jb(o,a){for(let u=0;u<o.length;u++)a.push((0,o[u])());return a}function e0(o,a=[]){return u=>{u.providersResolver=(h,f)=>function oI(o,a,u){const h=Ft();if(h.firstCreatePass){const f=Rr(o);Gg(u,h.data,h.blueprint,f,!0),Gg(a,h.data,h.blueprint,f,!1)}}(h,f?f(o):o,a)}}class Ud{}class t0{}function sk(o,a){return new n0(o,a??null)}class n0 extends Ud{constructor(a,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ed(this);const h=Le(a);this._bootstrapComponents=wo(h.bootstrap),this._r3Injector=TE(a,u,[{provide:Ud,useValue:this},{provide:Ef,useValue:this.componentFactoryResolver}],me(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class Hd extends t0{constructor(a){super(),this.moduleType=a}create(a){return new n0(this.moduleType,a)}}class Qc extends Ud{constructor(a,u,h){super(),this.componentFactoryResolver=new Ed(this),this.instance=null;const f=new Cf([...a,{provide:Ud,useValue:this},{provide:Ef,useValue:this.componentFactoryResolver}],u||tv(),h,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function hn(o,a,u=null){return new Qc(o,a,u).injector}let rp=(()=>{class o{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const h=Yu(0,u.type),f=h.length>0?hn([h],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,f)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return o.\u0275prov=cn({token:o,providedIn:"environment",factory:()=>new o(Mi(Zu))}),o})();function cI(o){o.getStandaloneInjector=a=>a.get(rp).getOrCreateStandaloneInjector(o)}function _I(o,a,u){const h=Ci()+o,f=Se();return f[h]===Ot?Xo(f,h,u?a.call(u):a()):function Gf(o,a){return o[a]}(f,h)}function Qg(o,a){const u=o[a];return u===Ot?void 0:u}function vI(o,a,u,h,f,m,v){const C=a+u;return function Ga(o,a,u,h){const f=vr(o,a,u);return vr(o,a+1,h)||f}(o,C,f,m)?Xo(o,C+2,v?h.call(v,f,m):h(f,m)):Qg(o,C+2)}function Jc(o,a){const u=Ft();let h;const f=o+22;u.firstCreatePass?(h=function wI(o,a){if(a)for(let u=a.length-1;u>=0;u--){const h=a[u];if(o===h.name)return h}}(a,u.pipeRegistry),u.data[f]=h,h.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(f,h.onDestroy)):h=u.data[f];const m=h.factory||(h.factory=Yi(h.type)),v=wn(pd);try{const C=ku(!1),D=m();return ku(C),function ax(o,a,u,h){u>=o.data.length&&(o.data[u]=null,o.blueprint[u]=null),a[u]=h}(u,Se(),f,D),D}finally{wn(v)}}function a0(o,a,u){const h=o+22,f=Se(),m=gr(f,h);return ap(f,h)?function yI(o,a,u,h,f,m){const v=a+u;return vr(o,v,f)?Xo(o,v+1,m?h.call(m,f):h(f)):Qg(o,v+1)}(f,Ci(),a,m.transform,u,m):m.transform(u)}function eu(o,a,u,h){const f=o+22,m=Se(),v=gr(m,f);return ap(m,f)?vI(m,Ci(),a,v.transform,u,h,v):v.transform(u,h)}function ap(o,a){return o[1].data[a].pure}function tu(o){return a=>{setTimeout(o,void 0,a)}}const ia=class l0 extends l.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,u,h){let f=a,m=u||(()=>null),v=h;if(a&&"object"==typeof a){const D=a;f=D.next?.bind(D),m=D.error?.bind(D),v=D.complete?.bind(D)}this.__isAsync&&(m=tu(m),f&&(f=tu(f)),v&&(v=tu(v)));const C=super.subscribe({next:f,error:m,complete:v});return a instanceof $.w0&&a.add(C),C}};function c0(){return this._results[Qo()]()}class Xg{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Qo(),h=Xg.prototype;h[u]||(h[u]=c0)}get changes(){return this._changes||(this._changes=new ia)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,u){return this._results.reduce(a,u)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,u){const h=this;h.dirty=!1;const f=gi(a);(this._changesDetected=!function Es(o,a,u){if(o.length!==a.length)return!1;for(let h=0;h<o.length;h++){let f=o[h],m=a[h];if(u&&(f=u(f),m=u(m)),m!==f)return!1}return!0}(h._results,f,u))&&(h._results=f,h.length=f.length,h.last=f[this.length-1],h.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let zd=(()=>{class o{}return o.__NG_ELEMENT_ID__=u0,o})();const EI=zd,Ja=class extends EI{constructor(a,u,h){super(),this._declarationLView=a,this._declarationTContainer=u,this.elementRef=h}createEmbeddedView(a,u){const h=this._declarationTContainer.tViews,f=gg(this._declarationLView,h,a,16,null,h.declTNode,null,null,null,null,u||null);f[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(f[19]=v.createEmbeddedView(h)),tb(h,f,a),new Ks(f)}};function u0(){return ra(Yn(),Se())}function ra(o,a){return 4&o.type?new Ja(a,o,td(o,a)):null}let nu=(()=>{class o{}return o.__NG_ELEMENT_ID__=DI,o})();function DI(){return AI(Yn(),Se())}const gk=nu,II=class extends gk{constructor(a,u,h){super(),this._lContainer=a,this._hostTNode=u,this._hostLView=h}get element(){return td(this._hostTNode,this._hostLView)}get injector(){return new yc(this._hostTNode,this._hostLView)}get parentInjector(){const a=pc(this._hostTNode,this._hostLView);if(My(a)){const u=Ho(a,this._hostLView),h=Aa(a);return new yc(u[1].data[h+8],u)}return new yc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const u=SI(this._lContainer);return null!==u&&u[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,u,h){let f,m;"number"==typeof h?f=h:null!=h&&(f=h.index,m=h.injector);const v=a.createEmbeddedView(u||{},m);return this.insert(v,f),v}createComponent(a,u,h,f,m){const v=a&&!function V(o){return"function"==typeof o}(a);let C;if(v)C=u;else{const j=u||{};C=j.index,h=j.injector,f=j.projectableNodes,m=j.environmentInjector||j.ngModuleRef}const D=v?a:new Dd(A(a)),S=h||this.parentInjector;if(!m&&null==D.ngModule){const Z=(v?S:this.parentInjector).get(Zu,null);Z&&(m=Z)}const x=D.create(S,f,void 0,m);return this.insert(x.hostView,C),x}insert(a,u){const h=a._lView,f=h[1];if(function pm(o){return or(o[3])}(h)){const x=this.indexOf(a);if(-1!==x)this.detach(x);else{const j=h[3],Z=new II(j,j[6],j[3]);Z.detach(Z.indexOf(a))}}const m=this._adjustIndex(u),v=this._lContainer;!function bM(o,a,u,h){const f=10+h,m=u.length;h>0&&(u[f-1][4]=a),h<m-10?(a[4]=u[f],Pi(u,10+h,a)):(u.push(a),a[4]=null),a[3]=u;const v=a[17];null!==v&&u!==v&&function wM(o,a){const u=o[9];a[16]!==a[3][3][16]&&(o[2]=!0),null===u?o[9]=[a]:u.push(a)}(v,a);const C=a[19];null!==C&&C.insertView(o),a[2]|=64}(f,h,v,m);const C=Oc(m,v),D=h[11],S=Rc(D,v[7]);return null!==S&&function cE(o,a,u,h,f,m){h[0]=f,h[6]=a,nn(o,h,u,1,f,m)}(f,v[6],D,h,S,C),a.attachToViewContainerRef(),Pi(d0(v),m,a),a}move(a,u){return this.insert(a,u)}indexOf(a){const u=SI(this._lContainer);return null!==u?u.indexOf(a):-1}remove(a){const u=this._adjustIndex(a,-1),h=eg(this._lContainer,u);h&&(Ye(d0(this._lContainer),u),uE(h[1],h))}detach(a){const u=this._adjustIndex(a,-1),h=eg(this._lContainer,u);return h&&null!=Ye(d0(this._lContainer),u)?new Ks(h):null}_adjustIndex(a,u=0){return a??this.length+u}};function SI(o){return o[8]}function d0(o){return o[8]||(o[8]=[])}function AI(o,a){let u;const h=a[o.index];if(or(h))u=h;else{let f;if(8&o.type)f=si(h);else{const m=a[11];f=m.createComment("");const v=lr(o,a);Dl(m,Rc(m,v),f,function pE(o,a){return o.nextSibling(a)}(m,v),!1)}a[o.index]=u=zE(h,a,f,o),Bf(a,u)}return new II(u,o,a)}class h0{constructor(a){this.queryList=a,this.matches=null}clone(){return new h0(this.queryList)}setDirty(){this.queryList.setDirty()}}class f0{constructor(a=[]){this.queries=a}createEmbeddedView(a){const u=a.queries;if(null!==u){const h=null!==a.contentQueries?a.contentQueries[0]:u.length,f=[];for(let m=0;m<h;m++){const v=u.getByIndex(m);f.push(this.queries[v.indexInDeclarationView].clone())}return new f0(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let u=0;u<this.queries.length;u++)null!==C0(a,u).matches&&this.queries[u].setDirty()}}class p0{constructor(a,u,h=null){this.predicate=a,this.flags=u,this.read=h}}class Jg{constructor(a=[]){this.queries=a}elementStart(a,u){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(a,u)}elementEnd(a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(a)}embeddedTView(a){let u=null;for(let h=0;h<this.length;h++){const f=null!==u?u.length:0,m=this.getByIndex(h).embeddedTView(a,f);m&&(m.indexInDeclarationView=h,null!==u?u.push(m):u=[m])}return null!==u?new Jg(u):null}template(a,u){for(let h=0;h<this.queries.length;h++)this.queries[h].template(a,u)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class m0{constructor(a,u=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(a,u){this.isApplyingToNode(u)&&this.matchTNode(a,u)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,u){this.elementStart(a,u)}embeddedTView(a,u){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,u),new m0(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let h=a.parent;for(;null!==h&&8&h.type&&h.index!==u;)h=h.parent;return u===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(a,u){const h=this.metadata.predicate;if(Array.isArray(h))for(let f=0;f<h.length;f++){const m=h[f];this.matchTNodeWithReadOption(a,u,TI(u,m)),this.matchTNodeWithReadOption(a,u,_c(u,a,m,!1,!1))}else h===zd?4&u.type&&this.matchTNodeWithReadOption(a,u,-1):this.matchTNodeWithReadOption(a,u,_c(u,a,h,!1,!1))}matchTNodeWithReadOption(a,u,h){if(null!==h){const f=this.metadata.read;if(null!==f)if(f===Df||f===nu||f===zd&&4&u.type)this.addMatch(u.index,-2);else{const m=_c(u,a,f,!1,!1);null!==m&&this.addMatch(u.index,m)}else this.addMatch(u.index,h)}}addMatch(a,u){null===this.matches?this.matches=[a,u]:this.matches.push(a,u)}}function TI(o,a){const u=o.localNames;if(null!==u)for(let h=0;h<u.length;h+=2)if(u[h]===a)return u[h+1];return null}function _0(o,a,u,h){return-1===u?function g0(o,a){return 11&o.type?td(o,a):4&o.type?ra(o,a):null}(a,o):-2===u?function el(o,a,u){return u===Df?td(a,o):u===zd?ra(a,o):u===nu?AI(a,o):void 0}(o,a,h):zs(o,o[1],u,a)}function iu(o,a,u,h){const f=a[19].queries[h];if(null===f.matches){const m=o.data,v=u.matches,C=[];for(let D=0;D<v.length;D+=2){const S=v[D];C.push(S<0?null:_0(a,m[S],v[D+1],u.metadata.read))}f.matches=C}return f.matches}function e_(o,a,u,h){const f=o.queries.getByIndex(u),m=f.matches;if(null!==m){const v=iu(o,a,f,u);for(let C=0;C<m.length;C+=2){const D=m[C];if(D>0)h.push(v[C/2]);else{const S=m[C+1],x=a[-D];for(let j=10;j<x.length;j++){const Z=x[j];Z[17]===Z[3]&&e_(Z[1],Z,S,h)}if(null!==x[9]){const j=x[9];for(let Z=0;Z<j.length;Z++){const ae=j[Z];e_(ae[1],ae,S,h)}}}}}return h}function y0(o){const a=Se(),u=Ft(),h=Rh();Oh(h+1);const f=C0(u,h);if(o.dirty&&function ho(o){return 4==(4&o[2])}(a)===(2==(2&f.metadata.flags))){if(null===f.matches)o.reset([]);else{const m=f.crossesNgTemplate?e_(u,a,h,[]):iu(u,a,f,h);o.reset(m,$1),o.notifyOnChanges()}return!0}return!1}function MI(o,a,u){const h=Ft();h.firstCreatePass&&(b0(h,new p0(o,a,u),-1),2==(2&a)&&(h.staticViewQueries=!0)),lp(h,Se(),a)}function Vl(o,a,u,h){const f=Ft();if(f.firstCreatePass){const m=Yn();b0(f,new p0(a,u,h),m.index),function w0(o,a){const u=o.contentQueries||(o.contentQueries=[]);a!==(u.length?u[u.length-1]:-1)&&u.push(o.queries.length-1,a)}(f,o),2==(2&u)&&(f.staticContentQueries=!0)}lp(f,Se(),u)}function v0(){return function vk(o,a){return o[19].queries[a].queryList}(Se(),Rh())}function lp(o,a,u){const h=new Xg(4==(4&u));Ff(o,a,h,h.destroy),null===a[19]&&(a[19]=new f0),a[19].queries.push(new h0(h))}function b0(o,a,u){null===o.queries&&(o.queries=new Jg),o.queries.track(new m0(a,u))}function C0(o,a){return o.queries.getByIndex(a)}function t_(o,a){return ra(o,a)}function o_(...o){}const x0=new Xn("Application Initializer");let a_=(()=>{class o{constructor(u){this.appInits=u,this.resolve=o_,this.reject=o_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,f)=>{this.resolve=h,this.reject=f})}runInitializers(){if(this.initialized)return;const u=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const m=this.appInits[f]();if(xd(m))u.push(m);else if(ds(m)){const v=new Promise((C,D)=>{m.subscribe({complete:C,error:D})});u.push(v)}}Promise.all(u).then(()=>{h()}).catch(f=>{this.reject(f)}),0===u.length&&h(),this.initialized=!0}}return o.\u0275fac=function(u){return new(u||o)(Mi(x0,8))},o.\u0275prov=cn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const l_=new Xn("AppId",{providedIn:"root",factory:function k0(){return`${Kd()}${Kd()}${Kd()}`}});function Kd(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const GI=new Xn("Platform Initializer"),Mk=new Xn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),WI=new Xn("appBootstrapListener"),c_=new Xn("AnimationModuleType");let qI=(()=>{class o{log(u){console.log(u)}warn(u){console.warn(u)}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=cn({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();const su=new Xn("LocaleId",{providedIn:"root",factory:()=>Mm(su,rt.Optional|rt.SkipSelf)||function YI(){return typeof $localize<"u"&&$localize.locale||Pd}()}),u_=new Xn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Rk{constructor(a,u){this.ngModuleFactory=a,this.componentFactories=u}}let Ok=(()=>{class o{compileModuleSync(u){return new Hd(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const h=this.compileModuleSync(u),m=wo(Le(u).declarations).reduce((v,C)=>{const D=A(C);return D&&v.push(new Dd(D)),v},[]);return new Rk(h,m)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=cn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const Fk=(()=>Promise.resolve(0))();function R0(o){typeof Zone>"u"?Fk.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class io{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ia(!1),this.onMicrotaskEmpty=new ia(!1),this.onStable=new ia(!1),this.onError=new ia(!1),typeof Zone>"u")throw new Te(908,!1);Zone.assertZonePatched();const f=this;if(f._nesting=0,f._outer=f._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const m=Zone.AsyncStackTaggingZoneSpec;f._inner=f._inner.fork(new m("Angular"))}Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!h&&u,f.shouldCoalesceRunChangeDetection=h,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function Lk(){let o=gt.requestAnimationFrame,a=gt.cancelAnimationFrame;if(typeof Zone<"u"&&o&&a){const u=o[Zone.__symbol__("OriginalDelegate")];u&&(o=u);const h=a[Zone.__symbol__("OriginalDelegate")];h&&(a=h)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function XI(o){const a=()=>{!function QI(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(gt,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,h_(o),o.isCheckStableRunning=!0,O0(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),h_(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,h,f,m,v,C)=>{try{return P0(o),u.invokeTask(f,m,v,C)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||o.shouldCoalesceRunChangeDetection)&&a(),N0(o)}},onInvoke:(u,h,f,m,v,C,D)=>{try{return P0(o),u.invoke(f,m,v,C,D)}finally{o.shouldCoalesceRunChangeDetection&&a(),N0(o)}},onHasTask:(u,h,f,m)=>{u.hasTask(f,m),h===f&&("microTask"==m.change?(o._hasPendingMicrotasks=m.microTask,h_(o),O0(o)):"macroTask"==m.change&&(o.hasPendingMacrotasks=m.macroTask))},onHandleError:(u,h,f,m)=>(u.handleError(f,m),o.runOutsideAngular(()=>o.onError.emit(m)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!io.isInAngularZone())throw new Te(909,!1)}static assertNotInAngularZone(){if(io.isInAngularZone())throw new Te(909,!1)}run(a,u,h){return this._inner.run(a,u,h)}runTask(a,u,h,f){const m=this._inner,v=m.scheduleEventTask("NgZoneEvent: "+f,a,ZI,o_,o_);try{return m.runTask(v,u,h)}finally{m.cancelTask(v)}}runGuarded(a,u,h){return this._inner.runGuarded(a,u,h)}runOutsideAngular(a){return this._outer.run(a)}}const ZI={};function O0(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function h_(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function P0(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function N0(o){o._nesting--,O0(o)}class Vk{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ia,this.onMicrotaskEmpty=new ia,this.onStable=new ia,this.onError=new ia}run(a,u,h){return a.apply(u,h)}runGuarded(a,u,h){return a.apply(u,h)}runOutsideAngular(a){return a()}runTask(a,u,h,f){return a.apply(u,h)}}const JI=new Xn(""),eS=new Xn("");let f_,Bk=(()=>{class o{constructor(u,h,f){this._ngZone=u,this.registry=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,f_||(function Uk(o){f_=o}(f),f.addToWindow(h)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{io.assertNotInAngularZone(),R0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())R0(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(u)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,h,f){let m=-1;h&&h>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==m),u(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:u,timeoutId:m,updateCb:f})}whenStable(u,h,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,h,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,h,f){return[]}}return o.\u0275fac=function(u){return new(u||o)(Mi(io),Mi(tS),Mi(eS))},o.\u0275prov=cn({token:o,factory:o.\u0275fac}),o})(),tS=(()=>{class o{constructor(){this._applications=new Map}registerApplication(u,h){this._applications.set(u,h)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,h=!0){return f_?.findTestabilityInTree(this,u,h)??null}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=cn({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})(),sa=null;const F0=new Xn("AllowMultipleToken"),p_=new Xn("PlatformDestroyListeners");class $k{constructor(a,u){this.name=a,this.token=u}}function rS(o,a,u=[]){const h=`Platform: ${a}`,f=new Xn(h);return(m=[])=>{let v=L0();if(!v||v.injector.get(F0,!1)){const C=[...u,...m,{provide:f,useValue:!0}];o?o(C):function m_(o){if(sa&&!sa.get(F0,!1))throw new Te(400,!1);sa=o;const a=o.get(sS);(function g_(o){const a=o.get(GI,null);a&&a.forEach(u=>u())})(o)}(function yp(o=[],a){return Nc.create({name:a,providers:[{provide:Jy,useValue:"platform"},{provide:p_,useValue:new Set([()=>sa=null])},...o]})}(C,h))}return function zk(o){const a=L0();if(!a)throw new Te(401,!1);return a}()}}function L0(){return sa?.get(sS)??null}let sS=(()=>{class o{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,h){const f=function aS(o,a){let u;return u="noop"===o?new Vk:("zone.js"===o?void 0:o)||new io(a),u}(h?.ngZone,function oS(o){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!o||!o.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!o||!o.ngZoneRunCoalescing)||!1}}(h)),m=[{provide:io,useValue:f}];return f.run(()=>{const v=Nc.create({providers:m,parent:this.injector,name:u.moduleType.name}),C=u.create(v),D=C.injector.get(Sf,null);if(!D)throw new Te(402,!1);return f.runOutsideAngular(()=>{const S=f.onError.subscribe({next:x=>{D.handleError(x)}});C.onDestroy(()=>{vp(this._modules,C),S.unsubscribe()})}),function V0(o,a,u){try{const h=u();return xd(h)?h.catch(f=>{throw a.runOutsideAngular(()=>o.handleError(f)),f}):h}catch(h){throw a.runOutsideAngular(()=>o.handleError(h)),h}}(D,f,()=>{const S=C.injector.get(a_);return S.runInitializers(),S.donePromise.then(()=>(function zb(o){Nt(o,"Expected localeId to be defined"),"string"==typeof o&&(FD=o.toLowerCase().replace(/_/g,"-"))}(C.injector.get(su,Pd)||Pd),this._moduleDoBootstrap(C),C))})})}bootstrapModule(u,h=[]){const f=xi({},h);return function Hk(o,a,u){const h=new Hd(u);return Promise.resolve(h)}(0,0,u).then(m=>this.bootstrapModuleFactory(m,f))}_moduleDoBootstrap(u){const h=u.injector.get(__);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(f=>h.bootstrap(f));else{if(!u.instance.ngDoBootstrap)throw new Te(403,!1);u.instance.ngDoBootstrap(h)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Te(404,!1);this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const u=this._injector.get(p_,null);u&&(u.forEach(h=>h()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(u){return new(u||o)(Mi(Nc))},o.\u0275prov=cn({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();function xi(o,a){return Array.isArray(a)?a.reduce(xi,o):{...o,...a}}let __=(()=>{class o{constructor(u,h,f){this._zone=u,this._injector=h,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new F.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),v=new F.y(C=>{let D;this._zone.runOutsideAngular(()=>{D=this._zone.onStable.subscribe(()=>{io.assertNotInAngularZone(),R0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{io.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{D.unsubscribe(),S.unsubscribe()}});this.isStable=(0,se.T)(m,v.pipe((0,ge.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,h){const f=u instanceof Ss;if(!this._injector.get(a_).done)throw!f&&ue(u),new Te(405,false);let v;v=f?u:this._injector.get(Ef).resolveComponentFactory(u),this.componentTypes.push(v.componentType);const C=function jk(o){return o.isBoundToModule}(v)?void 0:this._injector.get(Ud),S=v.create(Nc.NULL,[],h||v.selector,C),x=S.location.nativeElement,j=S.injector.get(JI,null);return j?.registerApplication(x),S.onDestroy(()=>{this.detachView(S.hostView),vp(this.components,S),j?.unregisterApplication(x)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new Te(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const h=u;this._views.push(h),h.attachToAppRef(this)}detachView(u){const h=u;vp(this._views,h),h.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(WI,[]).concat(this._bootstrapListeners).forEach(f=>f(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>vp(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new Te(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return o.\u0275fac=function(u){return new(u||o)(Mi(io),Mi(Zu),Mi(Sf))},o.\u0275prov=cn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function vp(o,a){const u=o.indexOf(a);u>-1&&o.splice(u,1)}let B0=!0,lS=!1;function cS(){return lS=!0,B0}function xF(){if(lS)throw new Error("Cannot enable prod mode after platform setup.");B0=!1}let uS=(()=>{class o{}return o.__NG_ELEMENT_ID__=v_,o})();function v_(o){return function RF(o,a,u){if(ys(o)&&!u){const h=In(o.index,a);return new Ks(h,h)}return 47&o.type?new Ks(a[16],a):null}(Yn(),Se(),16==(16&o))}class gS{constructor(){}supports(a){return Uc(a)}create(a){return new _S(a)}}const Kk=(o,a)=>a;class _S{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||Kk}forEachItem(a){let u;for(u=this._itHead;null!==u;u=u._next)a(u)}forEachOperation(a){let u=this._itHead,h=this._removalsHead,f=0,m=null;for(;u||h;){const v=!h||u&&u.currentIndex<yS(h,f,m)?u:h,C=yS(v,f,m),D=v.currentIndex;if(v===h)f--,h=h._nextRemoved;else if(u=u._next,null==v.previousIndex)f++;else{m||(m=[]);const S=C-f,x=D-f;if(S!=x){for(let Z=0;Z<S;Z++){const ae=Z<m.length?m[Z]:m[Z]=0,xe=ae+Z;x<=xe&&xe<S&&(m[Z]=ae+1)}m[v.previousIndex]=x-S}}C!==D&&a(v,C,D)}}forEachPreviousItem(a){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachMovedItem(a){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}forEachIdentityChange(a){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)a(u)}diff(a){if(null==a&&(a=[]),!Uc(a))throw new Te(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,m,v,u=this._itHead,h=!1;if(Array.isArray(a)){this.length=a.length;for(let C=0;C<this.length;C++)m=a[C],v=this._trackByFn(C,m),null!==u&&Object.is(u.trackById,v)?(h&&(u=this._verifyReinsertion(u,m,v,C)),Object.is(u.item,m)||this._addIdentityChange(u,m)):(u=this._mismatch(u,m,v,C),h=!0),u=u._next}else f=0,function sx(o,a){if(Array.isArray(o))for(let u=0;u<o.length;u++)a(o[u]);else{const u=o[Qo()]();let h;for(;!(h=u.next()).done;)a(h.value)}}(a,C=>{v=this._trackByFn(f,C),null!==u&&Object.is(u.trackById,v)?(h&&(u=this._verifyReinsertion(u,C,v,f)),Object.is(u.item,C)||this._addIdentityChange(u,C)):(u=this._mismatch(u,C,v,f),h=!0),u=u._next,f++}),this.length=f;return this._truncate(u),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,u,h,f){let m;return null===a?m=this._itTail:(m=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._reinsertAfter(a,m,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(h,f))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._moveAfter(a,m,f)):a=this._addAfter(new Zk(u,h),m,f),a}_verifyReinsertion(a,u,h,f){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==m?a=this._reinsertAfter(m,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const u=a._next;this._addToRemovals(this._unlink(a)),a=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,u,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,m=a._nextRemoved;return null===f?this._removalsHead=m:f._nextRemoved=m,null===m?this._removalsTail=f:m._prevRemoved=f,this._insertAfter(a,u,h),this._addToMoves(a,h),a}_moveAfter(a,u,h){return this._unlink(a),this._insertAfter(a,u,h),this._addToMoves(a,h),a}_addAfter(a,u,h){return this._insertAfter(a,u,h),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,u,h){const f=null===u?this._itHead:u._next;return a._next=f,a._prev=u,null===f?this._itTail=a:f._prev=a,null===u?this._itHead=a:u._next=a,null===this._linkedRecords&&(this._linkedRecords=new oa),this._linkedRecords.put(a),a.currentIndex=h,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const u=a._prev,h=a._next;return null===u?this._itHead=h:u._next=h,null===h?this._itTail=u:h._prev=u,a}_addToMoves(a,u){return a.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new oa),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,u){return a.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class Zk{constructor(a,u){this.item=a,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class VF{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,u){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===u||u<=h.currentIndex)&&Object.is(h.trackById,a))return h;return null}remove(a){const u=a._prevDup,h=a._nextDup;return null===u?this._head=h:u._nextDup=h,null===h?this._tail=u:h._prevDup=u,null===this._head}}class oa{constructor(){this.map=new Map}put(a){const u=a.trackById;let h=this.map.get(u);h||(h=new VF,this.map.set(u,h)),h.add(a)}get(a,u){const f=this.map.get(a);return f?f.get(a,u):null}remove(a){const u=a.trackById;return this.map.get(u).remove(a)&&this.map.delete(u),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function yS(o,a,u){const h=o.previousIndex;if(null===h)return h;let f=0;return u&&h<u.length&&(f=u[h]),h+a+f}class vS{constructor(){}supports(a){return a instanceof Map||Hc(a)}create(){return new Qk}}class Qk{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let u;for(u=this._mapHead;null!==u;u=u._next)a(u)}forEachPreviousItem(a){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)a(u)}forEachChangedItem(a){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}diff(a){if(a){if(!(a instanceof Map||Hc(a)))throw new Te(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(a,(h,f)=>{if(u&&u.key===f)this._maybeAddToChanges(u,h),this._appendAfter=u,u=u._next;else{const m=this._getOrCreateRecordForKey(f,h);u=this._insertBeforeOrAppend(u,m)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let h=u;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,u){if(a){const h=a._prev;return u._next=a,u._prev=h,a._prev=u,h&&(h._next=u),a===this._mapHead&&(this._mapHead=u),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(a,u){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,u);const m=f._prev,v=f._next;return m&&(m._next=v),v&&(v._prev=m),f._next=null,f._prev=null,f}const h=new Xk(a);return this._records.set(a,h),h.currentValue=u,this._addToAdditions(h),h}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,u){Object.is(u,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=u,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,u){a instanceof Map?a.forEach(u):Object.keys(a).forEach(h=>u(a[h],h))}}class Xk{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function aa(){return new C_([new gS])}let C_=(()=>{class o{constructor(u){this.factories=u}static create(u,h){if(null!=h){const f=h.factories.slice();u=u.concat(f)}return new o(u)}static extend(u){return{provide:o,useFactory:h=>o.create(u,h||aa()),deps:[[o,new fl,new hl]]}}find(u){const h=this.factories.find(f=>f.supports(u));if(null!=h)return h;throw new Te(901,!1)}}return o.\u0275prov=cn({token:o,providedIn:"root",factory:aa}),o})();function bS(){return new H0([new vS])}let H0=(()=>{class o{constructor(u){this.factories=u}static create(u,h){if(h){const f=h.factories.slice();u=u.concat(f)}return new o(u)}static extend(u){return{provide:o,useFactory:h=>o.create(u,h||bS()),deps:[[o,new fl,new hl]]}}find(u){const h=this.factories.find(f=>f.supports(u));if(h)return h;throw new Te(901,!1)}}return o.\u0275prov=cn({token:o,providedIn:"root",factory:bS}),o})();const wS=rS(null,"core",[]);let Jk=(()=>{class o{constructor(u){}}return o.\u0275fac=function(u){return new(u||o)(Mi(__))},o.\u0275mod=Qt({type:o}),o.\u0275inj=St({}),o})();function eR(o){return"boolean"==typeof o?o:null!=o&&"false"!==o}},579:(pt,Re,N)=>{N.d(Re,{EI:()=>Me,Gb:()=>Ti,Iv:()=>Ln,Kz:()=>wt,Xd:()=>ii,lT:()=>ri,xP:()=>tt});var l=N(5861),$=N(9681),F=N(1877),se=N(2090),ge=N(4859);N(2833);const re="analytics",me="firebase_id",q="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",X="https://www.googletagmanager.com/gtag/js",Ne=new F.Yd("@firebase/analytics");function Ae(P){return Promise.all(P.map(k=>k.catch(A=>A)))}function Te(P,k){const A=document.createElement("script");A.src=`${X}?l=${P}&id=${k}`,A.async=!0,document.head.appendChild(A)}function Ce(P,k,A,R,G,ue){return de.apply(this,arguments)}function de(){return(de=(0,l.Z)(function*(P,k,A,R,G,ue){const Le=R[G];try{if(Le)yield k[Le];else{const _e=(yield Ae(A)).find(ke=>ke.measurementId===G);_e&&(yield k[_e.appId])}}catch(Ge){Ne.error(Ge)}P("config",G,ue)})).apply(this,arguments)}function ct(P,k,A,R,G){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,l.Z)(function*(P,k,A,R,G){try{let ue=[];if(G&&G.send_to){let Le=G.send_to;Array.isArray(Le)||(Le=[Le]);const Ge=yield Ae(A);for(const _e of Le){const ke=Ge.find(Jt=>Jt.measurementId===_e),dt=ke&&k[ke.appId];if(!dt){ue=[];break}ue.push(dt)}}0===ue.length&&(ue=Object.values(k)),yield Promise.all(ue),P("event",R,G||{})}catch(ue){Ne.error(ue)}})).apply(this,arguments)}function Ie(P){const k=window.document.getElementsByTagName("script");for(const A of Object.values(k))if(A.src&&A.src.includes(X)&&A.src.includes(P))return A;return null}const ne=new se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ee=new class J{constructor(k={},A=1e3){this.throttleMetadata=k,this.intervalMillis=A}getThrottleMetadata(k){return this.throttleMetadata[k]}setThrottleMetadata(k,A){this.throttleMetadata[k]=A}deleteThrottleMetadata(k){delete this.throttleMetadata[k]}};function he(P){return new Headers({Accept:"application/json","x-goog-api-key":P})}function le(P){return je.apply(this,arguments)}function je(){return(je=(0,l.Z)(function*(P){var k;const{appId:A,apiKey:R}=P,G={method:"GET",headers:he(R)},ue=q.replace("{app-id}",A),Le=yield fetch(ue,G);if(200!==Le.status&&304!==Le.status){let Ge="";try{const _e=yield Le.json();null!==(k=_e.error)&&void 0!==k&&k.message&&(Ge=_e.error.message)}catch{}throw ne.create("config-fetch-failed",{httpStatus:Le.status,responseMessage:Ge})}return Le.json()})).apply(this,arguments)}function Be(P){return yt.apply(this,arguments)}function yt(){return(yt=(0,l.Z)(function*(P,k=ee,A){const{appId:R,apiKey:G,measurementId:ue}=P.options;if(!R)throw ne.create("no-app-id");if(!G){if(ue)return{measurementId:ue,appId:R};throw ne.create("no-api-key")}const Le=k.getThrottleMetadata(R)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ge=new Zn;return setTimeout((0,l.Z)(function*(){Ge.abort()}),void 0!==A?A:6e4),ln({appId:R,apiKey:G,measurementId:ue},Le,Ge,k)})).apply(this,arguments)}function ln(P,k,A){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,l.Z)(function*(P,{throttleEndTimeMillis:k,backoffCount:A},R,G=ee){var ue,Le;const{appId:Ge,measurementId:_e}=P;try{yield Ke(R,k)}catch(ke){if(_e)return Ne.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${_e} provided in the "measurementId" field in the local Firebase config. [${null===(ue=ke)||void 0===ue?void 0:ue.message}]`),{appId:Ge,measurementId:_e};throw ke}try{const ke=yield le(P);return G.deleteThrottleMetadata(Ge),ke}catch(ke){const dt=ke;if(!vn(dt)){if(G.deleteThrottleMetadata(Ge),_e)return Ne.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${_e} provided in the "measurementId" field in the local Firebase config. [${dt?.message}]`),{appId:Ge,measurementId:_e};throw ke}const Jt=503===Number(null===(Le=dt?.customData)||void 0===Le?void 0:Le.httpStatus)?(0,se.$s)(A,G.intervalMillis,30):(0,se.$s)(A,G.intervalMillis),xt={throttleEndTimeMillis:Date.now()+Jt,backoffCount:A+1};return G.setThrottleMetadata(Ge,xt),Ne.debug(`Calling attemptFetch again in ${Jt} millis`),ln(P,xt,R,G)}})).apply(this,arguments)}function Ke(P,k){return new Promise((A,R)=>{const G=Math.max(k-Date.now(),0),ue=setTimeout(A,G);P.addEventListener(()=>{clearTimeout(ue),R(ne.create("fetch-throttle",{throttleEndTimeMillis:k}))})})}function vn(P){if(!(P instanceof se.ZR&&P.customData))return!1;const k=Number(P.customData.httpStatus);return 429===k||500===k||503===k||504===k}class Zn{constructor(){this.listeners=[]}addEventListener(k){this.listeners.push(k)}abort(){this.listeners.forEach(k=>k())}}let mn,ti;function Gt(){return(Gt=(0,l.Z)(function*(P,k,A,R,G){if(G&&G.global)P("event",A,R);else{const ue=yield k;P("event",A,Object.assign(Object.assign({},R),{send_to:ue}))}})).apply(this,arguments)}function xn(){return(xn=(0,l.Z)(function*(P,k,A,R){if(R&&R.global)return P("set",{screen_name:A}),Promise.resolve();P("config",yield k,{update:!0,screen_name:A})})).apply(this,arguments)}function pr(){return(pr=(0,l.Z)(function*(P,k,A,R){if(R&&R.global)return P("set",{user_id:A}),Promise.resolve();P("config",yield k,{update:!0,user_id:A})})).apply(this,arguments)}function fi(){return(fi=(0,l.Z)(function*(P,k,A,R){if(R&&R.global){const G={};for(const ue of Object.keys(A))G[`user_properties.${ue}`]=A[ue];return P("set",G),Promise.resolve()}P("config",yield k,{update:!0,user_properties:A})})).apply(this,arguments)}function ni(){return(ni=(0,l.Z)(function*(P,k){const A=yield P;window[`ga-disable-${A}`]=!k})).apply(this,arguments)}function Oi(P){ti=P}function ir(P){mn=P}function rt(){return En.apply(this,arguments)}function En(){return(En=(0,l.Z)(function*(){var P;if(!(0,se.hl)())return Ne.warn(ne.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,se.eu)()}catch(k){return Ne.warn(ne.create("indexeddb-unavailable",{errorInfo:null===(P=k)||void 0===P?void 0:P.toString()}).message),!1}return!0})).apply(this,arguments)}function wn(){return(wn=(0,l.Z)(function*(P,k,A,R,G,ue,Le){var Ge;const _e=Be(P);_e.then(Yt=>{A[Yt.measurementId]=Yt.appId,P.options.measurementId&&Yt.measurementId!==P.options.measurementId&&Ne.warn(`The measurement ID in the local Firebase config (${P.options.measurementId}) does not match the measurement ID fetched from the server (${Yt.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Yt=>Ne.error(Yt)),k.push(_e);const ke=rt().then(Yt=>{if(Yt)return R.getId()}),[dt,Jt]=yield Promise.all([_e,ke]);Ie(ue)||Te(ue,dt.measurementId),ti&&(G("consent","default",ti),Oi(void 0)),G("js",new Date);const xt=null!==(Ge=Le?.config)&&void 0!==Ge?Ge:{};return xt.origin="firebase",xt.update=!0,null!=Jt&&(xt[me]=Jt),G("config",dt.measurementId,xt),mn&&(G("set",mn),ir(void 0)),dt.measurementId})).apply(this,arguments)}class bi{constructor(k){this.app=k}_delete(){return delete Hi[this.app.options.appId],Promise.resolve()}}let Hi={},Dn=[];const kn={};let ht,gt,dn="dataLayer",mt="gtag",An=!1;function ii(P){if(An)throw ne.create("already-initialized");P.dataLayerName&&(dn=P.dataLayerName),P.gtagName&&(mt=P.gtagName)}function Mt(P,k,A){!function wi(){const P=[];if((0,se.ru)()&&P.push("This is a browser extension environment."),(0,se.zI)()||P.push("Cookies are not available."),P.length>0){const k=P.map((R,G)=>`(${G+1}) ${R}`).join(" "),A=ne.create("invalid-analytics-context",{errorInfo:k});Ne.warn(A.message)}}();const R=P.options.appId;if(!R)throw ne.create("no-app-id");if(!P.options.apiKey){if(!P.options.measurementId)throw ne.create("no-api-key");Ne.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${P.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Hi[R])throw ne.create("already-exists",{id:R});if(!An){!function et(P){let k=[];Array.isArray(window[P])?k=window[P]:window[P]=k}(dn);const{wrappedGtag:ue,gtagCore:Le}=function Pe(P,k,A,R,G){let ue=function(...Le){window[R].push(arguments)};return window[G]&&"function"==typeof window[G]&&(ue=window[G]),window[G]=function Fe(P,k,A,R){function ue(){return(ue=(0,l.Z)(function*(Le,Ge,_e){try{"event"===Le?yield ct(P,k,A,Ge,_e):"config"===Le?yield Ce(P,k,A,R,Ge,_e):"consent"===Le?P("consent","update",_e):P("set",Ge)}catch(ke){Ne.error(ke)}})).apply(this,arguments)}return function G(Le,Ge,_e){return ue.apply(this,arguments)}}(ue,P,k,A),{gtagCore:ue,wrappedGtag:window[G]}}(Hi,Dn,kn,dn,mt);gt=ue,ht=Le,An=!0}return Hi[R]=function Qn(P,k,A,R,G,ue,Le){return wn.apply(this,arguments)}(P,Dn,kn,k,ht,dn,A),new bi(P)}function Ti(){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,l.Z)(function*(){if((0,se.ru)()||!(0,se.zI)()||!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}function ri(P,k,A){P=(0,se.m9)(P),function St(P,k,A,R){return xn.apply(this,arguments)}(gt,Hi[P.app.options.appId],k,A).catch(R=>Ne.error(R))}function Ln(P,k,A){P=(0,se.m9)(P),function nr(P,k,A,R){return pr.apply(this,arguments)}(gt,Hi[P.app.options.appId],k,A).catch(R=>Ne.error(R))}function tt(P,k,A){P=(0,se.m9)(P),function qn(P,k,A,R){return fi.apply(this,arguments)}(gt,Hi[P.app.options.appId],k,A).catch(R=>Ne.error(R))}function Me(P,k){P=(0,se.m9)(P),function qi(P,k){return ni.apply(this,arguments)}(Hi[P.app.options.appId],k).catch(A=>Ne.error(A))}function wt(P,k,A,R){P=(0,se.m9)(P),function cn(P,k,A,R,G){return Gt.apply(this,arguments)}(gt,Hi[P.app.options.appId],k,A,R).catch(G=>Ne.error(G))}const Qt="@firebase/analytics",Y="0.8.2";!function z(){(0,$._registerComponent)(new ge.wA(re,(k,{options:A})=>Mt(k.getProvider("app").getImmediate(),k.getProvider("installations-internal").getImmediate(),A),"PUBLIC")),(0,$._registerComponent)(new ge.wA("analytics-internal",function P(k){try{const A=k.getProvider(re).getImmediate();return{logEvent:(R,G,ue)=>wt(A,R,G,ue)}}catch(A){throw ne.create("interop-component-reg-failed",{reason:A})}},"PRIVATE")),(0,$.registerVersion)(Qt,Y),(0,$.registerVersion)(Qt,Y,"esm2017")}()},3942:(pt,Re,N)=>{N.d(Re,{Z:()=>Te});var l=N(2090),$=N(4859),F=N(9681),se=N(1877);class ge{constructor(Ce,de){this._delegate=Ce,this.firebase=de,(0,F._addComponent)(Ce,new $.wA("app-compat",()=>this,"PUBLIC")),this.container=Ce.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ce){this._delegate.automaticDataCollectionEnabled=Ce}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ce=>{this._delegate.checkDestroyed(),Ce()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(Ce,de=F._DEFAULT_ENTRY_NAME){var ct;this._delegate.checkDestroyed();const Qe=this._delegate.container.getProvider(Ce);return!Qe.isInitialized()&&"EXPLICIT"===(null===(ct=Qe.getComponent())||void 0===ct?void 0:ct.instantiationMode)&&Qe.initialize(),Qe.getImmediate({identifier:de})}_removeServiceInstance(Ce,de=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ce).clearInstance(de)}_addComponent(Ce){(0,F._addComponent)(this._delegate,Ce)}_addOrOverwriteComponent(Ce){(0,F._addOrOverwriteComponent)(this._delegate,Ce)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const re=new l.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),K=function ye(){const et=function me(et){const Ce={},de={__esModule:!0,initializeApp:function Fe(ne,ce={}){const Ee=F.initializeApp(ne,ce);if((0,l.r3)(Ce,Ee.name))return Ce[Ee.name];const J=new et(Ee,de);return Ce[Ee.name]=J,J},app:Qe,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function Ie(ne){const ce=ne.name,Ee=ce.replace("-compat","");if(F._registerComponent(ne)&&"PUBLIC"===ne.type){const J=(ee=Qe())=>{if("function"!=typeof ee[Ee])throw re.create("invalid-app-argument",{appName:ce});return ee[Ee]()};void 0!==ne.serviceProps&&(0,l.ZB)(J,ne.serviceProps),de[Ee]=J,et.prototype[Ee]=function(...ee){return this._getService.bind(this,ce).apply(this,ne.multipleInstances?ee:[])}}return"PUBLIC"===ne.type?de[Ee]:null},removeApp:function ct(ne){delete Ce[ne]},useAsService:function Ze(ne,ce){return"serverAuth"===ce?null:ce},modularAPIs:F}};function Qe(ne){if(!(0,l.r3)(Ce,ne=ne||F._DEFAULT_ENTRY_NAME))throw re.create("no-app",{appName:ne});return Ce[ne]}return de.default=de,Object.defineProperty(de,"apps",{get:function Pe(){return Object.keys(Ce).map(ne=>Ce[ne])}}),Qe.App=et,de}(ge);return et.INTERNAL=Object.assign(Object.assign({},et.INTERNAL),{createFirebaseNamespace:ye,extendNamespace:function Ce(de){(0,l.ZB)(et,de)},createSubscribe:l.ne,ErrorFactory:l.LL,deepExtend:l.ZB}),et}(),q=new se.Yd("@firebase/app-compat");if((0,l.jU)()&&void 0!==self.firebase){q.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const et=self.firebase.SDK_VERSION;et&&et.indexOf("LITE")>=0&&q.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Te=K;!function Ae(et){(0,F.registerVersion)("@firebase/app-compat","0.1.36",et)}()},9681:(pt,Re,N)=>{N.r(Re),N.d(Re,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>qi,_DEFAULT_ENTRY_NAME:()=>Nt,_addComponent:()=>mn,_addOrOverwriteComponent:()=>cn,_apps:()=>vn,_clearComponents:()=>nr,_components:()=>Zn,_getProvider:()=>St,_registerComponent:()=>Gt,_removeServiceInstance:()=>xn,deleteApp:()=>ir,getApp:()=>ti,getApps:()=>Oi,initializeApp:()=>ni,onLog:()=>Qn,registerVersion:()=>En,setLogLevel:()=>wn});var l=N(5861),$=N(4859),F=N(1877),se=N(2090),ge=N(8766);class ve{constructor(Me){this.container=Me}getPlatformInfoString(){return this.container.getProviders().map(st=>{if(function re(tt){return"VERSION"===tt.getComponent()?.type}(st)){const wt=st.getImmediate();return`${wt.library}/${wt.version}`}return null}).filter(st=>st).join(" ")}}const me="@firebase/app",K=new F.Yd("@firebase/app"),Nt="[DEFAULT]",Ke={[me]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},vn=new Map,Zn=new Map;function mn(tt,Me){try{tt.container.addComponent(Me)}catch(st){K.debug(`Component ${Me.name} failed to register with FirebaseApp ${tt.name}`,st)}}function cn(tt,Me){tt.container.addOrOverwriteComponent(Me)}function Gt(tt){const Me=tt.name;if(Zn.has(Me))return K.debug(`There were multiple attempts to register component ${Me}.`),!1;Zn.set(Me,tt);for(const st of vn.values())mn(st,tt);return!0}function St(tt,Me){const st=tt.container.getProvider("heartbeat").getImmediate({optional:!0});return st&&st.triggerHeartbeat(),tt.container.getProvider(Me)}function xn(tt,Me,st=Nt){St(tt,Me).clearInstance(st)}function nr(){Zn.clear()}const qn=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class fi{constructor(Me,st,wt){this._isDeleted=!1,this._options=Object.assign({},Me),this._config=Object.assign({},st),this._name=st.name,this._automaticDataCollectionEnabled=st.automaticDataCollectionEnabled,this._container=wt,this.container.addComponent(new $.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Me){this.checkDestroyed(),this._automaticDataCollectionEnabled=Me}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Me){this._isDeleted=Me}checkDestroyed(){if(this.isDeleted)throw qn.create("app-deleted",{appName:this._name})}}const qi="9.12.0";function ni(tt,Me={}){let st=tt;"object"!=typeof Me&&(Me={name:Me});const wt=Object.assign({name:Nt,automaticDataCollectionEnabled:!1},Me),Tt=wt.name;if("string"!=typeof Tt||!Tt)throw qn.create("bad-app-name",{appName:String(Tt)});if(st||(st=(0,se.aH)()),!st)throw qn.create("no-options");const Qt=vn.get(Tt);if(Qt){if((0,se.vZ)(st,Qt.options)&&(0,se.vZ)(wt,Qt.config))return Qt;throw qn.create("duplicate-app",{appName:Tt})}const Y=new $.H0(Tt);for(const P of Zn.values())Y.addComponent(P);const z=new fi(st,wt,Y);return vn.set(Tt,z),z}function ti(tt=Nt){const Me=vn.get(tt);if(!Me&&tt===Nt)return ni();if(!Me)throw qn.create("no-app",{appName:tt});return Me}function Oi(){return Array.from(vn.values())}function ir(tt){return rt.apply(this,arguments)}function rt(){return(rt=(0,l.Z)(function*(tt){const Me=tt.name;vn.has(Me)&&(vn.delete(Me),yield Promise.all(tt.container.getProviders().map(st=>st.delete())),tt.isDeleted=!0)})).apply(this,arguments)}function En(tt,Me,st){var wt;let Tt=null!==(wt=Ke[tt])&&void 0!==wt?wt:tt;st&&(Tt+=`-${st}`);const Qt=Tt.match(/\s|\//),Y=Me.match(/\s|\//);if(Qt||Y){const z=[`Unable to register library "${Tt}" with version "${Me}":`];return Qt&&z.push(`library name "${Tt}" contains illegal characters (whitespace or "/")`),Qt&&Y&&z.push("and"),Y&&z.push(`version name "${Me}" contains illegal characters (whitespace or "/")`),void K.warn(z.join(" "))}Gt(new $.wA(`${Tt}-version`,()=>({library:Tt,version:Me}),"VERSION"))}function Qn(tt,Me){if(null!==tt&&"function"!=typeof tt)throw qn.create("invalid-log-argument");(0,F.Am)(tt,Me)}function wn(tt){(0,F.Ub)(tt)}const Dn="firebase-heartbeat-store";let kn=null;function dn(){return kn||(kn=(0,ge.X3)("firebase-heartbeat-database",1,{upgrade:(tt,Me)=>{0===Me&&tt.createObjectStore(Dn)}}).catch(tt=>{throw qn.create("idb-open",{originalErrorMessage:tt.message})})),kn}function ht(){return(ht=(0,l.Z)(function*(tt){var Me;try{return(yield dn()).transaction(Dn).objectStore(Dn).get(ii(tt))}catch(st){if(st instanceof se.ZR)K.warn(st.message);else{const wt=qn.create("idb-get",{originalErrorMessage:null===(Me=st)||void 0===Me?void 0:Me.message});K.warn(wt.message)}}})).apply(this,arguments)}function gt(tt,Me){return An.apply(this,arguments)}function An(){return(An=(0,l.Z)(function*(tt,Me){var st;try{const Tt=(yield dn()).transaction(Dn,"readwrite");return yield Tt.objectStore(Dn).put(Me,ii(tt)),Tt.done}catch(wt){if(wt instanceof se.ZR)K.warn(wt.message);else{const Tt=qn.create("idb-set",{originalErrorMessage:null===(st=wt)||void 0===st?void 0:st.message});K.warn(Tt.message)}}})).apply(this,arguments)}function ii(tt){return`${tt.name}!${tt.options.appId}`}class Ai{constructor(Me){this.container=Me,this._heartbeatsCache=null;const st=this.container.getProvider("app").getImmediate();this._storage=new Zt(st),this._heartbeatsCachePromise=this._storage.read().then(wt=>(this._heartbeatsCache=wt,wt))}triggerHeartbeat(){var Me=this;return(0,l.Z)(function*(){const wt=Me.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Tt=Rt();if(null===Me._heartbeatsCache&&(Me._heartbeatsCache=yield Me._heartbeatsCachePromise),Me._heartbeatsCache.lastSentHeartbeatDate!==Tt&&!Me._heartbeatsCache.heartbeats.some(Qt=>Qt.date===Tt))return Me._heartbeatsCache.heartbeats.push({date:Tt,agent:wt}),Me._heartbeatsCache.heartbeats=Me._heartbeatsCache.heartbeats.filter(Qt=>{const Y=new Date(Qt.date).valueOf();return Date.now()-Y<=2592e6}),Me._storage.overwrite(Me._heartbeatsCache)})()}getHeartbeatsHeader(){var Me=this;return(0,l.Z)(function*(){if(null===Me._heartbeatsCache&&(yield Me._heartbeatsCachePromise),null===Me._heartbeatsCache||0===Me._heartbeatsCache.heartbeats.length)return"";const st=Rt(),{heartbeatsToSend:wt,unsentEntries:Tt}=function Ti(tt,Me=1024){const st=[];let wt=tt.slice();for(const Tt of tt){const Qt=st.find(Y=>Y.agent===Tt.agent);if(Qt){if(Qt.dates.push(Tt.date),ri(st)>Me){Qt.dates.pop();break}}else if(st.push({agent:Tt.agent,dates:[Tt.date]}),ri(st)>Me){st.pop();break}wt=wt.slice(1)}return{heartbeatsToSend:st,unsentEntries:wt}}(Me._heartbeatsCache.heartbeats),Qt=(0,se.L)(JSON.stringify({version:2,heartbeats:wt}));return Me._heartbeatsCache.lastSentHeartbeatDate=st,Tt.length>0?(Me._heartbeatsCache.heartbeats=Tt,yield Me._storage.overwrite(Me._heartbeatsCache)):(Me._heartbeatsCache.heartbeats=[],Me._storage.overwrite(Me._heartbeatsCache)),Qt})()}}function Rt(){return(new Date).toISOString().substring(0,10)}class Zt{constructor(Me){this.app=Me,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,l.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Me=this;return(0,l.Z)(function*(){return(yield Me._canUseIndexedDBPromise)&&(yield function mt(tt){return ht.apply(this,arguments)}(Me.app))||{heartbeats:[]}})()}overwrite(Me){var st=this;return(0,l.Z)(function*(){var wt;if(yield st._canUseIndexedDBPromise){const Qt=yield st.read();return gt(st.app,{lastSentHeartbeatDate:null!==(wt=Me.lastSentHeartbeatDate)&&void 0!==wt?wt:Qt.lastSentHeartbeatDate,heartbeats:Me.heartbeats})}})()}add(Me){var st=this;return(0,l.Z)(function*(){var wt;if(yield st._canUseIndexedDBPromise){const Qt=yield st.read();return gt(st.app,{lastSentHeartbeatDate:null!==(wt=Me.lastSentHeartbeatDate)&&void 0!==wt?wt:Qt.lastSentHeartbeatDate,heartbeats:[...Qt.heartbeats,...Me.heartbeats]})}})()}}function ri(tt){return(0,se.L)(JSON.stringify({version:2,heartbeats:tt})).length}!function Ln(tt){Gt(new $.wA("platform-logger",Me=>new ve(Me),"PRIVATE")),Gt(new $.wA("heartbeat",Me=>new Ai(Me),"PRIVATE")),En(me,"0.8.1",tt),En(me,"0.8.1","esm2017"),En("fire-js","")}("")},4859:(pt,Re,N)=>{N.d(Re,{H0:()=>me,wA:()=>F,zt:()=>ge});var l=N(5861),$=N(2090);class F{constructor(K,q,X){this.name=K,this.instanceFactory=q,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(K){return this.instantiationMode=K,this}setMultipleInstances(K){return this.multipleInstances=K,this}setServiceProps(K){return this.serviceProps=K,this}setInstanceCreatedCallback(K){return this.onInstanceCreated=K,this}}const se="[DEFAULT]";class ge{constructor(K,q){this.name=K,this.container=q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(K){const q=this.normalizeInstanceIdentifier(K);if(!this.instancesDeferred.has(q)){const X=new $.BH;if(this.instancesDeferred.set(q,X),this.isInitialized(q)||this.shouldAutoInitialize())try{const Ne=this.getOrInitializeService({instanceIdentifier:q});Ne&&X.resolve(Ne)}catch{}}return this.instancesDeferred.get(q).promise}getImmediate(K){var q;const X=this.normalizeInstanceIdentifier(K?.identifier),Ne=null!==(q=K?.optional)&&void 0!==q&&q;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(Ne)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(Ae){if(Ne)return null;throw Ae}}getComponent(){return this.component}setComponent(K){if(K.name!==this.name)throw Error(`Mismatching Component ${K.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=K,this.shouldAutoInitialize()){if(function re(ye){return"EAGER"===ye.instantiationMode}(K))try{this.getOrInitializeService({instanceIdentifier:se})}catch{}for(const[q,X]of this.instancesDeferred.entries()){const Ne=this.normalizeInstanceIdentifier(q);try{const Ae=this.getOrInitializeService({instanceIdentifier:Ne});X.resolve(Ae)}catch{}}}}clearInstance(K=se){this.instancesDeferred.delete(K),this.instancesOptions.delete(K),this.instances.delete(K)}delete(){var K=this;return(0,l.Z)(function*(){const q=Array.from(K.instances.values());yield Promise.all([...q.filter(X=>"INTERNAL"in X).map(X=>X.INTERNAL.delete()),...q.filter(X=>"_delete"in X).map(X=>X._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(K=se){return this.instances.has(K)}getOptions(K=se){return this.instancesOptions.get(K)||{}}initialize(K={}){const{options:q={}}=K,X=this.normalizeInstanceIdentifier(K.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ne=this.getOrInitializeService({instanceIdentifier:X,options:q});for(const[Ae,Te]of this.instancesDeferred.entries())X===this.normalizeInstanceIdentifier(Ae)&&Te.resolve(Ne);return Ne}onInit(K,q){var X;const Ne=this.normalizeInstanceIdentifier(q),Ae=null!==(X=this.onInitCallbacks.get(Ne))&&void 0!==X?X:new Set;Ae.add(K),this.onInitCallbacks.set(Ne,Ae);const Te=this.instances.get(Ne);return Te&&K(Te,Ne),()=>{Ae.delete(K)}}invokeOnInitCallbacks(K,q){const X=this.onInitCallbacks.get(q);if(X)for(const Ne of X)try{Ne(K,q)}catch{}}getOrInitializeService({instanceIdentifier:K,options:q={}}){let X=this.instances.get(K);if(!X&&this.component&&(X=this.component.instanceFactory(this.container,{instanceIdentifier:(ye=K,ye===se?void 0:ye),options:q}),this.instances.set(K,X),this.instancesOptions.set(K,q),this.invokeOnInitCallbacks(X,K),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,K,X)}catch{}var ye;return X||null}normalizeInstanceIdentifier(K=se){return this.component?this.component.multipleInstances?K:se:K}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class me{constructor(K){this.name=K,this.providers=new Map}addComponent(K){const q=this.getProvider(K.name);if(q.isComponentSet())throw new Error(`Component ${K.name} has already been registered with ${this.name}`);q.setComponent(K)}addOrOverwriteComponent(K){this.getProvider(K.name).isComponentSet()&&this.providers.delete(K.name),this.addComponent(K)}getProvider(K){if(this.providers.has(K))return this.providers.get(K);const q=new ge(K,this);return this.providers.set(K,q),q}getProviders(){return Array.from(this.providers.values())}}},2833:(pt,Re,N)=>{var l=N(5861),$=N(9681),F=N(4859),se=N(2090),ge=N(8766);const ve="@firebase/installations",re="0.5.14",ye=`w:${re}`,K="FIS_v2",et=new se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ce(te){return te instanceof se.ZR&&te.code.includes("request-failed")}function de({projectId:te}){return`https://firebaseinstallations.googleapis.com/v1/projects/${te}/installations`}function ct(te){return{token:te.token,requestStatus:2,expiresIn:ce(te.expiresIn),creationTime:Date.now()}}function Qe(te,De){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,l.Z)(function*(te,De){const _t=(yield De.json()).error;return et.create("request-failed",{requestName:te,serverCode:_t.code,serverMessage:_t.message,serverStatus:_t.status})})).apply(this,arguments)}function Pe({apiKey:te}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":te})}function Ie(te,{refreshToken:De}){const $e=Pe(te);return $e.append("Authorization",function Ee(te){return`${K} ${te}`}(De)),$e}function Ze(te){return ne.apply(this,arguments)}function ne(){return(ne=(0,l.Z)(function*(te){const De=yield te();return De.status>=500&&De.status<600?te():De})).apply(this,arguments)}function ce(te){return Number(te.replace("s","000"))}function J(te,De){return ee.apply(this,arguments)}function ee(){return(ee=(0,l.Z)(function*({appConfig:te,heartbeatServiceProvider:De},{fid:$e}){const _t=de(te),Xt=Pe(te),gn=De.getImmediate({optional:!0});if(gn){const sr=yield gn.getHeartbeatsHeader();sr&&Xt.append("x-firebase-client",sr)}const Bn={method:"POST",headers:Xt,body:JSON.stringify({fid:$e,authVersion:K,appId:te.appId,sdkVersion:ye})},rr=yield Ze(()=>fetch(_t,Bn));if(rr.ok){const sr=yield rr.json();return{fid:sr.fid||$e,registrationStatus:2,refreshToken:sr.refreshToken,authToken:ct(sr.authToken)}}throw yield Qe("Create Installation",rr)})).apply(this,arguments)}function he(te){return new Promise(De=>{setTimeout(De,te)})}const je=/^[cdef][\w-]{21}$/;function yt(){try{const te=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(te),te[0]=112+te[0]%16;const $e=function ln(te){return function le(te){return btoa(String.fromCharCode(...te)).replace(/\+/g,"-").replace(/\//g,"_")}(te).substr(0,22)}(te);return je.test($e)?$e:""}catch{return""}}function Nt(te){return`${te.appName}!${te.appId}`}const Ke=new Map;function vn(te,De){const $e=Nt(te);cn($e,De),function Gt(te,De){const $e=function xn(){return!St&&"BroadcastChannel"in self&&(St=new BroadcastChannel("[Firebase] FID Change"),St.onmessage=te=>{cn(te.data.key,te.data.fid)}),St}();$e&&$e.postMessage({key:te,fid:De}),function nr(){0===Ke.size&&St&&(St.close(),St=null)}()}($e,De)}function cn(te,De){const $e=Ke.get(te);if($e)for(const _t of $e)_t(De)}let St=null;const fi="firebase-installations-store";let qi=null;function ni(){return qi||(qi=(0,ge.X3)("firebase-installations-database",1,{upgrade:(te,De)=>{0===De&&te.createObjectStore(fi)}})),qi}function ti(te,De){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,l.Z)(function*(te,De){const $e=Nt(te),Xt=(yield ni()).transaction(fi,"readwrite"),gn=Xt.objectStore(fi),zn=yield gn.get($e);return yield gn.put(De,$e),yield Xt.done,(!zn||zn.fid!==De.fid)&&vn(te,De.fid),De})).apply(this,arguments)}function ir(te){return rt.apply(this,arguments)}function rt(){return(rt=(0,l.Z)(function*(te){const De=Nt(te),_t=(yield ni()).transaction(fi,"readwrite");yield _t.objectStore(fi).delete(De),yield _t.done})).apply(this,arguments)}function En(te,De){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,l.Z)(function*(te,De){const $e=Nt(te),Xt=(yield ni()).transaction(fi,"readwrite"),gn=Xt.objectStore(fi),zn=yield gn.get($e),Bn=De(zn);return void 0===Bn?yield gn.delete($e):yield gn.put(Bn,$e),yield Xt.done,Bn&&(!zn||zn.fid!==Bn.fid)&&vn(te,Bn.fid),Bn})).apply(this,arguments)}function wn(te){return bi.apply(this,arguments)}function bi(){return(bi=(0,l.Z)(function*(te){let De;const $e=yield En(te.appConfig,_t=>{const Xt=Hi(_t),gn=Dn(te,Xt);return De=gn.registrationPromise,gn.installationEntry});return""===$e.fid?{installationEntry:yield De}:{installationEntry:$e,registrationPromise:De}})).apply(this,arguments)}function Hi(te){return An(te||{fid:yt(),registrationStatus:0})}function Dn(te,De){if(0===De.registrationStatus){if(!navigator.onLine)return{installationEntry:De,registrationPromise:Promise.reject(et.create("app-offline"))};const $e={fid:De.fid,registrationStatus:1,registrationTime:Date.now()},_t=function kn(te,De){return dn.apply(this,arguments)}(te,$e);return{installationEntry:$e,registrationPromise:_t}}return 1===De.registrationStatus?{installationEntry:De,registrationPromise:mt(te)}:{installationEntry:De}}function dn(){return(dn=(0,l.Z)(function*(te,De){try{const $e=yield J(te,De);return ti(te.appConfig,$e)}catch($e){throw Ce($e)&&409===$e.customData.serverCode?yield ir(te.appConfig):yield ti(te.appConfig,{fid:De.fid,registrationStatus:0}),$e}})).apply(this,arguments)}function mt(te){return ht.apply(this,arguments)}function ht(){return(ht=(0,l.Z)(function*(te){let De=yield gt(te.appConfig);for(;1===De.registrationStatus;)yield he(100),De=yield gt(te.appConfig);if(0===De.registrationStatus){const{installationEntry:$e,registrationPromise:_t}=yield wn(te);return _t||$e}return De})).apply(this,arguments)}function gt(te){return En(te,De=>{if(!De)throw et.create("installation-not-found");return An(De)})}function An(te){return function ii(te){return 1===te.registrationStatus&&te.registrationTime+1e4<Date.now()}(te)?{fid:te.fid,registrationStatus:0}:te}function wi(te,De){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,l.Z)(function*({appConfig:te,heartbeatServiceProvider:De},$e){const _t=Ai(te,$e),Xt=Ie(te,$e),gn=De.getImmediate({optional:!0});if(gn){const sr=yield gn.getHeartbeatsHeader();sr&&Xt.append("x-firebase-client",sr)}const Bn={method:"POST",headers:Xt,body:JSON.stringify({installation:{sdkVersion:ye,appId:te.appId}})},rr=yield Ze(()=>fetch(_t,Bn));if(rr.ok)return ct(yield rr.json());throw yield Qe("Generate Auth Token",rr)})).apply(this,arguments)}function Ai(te,{fid:De}){return`${de(te)}/${De}/authTokens:generate`}function Rt(te){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,l.Z)(function*(te,De=!1){let $e;const _t=yield En(te.appConfig,gn=>{if(!st(gn))throw et.create("not-registered");const zn=gn.authToken;if(!De&&wt(zn))return gn;if(1===zn.requestStatus)return $e=Zt(te,De),gn;{if(!navigator.onLine)throw et.create("app-offline");const Bn=Qt(gn);return $e=tt(te,Bn),Bn}});return $e?yield $e:_t.authToken})).apply(this,arguments)}function Zt(te,De){return ri.apply(this,arguments)}function ri(){return(ri=(0,l.Z)(function*(te,De){let $e=yield Ln(te.appConfig);for(;1===$e.authToken.requestStatus;)yield he(100),$e=yield Ln(te.appConfig);const _t=$e.authToken;return 0===_t.requestStatus?Rt(te,De):_t})).apply(this,arguments)}function Ln(te){return En(te,De=>{if(!st(De))throw et.create("not-registered");return function Y(te){return 1===te.requestStatus&&te.requestTime+1e4<Date.now()}(De.authToken)?Object.assign(Object.assign({},De),{authToken:{requestStatus:0}}):De})}function tt(te,De){return Me.apply(this,arguments)}function Me(){return(Me=(0,l.Z)(function*(te,De){try{const $e=yield wi(te,De),_t=Object.assign(Object.assign({},De),{authToken:$e});return yield ti(te.appConfig,_t),$e}catch($e){if(!Ce($e)||401!==$e.customData.serverCode&&404!==$e.customData.serverCode){const _t=Object.assign(Object.assign({},De),{authToken:{requestStatus:0}});yield ti(te.appConfig,_t)}else yield ir(te.appConfig);throw $e}})).apply(this,arguments)}function st(te){return void 0!==te&&2===te.registrationStatus}function wt(te){return 2===te.requestStatus&&!function Tt(te){const De=Date.now();return De<te.creationTime||te.creationTime+te.expiresIn<De+36e5}(te)}function Qt(te){const De={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},te),{authToken:De})}function P(){return(P=(0,l.Z)(function*(te){const De=te,{installationEntry:$e,registrationPromise:_t}=yield wn(De);return _t?_t.catch(console.error):Rt(De).catch(console.error),$e.fid})).apply(this,arguments)}function A(){return(A=(0,l.Z)(function*(te,De=!1){const $e=te;return yield R($e),(yield Rt($e,De)).token})).apply(this,arguments)}function R(te){return G.apply(this,arguments)}function G(){return(G=(0,l.Z)(function*(te){const{registrationPromise:De}=yield wn(te);De&&(yield De)})).apply(this,arguments)}function Yt(te){return et.create("missing-app-config-values",{valueName:te})}const Dr="installations",gs=te=>{const De=te.getProvider("app").getImmediate(),$e=function xt(te){if(!te||!te.options)throw Yt("App Configuration");if(!te.name)throw Yt("App Name");const De=["projectId","apiKey","appId"];for(const $e of De)if(!te.options[$e])throw Yt($e);return{appName:te.name,projectId:te.options.projectId,apiKey:te.options.apiKey,appId:te.options.appId}}(De);return{app:De,appConfig:$e,heartbeatServiceProvider:(0,$._getProvider)(De,"heartbeat"),_delete:()=>Promise.resolve()}},Vs=te=>{const De=te.getProvider("app").getImmediate(),$e=(0,$._getProvider)(De,Dr).getImmediate();return{getId:()=>function z(te){return P.apply(this,arguments)}($e),getToken:Xt=>function k(te){return A.apply(this,arguments)}($e,Xt)}};(function Ct(){(0,$._registerComponent)(new F.wA(Dr,gs,"PUBLIC")),(0,$._registerComponent)(new F.wA("installations-internal",Vs,"PRIVATE"))})(),(0,$.registerVersion)(ve,re),(0,$.registerVersion)(ve,re,"esm2017")},1877:(pt,Re,N)=>{N.d(Re,{Am:()=>ye,Ub:()=>me,Yd:()=>re,in:()=>$});const l=[];var $=(()=>{return(K=$||($={}))[K.DEBUG=0]="DEBUG",K[K.VERBOSE=1]="VERBOSE",K[K.INFO=2]="INFO",K[K.WARN=3]="WARN",K[K.ERROR=4]="ERROR",K[K.SILENT=5]="SILENT",$;var K})();const F={debug:$.DEBUG,verbose:$.VERBOSE,info:$.INFO,warn:$.WARN,error:$.ERROR,silent:$.SILENT},se=$.INFO,ge={[$.DEBUG]:"log",[$.VERBOSE]:"log",[$.INFO]:"info",[$.WARN]:"warn",[$.ERROR]:"error"},ve=(K,q,...X)=>{if(q<K.logLevel)return;const Ne=(new Date).toISOString(),Ae=ge[q];if(!Ae)throw new Error(`Attempted to log a message with an invalid logType (value: ${q})`);console[Ae](`[${Ne}]  ${K.name}:`,...X)};class re{constructor(q){this.name=q,this._logLevel=se,this._logHandler=ve,this._userLogHandler=null,l.push(this)}get logLevel(){return this._logLevel}set logLevel(q){if(!(q in $))throw new TypeError(`Invalid value "${q}" assigned to \`logLevel\``);this._logLevel=q}setLogLevel(q){this._logLevel="string"==typeof q?F[q]:q}get logHandler(){return this._logHandler}set logHandler(q){if("function"!=typeof q)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=q}get userLogHandler(){return this._userLogHandler}set userLogHandler(q){this._userLogHandler=q}debug(...q){this._userLogHandler&&this._userLogHandler(this,$.DEBUG,...q),this._logHandler(this,$.DEBUG,...q)}log(...q){this._userLogHandler&&this._userLogHandler(this,$.VERBOSE,...q),this._logHandler(this,$.VERBOSE,...q)}info(...q){this._userLogHandler&&this._userLogHandler(this,$.INFO,...q),this._logHandler(this,$.INFO,...q)}warn(...q){this._userLogHandler&&this._userLogHandler(this,$.WARN,...q),this._logHandler(this,$.WARN,...q)}error(...q){this._userLogHandler&&this._userLogHandler(this,$.ERROR,...q),this._logHandler(this,$.ERROR,...q)}}function me(K){l.forEach(q=>{q.setLogLevel(K)})}function ye(K,q){for(const X of l){let Ne=null;q&&q.level&&(Ne=F[q.level]),X.userLogHandler=null===K?null:(Ae,Te,...et)=>{const Ce=et.map(de=>{if(null==de)return null;if("string"==typeof de)return de;if("number"==typeof de||"boolean"==typeof de)return de.toString();if(de instanceof Error)return de.message;try{return JSON.stringify(de)}catch{return null}}).filter(de=>de).join(" ");Te>=(Ne??Ae.logLevel)&&K({level:$[Te].toLowerCase(),message:Ce,args:et,type:Ae.name})}}}},8766:(pt,Re,N)=>{N.d(Re,{Lj:()=>Fe,X3:()=>Qe});var l=N(5861);let F,se;const re=new WeakMap,me=new WeakMap,ye=new WeakMap,K=new WeakMap,q=new WeakMap;let Ae={get(ce,Ee,J){if(ce instanceof IDBTransaction){if("done"===Ee)return me.get(ce);if("objectStoreNames"===Ee)return ce.objectStoreNames||ye.get(ce);if("store"===Ee)return J.objectStoreNames[1]?void 0:J.objectStore(J.objectStoreNames[0])}return de(ce[Ee])},set:(ce,Ee,J)=>(ce[Ee]=J,!0),has:(ce,Ee)=>ce instanceof IDBTransaction&&("done"===Ee||"store"===Ee)||Ee in ce};function Ce(ce){return"function"==typeof ce?function et(ce){return ce!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ve(){return se||(se=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ce)?function(...Ee){return ce.apply(ct(this),Ee),de(re.get(this))}:function(...Ee){return de(ce.apply(ct(this),Ee))}:function(Ee,...J){const ee=ce.call(ct(this),Ee,...J);return ye.set(ee,Ee.sort?Ee.sort():[Ee]),de(ee)}}(ce):(ce instanceof IDBTransaction&&function Ne(ce){if(me.has(ce))return;const Ee=new Promise((J,ee)=>{const he=()=>{ce.removeEventListener("complete",le),ce.removeEventListener("error",je),ce.removeEventListener("abort",je)},le=()=>{J(),he()},je=()=>{ee(ce.error||new DOMException("AbortError","AbortError")),he()};ce.addEventListener("complete",le),ce.addEventListener("error",je),ce.addEventListener("abort",je)});me.set(ce,Ee)}(ce),((ce,Ee)=>Ee.some(J=>ce instanceof J))(ce,function ge(){return F||(F=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ce,Ae):ce)}function de(ce){if(ce instanceof IDBRequest)return function X(ce){const Ee=new Promise((J,ee)=>{const he=()=>{ce.removeEventListener("success",le),ce.removeEventListener("error",je)},le=()=>{J(de(ce.result)),he()},je=()=>{ee(ce.error),he()};ce.addEventListener("success",le),ce.addEventListener("error",je)});return Ee.then(J=>{J instanceof IDBCursor&&re.set(J,ce)}).catch(()=>{}),q.set(Ee,ce),Ee}(ce);if(K.has(ce))return K.get(ce);const Ee=Ce(ce);return Ee!==ce&&(K.set(ce,Ee),q.set(Ee,ce)),Ee}const ct=ce=>q.get(ce);function Qe(ce,Ee,{blocked:J,upgrade:ee,blocking:he,terminated:le}={}){const je=indexedDB.open(ce,Ee),Be=de(je);return ee&&je.addEventListener("upgradeneeded",yt=>{ee(de(je.result),yt.oldVersion,yt.newVersion,de(je.transaction))}),J&&je.addEventListener("blocked",()=>J()),Be.then(yt=>{le&&yt.addEventListener("close",()=>le()),he&&yt.addEventListener("versionchange",()=>he())}).catch(()=>{}),Be}function Fe(ce,{blocked:Ee}={}){const J=indexedDB.deleteDatabase(ce);return Ee&&J.addEventListener("blocked",()=>Ee()),de(J).then(()=>{})}const Pe=["get","getKey","getAll","getAllKeys","count"],Ie=["put","add","delete","clear"],Ze=new Map;function ne(ce,Ee){if(!(ce instanceof IDBDatabase)||Ee in ce||"string"!=typeof Ee)return;if(Ze.get(Ee))return Ze.get(Ee);const J=Ee.replace(/FromIndex$/,""),ee=Ee!==J,he=Ie.includes(J);if(!(J in(ee?IDBIndex:IDBObjectStore).prototype)||!he&&!Pe.includes(J))return;const le=function(){var je=(0,l.Z)(function*(Be,...yt){const ln=this.transaction(Be,he?"readwrite":"readonly");let Nt=ln.store;return ee&&(Nt=Nt.index(yt.shift())),(yield Promise.all([Nt[J](...yt),he&&ln.done]))[0]});return function(yt){return je.apply(this,arguments)}}();return Ze.set(Ee,le),le}!function Te(ce){Ae=ce(Ae)}(ce=>({...ce,get:(Ee,J,ee)=>ne(Ee,J)||ce.get(Ee,J,ee),has:(Ee,J)=>!!ne(Ee,J)||ce.has(Ee,J)}))},5861:(pt,Re,N)=>{function l(F,se,ge,ve,re,me,ye){try{var K=F[me](ye),q=K.value}catch(X){return void ge(X)}K.done?se(q):Promise.resolve(q).then(ve,re)}function $(F){return function(){var se=this,ge=arguments;return new Promise(function(ve,re){var me=F.apply(se,ge);function ye(q){l(me,ve,re,ye,K,"next",q)}function K(q){l(me,ve,re,ye,K,"throw",q)}ye(void 0)})}}N.d(Re,{Z:()=>$})}},pt=>{pt(pt.s=6868)}]);